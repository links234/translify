{"version":3,"file":"bundle.js","sources":["../../../node_modules/stem-core/src/base/PageTitleManager.js","../../js/AppConfig.js","../../../node_modules/stem-core/src/base/Utils.js","../../../node_modules/stem-core/src/base/Dispatcher.js","../../../node_modules/stem-core/src/ui/NodeAttributes.js","../../../node_modules/stem-core/src/ui/UIBase.js","../../../node_modules/stem-core/src/ui/Constants.js","../../../node_modules/stem-core/src/ui/Utils.js","../../../node_modules/stem-core/src/ui/StyleElement.jsx","../../../node_modules/stem-core/src/decorators/Utils.js","../../../node_modules/stem-core/src/decorators/LazyInitialize.js","../../../node_modules/stem-core/src/decorators/Style.js","../../../node_modules/stem-core/src/ui/Style.js","../../../node_modules/stem-core/src/base/Device.js","../../../node_modules/stem-core/src/ui/Draggable.js","../../../node_modules/stem-core/src/ui/Color.js","../../../node_modules/stem-core/src/ui/style/Theme.js","../../../node_modules/stem-core/src/ui/GlobalStyle.js","../../../node_modules/stem-core/src/ui/Bootstrap3.jsx","../../../node_modules/stem-core/src/ui/UIPrimitives.jsx","../../../node_modules/stem-core/src/ui/input/Style.js","../../../node_modules/stem-core/src/ui/input/Input.jsx","../../../node_modules/stem-core/src/ui/form/Style.js","../../../node_modules/stem-core/src/ui/form/Form.jsx","../../../node_modules/stem-core/src/ui/svg/SVGNodeAttributes.js","../../../node_modules/stem-core/src/ui/svg/SVGBase.js","../../../node_modules/stem-core/src/ui/svg/SVGText.js","../../../node_modules/stem-core/src/math.js","../../../node_modules/stem-core/src/ui/svg/SVGPrimitives.js","../../../node_modules/stem-core/src/ui/Transition.js","../../../node_modules/stem-core/src/ui/svg/Animations.js","../../../node_modules/stem-core/src/ui/Switcher.jsx","../../../node_modules/stem-core/src/ui/Router.jsx","../../../node_modules/stem-core/src/ui/Translation.js","../../../node_modules/stem-core/src/ui/horizontal-overflow/Style.js","../../../node_modules/stem-core/src/ui/tabs/Style.js","../../../node_modules/stem-core/src/ui/tabs/TabArea.jsx","../../../node_modules/stem-core/src/ui/FontAwesome.jsx","../../../node_modules/stem-core/src/ui/horizontal-overflow/HorizontalOverflow.jsx","../../../node_modules/stem-core/src/ui/tabs/FlatTabArea.jsx","../../../node_modules/stem-core/src/data-structures/MultiMap.js","../../../node_modules/stem-core/src/polyfill/Headers.js","../../../node_modules/stem-core/src/polyfill/URLSearchParams.js","../../../node_modules/stem-core/src/polyfill/Body.js","../../../node_modules/stem-core/src/polyfill/Request.js","../../../node_modules/stem-core/src/polyfill/Response.js","../../../node_modules/stem-core/src/base/Fetch.js","../../../node_modules/stem-core/src/base/Ajax.js","../../../node_modules/stem-core/src/ui/button/ButtonStyle.js","../../../node_modules/stem-core/src/ui/button/Button.jsx","../../../node_modules/stem-core/src/ui/button/ButtonGroup.jsx","../../../node_modules/stem-core/src/ui/CardPanel.jsx","../../../node_modules/stem-core/src/ui/RowList.jsx","../../../node_modules/stem-core/src/ui/collapsible/Style.js","../../../node_modules/stem-core/src/ui/collapsible/CollapsibleMixin.jsx","../../../node_modules/stem-core/src/ui/collapsible/CollapsiblePanel.jsx","../../../node_modules/stem-core/src/ui/modal/Style.js","../../../node_modules/stem-core/src/ui/modal/FloatingWindow.jsx","../../../node_modules/stem-core/src/ui/modal/Modal.jsx","../../../node_modules/stem-core/src/ui/global-container/Style.js","../../../node_modules/stem-core/src/ui/global-container/GlobalContainer.jsx","../../../node_modules/stem-core/src/ui/section-divider/Divider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Style.js","../../../node_modules/stem-core/src/ui/section-divider/SectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/TitledSectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Accordion.jsx","../../../node_modules/stem-core/src/ui/Carousel.jsx","../../../node_modules/stem-core/src/ui/RangePanelStyle.js","../../../node_modules/stem-core/src/ui/RangePanel.jsx","../../../node_modules/stem-core/src/ui/table/Style.js","../../../node_modules/stem-core/src/ui/table/Table.jsx","../../../node_modules/stem-core/src/ui/table/CollapsibleTable.jsx","../../../node_modules/stem-core/src/ui/table/SortableTable.jsx","../../../node_modules/stem-core/src/time/Duration.js","../../../node_modules/stem-core/src/time/Date.js","../../../node_modules/stem-core/src/time/Time.js","../../../node_modules/stem-core/src/ui/DateTimePicker.jsx","../../../node_modules/stem-core/src/base/EnqueueableMethodMixin.js","../../../node_modules/stem-core/src/ui/CodeEditor.jsx","../../js/translation/TextTranslationEntry.jsx","../../../node_modules/stem-core/src/state/State.js","../../../node_modules/stem-core/src/state/Store.js","../../js/state/TextTranslationStore.js","../../js/translation/TextTranslationList.jsx","../../js/IndexPage.jsx","../../../node_modules/stem-core/src/state/StoreMixins.js","../../../establishment/localization/js/state/LanguageStore.js","../../../establishment/content/js/state/ArticleStore.js","../../../establishment/blog/js/state/BlogStore.js","../../../node_modules/stem-core/src/markup/MarkupParser.js","../../../node_modules/stem-core/src/markup/MarkupRenderer.js","../../../establishment/content/js/markup/MarkupEditor.jsx","../../../establishment/accounts/js/state/UserStore.js","../../../establishment/accounts/js/UserHandle.jsx","../../../establishment/content/js/ArticleRenderer.jsx","../../../establishment/blog/js/BlogStyle.js","../../../establishment/blog/js/BlogArticleRenderer.jsx","../../../establishment/content/js/ArticleManager.jsx","../../../establishment/content/js/ArticleEditor.jsx","../../../establishment/accounts/js/state/UserReactionStore.js","../../../establishment/chat/js/state/MessageThreadStore.js","../../../establishment/content/js/Popup.jsx","../../../establishment/content/js/markup/MarkupEditorModal.jsx","../../../establishment/chat/js/ChatMarkupRenderer.jsx","../../../node_modules/stem-core/src/base/Require.js","../../../establishment/localization/js/state/TranslationStore.js","../../../establishment/errors/js/state/ErrorMessageStore.js","../../../establishment/errors/js/ErrorHandlers.js","../../../establishment/socialaccount/js/SocialAccountManager.js","../../../establishment/socialaccount/js/state/SocialAppStore.js","../../../establishment/accounts/js/GoogleManager.js","../../../establishment/accounts/js/FacebookManager.js","../../../establishment/accounts/js/GithubManager.js","../../../establishment/localization/js/state/CountryStore.js","../../../establishment/accounts/js/LoginStyle.js","../../../establishment/accounts/js/Login.jsx","../../../establishment/accounts/js/LoginModal.jsx","../../../establishment/chat/js/VotingWidgetStyle.js","../../../establishment/chat/js/VotingWidget.jsx","../../../establishment/chat/js/ChatStyle.js","../../../node_modules/stem-core/src/base/Plugin.js","../../../establishment/chat/js/ChatWidget.jsx","../../../establishment/chat/js/CommentWidgetStyle.js","../../../establishment/chat/js/CommentWidget.jsx","../../../node_modules/stem-core/src/ui/ConcentricCirclesLoadingScreen.jsx","../../../node_modules/stem-core/src/ui/DelayedElement.js","../../../node_modules/stem-core/src/ui/StateDependentElement.jsx","../../../establishment/blog/js/BlogPanel.jsx","../../../establishment/forum/js/state/ForumStore.js","../../../establishment/forum/js/EditThreadReplyButton.jsx","../../../establishment/forum/js/DeleteThreadReplyButton.jsx","../../../establishment/forum/js/ForumStyle.js","../../../establishment/forum/js/CreateThreadReplyButton.jsx","../../../establishment/forum/js/ForumThread.jsx","../../../establishment/forum/js/ForumPanel.jsx","../../js/Routes.js","../../../node_modules/stem-core/src/ui/navmanager/NavStyle.js","../../../node_modules/stem-core/src/base/StorageMap.js","../../../node_modules/stem-core/src/ui/navmanager/NavElement.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavIcon.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavSwipeDetection.js","../../../node_modules/stem-core/src/ui/navmanager/NavManager.jsx","../../../establishment/accounts/js/Logout.js","../../js/ImageUpload.jsx","../../js/AppNavManager.jsx","../../../node_modules/stem-core/src/app/StemApp.jsx","../../../establishment/funnel/js/websocket/WebsocketStreamHandler.js","../../../establishment/funnel/js/websocket/WebsocketSubscriber.js","../../../establishment/webapp/js/GlobalStyleSheet.js","../../../establishment/webapp/js/EstablishmentApp.js","../../js/App.jsx"],"sourcesContent":["export class PageTitleManager {\n    static title = null;\n    static defaultTitle = \"Website\";\n    static prefix = null;\n\n    static getPrefix() {\n        return this.prefix ? \"(\" + this.prefix + \") \" : \"\";\n    }\n\n    static setPrefix(prefix) {\n        this.prefix = prefix;\n        this.updatePageTitle();\n    }\n\n    static setDefaultTitle(defaultTitle) {\n        this.defaultTitle = defaultTitle;\n    }\n\n    static getTitle() {\n        return this.title || this.defaultTitle;\n    }\n\n    static setTitle(title) {\n        this.title = title;\n        this.updatePageTitle();\n    }\n\n    static getFullPageTitle() {\n        return this.getPrefix() + this.getTitle();\n    }\n\n    static updatePageTitle() {\n        document.title = this.getFullPageTitle();\n    }\n\n    static setIcon() {\n        throw Error(\"Not implemented yet!\");\n    }\n}\n","import {PageTitleManager} from \"base/PageTitleManager\";\n\nPageTitleManager.setDefaultTitle(\"\");","// TODO: should this be renamed to \"toUnwrappedArray\"?\nexport function unwrapArray(elements) {\n    if (!elements) {\n        return [];\n    }\n\n    if (!Array.isArray(elements)) {\n        // In case this is an iterable, convert to array\n        if (elements[Symbol.iterator]) {\n            return unwrapArray(Array.from(elements));\n        } else {\n            return [elements];\n        }\n    }\n\n    // Check if the passed in array is valid, and try to return it if possible to preserve references\n    let allProperElements = true;\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i]) || elements[i] == null) {\n            allProperElements = false;\n            break;\n        }\n    }\n\n    if (allProperElements) {\n        // Return the exact same array as was passed in\n        return elements;\n    }\n\n    let result = [];\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i])) {\n            let unwrappedElement = unwrapArray(elements[i]);\n            for (let j = 0; j < unwrappedElement.length; j += 1) {\n                result.push(unwrappedElement[j]);\n            }\n        } else {\n            if (elements[i] != null) {\n                result.push(elements[i]);\n            }\n        }\n    }\n    return result;\n}\n\nexport function isLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    // Empty url is considered local\n    if (!url) {\n        return true;\n    }\n    // Protocol-relative url is local if the host matches\n    if (url.startsWith(\"//\")) {\n        return url.startsWith(\"//\" + host);\n    }\n    // Absolute url is local if the origin matches\n    let r = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n    if (r.test(url)) {\n        return url.startsWith(origin);\n    }\n    // Root-relative and document-relative urls are always local\n    return true;\n}\n\n// Trims a local url to root-relative or document-relative url.\n// If the url is protocol-relative, removes the starting \"//\"+host, transforming it in a root-relative url.\n// If the url is absolute, removes the origin, transforming it in a root-relative url.\n// If the url is root-relative or document-relative, leaves it as is.\nexport function trimLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    if (!isLocalUrl(url, host, origin)) {\n        throw Error(\"Trying to trim non-local url!\");\n    }\n    if (!url) {\n        return url;\n    }\n    if (url.startsWith(\"//\" + host)) {\n        return url.slice((\"//\" + host).length);\n    }\n    if (url.startsWith(origin)) {\n        return url.slice(origin.length);\n    }\n    return url;\n}\n\n// Split the passed in array into arrays with at most maxChunkSize elements\nexport function splitInChunks(array, maxChunkSize) {\n    let chunks = [];\n    while (array.length > 0) {\n        chunks.push(array.splice(0, maxChunkSize));\n    }\n    return chunks;\n}\n\nexport function isIterable(obj) {\n    if (obj == null) {\n        return false;\n    }\n    return obj[Symbol.iterator] !== undefined;\n}\n\nexport function defaultComparator(a, b) {\n    if (a == null && b == null) {\n        return 0;\n    }\n\n    if (b == null) {\n        return 1;\n    }\n\n    if (a == null) {\n        return -1;\n    }\n\n    // TODO: might want to use valueof here\n    if (isNumber(a) && isNumber(b)) {\n        return a - b;\n    }\n\n    let aStr = a.toString();\n    let bStr = b.toString();\n\n    if (aStr === bStr) {\n        return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n}\n\nexport function slugify(string) {\n    string = string.trim();\n\n    string = string.replace((/[^a-zA-Z0-9-\\s]/g), \"\"); // remove anything non-latin alphanumeric\n    string = string.replace((/\\s+/g), \"-\"); // replace whitespace with dashes\n    string = string.replace((/-{2,}/g), \"-\"); // remove consecutive dashes\n    string = string.toLowerCase();\n\n    return string;\n}\n\n// If the first argument is a number, it's returned concatenated with the suffix, otherwise it's returned unchanged\nexport function suffixNumber(value, suffix) {\n    if (typeof value === \"number\" || value instanceof Number) {\n        return value + suffix;\n    }\n    return value;\n}\n\nexport function setObjectPrototype(obj, Class) {\n    obj.__proto__ = Class.prototype;\n    return obj;\n}\n\nexport function isNumber(obj) {\n    return (typeof obj === \"number\") || (obj instanceof Number);\n}\n\nexport function isString(obj) {\n    return (typeof obj === \"string\") || (obj instanceof String);\n}\n\nexport function isPlainObject(obj) {\n    if (!obj || typeof obj !== \"object\" || obj.nodeType) {\n        return false;\n    }\n    if (obj.constructor && obj.constructor != Object) {\n        return false;\n    }\n    return true;\n}\n\nexport function deepCopy() {\n\tlet target = arguments[0] || {};\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (let i = 1; i < arguments.length; i += 1) {\n        let obj = arguments[i];\n        if (obj == null) {\n            continue;\n        }\n\n        // Extend the base object\n        for (let [key, value] of Object.entries(obj)) {\n            // Recurse if we're merging plain objects or arrays\n            if (value && isPlainObject(value) || Array.isArray(value)) {\n                let clone;\n                let src = target[key];\n\n                if (Array.isArray(value)) {\n                    clone = (src && Array.isArray(src)) ? src : [];\n                } else {\n                    clone = (src && isPlainObject(src)) ? src : {};\n                }\n\n                target[key] = deepCopy(clone, value);\n            } else {\n                // TODO: if value has .clone() method, use that?\n                target[key] = value;\n            }\n        }\n\t}\n\n\treturn target;\n}\n\nexport function objectFromKeyValue(key, value) {\n    return {\n        [key]: value,\n    }\n}\n\nexport function dashCase(str) {\n    let rez = \"\";\n    for (let i = 0; i < str.length; i++) {\n        if (\"A\" <= str[i] && str[i] <= \"Z\") {\n            if (i > 0) {\n                rez += \"-\";\n            }\n            rez += str[i].toLowerCase();\n        } else {\n            rez += str[i];\n        }\n    }\n    return (rez == str) ? str : rez;\n}\n\n// TODO: have a Cookie helper file\nexport function getCookie(name) {\n    let cookies = (document.cookie || \"\").split(\";\");\n    for (let cookie of cookies) {\n        cookie = cookie.trim();\n        if (cookie.startsWith(name + \"=\")) {\n            return decodeURIComponent(cookie.substring(name.length + 1));\n        }\n    }\n    return null;\n}\n\nexport function uniqueId(obj) {\n    if (!uniqueId.objectWeakMap) {\n        uniqueId.objectWeakMap = new WeakMap();\n        uniqueId.constructorWeakMap = new WeakMap();\n        uniqueId.totalObjectCount = 0;\n    }\n    let objectWeakMap = uniqueId.objectWeakMap;\n    let constructorWeakMap = uniqueId.constructorWeakMap;\n    if (!objectWeakMap.has(obj)) {\n        const objConstructor = obj.constructor || obj.__proto__ || Object;\n        // Increment the object count\n        const objIndex = (constructorWeakMap.get(objConstructor) || 0) + 1;\n        constructorWeakMap.set(objConstructor, objIndex);\n\n        const objUniqueId = objIndex + \"-\" + (++uniqueId.totalObjectCount);\n        objectWeakMap.set(obj, objUniqueId);\n    }\n    return objectWeakMap.get(obj);\n}\n\n// TODO: should be done with String.padLeft\nexport function padNumber(num, minLength) {\n    let strNum = String(num);\n    while (strNum.length < minLength) {\n        strNum = \"0\" + strNum;\n    }\n    return strNum;\n}\n\n// Returns the english ordinal suffix of a number\nexport function getOrdinalSuffix(num) {\n    let suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n    let lastDigit = num % 10;\n    let isTeen = Math.floor(num / 10) % 10 === 1;\n    return (!isTeen && suffixes[lastDigit]) || suffixes[0];\n}\n\nexport function suffixWithOrdinal(num) {\n    return num + getOrdinalSuffix(num);\n}\n\nexport function instantiateNative(BaseClass, NewClass, ...args) {\n    let obj = new BaseClass(...args);\n    obj.__proto__ = NewClass.prototype;\n    return obj;\n}\n\n// This function can be used as a decorator in case we're extending native classes (Map/Set/Date)\n// and we want to fix the way babel breaks this scenario\n// WARNING: it destroys the code in constructor\n// If you want a custom constructor, you need to implement a static create method that generates new objects\n// Check the default constructor this code, or an example where this is done.\nexport function extendsNative(targetClass) {\n    if (targetClass.toString().includes(\" extends \")) {\n        // Native extended classes are cool, leave them as they are\n        return;\n    }\n    let BaseClass = targetClass.__proto__;\n    let allKeys = Object.getOwnPropertySymbols(targetClass).concat(Object.getOwnPropertyNames(targetClass));\n\n    // Fill in the default constructor\n    let newClass = targetClass.create || function create() {\n        return instantiateNative(BaseClass, newClass, ...arguments);\n        };\n    for (const key of allKeys) {\n        let property = Object.getOwnPropertyDescriptor(targetClass, key);\n        Object.defineProperty(newClass, key, property);\n    }\n    newClass.prototype = targetClass.prototype;\n    newClass.__proto__ = targetClass.__proto__;\n\n    newClass.prototype.constructor = newClass;\n\n    return newClass;\n}\n\nexport const NOOP_FUNCTION = () => undefined;\n\n// Helpers to wrap iterators, to wrap all values in a function or to filter them\nexport function* mapIterator(iter, func) {\n    for (let value of iter) {\n        yield func(value);\n    }\n}\n\nexport function* filterIterator(iter, func) {\n    for (let value of iter) {\n        if (func(value)) {\n            yield value;\n        }\n    }\n}\n\nexport class CallModifier {\n    wrap(func) {\n        throw Error(\"Implement wrap method\");\n    }\n\n    call(func) {\n        return this.wrap(func)();\n    }\n\n    toFunction() {\n        return (func) => this.wrap(func);\n    }\n}\n\nexport class UnorderedCallDropper extends CallModifier {\n    index = 1;\n    lastExecuted = 0;\n\n    wrap(callback) {\n        const currentIndex = this.index++;\n        return (...args) => {\n            if (currentIndex > this.lastExecuted) {\n                this.lastExecuted = currentIndex;\n                return callback(...args);\n            }\n        }\n    }\n}\n\n/*\nCallThrottler acts both as a throttler and a debouncer, allowing you to combine both types of functionality.\nAvailable options:\n    - debounce (ms): delays the function call by x ms, each call extending the delay\n    - throttle (ms): keeps calls from happening with at most x ms between them. If debounce is also set, will make sure to\n    fire a debounced even if over x ms have passed. If equal to CallTimer.ON_ANIMATION_FRAME, means that we want to use\n    requestAnimationFrame instead of setTimeout, to execute before next frame redraw()\n    - dropThrottled (boolean, default false): any throttled function call is not delayed, but dropped\n */\nexport class CallThrottler extends CallModifier {\n    static ON_ANIMATION_FRAME = Symbol();\n    static AUTOMATIC = Symbol();\n\n    lastCallTime = 0;\n    pendingCall = null;\n    pendingCallArgs = [];\n    pendingCallExpectedTime = 0;\n    numCalls = 0;\n    totalCallDuration = 0;\n\n    constructor(options={}) {\n        super();\n        Object.assign(this, options);\n    }\n\n    isThrottleOnAnimationFrame() {\n        return this.throttle === this.constructor.ON_ANIMATION_FRAME;\n    }\n\n    clearPendingCall() {\n        this.pendingCall = null;\n        this.pendingCallArgs = [];\n        this.pendingCallExpectedTime = 0;\n    }\n\n    cancel() {\n        this.pendingCall && this.pendingCall.cancel();\n        this.clearPendingCall();\n    }\n\n    flush() {\n        this.pendingCall && this.pendingCall.flush();\n        this.clearPendingCall();\n    }\n\n    // API compatibility with cleanup jobs\n    cleanup() {\n        this.cancel();\n    }\n\n    computeExecutionDelay(timeNow) {\n        let executionDelay = null;\n        if (this.throttle != null) {\n            executionDelay = Math.max(this.lastCallTime + this.throttle - timeNow, 0);\n        }\n        if (this.debounce != null) {\n            executionDelay = Math.min(executionDelay != null ? executionDelay : this.debounce, this.debounce);\n        }\n        return executionDelay;\n    }\n\n    replacePendingCall(wrappedFunc, funcCall, funcCallArgs) {\n        this.cancel();\n        if (this.isThrottleOnAnimationFrame()) {\n            const cancelHandler = requestAnimationFrame(funcCall);\n            wrappedFunc.cancel = () => cancelAnimationFrame(cancelHandler);\n            return;\n        }\n\n        const timeNow = Date.now();\n        let executionDelay = this.computeExecutionDelay(timeNow);\n\n        if (this.dropThrottled) {\n            return executionDelay == 0 && funcCall();\n        }\n\n        const cancelHandler = setTimeout(funcCall, executionDelay);\n        wrappedFunc.cancel = () => clearTimeout(cancelHandler);\n        this.pendingCall = wrappedFunc;\n        this.pendingCallArgs = funcCallArgs;\n        this.pendingCallExpectedTime = timeNow + executionDelay;\n    }\n\n    updatePendingCall(args) {\n        this.pendingCallArgs = args;\n        if (!this.isThrottleOnAnimationFrame()) {\n            const timeNow = Date.now();\n            this.pendingCallExpectedTime = timeNow + this.computeExecutionDelay(timeNow);\n        }\n    }\n\n    wrap(func) {\n        const funcCall = () => {\n            const timeNow = Date.now();\n            // The expected time when the function should be executed next might have been changed\n            // Check if that's the case, while allowing a 1ms error for time measurement\n            if (!this.isThrottleOnAnimationFrame() &&\n                timeNow + 1 < this.pendingCallExpectedTime) {\n                this.replacePendingCall(wrappedFunc, funcCall, this.pendingCallArgs);\n            } else {\n                this.lastCallTime = timeNow;\n                this.clearPendingCall();\n                func(...this.pendingCallArgs);\n            }\n        };\n\n        const wrappedFunc = (...args) => {\n            // Check if it's our function, and update the arguments and next execution time only\n            if (this.pendingCall && func === this.pendingCall.originalFunc) {\n                // We only need to update the arguments, and maybe mark that we want to executed later than scheduled\n                // It's an optimization to not invoke too many setTimeout/clearTimeout pairs\n                return this.updatePendingCall(args);\n            }\n            return this.replacePendingCall(wrappedFunc, funcCall, args);\n        };\n\n        wrappedFunc.originalFunc = func;\n        wrappedFunc.cancel = NOOP_FUNCTION;\n        wrappedFunc.flush = () => {\n            if (wrappedFunc === this.pendingCall) {\n                this.cancel();\n                wrappedFunc();\n            }\n        };\n        return wrappedFunc;\n    }\n}\n\n// export function benchmarkThrottle(options={}) {\n//     const startTime = performance.now();\n//     const calls = options.calls || 100000;\n//\n//     const throttler = new CallThrottler({throttle: options.throttle || 300, debounce: options.debounce || 100});\n//\n//     const func = options.func || NOOP_FUNCTION;\n//\n//     const wrappedFunc = throttler.wrap(func);\n//\n//     for (let i = 0; i < calls; i += 1) {\n//         wrappedFunc();\n//     }\n//     console.warn(\"Throttle benchmark:\", performance.now() - startTime, \"for\", calls, \"calls\");\n// }","class DispatcherHandle {\n    constructor(dispatcher, callback) {\n        this.dispatcher = dispatcher;\n        this.callback = callback;\n    }\n\n    remove() {\n        if (!this.dispatcher) {\n            console.warn(\"Removing a dispatcher twice\");\n            return;\n        }\n        this.dispatcher.removeListener(this.callback);\n        this.dispatcher = undefined;\n        this.callback = undefined;\n    }\n\n    cleanup() {\n        this.remove();\n    }\n}\n\nclass Dispatcher {\n    constructor(options = {}) {\n        this.options = options;\n        this.listeners = [];\n    }\n\n    callbackExists(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    addListener(callback) {\n        if (!(typeof callback === \"function\")) {\n            console.error(\"The listener needs to be a function: \", callback);\n            return;\n        }\n        if (this.callbackExists(callback)) {\n            console.error(\"Can't re-register for the same callback: \", this, \" \", callback);\n            return;\n        }\n\n        this.listeners.push(callback);\n        return new DispatcherHandle(this, callback);\n    };\n\n    addListenerOnce(callback) {\n        let handler = this.addListener(function () {\n            callback(...arguments);\n            handler.remove();\n        });\n        return handler;\n    }\n\n    removeListener(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                // Erase and return\n                return this.listeners.splice(i, 1)[0];\n            }\n        }\n    };\n\n    removeAllListeners() {\n        this.listeners = [];\n    }\n\n    dispatch(payload) {\n        for (let i = 0; i < this.listeners.length; ) {\n            let listener = this.listeners[i];\n            // TODO: optimize common cases\n            listener(...arguments);\n            // In case the current listener deleted itself, keep the loop counter the same\n            // If it deleted listeners that were executed before it, that's just wrong and there are no guaranteed about\n            if (listener === this.listeners[i]) {\n                i++;\n            }\n        }\n    };\n}\n\nexport const DispatchersSymbol = Symbol(\"Dispatchers\");\n\nclass Dispatchable {\n    get dispatchers() {\n        return this[DispatchersSymbol] || (this[DispatchersSymbol] = new Map());\n    }\n\n    getDispatcher(name) {\n        return this.dispatchers.get(name);\n    }\n\n    dispatch(name, payload) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            // Optimize the average case\n            if (arguments.length <= 2) {\n                dispatcher.dispatch(payload);\n            } else {\n                let args = Array.prototype.slice.call(arguments, 1);\n                dispatcher.dispatch(...args);\n            }\n        }\n    }\n\n    addListener(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListener(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListener(callback);\n    }\n\n    // TODO: remove some duplicated logic with method above\n    addListenerOnce(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListenerOnce(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListenerOnce(callback);\n    }\n\n    removeListener(name, callback) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            dispatcher.removeListener(callback);\n        }\n    }\n\n    cleanup() {\n        this.runCleanupJobs();\n        delete this[DispatchersSymbol];\n    }\n\n    // These function don't really belong here, but they don't really hurt here and I don't want a long proto chain\n    // Add anything that needs to be called on cleanup here (dispatchers, etc)\n    addCleanupJob(cleanupJob) {\n        if (!this.hasOwnProperty(\"_cleanupJobs\")) {\n            this._cleanupJobs = new CleanupJobs();\n        }\n        this._cleanupJobs.add(cleanupJob);\n        return cleanupJob;\n    }\n\n    runCleanupJobs() {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.cleanup();\n        }\n    }\n\n    detachListener(dispatcherHandle) {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.remove(dispatcherHandle);\n        } else {\n            dispatcherHandle.remove();\n        }\n    }\n}\n\n// Creates a method that calls the method methodName on obj, and adds the result as a cleanup task\nfunction getAttachCleanupJobMethod(methodName) {\n    return function (obj) {\n        let args = Array.prototype.slice.call(arguments, 1);\n        let handler = obj[methodName](...args);\n        this.addCleanupJob(handler);\n        return handler;\n    }\n}\n\n// Not sure if these should be added here, but meh\nDispatchable.prototype.attachListener       = getAttachCleanupJobMethod(\"addListener\");\nDispatchable.prototype.attachEventListener  = getAttachCleanupJobMethod(\"addEventListener\");\nDispatchable.prototype.attachCreateListener = getAttachCleanupJobMethod(\"addCreateListener\");\nDispatchable.prototype.attachUpdateListener = getAttachCleanupJobMethod(\"addUpdateListener\");\nDispatchable.prototype.attachDeleteListener = getAttachCleanupJobMethod(\"addDeleteListener\");\n\nDispatcher.Global = new Dispatchable();\n\nclass RunOnce {\n    run(callback, timeout = 0) {\n        if (this.timeout) {\n            return;\n        }\n        this.timeout = setTimeout(() => {\n            callback();\n            this.timeout = undefined;\n        }, timeout);\n    }\n}\n\nclass CleanupJobs {\n    constructor(jobs = []) {\n        this.jobs = jobs;\n    }\n\n    add(job) {\n        this.jobs.push(job);\n    }\n\n    cleanup() {\n        for (let job of this.jobs) {\n            if (typeof job.cleanup === \"function\") {\n                job.cleanup();\n            } else if (typeof job.remove === \"function\" ) {\n                job.remove();\n            } else {\n                job();\n            }\n        }\n        this.jobs = [];\n    }\n\n    remove(job) {\n        if (job) {\n            const index = this.jobs.indexOf(job);\n            if (index >= 0) {\n                this.jobs.splice(index, 1);\n            }\n            job.remove();\n        } else {\n            this.cleanup();\n        }\n    }\n}\n\n// Class that can be used to pass around ownership of a resource.\n// It informs the previous owner of the change (once) and dispatches the new element for all listeners\n// TODO: a better name\nclass SingleActiveElementDispatcher extends Dispatcher {\n    setActive(element, addChangeListener, forceDispatch) {\n        if (!forceDispatch && element === this._active) {\n            return;\n        }\n        this._active = element;\n        this.dispatch(element);\n        if (addChangeListener) {\n            this.addListenerOnce((newElement) => {\n                if (newElement != element) {\n                    addChangeListener(newElement);\n                }\n            });\n        }\n    }\n\n    getActive() {\n        return this._active;\n    }\n}\n\nexport {Dispatcher, Dispatchable, RunOnce, CleanupJobs, SingleActiveElementDispatcher, getAttachCleanupJobMethod};\n","import {dashCase, setObjectPrototype} from \"../base/Utils\";\n\nexport const defaultToPixelsAttributes = new Set([\n    \"border-bottom-width\",\n    \"border-left-width\",\n    \"border-right-width\",\n    \"border-top-width\",\n    \"border-width\",\n    \"bottom\",\n    \"font-size\",\n    \"font-stretch\",\n    \"height\",\n    \"layer-grid-char\",\n    \"layer-grid-char-spacing\",\n    \"layer-grid-line\",\n    \"left\",\n    \"letter-spacing\",\n    \"line-height\",\n    \"margin\",\n    \"margin-bottom\",\n    \"margin-left\",\n    \"margin-right\",\n    \"margin-top\",\n    \"marker-offset\",\n    \"max-height\",\n    \"max-width\",\n    \"min-height\",\n    \"min-width\",\n    \"outline-width\",\n    \"padding\",\n    \"padding-bottom\",\n    \"padding-left\",\n    \"padding-right\",\n    \"padding-top\",\n    \"right\",\n    \"size\",\n    \"top\",\n    \"width\",\n    \"word-spacing\",\n]);\n\nexport function CreateNodeAttributesMap(oldAttributesMap, allowedAttributesArray) {\n    let allowedAttributesMap = new Map(oldAttributesMap);\n\n    for (let attribute of allowedAttributesArray || []) {\n        if (!attribute) continue;\n        if (!Array.isArray(attribute)) {\n            attribute = [attribute];\n        }\n        allowedAttributesMap.set(attribute[0], attribute[1] || {});\n    }\n\n    allowedAttributesMap.reverseNameMap = new Map();\n\n    for (let [key, value] of allowedAttributesMap) {\n        value = value || {};\n\n        value.domName = value.domName || key;\n\n        allowedAttributesMap.reverseNameMap.set(value.domName, key);\n\n        allowedAttributesMap.set(key, value);\n    }\n    return allowedAttributesMap;\n}\n\n// A class that can be used to work with a className field as with a Set, while having a toString() usable in the DOM\n// It's used when a UI object has a className attribute, that a string, but we still want it to be modified if we call addClass and removeClass\n// In that case, the string gets converted to a ClassNameSet\nexport class ClassNameSet extends Set {\n    // Can't use classic super in constructor since Set is build-in type and will throw an error\n    // TODO: see if could still be made to have this as constructor\n    static create(className) {\n        let value = new Set(String(className || \"\").split(\" \"));\n        return setObjectPrototype(value, this);\n    }\n\n    toString() {\n        return Array.from(this).join(\" \");\n    }\n}\n\nexport class NodeAttributes {\n    constructor(obj) {\n        Object.assign(this, obj);\n        // className and style should be deep copied to be modifiable, the others shallow copied\n        if (this.className instanceof ClassNameSet) {\n            this.className = ClassNameSet.create(String(this.className));\n        }\n        if (this.style) {\n            this.style = Object.assign({}, this.style);\n        }\n    }\n\n    // TODO: should this use the domName or the reverseName? Still needs work\n    setAttribute(key, value, node, attributesMap=this.constructor.defaultAttributesMap) {\n        // TODO: might want to find a better way than whitelistAttributes field to do this\n        if (!attributesMap.has(key)) {\n            this.whitelistedAttributes = this.whitelistedAttributes || {};\n            this.whitelistedAttributes[key] = true;\n        }\n        this[key] = value;\n        if (node) {\n            this.applyAttribute(key, node, attributesMap);\n        }\n    }\n\n    applyStyleToNode(key, value, node) {\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if ((value instanceof Number || typeof value === \"number\") &&\n            value != 0 && defaultToPixelsAttributes.has(dashCase(key))) {\n            value = value + \"px\";\n        }\n        if (node && node.style[key] !== value) {\n            node.style[key] = value;\n        }\n    }\n\n    setStyle(key, value, node) {\n        if (!(typeof key === \"string\" || key instanceof String)) {\n            // If the key is not a string, it should be a plain object\n            for (const styleKey of Object.keys(key)) {\n                this.setStyle(styleKey, key[styleKey], node);\n            }\n            return;\n        }\n        if (value === undefined) {\n            this.removeStyle(key, node);\n            return;\n        }\n        this.style = this.style || {};\n        this.style[key] = value;\n        this.applyStyleToNode(key, value, node);\n    }\n\n    removeStyle(key, node) {\n        if (this.style) {\n            delete this.style[key];\n        }\n        if (node && node.style[key]) {\n            delete node.style[key];\n        }\n    }\n\n    static getClassArray(classes) {\n        if (!classes) {\n            return [];\n        }\n        if (Array.isArray(classes)) {\n            return classes.map(x => String(x).trim());\n        } else {\n            return String(classes).trim().split(\" \");\n        }\n    }\n\n    getClassNameSet() {\n        if (!(this.className instanceof ClassNameSet)) {\n            this.className = ClassNameSet.create(this.className || \"\");\n        }\n        return this.className;\n    }\n\n    addClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().add(cls);\n            if (node) {\n                node.classList.add(cls);\n            }\n        }\n    }\n\n    removeClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().delete(cls);\n            if (node) {\n                node.classList.remove(cls);\n            }\n        }\n    }\n\n    hasClass(className) {\n        return this.getClassNameSet().has(className);\n    }\n\n    applyAttribute(key, node, attributesMap) {\n        let attributeOptions = attributesMap.get(key);\n        if (!attributeOptions) {\n            if (this.whitelistedAttributes && (key in this.whitelistedAttributes)) {\n                attributeOptions = {\n                    domName: key,\n                }\n            } else {\n                return;\n            }\n        }\n        let value = this[key];\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if (attributeOptions.noValue) {\n            if (value) {\n                value = \"\";\n            } else {\n                value = undefined;\n            }\n        }\n        if (typeof value !== \"undefined\") {\n            node.setAttribute(attributeOptions.domName, value);\n        } else {\n            node.removeAttribute(attributeOptions.domName);\n        }\n    }\n\n    applyClassName(node) {\n        if (this.className) {\n            const className = String(this.className);\n            if (node.className != className) {\n                node.className = className;\n            }\n        } else {\n            if (node.className) {\n                node.removeAttribute(\"class\");\n            }\n        }\n    }\n\n    apply(node, attributesMap) {\n        let addedAttributes = {};\n        let whitelistedAttributes = this.whitelistedAttributes || {};\n\n        // First update existing node attributes and delete old ones\n        // TODO: optimize to not run this if the node was freshly created\n        let nodeAttributes = node.attributes;\n        for (let i = nodeAttributes.length - 1; i >= 0; i--) {\n            let attr = nodeAttributes[i];\n            let attributeName = attr.name;\n            if (attributeName === \"style\" || attributeName === \"class\") {\n                // TODO: maybe should do work here?\n                continue;\n            }\n\n            let key = attributesMap.reverseNameMap.get(attributeName);\n\n            if (this.hasOwnProperty(key)) {\n                let value = this[key];\n                let attributeOptions = attributesMap.get(key);\n                if (attributeOptions && attributeOptions.noValue) {\n                    if (value) {\n                        value = \"\";\n                    } else {\n                        value = undefined;\n                    }\n                }\n                if (value != null) {\n                    node.setAttribute(attributeName, value);\n                    addedAttributes[key] = true;\n                } else {\n                    node.removeAttribute(attributeName);\n                }\n            } else {\n                node.removeAttribute(attributeName);\n            }\n        }\n        // Add new attributes\n        for (let key in this) {\n            if (addedAttributes[key]) {\n                continue;\n            }\n            this.applyAttribute(key, node, attributesMap);\n            // TODO: also whitelist data- and aria- keys here\n        }\n\n        this.applyClassName(node);\n\n        node.removeAttribute(\"style\");\n        if (this.style) {\n            for (let key in this.style) {\n                this.applyStyleToNode(key, this.style[key], node);\n            }\n        }\n    }\n}\n\n// Default node attributes, should be as few of these as possible\nNodeAttributes.defaultAttributesMap = CreateNodeAttributesMap([\n    [\"id\"],\n    [\"action\"],\n    [\"colspan\"],\n    [\"default\"],\n    [\"disabled\", {noValue: true}],\n    [\"fixed\"],\n    [\"forAttr\", {domName: \"for\"}], // TODO: have a consistent nomenclature for there!\n    [\"hidden\"],\n    [\"href\"],\n    [\"rel\"],\n    [\"minHeight\"],\n    [\"minWidth\"],\n    [\"role\"],\n    [\"target\"],\n    [\"HTMLtitle\", {domName: \"title\"}],\n    [\"type\"],\n    [\"placeholder\"],\n    [\"src\"],\n    [\"height\"],\n    [\"width\"],\n    //[\"value\"], // Value is intentionally disabled\n]);\n","import {unwrapArray, setObjectPrototype, suffixNumber, NOOP_FUNCTION} from \"../base/Utils\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {NodeAttributes} from \"./NodeAttributes\";\n\nvar UI = {\n    renderingStack: [], //keeps track of objects that are redrawing, to know where to assign refs automatically\n};\n\nclass BaseUIElement extends Dispatchable {\n    canOverwrite(existingChild) {\n        return this.constructor === existingChild.constructor &&\n               this.getNodeType() === existingChild.getNodeType();\n    }\n\n    applyRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            obj[name] = this;\n        }\n    }\n\n    removeRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            if (obj[name] === this) {\n                obj[name] = undefined;\n            }\n        }\n    }\n\n    // Lifecycle methods, called when the element was first inserted in the DOM, and before it's removed\n    onMount() {}\n\n    onUnmount() {}\n\n    destroyNode() {\n        this.onUnmount();\n        this.cleanup();\n        this.removeRef();\n        this.node && this.node.remove();\n        delete this.node; // Clear for gc\n    }\n}\n\nUI.TextElement = class UITextElement extends BaseUIElement {\n    constructor(value=\"\") {\n        super();\n        if (value && value.hasOwnProperty(\"value\")) {\n            this.value = value.value;\n            this.options = value;\n        } else {\n            this.value = (value != null) ? value : \"\";\n        }\n    }\n\n    mount(parent, nextSibling) {\n        this.parent = parent;\n        if (!this.node) {\n            this.createNode();\n            this.applyRef();\n        } else {\n            this.redraw();\n        }\n        parent.node.insertBefore(this.node, nextSibling);\n        this.onMount();\n    }\n\n    getNodeType() {\n        return Node.TEXT_NODE;\n    }\n\n    copyState(element) {\n        this.value = element.value;\n        this.options = element.options;\n    }\n\n    createNode() {\n        this.node = document.createTextNode(this.getValue());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    setValue(value) {\n        this.value = (value != null) ? value : \"\";\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        return String(this.value);\n    }\n\n    redraw() {\n        if (this.node) {\n            let newValue = this.getValue();\n            // TODO: check if this is best for performance\n            if (this.node.nodeValue !== newValue) {\n                this.node.nodeValue = newValue;\n            }\n        }\n        this.applyRef();\n    }\n};\n\n// TODO: rename to Element\nclass UIElement extends BaseUIElement {\n    constructor(options={}) {\n        super();\n        this.children = [];\n        this.options = options; // TODO: this is a hack, to not break all the code that references this.options in setOptions\n        this.setOptions(options);\n    };\n\n    getDefaultOptions(options) {}\n\n    getPreservedOptions() {}\n\n    setOptions(options) {\n        let defaultOptions = this.getDefaultOptions(options);\n        if (defaultOptions) {\n            options = Object.assign(defaultOptions, options);\n        }\n        this.options = options;\n    }\n\n    updateOptions(options) {\n        this.setOptions(Object.assign(this.options, options));\n        this.redraw();\n    }\n\n    setChildren(...args) {\n        this.updateOptions({children: unwrapArray(args)})\n    }\n\n    // Used when we want to reuse the current element, with the options from the passed in argument\n    // Is only called when element.canOverwrite(this) is true\n    copyState(element) {\n        let options = element.options;\n        let preservedOptions = this.getPreservedOptions();\n        if (preservedOptions) {\n            options = Object.assign({}, options, preservedOptions);\n        }\n        this.setOptions(options);\n        this.addListenersFromOptions();\n    }\n\n    getNodeType() {\n        return this.options.nodeType || \"div\";\n    }\n\n    static create(parentNode, options) {\n        let uiElement = new this(options);\n        uiElement.mount(parentNode, null);\n        return uiElement;\n    }\n\n    // TODO: should be renamed to renderContent\n    getGivenChildren() {\n        return this.options.children || [];\n    }\n\n    render() {\n        return this.options.children;\n    };\n\n    createNode() {\n        this.node = document.createElement(this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    // Abstract, gets called when removing DOM node associated with the\n    cleanup() {\n        this.runCleanupJobs();\n        for (let child of this.children) {\n            child.destroyNode();\n        }\n        this.clearNode();\n        super.cleanup();\n    }\n\n    overwriteChild(existingChild, newChild) {\n        existingChild.copyState(newChild);\n        return existingChild;\n    }\n\n    getElementKeyMap(elements) {\n        if (!elements || !elements.length) {\n            return;\n        }\n        let childrenKeyMap = new Map();\n\n        for (let i = 0; i < elements.length; i += 1) {\n            let childKey = (elements[i].options && elements[i].options.key) || (\"autokey\" + i);\n\n            childrenKeyMap.set(childKey, elements[i]);\n        }\n\n        return childrenKeyMap;\n    }\n\n    getChildrenToRender() {\n        return this.render();\n    }\n\n    getChildrenForRedraw() {\n        UI.renderingStack.push(this);\n        let children = unwrapArray(this.getChildrenToRender());\n        UI.renderingStack.pop();\n        return children;\n    }\n\n    redraw() {\n        if (!this.node) {\n            console.error(\"Element not yet mounted. Redraw aborted!\", this);\n            return false;\n        }\n\n        let newChildren = this.getChildrenForRedraw();\n\n        if (newChildren === this.children) {\n            for (let i = 0; i < newChildren.length; i += 1) {\n                newChildren[i].redraw();\n            }\n            this.applyNodeAttributes();\n            this.applyRef();\n            return true;\n        }\n\n        let domNode = this.node;\n        let childrenKeyMap = this.getElementKeyMap(this.children);\n\n        for (let i = 0; i < newChildren.length; i++) {\n            let newChild = newChildren[i];\n            let prevChildNode = (i > 0) ? newChildren[i - 1].node : null;\n            let currentChildNode = (prevChildNode) ? prevChildNode.nextSibling : domNode.firstChild;\n\n            // Not a UIElement, to be converted to a TextElement\n            if (!newChild.getNodeType) {\n                newChild = newChildren[i] = new UI.TextElement(newChild);\n            }\n\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = childrenKeyMap && childrenKeyMap.get(newChildKey);\n\n            if (existingChild && newChildren[i].canOverwrite(existingChild)) {\n                // We're replacing an existing child element, it might be the very same object\n                if (existingChild !== newChildren[i]) {\n                    newChildren[i] = this.overwriteChild(existingChild, newChildren[i]);\n                }\n                newChildren[i].redraw();\n                if (newChildren[i].node !== currentChildNode) {\n                    domNode.insertBefore(newChildren[i].node, currentChildNode);\n                }\n            } else {\n                // Getting here means we are not replacing anything, should just render\n                newChild.mount(this, currentChildNode);\n            }\n        }\n\n        if (this.children.length) {\n            // Remove children that don't need to be here\n            let newChildrenSet = new Set(newChildren);\n\n            for (let i = 0; i < this.children.length; i += 1) {\n                if (!newChildrenSet.has(this.children[i])) {\n                    this.children[i].destroyNode();\n                }\n            }\n        }\n\n        this.children = newChildren;\n\n        this.applyNodeAttributes();\n\n        this.applyRef();\n\n        return true;\n    }\n\n    getOptionsAsNodeAttributes() {\n        return setObjectPrototype(this.options, NodeAttributes);\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new NodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    extraNodeAttributes(attr) {}\n\n    applyNodeAttributes() {\n        let attr;\n        if (this.extraNodeAttributes != NOOP_FUNCTION) {\n            // Create a copy of options, that is modifiable\n            attr = this.getNodeAttributes(true);\n            this.extraNodeAttributes(attr);\n        } else {\n            attr = this.getNodeAttributes(false);\n        }\n        attr.apply(this.node, this.constructor.domAttributesMap);\n    }\n\n    setAttribute(key, value) {\n        this.getOptionsAsNodeAttributes().setAttribute(key, value, this.node, this.constructor.domAttributesMap);\n    }\n\n    setStyle(key, value) {\n        this.getOptionsAsNodeAttributes().setStyle(key, value, this.node);\n    }\n\n    removeStyle(key) {\n        this.getOptionsAsNodeAttributes().removeStyle(key, this.node);\n    }\n\n    addClass(className) {\n        this.getOptionsAsNodeAttributes().addClass(className, this.node);\n    }\n\n    removeClass(className) {\n        this.getOptionsAsNodeAttributes().removeClass(className, this.node);\n    }\n\n    hasClass(className) {\n        return this.getOptionsAsNodeAttributes().hasClass(className);\n    }\n\n    toggleClass(className) {\n        if (!this.hasClass(className)) {\n            this.addClass(className);\n        } else {\n            this.removeClass(className);\n        }\n    }\n\n    get styleSheet() {\n        return this.getStyleSheet();\n    }\n\n    set styleSheet(value) {\n        this.options.styleSheet = value;\n        this.redraw();\n    }\n\n    addListenersFromOptions() {\n        for (const key in this.options) {\n            if (typeof key === \"string\" && key.startsWith(\"on\") && key.length > 2) {\n                const eventType = key.substring(2);\n\n                const addListenerMethodName = \"add\" + eventType + \"Listener\";\n                const handlerMethodName = \"on\" + eventType + \"Handler\";\n\n                // The handlerMethod might have been previously added\n                // by a previous call to this function or manually by the user\n                if (typeof this[addListenerMethodName] === \"function\" && !this.hasOwnProperty(handlerMethodName)) {\n                    this[handlerMethodName] = (event) => {\n                        UI.event = event;\n                        if (this.options[key]) {\n                            // TODO: arguments should be (event, this)!\n                            this.options[key](this, event);\n                        }\n                    };\n\n                    // Actually add the listener\n                    this[addListenerMethodName](this[handlerMethodName]);\n                }\n            }\n        }\n    }\n\n    refLink(name) {\n        return {parent: this, name: name};\n    }\n\n    refLinkArray(arrayName, index) {\n        if (!this.hasOwnProperty(arrayName)) {\n            this[arrayName] = [];\n        }\n        return {parent: this[arrayName], name: index};\n    }\n\n    bindToNode(node, doRedraw) {\n        this.node = node;\n        if (doRedraw) {\n            this.clearNode();\n            this.redraw();\n        }\n        return this;\n    }\n\n    mount(parent, nextSiblingNode) {\n        if (!parent.node) {\n            parent = new UI.Element().bindToNode(parent);\n        }\n        this.parent = parent;\n        if (this.node) {\n            parent.insertChildNodeBefore(this, nextSiblingNode);\n            this.dispatch(\"changeParent\", this.parent);\n            return;\n        }\n\n        this.createNode();\n        this.redraw();\n\n        parent.insertChildNodeBefore(this, nextSiblingNode);\n\n        this.addListenersFromOptions();\n\n        this.onMount();\n    }\n\n    // You need to overwrite the next child manipulation rutines if this.options.children !== this.children\n    appendChild(child) {\n        // TODO: the next check should be done with a decorator\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle appendChild, you need to implement it for \" + this.constructor;\n        }\n        this.options.children.push(child);\n        child.mount(this, null);\n        return child;\n    }\n\n    insertChild(child, position) {\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle insertChild, you need to implement it for \" + this.constructor;\n        }\n        position = position || 0;\n\n        this.options.children.splice(position, 0, child);\n\n        const nextChildNode = position + 1 < this.options.children.length ? this.children[position + 1].node : null;\n\n        child.mount(this, nextChildNode);\n\n        return child;\n    }\n\n    eraseChild(child, destroy = true) {\n        let index = this.options.children.indexOf(child);\n\n        if (index < 0) {\n            // child not found\n            return null;\n        }\n        return this.eraseChildAtIndex(index, destroy);\n    }\n\n    eraseChildAtIndex(index, destroy=true) {\n        if (index < 0 || index >= this.options.children.length) {\n            console.error(\"Erasing child at invalid index \", index, this.options.children.length);\n            return;\n        }\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle eraseChild, you need to implement it for \" + this.constructor;\n        }\n        let erasedChild = this.options.children.splice(index, 1)[0];\n        if (destroy) {\n            erasedChild.destroyNode();\n        } else {\n            this.node.removeChild(erasedChild.node);\n        }\n        return erasedChild;\n    }\n\n    eraseAllChildren() {\n        while (this.children.length > 0) {\n            this.eraseChildAtIndex(this.children.length - 1);\n        }\n    }\n\n    show() {\n        this.removeClass(\"hidden\");\n    }\n\n    hide() {\n        this.addClass(\"hidden\");\n    }\n\n    insertChildNodeBefore(childElement, nextSiblingNode) {\n        this.node.insertBefore(childElement.node, nextSiblingNode);\n    }\n\n    // TODO: should be renamed emptyNode()\n    clearNode() {\n        while (this.node && this.node.lastChild) {\n            this.node.removeChild(this.node.lastChild);\n        }\n    }\n\n    isInDocument() {\n        return document.body.contains(this.node);\n    }\n\n    // TODO: this method also doesn't belong here\n    getWidthOrHeight(parameter) {\n        let node = this.node;\n        if (!node) {\n            return 0;\n        }\n        let value = parseFloat(parameter === \"width\" ? node.offsetWidth : node.offsetHeight);\n        return value || 0;\n    }\n\n    getHeight() {\n        return this.getWidthOrHeight(\"height\");\n    };\n\n    getWidth() {\n        return this.getWidthOrHeight(\"width\");\n    }\n\n    setHeight(value) {\n        this.setStyle(\"height\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    };\n\n    setWidth(value) {\n        this.setStyle(\"width\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    }\n\n    addNodeListener(name, callback, ...args) {\n        this.node.addEventListener(name, callback, ...args);\n        const handler = {\n            remove: () => {\n                this.removeNodeListener(name, callback, ...args);\n            }\n        };\n        this.addCleanupJob(handler);\n        return handler;\n    }\n\n    removeNodeListener(name, callback) {\n        this.node.removeEventListener(name, callback);\n    }\n\n    // TODO: methods can be automatically generated by addNodeListener(UI.Element, \"dblclick\", \"DoubleClick\") for instance\n    addClickListener(callback) {\n        return this.addNodeListener(\"click\", callback);\n    }\n\n    removeClickListener(callback) {\n        this.removeNodeListener(\"click\", callback);\n    }\n\n    addDoubleClickListener(callback) {\n        return this.addNodeListener(\"dblclick\", callback);\n    }\n\n    removeDoubleClickListener(callback) {\n        this.removeNodeListener(\"dblclick\", callback);\n    }\n\n    addChangeListener(callback) {\n        return this.addNodeListener(\"change\", callback);\n    }\n}\n\nUI.createElement = function (tag, options, ...children) {\n    if (!tag) {\n        console.error(\"Create element needs a valid object tag, did you mistype a class name?\");\n        return;\n    }\n\n    options = options || {};\n\n    options.children = unwrapArray(children);\n\n    if (options.ref) {\n        if (typeof options.ref === \"string\") {\n            if (UI.renderingStack.length > 0) {\n                options.ref = {\n                    parent: UI.renderingStack[UI.renderingStack.length - 1],\n                    name: options.ref\n                };\n            } else {\n                throw Error(\"Failed to automatically link ref, there needs to be an element in the rendering stack\");\n            }\n        }\n\n        if (options.key) {\n            console.error(\"Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\\n\" +\n                          \"Are you using the options from another object? Shame!\", options);\n        }\n\n        options.key = \"_ref\" + options.ref.name;\n    }\n\n    if (options.hasOwnProperty(\"class\")) {\n        console.error(\"Invalid UI Element attribute: class. Did you mean className?\");\n    }\n\n    if (typeof tag === \"string\") {\n        options.nodeType = tag;\n        tag = UIElement;\n    }\n\n    return new tag(options);\n};\n\nUIElement.domAttributesMap = NodeAttributes.defaultAttributesMap;\n\n// Explicitly know that extraNodeAttributes doesn't do anything, but have it to be callable when doing inheritance\nUIElement.prototype.extraNodeAttributes = NOOP_FUNCTION;\n\nUI.Element = UIElement;\n\nUI.str = function (value) {\n    return new UI.TextElement(value);\n};\n\n// Keep a map for every base class, and for each base class keep a map for each nodeType, to cache classes\nlet primitiveMap = new WeakMap();\n\nUI.Primitive = (BaseClass, nodeType) => {\n    if (!nodeType) {\n        nodeType = BaseClass;\n        BaseClass = UI.Element;\n    }\n    let baseClassPrimitiveMap = primitiveMap.get(BaseClass);\n    if (!baseClassPrimitiveMap) {\n        baseClassPrimitiveMap = new Map();\n        primitiveMap.set(BaseClass, baseClassPrimitiveMap);\n    }\n    let resultClass = baseClassPrimitiveMap.get(nodeType);\n    if (resultClass) {\n        return resultClass;\n    }\n    resultClass = class Primitive extends BaseClass {\n        getNodeType() {\n            return nodeType;\n        }\n    };\n    baseClassPrimitiveMap.set(nodeType, resultClass);\n    return resultClass;\n};\n\nexport {UIElement, UI};\n","export const Orientation = {\n    HORIZONTAL: 1,\n    VERTICAL: 2,\n};\n\nexport const Direction = {\n    UP: \"up\",\n    LEFT: \"left\",\n    DOWN: \"down\",\n    RIGHT: \"right\",\n};\n\nexport const Level = {\n    NONE: null,\n    DEFAULT: \"default\",\n    INFO: \"info\",\n    PRIMARY: \"primary\",\n    SECONDARY: \"secondary\",\n    SUCCESS: \"success\",\n    WARNING: \"warning\",\n    DANGER: \"danger\",\n    ERROR: \"danger\",\n};\n\nexport const Size = {\n    NONE: null,\n    EXTRA_SMALL: \"xs\",\n    SMALL: \"sm\",\n    MEDIUM: \"default\",\n    DEFAULT: \"default\",\n    LARGE: \"lg\",\n    EXTRA_LARGE: \"xl\",\n};\n\nexport const VoteStatus = {\n    NONE: null,\n    LIKE: 1,\n    DISLIKE: 0,\n};\n\nexport const ActionStatus = {\n    DEFAULT: 1,\n    RUNNING: 2,\n    SUCCESS: 3,\n    FAILED: 4,\n};\n","import {UI} from \"./UIBase\";\n\nexport function getOffset(node) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    if (!node) {\n        return {left: 0, top: 0};\n    }\n    let nodePosition = node.style && node.style.position;\n    let left = 0;\n    let top = 0;\n    while (node) {\n        let nodeStyle = node.style || {};\n        if (nodePosition === \"absolute\" && nodeStyle.position === \"relative\") {\n            return {left: left, top: top};\n        }\n        left += node.offsetLeft;\n        top += node.offsetTop;\n        node = node.offsetParent;\n    }\n    return {left: left, top: top};\n}\n\nexport function getComputedStyle(node, attribute) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    let computedStyle = window.getComputedStyle(node, null);\n    return (attribute) ? computedStyle.getPropertyValue(attribute) : computedStyle;\n}\n\nexport function changeParent(element, newParent) {\n    const currentParent = element.parent;\n    currentParent.eraseChild(element, false);\n    newParent.appendChild(element);\n}\n","import {UI} from \"./UIBase\";\nimport {dashCase} from \"../base/Utils\";\nimport {NodeAttributes, defaultToPixelsAttributes} from \"./NodeAttributes\";\n\n// TODO: should this be actually better done throught the dynamic CSS API, without doing through the DOM?\n// So far it's actually better like this, since browsers like Chrome allow users to edit classes\nclass StyleInstance extends UI.TextElement {\n    constructor(options) {\n        super(options);\n        this.setOptions(options);\n    }\n\n    setOptions(options) {\n        this.options = options;\n        this.options.attributes = this.options.attributes || {};\n        this.attributes = new Map();\n        for (let key in this.options.attributes) {\n            this.attributes.set(key, this.options.attributes[key]);\n        }\n    }\n\n    getValue() {\n        let str = this.options.selector + \"{\";\n        for (let [key, value] of this.attributes) {\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            // Ignore keys with null or undefined value\n            if (value == null) {\n                continue;\n            }\n\n            key = dashCase(key);\n\n            // If it's a size property, and the value is a number, assume it's in pixels\n            if ((value instanceof Number || typeof value === \"number\") &&\n                value != 0 && defaultToPixelsAttributes.has(key)) {\n                value = value + \"px\";\n            }\n\n            // TODO: if key starts with vendor-, replace it with the browser specific one (and the plain one)\n            str += key + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    copyState(element) {\n        this.setOptions(element.options);\n    }\n\n    setAttribute(name, value) {\n        this.attributes.set(name, value);\n        this.redraw();\n    }\n\n    deleteAttribute(name) {\n        this.attributes.delete(name);\n        this.redraw();\n    }\n}\n\nclass StyleElement extends UI.Primitive(\"style\") {\n    getNodeAttributes() {\n        // TODO: allow custom style attributes (media, scoped, etc)\n        let attr = new NodeAttributes({});\n        if (this.options.name) {\n            attr.setAttribute(\"name\", this.options.name);\n        }\n        return attr;\n    }\n}\n\nconst ALLOWED_SELECTOR_STARTS = new Set([\":\", \">\", \" \", \"+\", \"~\", \"[\", \".\"]);\n\n// TODO: figure out how to work with animation frames, this only creates a wrapper class\nclass DynamicStyleElement extends StyleElement {\n    toString() {\n        return this.getClassName();\n    }\n\n    // Overwrite valueOf, so when using the + operator should seamlessly concatenate to create a valid className\n    valueOf() {\n        return \" \" + this.getClassName();\n    }\n\n    // TODO: use a cached decorator here\n    getClassName() {\n        if (this.className) {\n            return this.className;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.className = (this.options.name ||  \"autocls\") + \"-\" + this.constructor.instanceCounter;\n        return this.className;\n    }\n\n    getSelector() {\n        return this.options.selectorName || \".\" + this.getClassName();\n    }\n\n    // A cyclic dependency in the style object will cause an infinite loop here\n    getStyleInstances(selector, style) {\n        let result = [];\n        let ownStyle = {}, haveOwnStyle = false;\n        for (let key in style) {\n            let value = style[key];\n            if (value == null) {\n                continue;\n            }\n            let isProperValue = (typeof value === \"string\" || value instanceof String\n                              || typeof value === \"number\" || value instanceof Number\n                              || typeof value === \"function\");\n            if (isProperValue) {\n                ownStyle[key] = value;\n                haveOwnStyle = true;\n            } else {\n                // Check that this actually is a valid subselector\n                let firstChar = String(key).charAt(0);\n                if (!ALLOWED_SELECTOR_STARTS.has(firstChar)) {\n                    console.error(\"First character of your selector is invalid.\");\n                    continue;\n                }\n                // TODO: maybe optimize for waste here?\n                let subStyle = this.getStyleInstances(selector + key, value);\n                result.push(...subStyle);\n            }\n        }\n\n        if (haveOwnStyle) {\n            result.unshift(new StyleInstance({selector: selector, key: selector, attributes: ownStyle}));\n        }\n        return result;\n    }\n\n    render() {\n        let style = this.options.style || {};\n        if (typeof style === \"function\") {\n            style = style();\n        }\n        if (style.selectorName) {\n            this.options.selectorName = style.selectorName;\n            delete style.selectorName;\n        }\n        return this.getStyleInstances(this.getSelector(), style);\n    }\n\n    setStyle(key, value) {\n        this.options.style[key] = value;\n        this.children[0].setAttribute(key, value);\n    }\n\n    setSubStyle(selector, key, value) {\n        throw Error(\"Implement me!\");\n    }\n\n    getStyleObject() {\n        return this.options.style;\n    }\n}\n\nclass KeyframeElement extends StyleElement {\n    toString() {\n        return this.getKeyframeName();\n    }\n\n    getKeyframeName() {\n        if (this.keyframeName) {\n            return this.keyframeName;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.keyframeName = (this.options.name || \"autokeyframe\") + \"-\" + this.constructor.instanceCounter;\n        return this.keyframeName;\n    }\n\n    getValue(style) {\n        let str = \"{\";\n        for (let key in style) {\n            let value = style[key];\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            if (value == null) {\n                continue;\n            }\n            str += dashCase(key) + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    getKeyframeInstance(keyframe) {\n        let result = \"{\";\n        for (let key in keyframe) {\n            let value = keyframe[key];\n            result += key + \" \" + this.getValue(value);\n        }\n        return result + \"}\";\n    }\n\n    render() {\n        return \"@keyframes \" + this.getKeyframeName() + this.getKeyframeInstance(this.options.keyframe || {});\n    }\n}\n\nexport {StyleInstance, StyleElement, KeyframeElement, DynamicStyleElement}\n","export function isDescriptor(desc) {\n    if (!desc || !desc.hasOwnProperty) {\n        return false;\n    }\n\n    const keys = ['value', 'initializer', 'get', 'set'];\n\n    for (let key of keys) {\n        if (desc.hasOwnProperty(key)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function decorate(handleDescriptor, entryArgs) {\n    if (isDescriptor(entryArgs[entryArgs.length - 1])) {\n        return handleDescriptor(...entryArgs, []);\n    } else {\n        return function () {\n            return handleDescriptor(...arguments, entryArgs);\n        };\n    }\n}\n\nexport function createDefaultSetter(key) {\n    return function set(newValue) {\n        Object.defineProperty(this, key, {\n            configurable: true,\n            writable: true,\n            // IS enumerable when reassigned by the outside word\n            enumerable: true,\n            value: newValue\n        });\n\n        return newValue;\n    };\n}\n","import {decorate, createDefaultSetter} from './Utils';\n\nfunction handleDescriptor(target, key, descriptor) {\n    const { configurable, enumerable, initializer, value } = descriptor;\n    // The \"key\" property is constructed with accessor descriptor (getter / setter),\n    // but the first time the getter is used, the property is reconstructed with data descriptor.\n    return {\n        configurable,\n        enumerable,\n\n        get() {\n            // This happens if someone accesses the property directly on the prototype\n            if (this === target) {\n                return;\n            }\n\n            const ret = initializer ? initializer.call(this) : value;\n\n            Object.defineProperty(this, key, {\n                configurable,\n                enumerable,\n                writable: true,\n                value: ret\n            });\n\n            return ret;\n        },\n\n        set: createDefaultSetter(key)\n    };\n}\n\nexport function lazyInitialize(...args) {\n    return decorate(handleDescriptor, args);\n}\n\nlet lazyInit = lazyInitialize;\n\nexport {lazyInit};\n","import {deepCopy} from \"../base/Utils\";\nimport {decorate} from \"./Utils\";\nimport {lazyInit} from \"./LazyInitialize\";\n\nfunction evaluateStyleRuleObject(target, initializer, value, options) {\n    let result = initializer ? initializer.call(target) : value;\n    if (typeof result === \"function\") {\n        result = result();\n    }\n    if (Array.isArray(result)) {\n        result = Object.assign({}, ...result);\n    }\n    return result;\n}\n\nfunction getStyleRuleKey(key) {\n    return \"__style__\" + key;\n}\n\nfunction getKeyframesRuleKey(key) {\n    return \"__keyframes__\" + key;\n}\n\n// TODO: this function can be made a lot more generic, to wrap plain object initializer with inheritance support\nfunction styleRuleWithOptions() {\n    let options = Object.assign({}, ...arguments); //Simpler notation?\n    // TODO: Remove this if you don't think it's appropiate, I thought a warning would do no harm\n    if (!options.targetMethodName) {\n        console.error(\"WARNING: targetMethodName not specified in the options (default is \\\"css\\\")\");\n    }\n    let targetMethodName = options.targetMethodName || \"css\";\n\n    function styleRuleDecorator(target, key, descriptor) {\n        const {initializer, value} = descriptor;\n\n        descriptor.objInitializer = function () {\n            let style = evaluateStyleRuleObject(this, initializer, value, options);\n\n            // TODO: a bit of a hack, clean this up\n            style[\"prefferedClassName\"] = key;\n\n            if (options.selector) {\n                style[\"selectorName\"] = options.selector;\n            }\n\n            if (options.inherit) {\n                // Get the value we set in the prototype of the parent class\n                let parentDesc = Object.getPrototypeOf(target)[getStyleRuleKey(key)];\n                if (!parentDesc) {\n                    console.error(\"You're trying to inherit a rule that isn't implemented in the parent: \" + key);\n                }\n                let parentStyle = evaluateStyleRuleObject(this, parentDesc.objInitializer, parentDesc.value, options);\n                style = deepCopy({}, parentStyle, style);\n                return style;\n            }\n\n            return style;\n        };\n\n        // Change the prototype of this object to be able to access the old descriptor/value\n        target[options.getKey(key)] = Object.assign({}, descriptor);\n\n        descriptor.initializer = function () {\n            let style = descriptor.objInitializer.call(this);\n            return this[targetMethodName](style);\n        };\n\n        delete descriptor.value;\n\n        return lazyInit(target, key, descriptor);\n    }\n\n    return styleRuleDecorator;\n}\n\n// TODO: Second argument is mostly useless (implied from targetMethodName)\nlet styleRule = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: false,\n});\n\nlet styleRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: true,\n});\n\nexport function styleRuleCustom(options) {\n    return styleRuleWithOptions(Object.assign({\n        targetMethodName: \"css\",\n        getKey: getStyleRuleKey,\n        inherit: false,\n    }, options));\n}\n\nlet keyframesRule = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: false,\n});\n\n// TODO: This is currently not working (I think)\nlet keyframesRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: true,\n});\n\nexport {styleRule, styleRuleInherit, keyframesRule, keyframesRuleInherit, styleRuleWithOptions}\n\n","import {StyleElement, KeyframeElement, DynamicStyleElement} from \"./StyleElement\";\nimport {Dispatchable} from \"../base/Dispatcher\";\n\n// Class meant to group multiple classes inside a single <style> element, for convenience\n// TODO: pattern should be more robust, to be able to only update classes\nclass StyleSheet extends Dispatchable {\n    constructor(options={}) {\n        super();\n        this.options = Object.assign({\n            parent: document.head,\n            name: options.name || this.constructor.getElementName(), // call only if needed\n        }, options);\n        this.elements = new Set();\n        if (!this.options.delayedMount) {\n            this.ensureMounted();\n        }\n        this.getTheme().addStyleSheet(this);\n    }\n\n    ensureMounted() {\n        if (this.styleElement) {\n            return;\n        }\n        const styleElementOptions = {\n            children: [],\n            name: this.options.name,\n        };\n        this.styleElement = StyleElement.create(this.options.parent, styleElementOptions);\n    }\n\n    static getInstance() {\n        if (!this.hasOwnProperty(\"singletonInstance\")) {\n            this.singletonInstance = new this();\n        }\n        return this.singletonInstance;\n    }\n\n    // Generate an instance, and also make sure to instantiate all style elements\n    static initialize() {\n        const styleSheet = this.getInstance();\n\n        for (const key in this.prototype) {\n            // Just hit the getter to instantiate the style\n            if (!styleSheet[key]) {\n                console.log(\"This is here to prevent a bundling optimization bug\");\n            }\n        }\n    }\n\n    static getElementName() {\n        this.elementNameCounter = (this.elementNameCounter || 0) + 1;\n        let name = this.name;\n        if (this.elementNameCounter > 1) {\n            name += \"-\" + this.elementNameCounter;\n        }\n        return name;\n    }\n\n    getTheme() {\n        return this.options.theme || this.constructor.theme;\n    }\n\n    setTheme(theme) {\n        this.options.theme = theme;\n    }\n\n    getThemeProperty(key, defaultValue) {\n        const theme = this.getTheme();\n        return (theme && theme.getProperty(key, defaultValue)) || defaultValue;\n    }\n\n    get themeProperties() {\n        const theme = this.getTheme();\n        return (theme && theme.getProperties()) || {};\n    }\n\n    ensureFirstUpdate() {\n        if (this._firstUpdate) {\n            return;\n        }\n\n        this._firstUpdate = true;\n        this.ensureMounted();\n        // Call all listeners before update for the very first time, to update any possible variables\n        this.dispatch(\"beforeUpdate\", this);\n    }\n\n    css(style) {\n        this.ensureFirstUpdate();\n        if (arguments.length > 1) {\n            style = Object.assign({}, ...arguments);\n        }\n        let elementOptions = {style: style};\n\n        // Get the preferred name, maybe cleanup later\n        const nameKey = \"prefferedClassName\";\n        if (style[nameKey]) {\n            elementOptions.name = style[nameKey];\n            delete style[nameKey];\n        }\n\n        let element = new DynamicStyleElement(elementOptions);\n        this.elements.add(element);\n        let styleInstances = element.render();\n        for (let styleInstance of styleInstances) {\n            this.styleElement.appendChild(styleInstance);\n        }\n        return element;\n    }\n\n    keyframes(keyframes) {\n        this.ensureFirstUpdate();\n        // This is not really necessarily as I don't believe it will ever be used\n        if (arguments.length > 1) {\n            keyframes = Object.assign({}, ...arguments);\n        }\n        let element = new KeyframeElement({keyframe: keyframes});\n        this.elements.add(element);\n        this.styleElement.appendChild(element);\n        return element;\n    }\n\n    addBeforeUpdateListener(callback) {\n        return this.addListener(\"beforeUpdate\", callback);\n    }\n\n    update() {\n        if (!this._firstUpdate) {\n            return;\n        }\n        this.dispatch(\"beforeUpdate\", this);\n\n        for (const key of Object.keys(this)) {\n            if (this[key] instanceof DynamicStyleElement) {\n                const desc = this[\"__style__\" + key];\n                const func = desc && desc.objInitializer;\n                if (func) {\n                    this[key].options.style = func.call(this);\n                }\n            }\n        }\n\n        let children = [];\n        for (let value of this.elements) {\n            if (value instanceof StyleElement) {\n                let styleElements = value.render();\n                children.push(...styleElements);\n            }\n        }\n        this.styleElement.options.children = children;\n        this.styleElement.redraw();\n    }\n}\n\n// Helper class, meant to only keep one class active for an element from a set of classes\n// TODO: move to another file\nclass ExclusiveClassSet {\n    constructor(classList, element) {\n        // TODO: check that classList is an array (or at least iterable)\n        this.classList = classList;\n        this.element = element;\n    }\n\n    static fromObject(obj, element) {\n        let classList = [];\n        for (let key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                classList.push(obj[key]);\n            }\n        }\n        return Object.assign(new ExclusiveClassSet(classList, element), obj);\n    }\n\n    set(element, classInstance) {\n        if (!classInstance) {\n            classInstance = element;\n            element = this.element;\n        }\n        for (let cls of this.classList) {\n            if (cls === classInstance) {\n                element.addClass(cls);\n            } else {\n                element.removeClass(cls);\n            }\n        }\n    }\n}\n\nfunction wrapCSS(context, style) {\n    return {\n        [context]: style\n    };\n}\n\nfunction hover(style) {\n    return wrapCSS(\":hover\", style);\n}\n\nfunction active(style) {\n    return wrapCSS(\":active\", style);\n}\n\nfunction focus(style) {\n    return wrapCSS(\":focus\", style);\n}\n\nlet styleMap = new WeakMap();\n\nexport {StyleSheet, ExclusiveClassSet, styleMap, wrapCSS, hover, focus, active};\n\nexport * from \"../decorators/Style\";\n","// Primitive utils for wrapping browser info\nclass Device {\n    static isTouchDevice() {\n        if (!this.hasOwnProperty(\"_isTouchDevice\")) {\n            this._isTouchDevice = !!((\"createTouch\" in window.document) ||\n                                            (navigator.MaxTouchPoints > 0) ||\n                                            (navigator.msMaxTouchPoints > 0) ||\n                                            (\"ontouchstart\" in window));\n        }\n        return this._isTouchDevice;\n    }\n\n    static isMobileDevice() {\n        if (!this.hasOwnProperty(\"_isMobileDevice\")) {\n            const mobileDevices = [\"Android\", \"webOS\", \"iPad\", \"iPhone\", \"iPod\", \"BlackBerry\", \"Windows Phone\"];\n            this._isMobileDevice = false;\n            for (let device of mobileDevices) {\n                if (navigator.userAgent.indexOf(device) !== -1) {\n                    this._isMobileDevice = true;\n                }\n            }\n        }\n        return this._isMobileDevice;\n    }\n\n    static getEventTouchIdentifier(event) {\n        return Math.min(...[...event.touches].map(touch => touch.identifier));\n    }\n\n    static getEventTouch(event) {\n        const identifier = this.getEventTouchIdentifier(event);\n        return [...event.touches].find(touch => touch.identifier === identifier);\n    }\n\n    static getEventCoord(event, axis, reference=\"client\") {\n        let coordName = reference + axis;\n        if (event[coordName]) {\n            return event[coordName];\n        }\n        if (event.touches) {\n            return this.getEventTouch(event)[coordName];\n        }\n        if (event.originalEvent) {\n            return this.getEventCoord(event.originalEvent, axis, reference);\n        }\n\n        console.warn(\"Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)\");\n    }\n\n    static getEventX(event, reference=\"client\") {\n        return this.getEventCoord(event, \"X\", reference);\n    }\n\n    static getEventY(event, reference=\"client\") {\n        return this.getEventCoord(event, \"Y\", reference);\n    }\n\n    static getBrowser() {\n        // TODO: should try to use navigator\n        if ((!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n            return \"Opera\";\n        }\n        if (typeof InstallTrigger !== 'undefined') {\n            return \"Firefox\";\n        }\n        if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) {\n            return \"Safari\";\n        }\n        if (document.documentMode) {\n            return \"Internet Explorer\";\n        }\n        if (window.StyleMedia) {\n            return \"Edge\";\n        }\n        if (window.chrome && window.chrome.webstore) {\n            return \"Chrome\";\n        }\n        return \"Unknown\";\n    }\n\n    static supportsEvent(eventName) {\n        if (!this.cachedSupportedValues.has(eventName)) {\n            var element = document.createElement(\"div\");\n            let onEventName = \"on\" + eventName;\n            var isSupported = (onEventName in element);\n            if (!isSupported) {\n                element.setAttribute(onEventName, \"return;\");\n                isSupported = typeof element[onEventName] === \"function\";\n            }\n            element = null;\n            this.cachedSupportedValues.set(eventName, isSupported);\n        }\n        return this.cachedSupportedValues.get(eventName);\n    }\n}\n\nDevice.cachedSupportedValues = new Map();\n\nexport {Device};","import {Device} from \"../base/Device\";\n\nexport const Draggable = (BaseClass) => class Draggable extends BaseClass {\n    _clickCallbacks = new Map();\n    _clickDragListeners = new Map();\n\n    addClickListener(callback) {\n        if (this._clickCallbacks.has(callback)) {\n            return;\n        }\n        let callbackWrapper = () => {\n            if (this._okForClick) {\n                callback();\n            }\n        };\n        this._clickCallbacks.set(callback, callbackWrapper);\n        super.addClickListener(callbackWrapper);\n\n        if (this._clickDragListeners.has(callback)) {\n            return;\n        }\n        let clickDragListener = {\n            onStart: () => { this.dragForClickStarted(); },\n            onDrag: () => { this.dragForClick(); }\n        };\n        this._clickDragListeners.set(callback, clickDragListener);\n        this.addDragListener(clickDragListener);\n    }\n\n    dragForClickStarted() {\n        this._okForClick = true;\n    }\n\n    dragForClick() {\n        this._okForClick = false;\n    }\n\n    removeClickListener(callback) {\n        let callbackWrapper = this._clickCallbacks.get(callback);\n        if (callbackWrapper) {\n            this._clickCallbacks.delete(callback);\n            super.removeClickListener(callbackWrapper);\n        }\n        if (!this._clickDragListeners) {\n            return;\n        }\n        let clickDragListener = this._clickDragListeners.get(callback);\n        if (clickDragListener) {\n            this._clickDragListeners.delete(callback);\n            this.removeDragListener(clickDragListener);\n        }\n    }\n\n    createDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    createTouchDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n            listenerWrapper.touchEventIdentifier = Device.getEventTouchIdentifier(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n            event.preventDefault();\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (event.touches.length && Device.getEventTouchIdentifier(event) === listenerWrapper.touchEventIdentifier) {\n                return;\n            }\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    addDragListener(listeners) {\n        let listenerWrapper = this.createDragListenerWrapper(listeners);\n        let touchListenerWrapper = this.createTouchDragListenerWrapper(listeners);\n        this.addNodeListener(\"touchstart\", touchListenerWrapper.onWrapperStart);\n        this.addNodeListener(\"mousedown\", listenerWrapper.onWrapperStart);\n        // TODO: Replace with our body\n        document.body.addEventListener(\"touchend\", touchListenerWrapper.onWrapperEnd);\n        document.body.addEventListener(\"mouseup\", listenerWrapper.onWrapperEnd);\n\n        if (!this.hasOwnProperty(\"_dragListeners\")) {\n            this._dragListeners = [];\n        }\n        this._dragListeners.push(touchListenerWrapper);\n        this._dragListeners.push(listenerWrapper);\n    }\n\n    removeDragListener(listeners) {\n        if (this._dragListeners) {\n            for (let i = this._dragListeners.length - 1; i >= 0; i -= 1) {\n                if (this._dragListeners[i].onStart === listeners.onStart &&\n                    this._dragListeners[i].onDrag === listeners.onDrag &&\n                    this._dragListeners[i].onEnd === listeners.onEnd) {\n\n                    this.removeNodeListener(\"touchstart\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperEnd);\n                    this.removeNodeListener(\"mousedown\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperEnd);\n\n                    this._dragListeners.splice(i, 1);\n                }\n            }\n        }\n    }\n};\n","export const COLORS_BY_NAME = {\n    aliceblue: \"#f0f8ff\",\n    antiquewhite: \"#faebd7\",\n    aqua: \"#00ffff\",\n    aquamarine: \"#7fffd4\",\n    azure: \"#f0ffff\",\n    beige: \"#f5f5dc\",\n    bisque: \"#ffe4c4\",\n    black: \"#000000\",\n    blanchedalmond: \"#ffebcd\",\n    blue: \"#0000ff\",\n    blueviolet: \"#8a2be2\",\n    brown: \"#a52a2a\",\n    burlywood: \"#deb887\",\n    cadetblue: \"#5f9ea0\",\n    chartreuse: \"#7fff00\",\n    chocolate: \"#d2691e\",\n    coral: \"#ff7f50\",\n    cornflowerblue: \"#6495ed\",\n    cornsilk: \"#fff8dc\",\n    crimson: \"#dc143c\",\n    cyan: \"#00ffff\",\n    darkblue: \"#00008b\",\n    darkcyan: \"#008b8b\",\n    darkgoldenrod: \"#b8860b\",\n    darkgray: \"#a9a9a9\",\n    darkgreen: \"#006400\",\n    darkkhaki: \"#bdb76b\",\n    darkmagenta: \"#8b008b\",\n    darkolivegreen: \"#556b2f\",\n    darkorange: \"#ff8c00\",\n    darkorchid: \"#9932cc\",\n    darkred: \"#8b0000\",\n    darksalmon: \"#e9967a\",\n    darkseagreen: \"#8fbc8f\",\n    darkslateblue: \"#483d8b\",\n    darkslategray: \"#2f4f4f\",\n    darkturquoise: \"#00ced1\",\n    darkviolet: \"#9400d3\",\n    deeppink: \"#ff1493\",\n    deepskyblue: \"#00bfff\",\n    dimgray: \"#696969\",\n    dodgerblue: \"#1e90ff\",\n    firebrick: \"#b22222\",\n    floralwhite: \"#fffaf0\",\n    forestgreen: \"#228b22\",\n    fuchsia: \"#ff00ff\",\n    gainsboro: \"#dcdcdc\",\n    ghostwhite: \"#f8f8ff\",\n    gold: \"#ffd700\",\n    goldenrod: \"#daa520\",\n    gray: \"#808080\",\n    green: \"#008000\",\n    greenyellow: \"#adff2f\",\n    honeydew: \"#f0fff0\",\n    hotpink: \"#ff69b4\",\n    indianred: \"#cd5c5c\",\n    indigo: \"#4b0082\",\n    ivory: \"#fffff0\",\n    khaki: \"#f0e68c\",\n    lavender: \"#e6e6fa\",\n    lavenderblush: \"#fff0f5\",\n    lawngreen: \"#7cfc00\",\n    lemonchiffon: \"#fffacd\",\n    lightblue: \"#add8e6\",\n    lightcoral: \"#f08080\",\n    lightcyan: \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgray: \"#d3d3d3\",\n    lightgreen: \"#90ee90\",\n    lightpink: \"#ffb6c1\",\n    lightsalmon: \"#ffa07a\",\n    lightseagreen: \"#20b2aa\",\n    lightskyblue: \"#87cefa\",\n    lightslategray: \"#778899\",\n    lightsteelblue: \"#b0c4de\",\n    lightyellow: \"#ffffe0\",\n    lime: \"#00ff00\",\n    limegreen: \"#32cd32\",\n    linen: \"#faf0e6\",\n    magenta: \"#ff00ff\",\n    maroon: \"#800000\",\n    mediumaquamarine: \"#66cdaa\",\n    mediumblue: \"#0000cd\",\n    mediumorchid: \"#ba55d3\",\n    mediumpurple: \"#9370db\",\n    mediumseagreen: \"#3cb371\",\n    mediumslateblue: \"#7b68ee\",\n    mediumspringgreen: \"#00fa9a\",\n    mediumturquoise: \"#48d1cc\",\n    mediumvioletred: \"#c71585\",\n    midnightblue: \"#191970\",\n    mintcream: \"#f5fffa\",\n    mistyrose: \"#ffe4e1\",\n    moccasin: \"#ffe4b5\",\n    navajowhite: \"#ffdead\",\n    navy: \"#000080\",\n    oldlace: \"#fdf5e6\",\n    olive: \"#808000\",\n    olivedrab: \"#6b8e23\",\n    orange: \"#ffa500\",\n    orangered: \"#ff4500\",\n    orchid: \"#da70d6\",\n    palegoldenrod: \"#eee8aa\",\n    palegreen: \"#98fb98\",\n    paleturquoise: \"#afeeee\",\n    palevioletred: \"#db7093\",\n    papayawhip: \"#ffefd5\",\n    peachpuff: \"#ffdab9\",\n    peru: \"#cd853f\",\n    pink: \"#ffc0cb\",\n    plum: \"#dda0dd\",\n    powderblue: \"#b0e0e6\",\n    purple: \"#800080\",\n    red: \"#ff0000\",\n    rosybrown: \"#bc8f8f\",\n    royalblue: \"#4169e1\",\n    saddlebrown: \"#8b4513\",\n    salmon: \"#fa8072\",\n    sandybrown: \"#f4a460\",\n    seagreen: \"#2e8b57\",\n    seashell: \"#fff5ee\",\n    sienna: \"#a0522d\",\n    silver: \"#c0c0c0\",\n    skyblue: \"#87ceeb\",\n    slateblue: \"#6a5acd\",\n    slategray: \"#708090\",\n    snow: \"#fffafa\",\n    springgreen: \"#00ff7f\",\n    steelblue: \"#4682b4\",\n    tan: \"#d2b48c\",\n    teal: \"#008080\",\n    thistle: \"#d8bfd8\",\n    tomato: \"#ff6347\",\n    turquoise: \"#40e0d0\",\n    violet: \"#ee82ee\",\n    wheat: \"#f5deb3\",\n    white: \"#ffffff\",\n    whitesmoke: \"#f5f5f5\",\n    yellow: \"#ffff00\",\n    yellowgreen: \"#9acd32\"\n};\n\n\n/*\n * This class contains methods for operating with colors. Its objects are kept in hsva format with normalized\n * attributes (each attribute has value between 0 and 1 inclusive), and can be converted from/to rgba.\n */\nexport class Color {\n    constructor(color) {\n        if (color) {\n            this.setColor(color);\n        }\n    }\n\n    setColor(color) {\n        this.color = this.constructor.parseColor(color);\n    }\n\n    getColor() {\n        let rgba = this.getRgba();\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    /*\n     * @param color A color string of the types: native name, hex3, hex6, rgb, rgba, hsl, hsla\n     *              or a Color object, or a hsla color array\n     */\n    static parseColor(color) {\n        if (color instanceof Color) {\n            return color.color;\n        } else if (color instanceof Array) {\n            // Add the alpha parameter at the end\n            if (color.length === 3) {\n                color.push(1);\n            }\n            return color;\n        }\n\n        color = color.trim().toLowerCase();\n\n        // Check if color is given by name\n        if (COLORS_BY_NAME.hasOwnProperty(color)) {\n            color = COLORS_BY_NAME[color];\n        }\n\n        let values = [];\n\n        // Check for hex3 (e.g. \"#f00\")\n        let hex3 = color.match(/^#([0-9a-f]{3})$/i);\n        if (hex3) {\n            values = [\n                parseInt(hex3[1].charAt(0), 16) * 0x11,\n                parseInt(hex3[1].charAt(1), 16) * 0x11,\n                parseInt(hex3[1].charAt(2), 16) * 0x11,\n                1\n            ];\n        }\n\n        // Check for hex6 (e.g. \"#ff0000\")\n        let hex6 = color.match(/^#([0-9a-f]{6})$/i);\n        if (hex6) {\n            values = [\n                parseInt(hex6[1].substr(0, 2), 16),\n                parseInt(hex6[1].substr(2, 2), 16),\n                parseInt(hex6[1].substr(4, 2), 16),\n                1\n            ];\n        }\n\n        // Check for rgba (e.g. \"rgba(255, 0, 0, 0.5)\")\n        let rgba = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+.*\\d*)\\s*\\)$/i);\n        if (rgba) {\n            values = [\n                parseInt(rgba[1]),\n                parseInt(rgba[2]),\n                parseInt(rgba[3]),\n                parseFloat(rgba[4])\n            ];\n        }\n\n        // Check for rgb (e.g. \"rgb(255, 0, 0)\")\n        let rgb = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n        if (rgb) {\n            values = [\n                parseInt(rgb[1]),\n                parseInt(rgb[2]),\n                parseInt(rgb[3]),\n                1\n            ];\n        }\n        return values;\n    }\n\n    // TODO: this should be implemented as a factory that generates an interpolator object, that just takes in a t\n    static interpolate(firstColor, secondColor, t = 0.5) {\n        let firstColorArray = Color.parseColor(firstColor);\n        let secondColorArray = Color.parseColor(secondColor);\n\n        return Color.convertToRgba([\n            parseInt(firstColorArray[0] * (1 - t) + secondColorArray[0] * t),\n            parseInt(firstColorArray[1] * (1 - t) + secondColorArray[1] * t),\n            parseInt(firstColorArray[2] * (1 - t) + secondColorArray[2] * t),\n            parseInt(firstColorArray[3] * (1 - t) + secondColorArray[3] * t)\n        ]);\n    }\n\n    static addOpacity(color, opacity) {\n        let colorArray = Color.parseColor(color);\n        return Color.convertToRgba([\n            parseInt(colorArray[0]),\n            parseInt(colorArray[1]),\n            parseInt(colorArray[2]),\n            opacity\n        ]);\n    }\n\n    static convertToRgba(rgba) {\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    static isLight(color) {\n        let values = Color.parseColor(color);\n        return values[0] * 0.3 + values[1] * 0.59 + values[2] * 0.11 > 188;\n    }\n}\n\n\nexport function lighten(color, amount) {\n    if (amount >= 0) {\n        return Color.interpolate(color, \"#fff\", amount);\n    } else {\n        return darken(color, -amount);\n    }\n}\n\n\nexport function darken(color, amount) {\n    if (amount >= 0) {\n        let rgba = Color.parseColor(Color.interpolate(color, \"#000\", amount));\n        for (let i = 0; i < 3; i += 1) {\n            let root = Math.pow(255 - rgba[i], 0.7);\n            rgba[i] = parseInt(rgba[i] - root * amount);\n            if (rgba[i] < 0) {\n                rgba[i] = 0;\n            }\n        }\n        return Color.convertToRgba(rgba);\n    } else {\n        return lighten(color, -amount);\n    }\n}\n\n\nexport function enhance(color, amount) {\n    if (Color.isLight(color)) {\n        return darken(color, amount);\n    } else {\n        return lighten(color, amount);\n    }\n}\n\n\nexport function buildColors(color, dark=true) {\n    let colors = [];\n    let darkenPercents;\n    if (!dark) {\n        darkenPercents = [0.1, 0, -0.2, -0.3, -0.35, -0.2, -1];\n    } else if (Color.isLight(color)) {\n        darkenPercents = [0.05, 0, 0.05, 0.1, 0.15, 0.3, 0.8];\n    } else {\n        darkenPercents = [-0.3, 0, 0.1, 0.2, 0.23, 0.1, -1];\n    }\n    for (let i = 0; i < darkenPercents.length; i += 1) {\n        colors.push(darken(color, darkenPercents[i]));\n    }\n    return colors;\n}\n\n\nexport class ColorGenerator {\n    static FIRST_COLORS = [\"#337ab7\", \"#5cb85c\",  \"#f0ad4e\", \"#5bc0de\", \"#d9534f\"];\n    static cache = new Map();\n\n    static getPersistentColor(uniqueId) {\n        if (uniqueId < this.FIRST_COLORS.length) {\n            return this.FIRST_COLORS[uniqueId];\n        }\n        if (!this.cache.has(uniqueId)) {\n            this.cache.set(uniqueId, this.getRandomColor());\n        }\n        return this.cache.get(uniqueId);\n    }\n\n    static getRandomColor() {\n        const allowed = \"3456789ABC\";\n        let color = \"#\";\n        for (let i = 0; i < 6; i += 1) {\n            color += allowed.charAt(parseInt(Math.random() * allowed.length));\n        }\n        return color;\n    }\n}\n","import {Dispatchable} from \"../../base/Dispatcher\";\nimport {UI} from \"../UIBase\";\nimport {StyleSheet} from \"../Style\";\nimport {CallThrottler} from \"../../base/Utils\";\n\nfunction getInstance(styleSheet) {\n    if (typeof styleSheet === \"function\") {\n        if (typeof styleSheet.getInstance === \"function\") {\n            styleSheet = styleSheet.getInstance();\n        } else {\n            styleSheet = styleSheet();\n        }\n    }\n    return styleSheet;\n}\n\nfunction getInstanceForObject(obj) {\n    if (!obj) {\n        return null;\n    }\n    let styleSheet = (obj.theme && obj.theme.get(obj)) || obj.styleSheet;\n    return getInstance(styleSheet);\n}\n\nclass Theme extends Dispatchable {\n    constructor(name=\"\") {\n        super();\n        this.styleSheetSymbol = Symbol(\"Theme\" + name);\n        this.classSet = new Set();\n        this.styleSheetSet = new Set();\n        this.properties = {};\n        this.updateThrottler = new CallThrottler({throttle: 50});\n        this.updateThrottled = this.updateThrottler.wrap(() => this.updateStyleSheets());\n        window.addEventListener(\"resize\", this.updateThrottled);\n    }\n\n    register(cls, styleSheet) {\n        cls.theme = this;\n        if (!cls.styleSheet) {\n            cls.styleSheet = styleSheet;\n        }\n        this.set(cls, styleSheet);\n    }\n\n    set(cls, styleSheet) {\n        cls[this.styleSheetSymbol] = styleSheet;\n        this.classSet.add(cls);\n    }\n\n    get(cls) {\n        if (!(typeof cls === \"function\")) {\n            cls = cls.constructor;\n        }\n        return cls[this.styleSheetSymbol];\n    }\n\n    getProperties() {\n        return this.properties;\n    }\n\n    getProperty(key, defaultValue) {\n        const value = this.properties[key] || defaultValue;\n        return (typeof value === \"function\") ? value() : value;\n    }\n\n    setProperties(properties, update=true) {\n        Object.assign(this.properties, properties);\n        if (update) {\n            this.updateThrottled();\n        }\n    }\n\n    setProperty(key, value) {\n        this.properties[key] = value;\n    }\n\n    getAllStyleSheets() {\n        let styleSheetSet = new Set(this.styleSheetSet);\n        for (const cls of this.classSet.values()) {\n            styleSheetSet.add(this.get(cls));\n        }\n        return Array.from(styleSheetSet).map(styleSheet => {\n            if (styleSheet.getInstance) {\n                return styleSheet.getInstance();\n            }\n            return styleSheet;\n        });\n    }\n\n    addStyleSheet(styleSheet) {\n        this.styleSheetSet.add(styleSheet);\n    }\n\n    removeStyleSheet(styleSheet) {\n        this.styleSheetSet.delete(styleSheet);\n    }\n\n    updateStyleSheets() {\n        for (const styleSheet of this.getAllStyleSheets()) {\n            if (styleSheet.update) {\n                styleSheet.update();\n            }\n\n        }\n    }\n\n    static register(cls, styleSheet) {\n        return this.Global.register(...arguments);\n    }\n\n    static get(cls) {\n        return this.Global.get(...arguments);\n    }\n\n    static addStyleSheet(styleSheet) {\n        this.Global.addStyleSheet(styleSheet);\n    }\n\n    static setProperties(properties) {\n        this.Global.setProperties(...arguments);\n    }\n\n    static getProperties() {\n        return this.Global.getProperties();\n    }\n}\n\nTheme.Global = new Theme(\"Global\");\n\nUI.Element.prototype.getStyleSheet = function styleSheetGetter() {\n    return getInstanceForObject(this.options) || getInstanceForObject(this.constructor);\n};\n\nfunction registerStyle(styleClass, theme=Theme.Global) {\n    return (target) => {\n        theme.register(target, styleClass);\n    }\n}\n\nStyleSheet.theme = Theme.Global;\n\nexport {Theme, registerStyle};\n","import {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {enhance} from \"./Color\";\nimport {Device} from \"../base/Device\";\nimport {Orientation, Level, Size} from \"./Constants\";\nimport {Theme} from \"style/Theme\";\n\n// TODO: export these properly, don't use a namespace here\nlet GlobalStyle = {\n};\n\nexport function getTextColor(backgroundColor) {\n    return enhance(backgroundColor, 1);\n}\n\nTheme.setProperties({\n    COLOR_BACKGROUND: \"#fff\",\n    COLOR_BACKGROUND_ALTERNATIVE: \"#eee\",\n    COLOR_BACKGROUND_BODY: \"#f8f8f8\",\n    COLOR_FOREGROUND_BODY: \"#f2f2f2\",\n    COLOR_BACKGROUND_BADGE: \"#777\",\n    COLOR_PRIMARY: \"#337ab7\",\n    COLOR_SECONDARY: \"#358ba4\",\n    COLOR_SUCCESS: \"#5cb85c\",\n    COLOR_INFO: \"#5bc0de\",\n    COLOR_WARNING: \"#f0ad4e\",\n    COLOR_DANGER: \"#d9534f\",\n\n    COLOR_LINK: \"#337ab7\",\n\n    FONT_SIZE_EXTRA_SMALL: \"10px\",\n    FONT_SIZE_SMALL: \"12px\",\n    FONT_SIZE_DEFAULT: \"14px\",\n    FONT_SIZE_LARGE: \"17px\",\n    FONT_SIZE_EXTRA_LARGE: \"21px\",\n\n    BASE_BORDER_RADIUS: 0,\n    BASE_BOX_SHADOW: \"0px 0px 10px rgb(160, 162, 168)\",\n    BASE_BORDER_WIDTH: 0,\n    BASE_BORDER_STYLE: \"solid\",\n    BASE_BORDER_COLOR: \"#ddd\",\n\n    BUTTON_BORDER_RADIUS: \"0.2rem\",\n\n    CARD_PANEL_HEADER_HEIGHT: 30,\n    CARD_PANEL_HEADER_HEIGHT_LARGE: 40,\n    CARD_PANEL_HEADING_PADDING: 10,\n    CARD_PANEL_HEADING_PADDING_LARGE: 20,\n    CARD_PANEL_TEXT_TRANSFORM: \"inherit\",\n\n    DARK_BOX_SHADOW: \"0px 0px 10px rgba(0, 0, 0, .6)\",\n\n    ROW_LIST_ROW_HEIGHT: 30,\n    ROW_LIST_ROW_HEIGHT_LARGE: 40,\n    ROW_LIST_ROW_PADDING: 10,\n    ROW_LIST_ROW_PADDING_LARGE: 20,\n    ROW_LIST_ROW_BORDER_WIDTH: 1,\n\n    FONT_FAMILY_SANS_SERIF: \"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    FONT_FAMILY_SERIF: \"serif\",\n    FONT_FAMILY_MONOSPACE: \"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace\",\n    FONT_FAMILY_DEFAULT: () => Theme.getProperties().FONT_FAMILY_SANS_SERIF,\n\n    NAV_MANAGER_NAVBAR_HEIGHT: 50,\n    NAV_MANAGER_BOX_SHADOW_NAVBAR: \"0px 0px 10px rgb(0, 0, 0)\",\n    NAV_MANAGER_BOX_SHADOW_SIDE_PANEL: \"0px 0px 10px #202e3e\",\n\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE: 0,\n\n    FLAT_TAB_AREA_COLOR_BACKGROUND: \"#f3f3f3\",\n    FLAT_TAB_AREA_LINE_HEIGHT: 30,\n    FLAT_TAB_AREA_PADDING_SIDES: 10,\n});\n\nexport class BasicLevelSizeStyleSheet extends StyleSheet {\n    Level(level) {\n        if (this[level]) {\n            return this[level];\n        }\n        for (let type of Object.keys(Level)) {\n            if (level == Level[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n}\n\nexport const BasicLevelStyleSheet = (colorToStyleFunction) => class BasicLevelStyleClass extends BasicLevelSizeStyleSheet {\n    colorStyleRule(color, textColor) {\n        return colorToStyleFunction(color, textColor || getTextColor(color));\n    }\n\n    @styleRule\n    BASE = this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND);\n\n    @styleRule\n    PRIMARY = this.colorStyleRule(this.themeProperties.COLOR_PRIMARY);\n\n    @styleRule\n    SECONDARY = this.colorStyleRule(this.themeProperties.COLOR_SECONDARY);\n\n    @styleRule\n    SUCCESS = this.colorStyleRule(this.themeProperties.COLOR_SUCCESS);\n\n    @styleRule\n    INFO = this.colorStyleRule(this.themeProperties.COLOR_INFO);\n\n    @styleRule\n    WARNING = this.colorStyleRule(this.themeProperties.COLOR_WARNING);\n\n    @styleRule\n    DANGER = this.colorStyleRule(this.themeProperties.COLOR_DANGER);\n};\n\n\nclass FlexContainerStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        display: \"flex\",\n        \">*\": {\n            marginLeft: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginLeft: \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">*\": {\n            marginTop: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginTop: \"0px\",\n        }\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass ContainerStyle extends StyleSheet {\n    getSizeStyle(mobilePixels, desktopPercent) {\n        return {\n            margin: Device.isMobileDevice() ? `0 ${mobilePixels}px` : `0% ${desktopPercent}%`,\n        }\n    }\n\n    @styleRule\n    EXTRA_SMALL = this.getSizeStyle(6, 15);\n\n    @styleRule\n    SMALL = this.getSizeStyle(4, 10);\n\n    @styleRule\n    MEDIUM = this.getSizeStyle(4, 6);\n\n    @styleRule\n    LARGE = this.getSizeStyle(2, 3);\n\n    @styleRule\n    EXTRA_LARGE = this.getSizeStyle(2, 1);\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nclass Utils extends StyleSheet {\n    extraTop = () => this.themeProperties[Device.isMobileDevice() ? \"MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE\" :\n        \"MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\"];\n\n    @styleRule\n    fullHeight = {\n        height: \"100%\",\n    };\n\n    @styleRule\n    hidden = {\n        display: \"hidden\"\n    };\n\n    // Use this class for content that has no space between it and the navbar.\n    @styleRule\n    fullContainer = {\n        width: \"100%\",\n        height: () => \"calc(100% + \" + this.extraTop() + \"px)\",\n        marginTop: () => -this.extraTop()\n    }\n}\n\nGlobalStyle.FlexContainer = FlexContainerStyle.getInstance();\nGlobalStyle.Container = ContainerStyle.getInstance();\nGlobalStyle.Utils = Utils.getInstance();\n\nexport {GlobalStyle};\n","import {UI} from \"./UIBase\";\nimport {BasicLevelStyleSheet, GlobalStyle} from \"./GlobalStyle\";\nimport {Orientation} from \"./Constants\";\nimport {registerStyle} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\n\nclass SimpleStyledElement extends UI.Element {\n    getLevel() {\n        return this.options.level || (this.parent && this.parent.getLevel && this.parent.getLevel());\n    }\n\n    setLevel(level) {\n        this.updateOptions({level});\n    }\n\n    getSize() {\n        return this.options.size || (this.parent && this.parent.getSize && this.parent.getSize());\n    }\n\n    setSize(size) {\n        this.updateOptions({size});\n    }\n}\n\n\nclass IconableInterface extends SimpleStyledElement {\n    render() {\n        return [this.beforeChildren(), this.getLabel(), super.render()];\n    };\n\n    getLabel() {\n        return (this.options.label != null) ? this.options.label : \"\";\n    }\n\n    setLabel(label) {\n        this.updateOptions({label: label});\n    }\n\n    //TODO: this should live in a base iconable class, of which you'd only use this.beforeChildren\n    getFaIcon() {\n        return this.options.faIcon;\n    }\n\n    setFaIcon(value) {\n        this.options.faIcon = value;\n        this.redraw();\n    }\n\n    beforeChildren() {\n        if (!this.getFaIcon()) {\n            return null;\n        }\n        let iconOptions = {\n            className: \"fa fa-\" + this.getFaIcon(),\n        };\n        if (this.getLabel()) {\n            iconOptions.style = {\n                marginRight: \"5px\",\n            }\n        }\n\n        return <span {...iconOptions} />;\n    }\n}\n\nlet labelColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker = {\n        backgroundColor: colors[2],\n        color: colors[6],\n        textDecoration: \"none\",\n    };\n    let regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    return Object.assign({}, regular, {\n        \":hover\": darker,\n        \":hover:disabled\": regular,\n        \":focus\": darker,\n        \":active\": darker,\n    });\n};\n\nexport class LabelStyle extends BasicLevelStyleSheet(labelColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        fontWeight: \"bold\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.07em 0.4em\",\n        borderRadius: \"0.3em\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"bottom\",\n        lineHeight: 4/3 + \"\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.05em 0.2em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.05em 0.2em\",\n    };\n}\n\n\n@registerStyle(LabelStyle)\nclass Label extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet badgeColorToStyle = (color) => {\n    const colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n};\n\nexport class BadgeStyle extends BasicLevelStyleSheet(badgeColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        display: \"inline-block\",\n        padding: \"0.25em 0.55em\",\n        fontWeight: \"700\",\n        lineHeight: \"1\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        backgroundColor: \"#777\",\n        borderRadius: \"0.8em\",\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n\n@registerStyle(BadgeStyle)\nclass Badge extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet progressBarColorToStyle = (color) => {\n    let colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n    };\n};\n\nclass ProgressBarStyle extends BasicLevelStyleSheet(progressBarColorToStyle) {\n    @styleRule\n    container = {\n        height: \"20px\",\n        marginBottom: \"20px\",\n        overflow: \"hidden\",\n        backgroundColor: \"#f5f5f5\",\n        borderRadius: \"4px\",\n        boxShadow: \"inset 0 1px 2px rgba(0, 0, 0, .1)\",\n    };\n\n    @styleRule\n    DEFAULT = [{\n        float: \"left\",\n        width: \"0\",\n        height: \"100%\",\n        lineHeight: \"20px\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        backgroundColor: \"#337ab7\",\n        boxShadow: \"inset 0 -1px 0 rgba(0, 0, 0, .15)\",\n        transition: \"width .6s ease\",\n        fontColor: \"#ffffff\",\n    }, {\n        fontSize: \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)];\n\n    @styleRule\n    striped = {\n        backgroundImage: \"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)\",\n        backgroundSize: \"40px 40px\",\n    };\n\n    @styleRule\n    active = {\n        animation: \"progress-bar-stripes 2s linear infinite\",\n    };\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"8px\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n@registerStyle(ProgressBarStyle)\nclass ProgressBar extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let valueInPercent = (this.options.value || 0) * 100;\n        let orientation = Orientation.HORIZONTAL;\n        if (this.options.hasOwnProperty(\"orientation\")) {\n            orientation = this.options.orientation;\n        }\n        let barStyle;\n        if (orientation === Orientation.HORIZONTAL) {\n            barStyle = {\n                width: valueInPercent + \"%\",\n                height: this.options.height + \"px\",\n            };\n        } else {\n            barStyle = {\n                height: valueInPercent + \"%\",\n                width: \"5px\",\n            }\n        }\n        let barOptions = {\n            className: this.styleSheet.DEFAULT,\n            style: barStyle,\n        };\n\n        if (this.options.disableTransition) {\n            Object.assign(barOptions.style, {\n                transition: \"none\",\n            });\n        }\n\n        if (this.options.level) {\n            barOptions.className += \" \" + this.styleSheet.Level(this.getLevel());\n        }\n        if (this.options.striped) {\n            barOptions.className += \" \" + this.styleSheet.striped;\n        }\n        if (this.options.active) {\n            barOptions.className += \" \" + this.styleSheet.active;\n        }\n        if (this.options.color) {\n            barOptions.style.backgroundColor = this.options.color;\n        }\n\n        return <div {...barOptions}>\n            <span>{this.options.label}</span>\n        </div>;\n    }\n\n    set(value) {\n        if (value < 0)\n            value = 0;\n        else if (value > 1)\n            value = 1;\n        this.options.value = value;\n        this.redraw();\n    }\n}\n\n\nexport {SimpleStyledElement, IconableInterface, Label, Badge, ProgressBar};\n","// TODO: this file existed to hold generic classes in a period of fast prototyping, has a lot of old code\nimport {UI} from \"./UIBase\";\nimport {Device} from \"../base/Device\";\nimport {Draggable} from \"./Draggable\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {getOffset} from \"./Utils\";\nimport {Orientation} from \"./Constants\";\nimport {ProgressBar} from \"./Bootstrap3\";\n\n// A very simple class, all this does is implement the `getTitle()` method\nclass Panel extends UI.Element {\n    getTitle() {\n        return this.options.title;\n    }\n}\n\nclass SlideBar extends Draggable(UI.Element) {\n    getDefaultOptions() {\n        return {\n            value: 0,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"display\", \"inline-block\");\n        attr.setStyle(\"position\", \"relative\");\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getSliderValue() {\n        return this.options.value * this.options.size - (this.options.barSize / 2);\n    }\n\n    render() {\n        return [\n            <ProgressBar ref=\"progressBar\" active=\"true\" value={this.options.value} disableTransition={true}\n                            orientation={this.getOrientation()}\n                            style={Object.assign({\n                                position: \"relative\",\n                            }, this.getProgressBarStyle())}\n            />,\n            <div ref=\"slider\" style={Object.assign({\n                                backgroundColor: \"black\",\n                                position: \"absolute\",\n                            }, this.getSliderStyle())}>\n            </div>\n        ];\n    }\n\n    setValue(value) {\n        value = Math.max(value, 0);\n        value = Math.min(value, 1);\n\n        this.options.value = value;\n        this.progressBar.set(this.options.value);\n        this.slider.setStyle(this.getOrientationAttribute(), this.getSliderValue() + \"px\");\n\n        this.dispatch(\"change\", this.options.value);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    onMount() {\n        this.addDragListener(this.getDragConfig());\n    }\n}\n\nclass HorizontalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.width || 100;\n        options.barSize = options.barSize || options.barWidth || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: \"5px\",\n            width: this.options.size + \"px\",\n            top: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            width: this.options.barSize + \"px\",\n            height: \"20px\",\n            left: this.getSliderValue() + \"px\",\n            top: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"left\";\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventX(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaX / this.options.size);\n            },\n        };\n    }\n}\nclass VerticalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.height || 100;\n        options.barSize = options.barSize || options.barHeight || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: this.options.size + \"px\",\n            width: \"5px\",\n            left: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            height: this.options.barSize + \"px\",\n            width: \"20px\",\n            top: this.getSliderValue() + \"px\",\n            left: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"top\";\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventY(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaY / this.options.size);\n            },\n        };\n    }\n}\n\nclass Link extends UI.Primitive(\"a\") {\n    extraNodeAttributes(attr) {\n        // TODO: do we want this as a default?\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n\n        if (this.options.newTab) {\n            this.options.target = \"_blank\";\n        }\n\n        return options;\n    }\n\n    render() {\n        if (this.options.value) {\n            return [this.options.value];\n        }\n        return super.render();\n    }\n}\n\nclass Image extends UI.Primitive(\"img\") {\n}\n\n// Beware coder: If you ever use this class, you should have a well documented reason\nclass RawHTML extends UI.Element {\n    getInnerHTML() {\n        return this.options.innerHTML || this.options.__innerHTML;\n    }\n\n    redraw() {\n        this.node.innerHTML = this.getInnerHTML();\n        this.applyNodeAttributes();\n        this.applyRef();\n    }\n}\n\nclass ViewportMeta extends UI.Primitive(\"meta\") {\n    getDefaultOptions() {\n        return {\n            scale: this.getDesiredScale(),\n            initialScale: 1,\n            maximumScale: 1,\n        }\n    }\n\n    getDesiredScale() {\n        const MIN_WIDTH = this.options.minDeviceWidth;\n        return (MIN_WIDTH) ? Math.min(window.screen.availWidth, MIN_WIDTH) / MIN_WIDTH : 1;\n    }\n\n    getContent() {\n        let rez = \"width=device-width\";\n        rez += \",initial-scale=\" + this.options.scale;\n        rez += \",maximum-scale=\" + this.options.scale;\n        rez += \",user-scalable=no\";\n        return rez;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setAttribute(\"name\", \"viewport\");\n        attr.setAttribute(\"content\", this.getContent());\n    }\n\n    maybeUpdate() {\n        const desiredScale = this.getDesiredScale();\n        if (desiredScale != this.options.scale) {\n            this.updateOptions({scale: desiredScale});\n        }\n    }\n\n    onMount() {\n        window.addEventListener(\"resize\", () => this.maybeUpdate());\n    }\n}\n\nclass TemporaryMessageArea extends UI.Primitive(\"span\") {\n    getDefaultOptions() {\n        return {\n            margin: 10\n        };\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.value || \"\"}/>];\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        // TODO: nope, not like this\n        attr.setStyle(\"marginLeft\", this.options.margin + \"px\");\n        attr.setStyle(\"marginRight\", this.options.margin + \"px\");\n        return attr;\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.textElement.setValue(value);\n    }\n\n    setColor(color) {\n        this.setStyle(\"color\", color);\n    }\n\n    showMessage(message, color=\"black\", displayDuration=2000) {\n        this.setColor(color);\n        this.clear();\n        this.setValue(message);\n        if (displayDuration) {\n            this.clearValueTimeout = setTimeout(() => this.clear(), displayDuration);\n        }\n    }\n\n    clear() {\n        this.setValue(\"\");\n        if (this.clearValueTimeout) {\n            clearTimeout(this.clearValueTimeout);\n            this.clearValueTimeout = null;\n        }\n    }\n}\n\n// Just putting in a lot of methods, to try to think of an interface\nclass ScrollableMixin extends UI.Element {\n    getDesiredExcessHeightTop() {\n        return 600;\n    }\n\n    getDesiredExcessHeightBottom() {\n        return 600;\n    }\n\n    getHeightScrollPercent() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        if (scrollHeight === height) {\n            return 0;\n        }\n        return this.node.scrollTop / (scrollHeight - height);\n    }\n\n    getExcessTop() {\n        return this.node.scrollTop;\n    }\n\n    getExcessBottom() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        return scrollHeight - height - this.node.scrollTop;\n    }\n\n    haveExcessTop() {\n        return this.getExcessTop() > this.getDesiredExcessHeightTop();\n    }\n\n    haveExcessBottom() {\n        return this.getExcessBottom() > this.getDesiredExcessHeightBottom();\n    }\n\n    popChildTop() {\n        this.eraseChildAtIndex(0);\n    }\n\n    popChildBottom() {\n        this.eraseChildAtIndex(this.children.length - 1);\n    }\n\n    removeExcessTop() {\n        while (this.haveExcessTop()) {\n            this.popChildTop();\n        }\n    }\n\n    removeExcessBottom() {\n        while (this.haveExcessBottom()) {\n            this.popChildBottom();\n        }\n    }\n\n    pushChildTop(element, removeExcessBottom=true) {\n        if (removeExcessBottom) {\n            this.removeExcessBottom();\n        }\n        this.insertChild(element, 0);\n    }\n\n    pushChildBottom(element, removeExcessTop=true) {\n        if (removeExcessTop) {\n            this.removeExcessTop();\n        }\n        this.appendChild(element);\n        this.appendChild(element);\n    }\n\n    saveScrollPosition() {\n        // If at top or bottom, save that\n        // If anywhere in the middle, save the offset of the first child with a positive offset, and keep that constant\n        this.options.scrollTop = this.node.scrollTop;\n        let maxScrollTop = this.node.scrollHeight - this.node.clientHeight;\n        this.options.scrollInfo = {\n            scrollAtTop: (this.options.scrollTop === 0),\n            scrollAtBottom: (this.options.scrollTop === maxScrollTop),\n            // visibleChildrenOffsets: {}\n        };\n    }\n\n    applyScrollPosition() {\n        this.node.scrollTop = this.options.scrollTop || this.node.scrollTop;\n    }\n\n    scrollToHeight(height) {\n        this.node.scrollTop = height;\n    }\n\n    scrollToTop() {\n        this.scrollToHeight(0);\n    }\n\n    scrollToBottom() {\n        this.scrollToHeight(this.node.scrollHeight);\n    }\n};\n\n//TODO: this class would need some binary searches\nclass InfiniteScrollable extends ScrollableMixin {\n    setOptions(options) {\n        options = Object.assign({\n            entries: [],\n            entryComparator: (a, b) => {\n                return a.id - b.id;\n            },\n            firstRenderedEntry: 0,\n            lastRenderedEntry: -1,\n        }, options);\n        super.setOptions(options);\n        // TODO: TEMP for testing\n        this.options.children = [];\n        if (this.options.staticTop) {\n            this.options.children.push(this.options.staticTop);\n        }\n        for (let entry of this.options.entries) {\n            this.options.children.push(this.renderEntry(entry));\n        }\n    }\n\n    getFirstVisibleIndex() {\n    }\n\n    getLastVisibleIndex() {\n    }\n\n    renderEntry(entry) {\n        if (this.options.entryRenderer) {\n            return this.options.entryRenderer(entry);\n        } else {\n            console.error(\"You need to pass option entryRenderer or overwrite the renderEntry method\");\n        }\n    }\n\n    pushEntry(entry) {\n        this.insertEntry(entry, this.options.entries.length);\n    }\n\n    insertEntry(entry, index) {\n        let entries = this.options.entries;\n        if (index == null) {\n            index = 0;\n            while (index < entries.length &&\n                this.options.entryComparator(entries[index], entry) <= 0) {\n                index++;\n            }\n        }\n        entries.splice(index, 0, entry);\n\n        // Adjust to the children\n        if (this.options.staticTop) {\n            index += 1;\n        }\n\n        // TODO: only if in the rendered range, insert in options.children;\n        let uiElement = this.renderEntry(entry);\n        this.insertChild(uiElement, index);\n    }\n}\n\nclass TimePassedSpan extends UI.Primitive(\"span\") {\n    render() {\n        return this.getTimeDeltaDisplay(this.options.timeStamp);\n    }\n\n    getDefaultOptions() {\n        return {\n            style: {\n                color: \"#aaa\"\n            }\n        }\n    }\n\n    getTimeDeltaDisplay(timeStamp) {\n        let timeNow = Date.now();\n        let timeDelta = parseInt((timeNow - timeStamp * 1000) / 1000);\n        let timeUnitsInSeconds = [31556926, 2629743, 604800, 86400, 3600, 60];\n        let timeUnits = [\"year\", \"month\", \"week\", \"day\", \"hour\", \"minute\"];\n        if (timeDelta < 0) {\n            timeDelta = 0;\n        }\n        for (let i = 0; i < timeUnits.length; i += 1) {\n            let value = parseInt(timeDelta / timeUnitsInSeconds[i]);\n            if (timeUnitsInSeconds[i] <= timeDelta) {\n                return value + \" \" + timeUnits[i] + (value > 1 ? \"s\" : \"\") + \" ago\";\n            }\n        }\n        return \"Few seconds ago\";\n    }\n\n    static addIntervalListener(callback) {\n        if (!this.updateFunction) {\n            this.TIME_DISPATCHER = new Dispatchable();\n            this.updateFunction = setInterval(() => {\n                this.TIME_DISPATCHER.dispatch(\"updateTimeValue\");\n            }, 5000);\n        }\n        return this.TIME_DISPATCHER.addListener(\"updateTimeValue\", callback);\n    }\n\n    onMount() {\n        this._updateListener = this.constructor.addIntervalListener(() => {\n            this.redraw();\n        })\n    }\n\n    onUnmount() {\n        this._updateListener && this._updateListener.remove();\n    }\n};\n\n\nexport {Link, Panel, Image, RawHTML, TimePassedSpan, TemporaryMessageArea, SlideBar, VerticalSlideBar,\n    HorizontalSlideBar, ScrollableMixin, InfiniteScrollable, ViewportMeta};","import {StyleSheet, styleRule} from \"../Style\";\n\nclass InputStyle extends StyleSheet {\n    @styleRule\n    inputElement = {\n        transition: \"border-color ease-in-out .15s, box-shadow ease-in-out .15s\",\n        padding: \"0.4em 0.54em\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        fontSize: \"90%\",\n        \":focus\": {\n            outline: \"0\",\n            borderColor: \"#66afe9\",\n            boxShadow: \"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)\",\n        },\n    };\n\n    @styleRule\n    checkboxInput = {\n        marginLeft: \"0.2em\",\n        display: \"inline-block\",\n        width: \"initial !important\",\n        marginRight:\"0.5em\",\n        marginBottom: \"-.1em\",\n        height: \"1em\",\n    };\n\n    @styleRule\n    select = {\n        height: \"2.12em\",\n    };\n}\n\nexport {InputStyle};\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {InputStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n\n@registerStyle(InputStyle)\nclass InputableElement extends UI.Element {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.inputElement);\n    }\n}\n\n\nclass Input extends UI.Primitive(InputableElement, \"input\") {\n    extraNodeAttributes(attr) {\n        let type = this.getInputType();\n        if (type) {\n            attr.setAttribute(\"type\", type);\n        }\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.setValue(this.options.value);\n        }\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    setValue(newValue) {\n        this.node.value = newValue;\n    }\n\n    getInputType() {\n        // Must be overloaded\n        return null;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\nInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"autocomplete\"],\n    [\"autofocus\", {noValue: true}],\n    [\"formaction\"],\n    [\"maxLength\", {domName: \"maxlength\"}],\n    [\"minLength\", {domName: \"minlength\"}],\n    [\"name\"],\n    [\"placeholder\"],\n    [\"readonly\"],\n    [\"required\"],\n    [\"value\"],\n]);\n\n\nclass SubmitInput extends Input {\n    getInputType() {\n        return \"submit\";\n    }\n}\nSubmitInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"formenctype\"],\n    [\"formmethod\"],\n    [\"formnovalidate\"],\n    [\"formtarget\"]\n]);\n\n\nclass TextInput extends Input {\n    getInputType() {\n        return \"text\";\n    }\n}\n\n\nclass NumberInput extends Input {\n    getInputType() {\n        return \"number\";\n    }\n\n    getValue() {\n        let val = super.getValue();\n        return parseInt(val) || parseFloat(val);\n    }\n}\nNumberInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"min\"],\n    [\"max\"],\n    [\"step\"],\n]);\n\n\nclass EmailInput extends Input {\n    getInputType() {\n        return \"email\";\n    }\n}\n\n\nclass PasswordInput extends Input {\n    getInputType() {\n        return \"password\";\n    }\n}\n\n\nclass FileInput extends Input {\n    getInputType() {\n        return \"file\";\n    }\n\n    getFiles() {\n        return this.node.files;\n    }\n\n    getFile() {\n        // TODO: this is valid only if multipleFiles is false\n        return this.getFiles()[0];\n    }\n\n    getAsFormData() {\n        let formData = new FormData();\n        for (let file of this.getFiles()) {\n            formData.append(file.name, file);\n        }\n        return formData;\n    }\n}\nFileInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"multipleFiles\", {domName: \"multiple\", noValue: true}],\n    [\"fileTypes\", {domName: \"accept\"}],\n]);\n\n\nclass CheckboxInput extends Input {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.checkboxInput);\n    }\n\n    getInputType() {\n        return \"checkbox\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nCheckboxInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"checked\", {noValue: true}]\n]);\n\n\nclass RadioInput extends CheckboxInput {\n    getInputType() {\n        return \"radio\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nRadioInput.domAttributesMap = CreateNodeAttributesMap(CheckboxInput.domAttributesMap, [\n    [\"name\"]\n]);\n\n\nclass TextArea extends UI.Primitive(InputableElement, \"textarea\") {\n    applyNodeAttributes() {\n        super.applyNodeAttributes();\n        this.node.readOnly = this.options.readOnly || false;\n    }\n\n    setReadOnly(value) {\n        this.options.readOnly = value;\n        this.node.readOnly = value;\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.node.value = this.options.value + \"\";\n        }\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.node.value = value;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\n\n\nclass Select extends UI.Primitive(InputableElement, \"select\") {\n    render() {\n        this.givenOptions = this.options.options || [];\n        let selectOptions = [];\n\n        for (let i = 0; i < this.givenOptions.length; i += 1) {\n            let options = {\n                key: i\n            };\n            if (this.givenOptions[i] == this.options.selected) {\n                options.selected = true;\n            }\n            selectOptions.push(<option {...options}>{this.givenOptions[i].toString()}</option>);\n        }\n\n        return selectOptions;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.select);\n    }\n\n    get() {\n        let selectedIndex = this.getIndex();\n        return this.givenOptions[selectedIndex];\n    }\n\n    set(value) {\n        for (let i = 0; i < this.givenOptions.length; i++) {\n            if (this.givenOptions[i] === value) {\n                this.setIndex(i);\n                return;\n            }\n        }\n        console.error(\"Can't set the select option \", value, \"\\nAvailable options: \", this.givenOptions);\n    }\n\n    getIndex() {\n        return this.node.selectedIndex;\n    }\n\n    setIndex(index) {\n        this.node.selectedIndex = index;\n        this.options.selected = this.givenOptions[index];\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.selected) {\n            this.set(this.options.selected);\n        }\n    }\n}\n\nexport {InputStyle, Input, SubmitInput, TextInput, NumberInput, EmailInput, PasswordInput, FileInput,\n        CheckboxInput, RadioInput, TextArea, Select};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FormStyle extends StyleSheet {\n    @styleRule\n    form = {\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    formGroup = {\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    formField = {\n        \">label\": {\n            width: \"100%\",\n        },\n        display: \"block\",\n        padding: \"6px 0px\",\n        lineHeight: \"1.42857143\",\n        color: \"#555\",\n        maxWidth: \"600px\",\n        margin: \"0 auto\",\n        \"[disabled]\": {\n            opacity: \"1\",\n            cursor: \"not-allowed\",\n        },\n        \"[readonly]\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    sameLine = {\n        \">label>*:nth-child(1)\": {\n            display: \"inline-block\",\n            textAlign: \"right\",\n            paddingRight: \"1em\",\n            width: \"30%\",\n            verticalAlign: \"middle\",\n        },\n        \">label>*:nth-child(2)\": {\n            display: \"inline-block\",\n            width: \"70%\",\n            verticalAlign: \"middle\",\n        },\n    };\n\n    separatedLineInputStyle = {\n        marginRight: \"0.5em\",\n        width: \"100%\",\n        height: \"2.4em\",\n    };\n\n    @styleRule\n    separatedLine = {\n        padding: \"6px 10px\",\n        \">label>*:nth-child(1)\": {\n            verticalAlign: \"sub\",\n        },\n        \">label>input\": this.separatedLineInputStyle,\n        \">label>select\": this.separatedLineInputStyle,\n        \">label>textarea\": this.separatedLineInputStyle,\n        \">label>input[type='checkbox']\": {\n            marginLeft: \"10px\",\n            verticalAlign: \"middle\",\n        }\n    };\n\n    @styleRule\n    hasError = {\n        color: \"#a94442\",\n    };\n}\n\nexport {FormStyle};\n","import {FormStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FormStyle)\nclass Form extends UI.Primitive(\"form\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.form);\n    }\n\n    onMount() {\n        // Form elements by default refresh the page when a button inside them is clicked, so we prevent that.\n        this.addNodeListener(\"submit\", (event) => event.preventDefault());\n    }\n}\n\n@registerStyle(FormStyle)\nclass FormGroup extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formGroup);\n    }\n\n    setError(errorMessage) {\n        this.errorField.node.textContent = errorMessage;\n        this.addClass(this.styleSheet.hasError);\n    }\n\n    removeError() {\n        this.errorField.node.textContent = \"\";\n        this.removeClass(this.styleSheet.hasError);\n    }\n\n    getErrorField() {\n        return <span ref=\"errorField\" style={{float: \"right\"}}></span>;\n    }\n\n    getChildrenToRender() {\n        return [this.render(), this.getErrorField()];\n    }\n}\n\n\nclass FormField extends FormGroup {\n    inline() {\n        return !(this.options.inline === false ||\n                 (this.parent && this.parent.options && this.parent.options.inline === false));\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formField);\n        if (this.inline()) {\n            attr.addClass(this.styleSheet.sameLine);\n        } else {\n            attr.addClass(this.styleSheet.separatedLine);\n        }\n    }\n\n    getLabel() {\n        if (this.options.label) {\n            return <strong>{this.options.label}</strong>;\n        }\n        return null;\n    }\n\n    render() {\n        if (this.options.contentFirst) {\n            return [<label>{[super.render(),this.getLabel()]}</label>];\n        } else {\n            return [<label>{[this.getLabel(),super.render()]}</label>];\n        }\n    }\n}\n\nexport {Form, FormGroup, FormField};\n","import {NodeAttributes} from \"../NodeAttributes\";\n\n// Setting these attributes as styles in mozilla has no effect.\n// To maintain compatibility between moz and webkit, whenever\n// one of these attributes is set as a style, it is also set as a\n// node attribute.\nconst MozStyleElements = new Set([\"width\", \"height\", \"rx\", \"ry\", \"cx\", \"cy\", \"x\", \"y\"]);\n\nexport class SVGNodeAttributes extends NodeAttributes {\n    fixMozAttributes(node) {\n        if (this.hasOwnProperty(\"style\")) {\n            for (let attributeName of MozStyleElements.values()) {\n                if (this.style.hasOwnProperty(attributeName) && !this.hasOwnProperty(attributeName)) {\n                    this.setAttribute(attributeName, this.style[attributeName], node);\n                }\n            }\n        }\n    }\n\n    setStyle(attributeName, value, node) {\n        super.setStyle(attributeName, value, node);\n        if (MozStyleElements.has(attributeName)) {\n            this.setAttribute(attributeName, value, node);\n        }\n    }\n\n    applyClassName(node) {\n        // SVG elements have a different API for setting the className than regular DOM nodes\n        if (this.className) {\n            node.setAttribute(\"class\", String(this.className));\n        } else {\n            node.removeAttribute(\"class\");\n        }\n    }\n\n    apply(node, attributesMap) {\n        this.transform = this.transform || this.translate;\n        super.apply(node, attributesMap);\n        this.fixMozAttributes(node);\n    }\n}\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {uniqueId} from \"../../base/Utils\";\nimport {SVGNodeAttributes} from \"./SVGNodeAttributes\";\nimport {Device} from \"../../base/Device\";\n\nlet SVG = {};\n\nSVG.Element = class SVGElement extends UI.Element {\n    createNode() {\n        this.node = document.createElementNS(\"http://www.w3.org/2000/svg\", this.getNodeType());\n        if (document.STEM_DEBUG) {\n            this.node.stemElement = this;\n        }\n        return this.node;\n    }\n\n    getScreenCoordinatedForPoint(point) {\n        const node = this.node;\n        // TODO: this is a good argument to always keep a reference to the Stem element in the nodes\n        const svgNode = node.ownerSVGElement || node;\n\n        if (svgNode.createSVGPoint) {\n            // Using native SVG transformations\n            // See https://msdn.microsoft.com/en-us/library/hh535760(v=vs.85).aspx\n            let svgPoint = svgNode.createSVGPoint();\n            svgPoint.x = point.x;\n            svgPoint.y = point.y;\n            return svgPoint.matrixTransform(node.getScreenCTM().inverse());\n        }\n\n        const rect = this.getBoundingClientRect();\n        return {\n        \tx: point.x - rect.left - node.clientLeft,\n        \ty: point.y - rect.top - node.clientTop,\n        };\n    }\n\n    getMouseCoordinatesForEvent(event=window.event) {\n        return this.getScreenCoordinatedForPoint({x: Device.getEventX(event), y: Device.getEventY(event)});\n    }\n\n    saveState() {\n        let state = {};\n        state.options = Object.assign({}, this.options);\n        return state;\n    }\n\n    setState(state) {\n        this.setOptions(state.options);\n    }\n\n    getOptionsAsNodeAttributes() {\n        let attr = this.options;\n        attr.__proto__ = SVGNodeAttributes.prototype;\n        return attr;\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new SVGNodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    translate(x=0, y=0) {\n        this.options.translate = \"translate(\" + x + \",\" + y + \")\";\n    }\n\n    getHashCode() {\n        return uniqueId(this);\n    }\n\n    //TODO(@all) : getBoundingClientRect is unreliable, reimplement it.\n    getBoundingClientRect() {\n        let element = this.node;\n        let x = 0;\n        let y = 0;\n        while(element && element !== document.body) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n            element = element.offsetParent || element.parentNode;\n        }\n        if (element) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n        }\n        let pos = this.node.getBoundingClientRect();\n        return {\n            top: pos.top - y,\n            left: pos.left - x,\n            width: pos.width,\n            bottom: pos.bottom - y,\n            height: pos.height,\n            right: pos.right - x\n        };\n    }\n\n    getBBox() {\n        return this.node.getBBox();\n    }\n\n    getHeight() {\n        return this.getBoundingClientRect().height;\n    }\n\n    getWidth() {\n        return this.getBoundingClientRect().width;\n    }\n\n    toFront() {\n        const parentNode = this.node && this.node.parentElement;\n        if (parentNode) {\n            parentNode.removeChild(this.node);\n            parentNode.appendChild(this.node);\n        }\n    }\n\n    toBack() {\n    }\n\n    setOpacity(newOpacity) {\n        this.options.opacity = newOpacity;\n        if (this.node) {\n            this.node.setAttribute(\"opacity\", newOpacity);\n        }\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"stroke\", color);\n            this.node.setAttribute(\"fill\", color)\n        }\n    }\n\n    remove() {\n    }\n\n    getSvg() {\n        return this.parent.getSvg();\n    }\n};\n\nSVG.Element.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"fill\"],\n    [\"height\"],\n    [\"opacity\"],\n    [\"stroke\"],\n    [\"strokeWidth\", {domName: \"stroke-width\"}],\n    [\"clipPath\", {domName: \"clip-path\"}],\n    [\"transform\"],\n    [\"width\"],\n    [\"cx\"],\n    [\"cy\"],\n    [\"rx\"],\n    [\"ry\"],\n    [\"x\"],\n    [\"y\"],\n    [\"x1\"],\n    [\"y1\"],\n    [\"x2\"],\n    [\"y2\"],\n    [\"offset\"],\n    [\"stopColor\", {domName: \"stop-color\"}],\n    [\"strokeDasharray\", {domName: \"stroke-dasharray\"}],\n    [\"strokeLinecap\", {domName: \"stroke-linecap\"}],\n    [\"viewBox\", {domName: \"viewBox\"}],\n]);\n\nexport {SVG};\n","import {SVG} from \"./SVGBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {UI} from \"../UIBase\";\n\nSVG.Text = class SVGText extends SVG.Element {\n    getNodeType() {\n        return \"text\";\n    }\n\n    getDefaultOptions() {\n        return {\n            text: \"\",\n            fontSize: \"15px\",\n            color: \"black\",\n            dy: \"0.35em\",\n            textAnchor: \"middle\",\n            selectable: false\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        // TODO: For some reason, still selectable in mozilla...\n        if (!this.options.selectable) {\n            attr.setStyle(\"-webkit-user-select\", \"none\");\n            attr.setStyle(\"-khtml-user-select\", \"none\");\n            attr.setStyle(\"-moz-user-select\", \"none\");\n            attr.setStyle(\"-ms-user-select\", \"none\");\n            attr.setStyle(\"user-select\", \"none\");\n        }\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.text + \"\"} />];\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    setText(text) {\n        this.options.text = text;\n        this.textElement.setValue(text + \"\");\n    }\n\n    getText() {\n        return this.options.text;\n    }\n\n    setPosition(x, y) {\n        this.setX(x);\n        this.setY(y);\n    }\n\n    getColor() {\n        return this.options.color;\n    }\n\n    setColor(color, fillOnly=false) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"fill\", color);\n            if (!fillOnly) {\n                this.node.setAttribute(\"stroke\", color);\n            }\n        }\n    }\n};\n\nSVG.Text.domAttributesMap = CreateNodeAttributesMap(SVG.Element.domAttributesMap, [\n    [\"dx\"],\n    [\"dy\"],\n    [\"fontFamily\", {domName: \"font-family\"}],\n    [\"fontSize\", {domName: \"font-size\"}],\n    [\"textAnchor\", {domName: \"text-anchor\"}]\n]);","// TODO: this whole file is mosly here to not break compatibility with pre-Stem code, need refactoring\nexport var EPS = 1e-6;\n\n// Check if a value is equal to zero. Use epsilon check.\nexport var isZero = function (val, epsilon=EPS) {\n    return (Math.abs(val) < epsilon);\n};\n\n// Simulate C/C++ rand() function\nexport var rand = function (mod) {\n    return Math.floor(Math.random() * mod);\n};\n\nexport var equal = function (val1, val2, epsilon=EPS) {\n    return isZero(val1-val2, epsilon);\n};\n\nexport var equalPoints = function (p1, p2, epsilon=EPS) {\n    return isZero(p1.x - p2.x, epsilon) && isZero(p1.y - p2.y, epsilon);\n};\n\n// Compute square of a number\nexport var sqr = function (x) {\n    return x * x;\n};\n\n// Compute the distance between 2 points\nexport var distance = function (p1, p2) {\n    return Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\n};\n\nexport var signedDistancePointLine = function (point, line) {\n    return (line.a * point.x + line.b * point.y + line.c) / Math.sqrt(sqr(line.a) + sqr(line.b));\n};\n\nexport var distancePointLine = function (point, line) {\n    return Math.abs(signedDistancePointLine(point, line));\n};\n\nexport var pointOnSegment = function (point, segmentStart, segmentEnd, epsilon) {\n    epsilon = epsilon || EPS;\n    return Math.abs(distance(point, segmentStart) + distance(point, segmentEnd) -\n        distance(segmentStart, segmentEnd)) <= epsilon;\n};\n\nexport var perpendicularFoot = function (point, line) {\n    var distance = (line.a * point.x + line.b * point.y + line.c) / (sqr(line.a) + sqr(line.b));\n    return {\n        x: point.x - line.a * distance,\n        y: point.y - line.b * distance\n    }\n};\n\nexport var lineEquation = function (A, B) {\n    return {\n        a: B.y - A.y,\n        b: A.x - B.x,\n        c: A.y * B.x - A.x * B.y\n    }\n};\n\n// Compute angle between 2 points in grad\nexport var angleGrad = function (p1, p2) {\n    return gradian(angleRad(p1, p2));\n};\n\n// Transform gradian in radian\nexport var radian = function (angle) {\n    return angle * Math.PI / 180;\n};\n\n// Transform radian in gradian\nexport var gradian = function (angle) {\n    return angle * 180 / Math.PI;\n};\n\n// Compute angle between 2 points in rad\nexport var angleRad = function (p1, p2) {\n    p2 = p2 || {'x': 0, 'y': 0};\n    return Math.atan2(p1.y - p2.y, p1.x - p2.x);\n};\n\n// TODO: lots of these should be methods of the point class, not global functions\nexport var crossProduct = function (p1, p2, p0) {\n    p0 = p0 || {x:0, y:0};\n    return (p1.x - p0.x) * (p2.y - p0.y) - (p1.y - p0.y) * (p2.x - p0.x);\n};\n\nexport var rotatePoint = function (point, orig, angle) {\n    // TODO: WTF, default argument value in the middle of argument list?\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: Math.cos(angle) * (point.x - orig.x) - Math.sin(angle) * (point.y - orig.y) + orig.x,\n        y: Math.sin(angle) * (point.x - orig.x) + Math.cos(angle) * (point.y - orig.y) + orig.y\n    };\n};\n\nexport var translatePoint = function (point, dx, dy) {\n    return {\n        x: point.x + dx,\n        y: point.y + dy\n    };\n};\n\nexport var scalePoint = function (point, orig, sx, sy) {\n    sy = sy || sx;\n    return {\n        x: (point.x - orig.x) * sx + orig.x,\n        y: (point.y - orig.y) * sy + orig.y\n    }\n};\n\nexport var polarToCartesian = function (angle, radius, orig) {\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: radius * Math.cos(angle) + orig.x,\n        y: radius * Math.sin(angle) + orig.y\n    };\n};\n\nexport var circlesIntersection = function (circle1, circle2) {\n    var points;\n    var centerDistance;\n    // TODO(@all) These vars are magic. Find out what they do and add comments\n    var l;\n    var h;\n\n    centerDistance = distance(circle1, circle2);\n    if (centerDistance > circle1.r + circle2.r) {\n        return [];\n    }\n\n    l = (sqr(circle1.r)- sqr(circle2.r) + sqr(centerDistance)) / (2 * centerDistance);\n    if (sqr(circle1.r) - sqr(l) < 0) {\n        return [];\n    }\n\n    h = Math.sqrt(sqr(circle1.r) - sqr(l));\n\n    points = [];\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) + h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) - h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) - h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) + h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n\n    return points;\n};\n\nexport var bound = function (value, minValue, maxValue) {\n    if (value < minValue) {\n        return minValue;\n    }\n    if (value > maxValue) {\n        return maxValue;\n    }\n    return value;\n};\n\nexport var getVector = function (startPoint, endPoint) {\n    return {\n        x: endPoint.x - startPoint.x,\n        y: endPoint.y - startPoint.y\n    };\n};\n\nexport var vectorLength = function (vector) {\n    return distance({x:0, y:0}, vector);\n};\n\nexport var normalizeVector = function (vector) {\n    let len = vectorLength(vector);\n    if (Math.abs(len) < EPS) {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n    return {\n        x: vector.x / len,\n        y: vector.y / len\n    };\n};\n\nexport var scaleVector = function (vector, scalar) {\n    return {\n        x: vector.x * scalar,\n        y: vector.y * scalar\n    };\n};\n\nexport var addVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x + vector2.x,\n        y: vector1.y + vector2.y\n    };\n};\n\nexport var subtractVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x - vector2.x,\n        y: vector1.y - vector2.y\n    };\n};\n\nexport var triangleArea = function (point1, point2, point3) {\n    return 0.5 * Math.abs(crossProduct(point1, point2, point3));\n};\n\nexport var inRange = function (value, minValue, maxValue) {\n    if (isNaN(value)) {\n        return false;\n    }\n    return minValue <= value && value <= maxValue;\n};\n\nexport var interpolationValue = function (interpolationArray, X) {\n    var Y = 0;\n    var aux;\n    var i;\n    var j;\n\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        if (interpolationArray.x === X) {\n           return interpolationArray.y;\n        }\n    }\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        aux = interpolationArray[i].y;\n        for (j = 0; j < interpolationArray.length; j += 1) {\n            if (i !== j) {\n                aux = aux * (X - interpolationArray[j].x) / (interpolationArray[i].x - interpolationArray[j].x);\n            }\n        }\n        Y += aux;\n    }\n\n    return Y;\n};\n","import {SVG} from \"./SVGBase\";\nimport * as math from \"../../math\";\n\nSVG.SVGRoot = class SVGRoot extends SVG.Element {\n    getNodeType() {\n        return \"svg\";\n    }\n\n    getSvg() {\n        return this;\n    }\n};\n\nSVG.RawSVG = class RawSVG extends SVG.SVGRoot {\n    redraw() {\n        super.redraw();\n        this.node.innerHTML = this.options.innerHTML;\n    }\n};\n\nSVG.Group = class SVGGroup extends SVG.Element {\n    getNodeType() {\n        return \"g\";\n    }\n\n    setColor(color) {\n        for (let i = 0; i < this.children.length; i += 1) {\n            this.children[i].setColor(color);\n        }\n    }\n};\n\nSVG.Defs = class SVGDefs extends SVG.Element {\n    getNodeType() {\n        return \"defs\";\n    }\n};\n\nSVG.ClipPath = class ClipPath extends SVG.Element {\n    getNodeType() {\n        return \"clipPath\";\n    }\n};\n\nSVG.Path = class SVGPath extends SVG.Element {\n    getNodeType() {\n        return \"path\";\n    }\n\n    getDefaultOptions() {\n        return {\n            d: \"\"\n        }\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPath());\n        return attr;\n    }\n\n    getPath() {\n        return this.options.d;\n    }\n\n    setPath(newPath) {\n        this.options.d = newPath;\n        this.node.setAttribute(\"d\", this.options.d);\n    }\n\n    getLength() {\n        return this.node.getTotalLength();\n    }\n\n    getPointAtLength(len) {\n        return this.node.getPointAtLength(len);\n    }\n\n    getPointAtLengthWithAngle(len) {\n        let totalLength = this.getLength();\n        let epsilon;\n        if (totalLength <= 1) {\n            epsilon = totalLength / 1000;\n        } else {\n            epsilon = Math.min(totalLength / 1000, Math.log(totalLength), 1);\n        }\n        let p1 = this.getPointAtLength(len);\n        let p2 = this.getPointAtLength(Math.min(len + epsilon, totalLength));\n        let p3 = this.getPointAtLength(Math.max(len - epsilon, 0));\n        return {\n            x: p1.x,\n            y: p1.y,\n            alpha: 180 * Math.atan2(p3.y - p2.y, p3.x - p2.x) / Math.PI\n        };\n    }\n};\n\nSVG.Circle = class SVGCircle extends SVG.Element {\n    getNodeType() {\n        return \"circle\";\n    }\n\n    getDefaultOptions() {\n        return {\n            radius: 0,\n            center: {x: 0, y: 0}\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"r\", this.options.radius);\n        attr.setAttribute(\"cx\", this.options.center.x);\n        attr.setAttribute(\"cy\", this.options.center.y);\n        return attr;\n    }\n\n    getRadius() {\n        return this.options.radius;\n    }\n\n    setRadius(radius) {\n        this.options.radius = radius;\n\n        this.setAttribute(\"r\", radius);\n    }\n\n    setCenter(x, y) {\n        this.options.center.x = x;\n        this.options.center.y = y;\n\n        this.setAttribute(\"cx\", x);\n        this.setAttribute(\"cy\", y);\n    }\n\n    getCenter() {\n        return this.options.center;\n    }\n\n    toPath() {\n        let r = this.options.radius;\n        let cx = this.options.center.x;\n        let cy = this.options.center.y;\n        let pathString = \"M\" + (cx - r) + \" \" + cy +            // Starting point is W\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + (-r) +    // Move to N\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + r +       // Move to E\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + r +    // Move to S\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + (-r);  // Finally, move back to W\n        return new SVG.Path({d: pathString});\n    }\n};\n\nSVG.Stop = class SVGStop extends SVG.Element {\n    getNodeType() {\n        return \"stop\";\n    }\n};\n\nSVG.RadialGradient = class SVGRadialGradient extends SVG.Element {\n    getNodeType() {\n        return \"radialGradient\";\n    }\n};\n\n//TODO Complete this class\nSVG.Ellipse = class SVGEllipse extends SVG.Element {\n    getNodeType() {\n        return \"ellipse\";\n    }\n};\n\nSVG.CircleArc = class SVGCircleArc extends SVG.Path {\n    getPath() {\n        let startAngle = this.options.startAngle;\n        let endAngle = this.options.endAngle;\n        let radius = this.options.radius;\n        let center = this.options.center;\n\n        var angleDiff = endAngle - startAngle + (endAngle < startAngle ? (2 * Math.PI) : 0);\n        var startPoint = math.polarToCartesian(startAngle, radius, center);\n        var endPoint = math.polarToCartesian(endAngle, radius, center);\n        var sweepFlag;\n        var largeArcFlag;\n\n        // Set largeArcFlag and sweepFlag\n        if (angleDiff <= Math.PI) {\n            largeArcFlag = 0;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 0;\n            } else {\n                sweepFlag = 1;\n            }\n        } else {\n            largeArcFlag = 1;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 1;\n            } else {\n                sweepFlag = 0;\n            }\n        }\n\n        return \"M \" + startPoint.x + \" \" + startPoint.y +\n            \" A \" + radius + \" \" + radius + \" 0 \" + largeArcFlag + \" \" + sweepFlag + \" \" +\n            endPoint.x + \" \" + endPoint.y;\n    }\n};\n\nSVG.Rect = class SVGRect extends SVG.Element {\n    getNodeType() {\n        return \"rect\";\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    getWidth() {\n        return this.options.width;\n    }\n\n    setWidth(width) {\n        this.options.width = width;\n        this.node.setAttribute(\"width\", this.options.width);\n    }\n\n    getHeight() {\n        return this.options.height;\n    }\n\n    setHeight(height) {\n        this.options.height = height;\n        this.node.setAttribute(\"height\", this.options.height);\n    }\n};\n\nSVG.Line = class SVGLine extends SVG.Element {\n    getNodeType() {\n        return \"line\";\n    }\n\n    getDefaultOptions() {\n        return {\n            fill: \"black\",\n            stroke: \"black\"\n        };\n    }\n\n    //TODO(@all): Make the getters for x1, y1, x2, y2\n\n    setLine(x1, y1, x2, y2) {\n        this.options.x1 = x1;\n        this.options.y1 = y1;\n        this.options.x2 = x2;\n        this.options.y2 = y2;\n\n        this.setAttribute(\"x1\", x1);\n        this.setAttribute(\"y1\", y1);\n        this.setAttribute(\"x2\", x2);\n        this.setAttribute(\"y2\", y2);\n    }\n};\n\nSVG.Polygon = class Polygon extends SVG.Path {\n    getDefaultOptions() {\n        return {\n            points: []\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPolygonPath());\n        return attr;\n    }\n\n    getPolygonPath() {\n        let pathString = \"\";\n        for (let i = 0; i < this.options.points.length; ++i) {\n            if (i == 0) {\n                pathString += \"M \";\n            }\n            else {\n                pathString += \"L \";\n            }\n            pathString += this.options.points[i].x + \" \" + this.options.points[i].y + \" \";\n        }\n        pathString += \"Z\";\n        return pathString;\n    }\n\n    setPoints(points) {\n        this.options.points = points;\n        this.setPath(this.getPolygonPath());\n    }\n};","import {equal} from \"../math\";\n\nclass Transition {\n    constructor(options) {\n        this.func = options.func;\n        this.context = options.context;\n        this.duration = options.duration || 0;\n        this.startTime = options.startTime || 0;\n        this.dependsOn = options.dependsOn || [];\n        this.speedFactor = 1;\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    hasDependencyOn(t) {\n        for (let transition of this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    setStartTime(time) {\n        this.startTime = time;\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        return this;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += (now - this.pauseTime);\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    forceStart() {\n        this.restart();\n        this.func(0.0, this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(1.0, this.context);\n        this.stop();\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n    }\n\n    restart() {\n        delete this.stopped;\n        return this;\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    nextStep(now=Date.now()) {\n        // Return if transition is stopped\n        if (this.isStopped()) {\n            return this;\n        }\n        this.lastT = this.getFraction(now);\n        // Return if transitions not started yet\n        if (this.lastT < 0) {\n            return this;\n        }\n        // Call the animation function\n        this.func(this.lastT, this.context);\n        // Stop the animation if it's the last step\n        if (this.lastT === 1) {\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime + this.duration / this.speedFactor;\n    }\n}\n\nclass Modifier extends Transition {\n    constructor(options) {\n        super(options);\n        this.reverseFunc = options.reverseFunc;\n        this.context = options.context;\n    }\n\n    // WTF, so basically JSON.stringify??\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"   reverseFunc: \" + this.reverseFunc.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    forceStart() {\n        this.restart();\n        this.reverseFunc(this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(this.context);\n        this.stop();\n        return this;\n    }\n\n    nextStep(now=Date.now()) {\n        if (this.isStopped()) {\n            return this;\n        }\n        if (now >= this.startTime) {\n            this.func(this.context);\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime;\n    }\n}\n\nclass TransitionList {\n    constructor(startTime=0) {\n        this.startTime = startTime;\n        this.speedFactor = 1;\n        this.transitions = [];\n        this.dependsOn = [];\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   transitions: [\" + (this.transitions.length ? this.transitions[0].toString() : \"\") + \" ...]\\n\"+\n                \"}\\n\";\n    }\n\n    add(transition, forceFinish=true) {\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    push(transition, forceFinish=true) {\n        transition.setStartTime(this.getLength());\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    setStartTime(startTime) {\n        let timeDelta = startTime - this.startTime;\n        this.startTime = startTime;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.setStartTime(transition.startTime + timeDelta);\n        }\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.stop();\n        }\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].pause(now);\n            }\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += now - this.pauseTime;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].resume(now);\n            }\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    nextStep() {\n        // Return if transition list is stopped\n        if (this.isStopped()) {\n            return;\n        }\n\n        if (this.onNewFrame) {\n            this.onNewFrame(this.getFraction());\n        }\n\n        let finished = true;\n        let stk = [];\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (!transition.isStopped()) {\n                if (transition.canAdvance()) {\n                    transition.nextStep();\n                    while (stk.length !== 0 && this.transitions[stk[stk.length - 1]].canAdvance()) {\n                        this.transitions[stk[stk.length - 1]].nextStep();\n                        stk.pop();\n                    }\n                } else {\n                    stk.push(i);\n                }\n                finished = false;\n            }\n        }\n        if (finished) {\n            this.stop();\n        }\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            this.transitions[i].setSpeedFactor(speedFactor, now);\n        }\n        return this;\n    }\n\n    restart() {\n        delete this.stopped;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.restart();\n        }\n        this.sortByEndTime();\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    getEndTime() {\n        let endTime = 0;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transitionEndTime = this.transitions[i].getEndTime();\n            if (transitionEndTime > endTime) {\n                endTime = transitionEndTime;\n            }\n        }\n        return endTime;\n    }\n\n    hasDependencyOn(t) {\n        for (let transition in this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    sortByStartTime() {\n        // TODO: this comparator should be global\n        this.transitions.sort((a, b) => {\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return b.startTime - a.startTime;\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return b.getEndTime() - a.getEndTime();\n            }\n            if (a.hasDependencyOn(b)) {\n                return 1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    sortByEndTime() {\n        this.transitions.sort((a, b) => {\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return a.getEndTime() - b.getEndTime();\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return a.startTime - b.startTime;\n            }\n            if (a.hasDependencyOn(b)) {\n                return -1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    forceStart(now=Date.now()) {\n        this.sortByStartTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.startTime <= now) {\n                transition.forceStart(now);\n            }\n        }\n        return this;\n    }\n\n    forceFinish(now=Date.now(), startTime=-1) {\n        this.sortByEndTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.getEndTime() >= startTime) {\n                if (transition instanceof TransitionList) {\n                transition.forceFinish(now, startTime);\n                } else {\n                    if (typeof now === \"undefined\" || transition.getEndTime() < now) {\n                        transition.forceFinish();\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    startAtPercent(startPercent, now=Date.now()) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.restart();\n        // TODO(@wefgef): Buggy\n        let paused = this.pauseTime;\n        if (paused) {\n            this.resume();\n        }\n        this.forceStart(now);\n        this.setStartTime(now - startPercent * this.getLength());\n        this.forceFinish(now);\n        // TODO(@wefgef): Huge hack to deal with force transition\n        this.nextStep();\n        this.nextStep();\n        if (paused) {\n            this.pause();\n        }\n\n        let functionWrapper = () => {\n            if (this.isStopped()) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            this.animationFrameId = requestAnimationFrame(functionWrapper);\n        };\n        this.animationFrameId = requestAnimationFrame(functionWrapper);\n    }\n}\n\nexport {Transition, Modifier, TransitionList};","import {SVG} from \"./SVGBase\";\nimport {Transition} from \"../Transition\";\nimport {Color} from \"../Color\";\n\nSVG.AnimatedSVG = class AnimatedSVG extends SVG.SVGRoot {\n    onMount() {\n        if (this.options.transition) {\n            this.options.transition.setStartTime(Date.now());\n            let animationWrapper = () => {\n                if (this.options.transition.isStopped()) {\n                    if (this.options.repeat) {\n                        this.options.transition.setStartTime(Date.now());\n                        this.options.transition.restart();\n                        requestAnimationFrame(animationWrapper);\n                    }\n                    return;\n                }\n                if (!this.options.transition.pauseTime) {\n                    this.options.transition.nextStep();\n                }\n                requestAnimationFrame(animationWrapper);\n            };\n            requestAnimationFrame(animationWrapper);\n        }\n    }\n};\n\nSVG.Element.prototype.blinkTransition = function (options) {\n    let config = {\n        duration: 2000,\n        times: 2,\n        firstColor: \"grey\",\n        secondColor: \"black\",\n        executeLastStep: true,\n        startTime: 0,\n        dependsOn: []\n    };\n    Object.assign(config, options);\n    return new Transition({\n        func: (t, context) => {\n            if (t > 1 - context.interval && !context.executeLastStep) {\n                this.setColor(context.firstColor);\n            } else {\n                this.setColor(Math.floor((1 - t) / context.interval) % 2 === 1 ? context.firstColor : context.secondColor);\n            }\n        },\n        context: {\n            firstColor: config.firstColor,\n            secondColor: config.secondColor,\n            interval: 1 / (2 * config.times),\n            executeLastStep: config.executeLastStep\n        },\n        duration: config.duration,\n        startTime: config.startTime,\n        dependsOn: config.dependsOn\n    });\n};\nSVG.Element.prototype.changeOpacityTransition = function(opacity, duration, dependsOn=[], startTime=0) {\n    if (!this.options.hasOwnProperty(\"opacity\")) {\n        this.options.opacity = 1;\n    }\n    return new Transition({\n        func: (t, context) => {\n            this.setOpacity((1 - t) * context.opacity + t * opacity);\n        },\n        context: {\n            opacity: this.options.opacity\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};\nSVG.Element.prototype.changeColorTransition = function(color, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setColor(Color.interpolate(context.color, color, t));\n            },\n            context: {\n                color: this.getColor()\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\n\nSVG.Text.prototype.moveTransition = function(coords, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setPosition(\n                    (1 - t) * context.x + t * coords.x,\n                    (1 - t) * context.y + t * coords.y\n                );\n            },\n            context: {\n                x: this.options.x,\n                y: this.options.y\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\nSVG.Text.prototype.changeFillTransition = function(color, duration, dependsOn=[], startTime=0) {\n    return new Transition({\n        func: (t, context) => {\n            this.setColor(Color.interpolate(context.color, color, t), true);\n        },\n        context: {\n            color: this.getColor()\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};","import {UI} from \"./UIBase\";\nimport {GlobalStyle} from \"./GlobalStyle\";\n\nclass Switcher extends UI.Element {\n    constructor(options) {\n        super(options);\n        this.childMap = new WeakMap();\n        this.numRedraws = 0;\n    }\n\n    getDefaultOptions() {\n        return {\n            fullHeight: false,\n            preserveScroll: true,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.fullHeight) {\n            attr.addClass(GlobalStyle.Utils.fullHeight);\n        }\n    }\n\n    copyState(element) {\n        let options = Object.assign({}, element.options, {\n            children: this.overwriteElements(this.options.children || [], element.options.children || []),\n        });\n\n        this.setOptions(options);\n\n        for (let child of this.options.children) {\n            if (child.options.active) {\n                this.activeChild = child;\n            }\n        }\n    }\n\n    render() {\n        return this.activeChild || this.options.children[0];\n    }\n\n    overwriteElements(existingElements, newElements) {\n        let keyMap = this.getElementKeyMap(existingElements) || new Map();\n        for (let i = 0; i < newElements.length; i += 1) {\n            let newChild = newElements[i];\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = keyMap.get(newChildKey);\n            if (existingChild === newChild) {\n                continue;\n            }\n            if (existingChild && newChild.canOverwrite(existingChild)) {\n                newElements[i] = newChild = this.overwriteChild(existingChild, newChild);\n            }\n        }\n        return newElements;\n    }\n\n    redraw() {\n        this.numRedraws += 1;\n\n        //basic things for our current node\n        this.applyNodeAttributes();\n        this.applyRef();\n\n        // This render may be required to update this.options.children\n        UI.renderingStack.push(this);\n        this.render();\n        UI.renderingStack.pop();\n\n        if (this.options.children.length == 0) {\n            return;\n        }\n\n        for (let child of this.options.children) {\n            if (this.options.lazyRender) {\n                this.getChildProperties(child).isUpToDate = false;\n                child.applyRef();\n            } else {\n                this.updateChild(child);\n            }\n        }\n\n        this.updateActiveChild(this.activeChild || this.options.children[0]);\n    }\n\n    getChildProperties(child) {\n        if (!this.childMap.has(child)) {\n            this.childMap.set(child, {\n                isMounted: !!child.node,\n                redrawIndex: -1,\n            });\n        }\n        return this.childMap.get(child);\n    }\n\n    updateChild(child) {\n        if (this.getChildProperties(child).redrawIndex < this.numRedraws) {\n            if (!child.node) {\n                child.mount(this);\n            } else {\n                child.redraw();\n            }\n            this.getChildProperties(child).redrawIndex = this.numRedraws;\n        }\n    }\n\n    appendChild(child, doMount=false) {\n        this.options.children.push(child);\n        if (doMount) {\n            child.mount(this);\n        }\n        if (this.options.children.length == 1) {\n            this.setActive(child);\n        }\n        return child;\n    }\n\n    getActive() {\n        return this.activeChild;\n    }\n\n    insertChildNodeBefore(child, nextSibling) {\n        let childProperties = this.getChildProperties(child);\n        childProperties.isMounted = true;\n        childProperties.redrawIndex = this.numRedraws;\n    }\n\n    updateActiveChild(element) {\n        while (this.node.firstChild) {\n            //TODO: would be useful here to be able to access the matching UI Element\n            this.node.removeChild(this.node.firstChild);\n        }\n\n        if (element == null) {\n            this.activeChild = null;\n            return;\n        }\n\n        this.updateChild(element);\n\n        this.node.appendChild(element.node);\n        this.children[0] = this.activeChild = element;\n    }\n\n    deactivateChild(child) {\n        child.dispatch(\"hide\");\n        child.dispatch(\"setActive\", false);\n        if (this.options.preserveScroll) {\n            this.getChildProperties(child).scrollTop = this.node.scrollTop;\n        }\n    }\n\n    activateChild(child) {\n        child.dispatch(\"setActive\", true);\n        child.dispatch(\"show\");\n        if (this.options.preserveScroll) {\n            this.node.scrollTop = this.getChildProperties(child).scrollTop || 0;\n        }\n    }\n\n    setActive(element) {\n        if (this.activeChild === element) {\n            return;\n        }\n        if (this.activeChild) {\n            this.deactivateChild(this.activeChild);\n        }\n        this.updateActiveChild(element);\n        if (this.activeChild) {\n            this.activateChild(this.activeChild);\n        }\n    }\n\n    hasChild(element) {\n        return this.childMap.has(element);\n    }\n\n    onMount() {\n        this.addListener(\"shouldRedrawChild\", (event) => {\n            if (event.child.isInDocument()) {\n                event.child.redraw();\n            } else {\n                this.getChildProperties(event.child).isUpToDate = false;\n            }\n        });\n    }\n}\n\nexport {Switcher};\n","import {UI} from \"./UIBase\";\nimport {Switcher} from \"./Switcher\";\nimport {Dispatcher} from \"../base/Dispatcher\";\nimport {PageTitleManager} from \"../base/PageTitleManager\";\nimport {unwrapArray} from \"../base/Utils\";\n\nexport class Router extends Switcher {\n    static parseURL(path=location.pathname) {\n        if (!Array.isArray(path)) {\n            path = path.split(\"/\");\n        }\n        return path.filter(str => str != \"\");\n    }\n\n    static joinURLParts(urlParts) {\n        if (urlParts.length) {\n            return \"/\" + urlParts.join(\"/\") + \"/\";\n        } else {\n            return \"/\";\n        }\n    }\n\n    static changeURL(url, replaceHistory=false) {\n        if (Array.isArray(url)) {\n            url = this.joinURLParts(url);\n        }\n\n        if (url === window.location.pathname) {\n            return;\n        }\n        const historyArgs = [{}, PageTitleManager.getTitle(), url];\n        if (replaceHistory) {\n            window.history.replaceState(...historyArgs);\n        } else {\n            window.history.pushState(...historyArgs);\n        }\n\n        this.updateURL();\n    }\n\n    static updateURL() {\n        this.Global.setURL(this.parseURL());\n    }\n\n    static setGlobalRouter(router) {\n        this.Global = router;\n        window.onpopstate = () => {\n            this.updateURL();\n            Dispatcher.Global.dispatch(\"externalURLChange\");\n        };\n\n        this.updateURL();\n    }\n\n    // TODO: should be named getRootRoute() :)\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getPageNotFound() {\n        const element = UI.createElement(\"h1\", {children: [\"Can't find url, make sure you typed it correctly\"]});\n        element.pageTitle = \"Page not found\";\n        return element;\n    }\n\n    setURL(urlParts) {\n        urlParts = unwrapArray(urlParts);\n\n        const page = this.getRoutes().getPage(urlParts) || this.getPageNotFound();\n\n        const activePage = this.getActive();\n\n        if (activePage !== page) {\n            activePage && activePage.dispatch(\"urlExit\");\n            this.setActive(page);\n            page.dispatch(\"urlEnter\");\n        }\n\n        if (this === this.constructor.Global) {\n            PageTitleManager.setTitle(page.pageTitle);\n        }\n\n        this.dispatch(\"change\", urlParts, page, activePage);\n    }\n\n    addChangeListener(callback) {\n        return this.addListener(\"change\", callback);\n    }\n\n    onMount() {\n        if (!Router.Global) {\n            this.constructor.setGlobalRouter(this);\n        }\n    }\n}\n\nexport class Route {\n    static ARG_KEY = \"%s\";\n    cachedPages = new Map();\n\n    constructor(expr, pageGenerator, subroutes=[], options={}) {\n        this.expr = (expr instanceof Array) ? expr : [expr];\n        this.pageGenerator = pageGenerator;\n        this.subroutes = unwrapArray(subroutes);\n        if (typeof options === \"string\") {\n            options = {title: options}\n        }\n        this.options = options;\n        this.cachedPages = new Map();\n    }\n\n    matches(urlParts) {\n        if (urlParts.length < this.expr.length) {\n            return null;\n        }\n        let args = [];\n        for (let i = 0; i < this.expr.length; i += 1) {\n            const isArg = this.expr[i] === this.constructor.ARG_KEY;\n            if (urlParts[i] != this.expr[i] && !isArg) {\n                return null;\n            }\n            if (isArg) {\n                args.push(urlParts[i]);\n            }\n        }\n        return {\n            args: args,\n            urlParts: urlParts.slice(this.expr.length)\n        }\n    }\n\n    getPageTitle() {\n        return this.options.title;\n    }\n\n    generatePage(...argsArray) {\n        if (!this.pageGenerator) {\n            return null;\n        }\n\n        const serializedArgs = argsArray.toString();\n        if (!this.cachedPages.has(serializedArgs)) {\n            const pageGenerator = this.pageGenerator;\n            const args = unwrapArray(argsArray);\n            const generatorArgs = {args, argsArray};\n            const page = (pageGenerator.prototype instanceof UI.Element) ? new pageGenerator(generatorArgs) : pageGenerator(generatorArgs);\n            if (!page.pageTitle) {\n                const myPageTitle = this.getPageTitle();\n                if (myPageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n            }\n            this.cachedPages.set(serializedArgs, page);\n        }\n        return this.cachedPages.get(serializedArgs);\n    }\n\n    matchesOwnNode(urlParts) {\n        return urlParts.length === 0;\n    }\n\n    getPage(urlParts, router, ...argsArray) {\n        if (this.matchesOwnNode(urlParts)) {\n            return this.generatePage(...argsArray);\n        }\n        for (const subroute of this.subroutes) {\n            const match = subroute.matches(urlParts);\n            if (match) {\n                if (match.args.length) {\n                    argsArray.push(match.args);\n                }\n                let page = subroute.getPage(match.urlParts, router, ...argsArray);\n                if (page && !page.pageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n                return page;\n            }\n        }\n    }\n}\n\nexport class TerminalRoute extends Route {\n    constructor(expr, pageGenerator, options={}) {\n        super(expr, pageGenerator, [], options);\n    }\n\n    matchesOwnNode(urlParts) {\n        return true;\n    }\n\n    getPage(urlParts, router) {\n        const page = super.getPage(...arguments);\n        setTimeout(() => {\n            page.setURL(urlParts);\n        });\n        return page;\n    }\n}\n","import {UI} from \"./UIBase\";\n\n// This is the object that will be used to translate text\nlet translationMap = null;\n\n// Keep a set of all UI Element that need to be updated when the language changes\n// Can't use a weak set here unfortunately because we need iteration\n// That's why we must make sure to remove all nodes from the set when destroying them\nUI.TranslationElements = new Set();\n\nUI.TranslationTextElement = class TranslationTextElement extends UI.TextElement {\n    constructor(value) {\n        if (arguments.length === 1) {\n            super(value);\n        } else {\n            super(\"\");\n            this.setValue(...arguments);\n        }\n    }\n\n    setValue(value) {\n        if (arguments.length > 1) {\n            this.value = Array.from(arguments);\n        } else {\n            this.value = value;\n        }\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    evaluateSprintf(str, ...values) {\n        throw Error(\"Not yet implemented\");\n    }\n\n    evaluate(strings, ...values) {\n        if (!Array.isArray(strings)) {\n            return this.evaluateSprintf(...arguments);\n            // This means strings is a string with the sprintf pattern\n        } else {\n            // Using template literals https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals\n            if (arguments.length != strings.length) {\n                console.error(\"Invalid arguments to evaluate \", Array.from(arguments));\n            }\n            let result = strings[0];\n            for (let i = 1; i < arguments.length; i++) {\n                result += arguments[i];\n                result += strings[i];\n            }\n            return result;\n        }\n    }\n\n    getValue() {\n        let value = this.value;\n        if (Array.isArray(this.value)) {\n            value = (translationMap && translationMap.get(...value)) || this.evaluate(...value);\n        } else {\n            // TODO: if translationMap.get() returns \"\", keep, skip only if returning null\n            value = (translationMap && translationMap.get(value)) || value;\n        }\n        return value;\n    }\n\n    onMount() {\n        UI.TranslationElements.add(this);\n    }\n\n    onUnmount() {\n        UI.TranslationElements.delete(this);\n    }\n};\n\n// This method is a shorthand notation to create a new translatable text element\n// TODO: should also support being used as a string template\nUI.T = (str) => {\n    return new UI.TranslationTextElement(str);\n};\n\n// TODO @mciucu this should be wrapped in a way that previous requests that arrive later don't get processed\n// TODO: should this be done with promises?\n// Function to be called with a translation map\n// The translationMap object needs to implement .get(value) to return the translation for value\nfunction setTranslationMap(_translationMap) {\n    if (translationMap === _translationMap) {\n        return;\n    }\n    translationMap = _translationMap;\n    for (let textElement of UI.TranslationElements.values()) {\n        textElement.redraw();\n    }\n}\n\nlet languageStore = null;\n\n// This function should be called to set the language store to watch for changes\n// The languageStore argumenent needs to implement .getLocale(), addListener(\"localChange\", (language) =>{})\n// The language objects need to implement .buildTranslation(callback), where callback should be called with a translationMap\nfunction setLanguageStore(_languageStore) {\n    languageStore = _languageStore;\n\n    let currentLocale = languageStore.getLocale();\n    // If there's a default language already set, build the translation table for it\n    if (currentLocale) {\n        currentLocale.buildTranslation(setTranslationMap);\n    }\n\n    // Add a listener for whenever the language changes\n    languageStore.addListener(\"localeChange\", (language) => {\n        language.buildTranslation(setTranslationMap);\n    });\n}\n\nfunction getTranslationMap() {\n    return translationMap;\n}\n\nexport {setLanguageStore, setTranslationMap, getTranslationMap};\n","import {StyleSheet, styleRule} from \"../Style\";\nimport {enhance} from \"../Color\";\nimport {Device} from \"../../base/Device\";\n\n\n\nexport class HorizontalOverflowStyle extends StyleSheet {\n    baseColor = () =>  this.themeProperties.COLOR_PRIMARY;\n    arrowColor = () => enhance(this.baseColor(), .8);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), 1);\n    arrowHoverBackground = () => enhance(this.baseColor(), -.3);\n\n    transitionTime = .15;\n\n    arrow = {\n        zIndex: \"1\",\n        alignItems: \"center\",\n        padding: \".3em\",\n        fontSize: \"150% !important\",\n        height: \"100%\",\n        position: \"absolute\",\n        cursor: \"pointer\",\n        top: 0,\n        color: () => this.arrowColor(),\n        backgroundColor: () => this.arrowBackground(),\n        \":hover\": {\n            color: () => this.arrowHoverColor(),\n            backgroundColor: () => this.arrowHoverBackground(),\n        }\n    };\n\n    @styleRule\n    leftArrow = Object.assign({}, this.arrow, {\n        left: 0,\n        borderRight: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    rightArrow = Object.assign({}, this.arrow, {\n        right: 0,\n        borderLeft: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    horizontalOverflow = {\n        position: \"relative\",\n        width: \"100%\",\n        \">:first-child\": {\n            display: \"flex\",\n        },\n        \">:last-child\": {\n            display: \"flex\",\n        },\n    };\n\n    @styleRule\n    childrenContainer = {\n        width: \"100%\",\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    swipeAnimation = {\n        transition: \"margin-left \" + this.transitionTime + \"s ease\",\n    };\n\n    @styleRule\n    hiddenArrow = {\n        display: \"none !important\",\n    };\n\n    @styleRule\n    pusherContainer = {\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        position: \"relative\",\n        display: \"flex\",\n        width: \"100%\",\n    }\n}\n","import {enhance} from \"Color\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\nimport {HorizontalOverflowStyle} from \"../horizontal-overflow/Style\";\n\nclass BaseTabAreaStyle extends StyleSheet {\n    @styleRule\n    tab = {\n        userSelect: \"none\",\n        display: \"inline-block\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    activeTab = {};\n\n    @styleRule\n    nav = {\n        listStyle: \"none\",\n    };\n\n    @styleRule\n    switcher = {\n        flex: \"1\",\n        overflow: \"auto\",\n    };\n\n    @styleRule\n    tabArea = {\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nclass DefaultTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        marginBottom: \"-1px\",\n        textDecoration: \"none !important\",\n        marginRight: \"2px\",\n        lineHeight: \"1.42857143\",\n        border: \"1px solid transparent\",\n        borderRadius: \"4px 4px 0 0\",\n        padding: \"8px\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        \":hover\": {\n            cursor: \"pointer\",\n            backgroundColor: \"#eee\",\n            color: \"#555\",\n            border: \"1px solid #ddd\",\n            borderBottomColor: \"transparent\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: \"#555 !important\",\n        cursor: \"default !important\",\n        backgroundColor: \"#fff !important\",\n        border: \"1px solid #ddd !important\",\n        borderBottomColor: \"transparent !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        borderBottom: \"1px solid #ddd\",\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n    };\n}\n\nclass MinimalistTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        lineHeight: \"1.42857143\",\n        paddingTop: \"6px\",\n        paddingLeft: \"8px\",\n        paddingRight: \"8px\",\n        paddingBottom: \"4px\",\n        color: \"#666\",\n        borderBottom: \"2px solid transparent\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: \"rgba(51,122,183,1)\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        fontWeight: \"bold\",\n        color: \"rgba(51,122,183,1)\",\n        cursor: \"default !important\",\n        borderBottom: \"2px solid rgba(51,122,183,1) !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        position: \"relative\",\n        borderBottom: \"1px solid #aaa\",\n    };\n}\n\nclass FlatTabAreaStyle extends BaseTabAreaStyle {\n    transitionTime = .3;\n\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        padding: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES,\n        letterSpacing: \"0.5px\",\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.4) + \"!important\",\n        fontWeight: \"bold\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.6) + \"!important\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.8) + \"!important\",\n        cursor: \"default !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        whiteSpace: \"nowrap\",\n        position: \"relative\",\n        paddingTop: \"4px\",\n        backgroundColor: () => this.themeProperties.COLOR_FOREGROUND_BODY,\n    };\n\n    @styleRule\n    activeBar = {\n        height: 3,\n        backgroundColor: () => this.themeProperties.COLOR_PRIMARY,\n        position: \"absolute\",\n        left: 0,\n        bottom: 0,\n    };\n\n    @styleRule\n    activeBarAnimated = {\n        transition: `${this.transitionTime}s width, ${this.transitionTime}s left`,\n    };\n\n    @styleRule\n    activeOnRender = {\n        paddingBottom: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES - 3,\n        borderBottom: () => \"3px solid \" + this.themeProperties.COLOR_PRIMARY,\n    };\n}\n\nclass FlatTabAreaHorizontalOverflowStyle extends HorizontalOverflowStyle {\n    baseColor = () => this.themeProperties.COLOR_FOREGROUND_BODY;\n    arrowColor = () => enhance(this.baseColor(), .4);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), .8);\n    arrowHoverBackground = () => enhance(this.baseColor(), .1);\n}\n\nexport {BaseTabAreaStyle, DefaultTabAreaStyle, MinimalistTabAreaStyle, FlatTabAreaStyle,\n    FlatTabAreaHorizontalOverflowStyle};\n","import {UI} from \"../UIBase\";\nimport {Switcher} from \"../Switcher\";\nimport {Link} from \"../UIPrimitives\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {DefaultTabAreaStyle, FlatTabAreaStyle} from \"./Style\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\nclass BasicTabTitle extends Link {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tab);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.activeTab);\n        }\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    canOverwrite(existingElement) {\n        // Disable reusing with different panels, since we want to attach listeners to the panel\n        return super.canOverwrite(existingElement) && this.options.panel === existingElement.options.panel;\n    }\n\n    setActive(active) {\n        this.options.active = active;\n        this.redraw();\n        if (active) {\n            this.options.activeTabDispatcher.setActive(this.getPanel(), () => {\n                this.setActive(false);\n            });\n        }\n    }\n\n    getPanel() {\n        return this.options.panel;\n    }\n\n    getTitle() {\n        if (this.options.title) {\n            return this.options.title;\n        }\n        let panel = this.getPanel();\n        if (typeof panel.getTitle === \"function\") {\n            return panel.getTitle();\n        }\n        return panel.options.title;\n    }\n\n    render() {\n        return [this.getTitle()];\n    }\n\n    onMount() {\n        super.onMount();\n\n        if (this.options.active) {\n            this.setActive(true);\n        }\n\n        this.addClickListener(() => {\n            this.setActive(true);\n        });\n\n        if (this.options.panel && this.options.panel.addListener) {\n            this.attachListener(this.options.panel, \"show\", () => {\n                this.setActive(true);\n            });\n        }\n    }\n}\n\n\nclass TabTitleArea extends UI.Element {\n}\n\n\n@registerStyle(DefaultTabAreaStyle)\nclass TabArea extends UI.Element {\n    activeTabDispatcher = new SingleActiveElementDispatcher();\n\n    getDefaultOptions() {\n        return {\n            autoActive: true, // means the first Tab will be automatically selected\n            // lazyRender: true, // TODO: should be true by default\n            panelClass: null, // Custom css class can be added to panels\n            titleAreaClass: null, // Custom css class can be added to title area\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tabArea);\n    }\n\n    createTabPanel(panel) {\n        let tab = <BasicTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                 active={panel.options.active} href={panel.options.tabHref}\n                                 styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n\n    appendChild(panel, doMount) {\n        let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n        this.options.children.push(panel);\n\n        this.titleArea.appendChild(tabTitle);\n        this.switcherArea.appendChild(tabPanel, doMount || !this.options.lazyRender);\n    };\n\n    getTitleArea(tabTitles) {\n        let titleAreaClass = this.styleSheet.nav;\n        if (this.options.titleAreaClass) {\n            titleAreaClass += \" \" + this.options.titleAreaClass;\n        }\n        return <TabTitleArea ref=\"titleArea\" className={titleAreaClass}>\n            {tabTitles}\n        </TabTitleArea>;\n    }\n\n    getSwitcher(tabPanels) {\n        let switcherClass = this.styleSheet.switcher;\n        if (this.options.panelClass) {\n            switcherClass += \" \" + this.options.panelClass;\n        }\n        return <Switcher className={switcherClass} ref=\"switcherArea\" lazyRender={this.options.lazyRender}>\n            {tabPanels}\n        </Switcher>;\n    }\n\n    getChildrenToRender() {\n        let tabTitles = [];\n        let tabPanels = [];\n        let activeTab;\n\n        for (const panel of unwrapArray(this.render())) {\n            let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n            if (this.activePanel === tabPanel) {\n                activeTab = tabTitle;\n            }\n\n            tabTitles.push(tabTitle);\n            tabPanels.push(tabPanel);\n        }\n\n        if (!activeTab) {\n            for (const tabTitle of tabTitles) {\n                if (tabTitle.options.active) {\n                    activeTab = tabTitle;\n                }\n            }\n        } else {\n            for (let i = 0; i < tabPanels.length; i += 1) {\n                const tabTitle = tabTitles[i];\n                const tabPanel = tabPanels[i];\n\n                if (tabTitle.options.active) {\n                    tabTitle.options.active = false;\n                }\n                if (tabPanels.options.active) {\n                    tabPanels.options.active = false;\n                }\n\n                if (activeTab === tabTitle) {\n                    tabPanel.options.active = true;\n                    tabTitle.options.active = true;\n                }\n            }\n        }\n\n        if (this.options.autoActive && !activeTab && tabTitles.length > 0) {\n            tabTitles[0].options.active = true;\n        }\n\n        return [\n            this.getTitleArea(tabTitles),\n            this.getSwitcher(tabPanels),\n        ];\n    };\n\n    setActive(panel) {\n        this.activeTabDispatcher.setActive(panel);\n    }\n\n    getActive() {\n        return this.activeTabDispatcher.getActive();\n    }\n\n    onSetActive(panel) {\n        this.switcherArea.setActive(panel);\n        this.activePanel = panel;\n    }\n\n    onMount() {\n        this.attachListener(this.activeTabDispatcher, (panel) => {\n            this.onSetActive(panel);\n        });\n\n        this.addListener(\"resize\", () => {\n            this.switcherArea.dispatch(\"resize\");\n        });\n    }\n}\n\nexport * from \"./Style\";\nexport {TabTitleArea, BasicTabTitle, TabArea};\n","// Contains classes to abstract some generic Font Awesome usecases.\nimport {UI} from \"./UIBase\";\nimport {Direction} from \"./Constants\";\n\nclass FAIcon extends UI.Primitive(\"i\") {\n    getIcon() {\n        return this.options.icon;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(\"fa\");\n        attr.addClass(\"fa-\" + this.getIcon());\n        if (this.options.size) {\n            attr.addClass(\"fa-\" + this.options.size);\n        }\n    }\n\n    setIcon(icon) {\n        this.options.icon = icon;\n        this.redraw();\n    }\n}\n\nclass FACollapseIcon extends FAIcon {\n    getIcon() {\n        if (this.options.collapsed) {\n            return \"angle-right\";\n        } else {\n            return \"angle-down\";\n        }\n    }\n\n    setCollapsed(collapsed) {\n        this.options.collapsed = collapsed;\n        this.redraw();\n    }\n\n    toggleCollapsed() {\n        this.setCollapsed(!this.options.collapsed);\n    }\n}\n\nclass FASortIcon extends FAIcon {\n    getIcon() {\n        if (this.options.direction === Direction.UP) {\n            return \"sort-asc\";\n        } else if (this.options.direction === Direction.DOWN){\n            return \"sort-desc\";\n        } else {\n            return \"sort\";\n        }\n    }\n\n    setDirection(direction) {\n        this.options.direction = direction;\n        this.redraw();\n    }\n}\n\nexport {FAIcon, FACollapseIcon, FASortIcon};\n","import {UI} from \"../UIBase\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {registerStyle} from \"../style/Theme\";\nimport {HorizontalOverflowStyle} from \"./Style\";\n\n\n\n@registerStyle(HorizontalOverflowStyle)\nexport class HorizontalOverflow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            swipePercent: .5,\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.horizontalOverflow);\n    }\n\n    getChildrenToRender() {\n        return [\n            <FAIcon ref=\"leftArrow\" icon=\"chevron-left\" className={`${this.styleSheet.leftArrow} ${this.styleSheet.hiddenArrow}`}/>,\n            <div ref=\"childrenContainer\" className={this.styleSheet.childrenContainer}>\n                <div ref=\"swipeHelperChild\"/>\n                <div ref=\"pusherContainer\" className={this.styleSheet.pusherContainer}>\n                    {this.render()}\n                </div>\n            </div>,\n            <FAIcon ref=\"rightArrow\" icon=\"chevron-right\" className={`${this.styleSheet.rightArrow} ${this.styleSheet.hiddenArrow}`}/>\n        ];\n    }\n\n    appendChild(...args) {\n        this.pusherContainer.appendChild(...args);\n    }\n\n    eraseChild(...args) {\n        this.pusherContainer.eraseChild(...args);\n    }\n\n    checkForOverflow() {\n        const children = this.pusherContainer.children;\n\n        if (!children.length) {\n            return;\n        }\n\n        let shouldOverflowRight = false;\n        let shouldOverflowLeft = false;\n\n        const elementRect = this.node.getBoundingClientRect();\n\n        for (let child of children) {\n            const childRect = child.node.getBoundingClientRect();\n            shouldOverflowRight |= elementRect.left + elementRect.width < childRect.left + childRect.width - 1;\n            shouldOverflowLeft |= elementRect.left > childRect.left;\n        }\n\n        const leftArrowHidden = !this.leftArrow.getWidth();\n        if (shouldOverflowLeft && leftArrowHidden) {\n            this.leftArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowLeft && !leftArrowHidden) {\n            this.leftArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n\n        const rightArrowHidden = !this.rightArrow.getWidth();\n        if (shouldOverflowRight && rightArrowHidden) {\n            this.rightArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowRight && !rightArrowHidden) {\n            this.rightArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n    }\n\n    scrollContent(amount) {\n        let scrollLeft;\n        const containerNode = this.pusherContainer.node;\n        if (amount < 0) {\n            scrollLeft = Math.max(0, containerNode.scrollLeft + amount * this.getWidth());\n        } else {\n            scrollLeft = Math.min(containerNode.scrollWidth - this.getWidth(), containerNode.scrollLeft + amount * this.getWidth());\n        }\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", scrollLeft - containerNode.scrollLeft);\n            containerNode.scrollLeft = scrollLeft;\n        }\n\n        this.pusherContainer.setWidth(\"fit-content\");\n        this.swipeHelperChild.addClass(this.styleSheet.swipeAnimation);\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n        } else {\n            this.swipeHelperChild.setStyle(\"marginLeft\", containerNode.scrollLeft - scrollLeft);\n        }\n\n        setTimeout(() => {\n            this.pusherContainer.setWidth(\"100%\");\n            this.swipeHelperChild.removeClass(this.styleSheet.swipeAnimation);\n            containerNode.scrollLeft = scrollLeft;\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n            this.checkForOverflow();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    scrollContentLeft() {\n        this.scrollContent(-this.options.swipePercent);\n    }\n\n    scrollContentRight() {\n        this.scrollContent(this.options.swipePercent);\n    }\n\n    // This method should be overwritten, and it is called whenever the position of the elements is changed.\n    handleEventAndHandlePositionChange(callback) {\n        callback();\n    }\n\n    onMount() {\n        this.pusherContainer.addNodeListener(\"scroll\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.addListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.rightArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentRight()));\n        this.leftArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentLeft()));\n\n        // TODO: Create a resizeable-aware UI Element to be extended by this class and manage these listeners.\n        window.addEventListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        setTimeout(() => this.checkForOverflow());\n    }\n}","import {UI} from \"../UIBase\";\nimport {FlatTabAreaStyle, FlatTabAreaHorizontalOverflowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {TabTitleArea, BasicTabTitle, TabArea} from \"./TabArea\";\nimport {HorizontalOverflow} from \"../horizontal-overflow/HorizontalOverflow\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\n\nclass FlatTabTitle extends BasicTabTitle {\n    setActive(active) {\n        super.setActive(active);\n        if (active) {\n            this.options.activeTabTitleDispatcher.setActive(this, () => {\n                this.setActive(false);\n            });\n        }\n    }\n}\n\n\n// This class displays a bottom bar on the active tab, and when changing tabs it also moves the bottom bar.\n@registerStyle(FlatTabAreaStyle)\nclass FlatTabTitleArea extends TabTitleArea {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.nav);\n    }\n\n    getChildrenToRender() {\n        return [\n            <HorizontalOverflow ref=\"horizontalOverflow\" styleSheet={FlatTabAreaHorizontalOverflowStyle}>\n                {this.render()}\n                <div ref=\"bar\" className={this.styleSheet.activeBar} />\n            </HorizontalOverflow>,\n        ]\n    }\n\n    setActiveBar(activeTab) {\n        let barLeft = 0;\n        let barWidth = 0;\n        for (const tab of unwrapArray(this.render())) {\n            const tabWidth = tab.getWidth();\n            if (tab === activeTab) {\n                barWidth = tabWidth;\n                break;\n            }\n            barLeft += tabWidth;\n        }\n        this.bar.setStyle({\n            left: barLeft,\n            width: barWidth,\n        });\n    }\n\n    setActive(activeTab) {\n        if (this.activeTab) {\n            // Remove the border from the active tab and \"prepare\" the bar on the current active tab.\n            this.setActiveBar(this.activeTab);\n            this.activeTab.removeClass(this.styleSheet.activeOnRender);\n        }\n\n        // Animate the bar.\n        setTimeout(() => {\n            this.bar.addClass(this.styleSheet.activeBarAnimated);\n            this.setActiveBar(activeTab);\n        });\n\n        setTimeout(() => {\n            // Sometimes, another tab has been clicked between the start and end of an animation, so remove the\n            // active class on that tab, just in case.\n            if (this.activeTab) {\n                this.activeTab.removeClass(this.styleSheet.activeOnRender);\n            }\n            // Add the active class on the current tab.\n            activeTab.addClass(this.styleSheet.activeOnRender);\n            // Restore the bar to its \"unused\" state.\n            this.bar.removeClass(this.styleSheet.activeBarAnimated);\n            this.bar.setWidth(0);\n            // Update the active tab.\n            this.activeTab = activeTab;\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    onMount() {\n        super.onMount();\n        for (const child of this.options.children) {\n            if (child.options.active) {\n                this.setActive(child);\n            }\n        }\n        this.attachListener(this.options.activeTabTitleDispatcher, (tab) => this.setActive(tab));\n        this.addListener(\"resize\", () => this.horizontalOverflow.dispatch(\"resize\"));\n    }\n}\n\n\n@registerStyle(FlatTabAreaStyle)\nexport class FlatTabArea extends TabArea {\n    activeTabTitleDispatcher = new SingleActiveElementDispatcher();\n\n    getTitleArea(tabTitles) {\n        return <FlatTabTitleArea ref=\"titleArea\" activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                 className={this.options.titleAreaClass || \"\"}>\n            {tabTitles}\n        </FlatTabTitleArea>;\n    }\n\n    createTabPanel(panel) {\n        let tab = <FlatTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                active={panel.options.active} href={panel.options.tabHref}\n                                styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n}\n","import {mapIterator} from \"../base/Utils\";\n\n// A map that supports multiple values to the same key\nclass MultiMap {\n    constructor() {\n        this.map = new Map();\n    }\n\n    static iterator(items) {\n        return items[Symbol.iterator];\n    }\n\n    // Methods that are called before every access inside\n    // the internal map\n    normalizeKey(key) {\n        return key;\n    }\n    \n    normalizeValue(value) {\n        return value;\n    }\n\n    append(key, value) {\n        let nKey = this.normalizeKey(key);\n        let nValue = this.normalizeValue(value);\n        if (this.map.has(nKey)) {\n            this.map.get(nKey).push(nValue);\n        } else {\n            this.map.set(nKey, [nValue]);\n        }\n    }\n\n    has(key) {\n        return this.map.has(this.normalizeKey(key));\n    }\n\n    delete(key) {\n        this.map.delete(this.normalizeKey(key));\n    }\n\n    set(key, value) {\n        this.map.set(this.normalizeKey(key), [this.normalizeValue(value)]);\n    }\n\n    get(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey)[0];\n        }\n        return null;\n    }\n\n    getAll(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey).slice();\n        }\n        return null;\n    }\n\n    forEach(callback, context) {\n        for (let [key, value] of this.entries()) {\n            callback.call(context, value, key, this);\n        }\n    }\n\n    keys() {\n        return mapIterator(this.entries(), entry => entry[0]);\n    }\n\n    values() {\n        return mapIterator(this.entries(), entry => entry[1]);\n    }\n\n    *entries() {\n        for (let [key, values] of this.map.entries()) {\n            for (let value of values) {\n                yield [key, value];\n            }\n        }\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\nexport {MultiMap};\n","import {MultiMap} from \"../data-structures/MultiMap\";\n\n// This class currently mirrors the functionality of Headers on Chrome at the time of implementation\n// TODO: It is specified that the function get() should return the result of getAll() and getAll() deprecated\nclass Headers extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj) {\n        super();\n        if (obj instanceof Headers) {\n            for (let [key, value] of obj) {\n                this.append(key, value);\n            }\n        } else if (obj) {\n            for (let key of Object.keys(obj)) {\n                this.append(key, obj[key]);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        if (typeof key !== 'string') {\n            key = String(key);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(key)) {\n            throw new TypeError('Invalid character in header field name');\n        }\n        return key.toLowerCase();\n    }\n\n    normalizeValue(value) {\n        if (typeof value !== \"string\") {\n            value = String(value);\n        }\n        return value;\n    }\n}\n\nfunction polyfillHeaders(global) {\n    global.Headers = global.Headers || Headers;\n}\n\nexport {Headers, polyfillHeaders};","import {MultiMap} from \"../data-structures/MultiMap\";\n\nclass URLSearchParams extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj=\"\") {\n        super(obj);\n        let str = String(obj);\n        if (str.indexOf(\"?\") === 0) {\n            str = str.slice(1);\n        }\n        for (let parameter of str.split(\"&\")) {\n            let index = parameter.indexOf(\"=\");\n            if (index !== -1) {\n                let key = this.constructor.decode(parameter.slice(0, index));\n                let value = this.constructor.decode(parameter.slice(index + 1));\n                this.append(key, value);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        return key.toString();\n    }\n\n    normalizeValue(value) {\n        return value.toString();\n    }\n\n    static encode(str) {\n        let replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, (match) => {\n            return replace[match];\n        });\n    }\n\n    static decode(str) {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    }\n\n    toString() {\n        let query = [];\n        for (let [key, values] of this.map.entries()) {\n            let name = this.constructor.encode(key);\n            for (let value of values) {\n                query.push(name + \"=\" + this.constructor.encode(value));\n            }\n        }\n        return query.join(\"&\");\n    }\n}\n\nfunction polyfillURLSearchParams(global) {\n    global.URLSearchParams = global.URLSearchParams || URLSearchParams;\n}\n\nexport {URLSearchParams, polyfillURLSearchParams};","import {polyfillHeaders} from \"./Headers\";\nimport {polyfillURLSearchParams} from \"./URLSearchParams\";\n\nfunction fileReaderReady(reader) {\n    return new Promise((resolve, reject) => {\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(reader.error);\n        };\n    });\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise;\n}\n\nfunction readBlobAsText(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise;\n}\n\nclass Body {\n    constructor() {\n        this.bodyUsed = false;\n    }\n\n    setBodyUsed() {\n        if (this.bodyUsed) {\n            return Promise.reject(new TypeError(\"Already read\"));\n        }\n        this.bodyUsed = true;\n    }\n\n    static decode(body) {\n        let form = new FormData();\n        for (let bytes of body.trim().split('&')) {\n            if (bytes) {\n                let split = bytes.split('=');\n                let name = split.shift().replace(/\\+/g, ' ');\n                let value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n            }\n        }\n        return form;\n    }\n\n    static cloneBuffer(buffer) {\n        if (buffer.slice) {\n            return buffer.slice();\n        } else {\n            let view = new Uint8Array(buffer.byteLength);\n            view.set(new Uint8Array(buffer));\n            return view.buffer;\n        }\n    }\n\n    initialize(bodyInit) {\n        this._bodyInit = bodyInit;\n        if (!bodyInit) {\n            this._bodyText = \"\";\n        } else if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n            this._bodyText = bodyInit;\n        } else if (Blob.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyBlob = bodyInit;\n        } else if (FormData.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyFormData = bodyInit;\n        } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyText = bodyInit.toString();\n        } else if (DataView.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit.buffer);\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n        } else if (ArrayBuffer.prototype.isPrototypeOf(bodyInit) || ArrayBuffer.isView(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit);\n        } else {\n            throw new Error(\"unsupported BodyInit type\");\n        }\n\n        if (!this.headers.get(\"content-type\")) {\n            if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n                this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set(\"content-type\", this._bodyBlob.type);\n            } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n                this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\");\n            }\n        }\n    }\n\n    blob() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return Promise.resolve(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        }\n        if (this._bodyFormData) {\n            // I know this is technically wrong, but only we can create this scenario\n            return Promise.resolve(this._bodyFormData);\n        }\n        return Promise.resolve(new Blob([this._bodyText]));\n    }\n\n    arrayBuffer() {\n        if (this._bodyArrayBuffer) {\n            return this.setBodyUsed() || Promise.resolve(this._bodyArrayBuffer);\n        } else {\n            return this.blob().then(readBlobAsArrayBuffer);\n        }\n    }\n\n    readArrayBufferAsText() {\n        let view = new Uint8Array(this._bodyArrayBuffer);\n        let chars = new Array(view.length);\n\n        for (let i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join(\"\");\n    }\n\n    text() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(this.readArrayBufferAsText());\n        }\n        if (this._bodyFormData) {\n            throw new Error(\"could not read FormData body as text\");\n        }\n        return Promise.resolve(this._bodyText);\n    }\n\n    formData() {\n        return this.text().then(this.constructor.decode);\n    }\n\n    json() {\n        return this.text().then(JSON.parse);\n    }\n}\n\nfunction polyfillBody(global) {\n    // TODO: Might want to polyfill other stuff\n    polyfillURLSearchParams(global);\n    polyfillHeaders(global);\n    global.Body = global.Body || Body;\n}\n\nexport {Body, polyfillBody};","import {Body} from \"./Body\";\n\nclass Request extends Body {\n    constructor(input, options={}) {\n        super();\n        let body = options.body;\n\n        if ((typeof input === \"string\") || (input instanceof String)) {\n            input = {\n                url: input\n            };\n        }\n\n        if (input.bodyUsed) {\n            throw new TypeError(\"Already read\");\n        }\n        if (!body && input.hasOwnProperty(\"_bodyInit\") && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n        }\n\n        this.method = this.constructor.normalizeMethod(options.method || input.method || \"GET\");\n        this.url = input.url;\n\n        let headerArgs = options.headers || input.headers || null;\n        this.headers = headerArgs ? new Headers(headerArgs) : new Headers();\n        this.context = options.context || input.context || \"\";\n        this.referrer = options.referrer || input.referrer || \"about:client\";\n        this.referrerPolicy = options.referrerPolicy || input.referrerPolicy || \"\";\n        this.mode = options.mode || input.mode || null;\n        this.credentials = options.credentials || input.credentials || \"omit\";\n        this.cache = options.cache || input.cache || \"default\";\n\n        if ((this.method === \"GET\" || this.method === \"HEAD\") && body) {\n            throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n        }\n        this.initialize(body);\n    }\n\n    static methods = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n    static normalizeMethod(method) {\n        let upcased = method.toUpperCase();\n        return (this.methods.indexOf(upcased) > -1) ? upcased : method;\n    }\n\n    clone() {\n        return new Request(this, {body: this._bodyInit});\n    }\n}\n\nfunction polyfillRequest(global) {\n    global.Request = global.Request || Request;\n}\n\nexport {Request, polyfillRequest};","import {Body} from \"Body\";\n\nclass Response extends Body {\n    constructor(bodyInit, options) {\n        super();\n        options = options || {};\n\n        this.type = \"default\";\n        if (options.hasOwnProperty(\"status\")) {\n            this.status = options.status;\n        } else {\n            this.status = 200;\n        }\n        this.ok = (this.status >= 200 && this.status < 300);\n        if (options.hasOwnProperty(\"statusText\")) {\n            this.statusText = options.statusText;\n        } else {\n            this.statusText = \"OK\";\n        }\n        this.headers = new Headers(options.headers);\n        this.url = options.url || \"\";\n        this.initialize(bodyInit);\n    }\n\n    clone() {\n        return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n        });\n    }\n\n    static error() {\n        let response = new Response(null, {status: 0, statusText: \"\"});\n        response.type = \"error\";\n        return response;\n    }\n    static redirectStatuses = [301, 302, 303, 307, 308];\n    static redirect(url, status) {\n        if (this.redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError(\"Invalid status code\");\n        }\n        return new Response(null, {status: status, headers: {location: url}});\n    }\n}\n\nfunction polyfillResponse(global) {\n    global.Response = global.Response || Response;\n}\n\nexport {Response, polyfillResponse};","// Tries to be a more flexible implementation of fetch()\n// Still work in progress\n\nimport {isPlainObject} from \"./Utils\";\n\n// May need to polyfill Headers, Request, Response, Body, URLSearchParams classes, so import them\nimport {polyfillRequest} from \"../polyfill/Request\";\nimport {polyfillResponse} from \"../polyfill/Response\";\nimport {polyfillHeaders} from \"../polyfill/Headers\";\nimport {polyfillURLSearchParams} from \"../polyfill/URLSearchParams\";\n\n// TODO: should only call this in the first call to fetch, to not create unneeded dependencies?\nif (window) {\n    polyfillRequest(window);\n    polyfillResponse(window);\n    polyfillHeaders(window);\n    polyfillURLSearchParams(window);\n}\n\n// Parse the headers from an xhr object, to return a native Headers object\nfunction parseHeaders(xhr) {\n    const rawHeader = xhr.getAllResponseHeaders() || \"\";\n    const rawHeaderLines = rawHeader.split(/\\r?\\n/);\n    let headers = new Headers();\n\n    for (let line of rawHeaderLines) {\n        let parts = line.split(\":\");\n        let key = parts.shift().trim();\n        if (key) {\n            let value = parts.join(\":\").trim();\n            headers.append(key, value);\n        }\n    }\n    return headers;\n}\n\n// Creates a new URLSearchParams object from a plain object\n// Fields that are arrays are spread\nfunction getURLSearchParams(data) {\n    if (!isPlainObject(data)) {\n        return data;\n    }\n\n    let urlSearchParams = new URLSearchParams();\n    for (const key of Object.keys(data)) {\n        let value = data[key];\n        if (Array.isArray(value)) {\n            for (let instance of value) {\n                urlSearchParams.append(key + \"[]\", instance);\n            }\n        } else {\n            urlSearchParams.set(key, value);\n        }\n    }\n    return urlSearchParams;\n}\n\n// Appends search parameters from an object to a given URL or Request, and returns the new URL\nfunction composeURL(url, params) {\n    if (url.url) {\n        url = url.url;\n    }\n    // TODO: also extract the preexisting arguments in the url\n    if (params) {\n        url += \"?\" + getURLSearchParams(params);\n    }\n    return url;\n}\n\nexport function toFormData(data) {\n    let formData = new FormData();\n    for (const key of Object.keys(data)) {\n        formData.append(key, data[key]);\n    }\n    return formData;\n}\n\nclass XHRPromise {\n    constructor(request, options = {}) {\n        request = new Request(request, options);\n        let xhr = new XMLHttpRequest();\n        this.options = options;\n        this.request = request;\n        this.xhr = xhr;\n\n        this.promise = new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n\n            xhr.onload = () => {\n                let headers = this.getResponseHeaders();\n\n                let body = xhr.response || xhr.responseText;\n                let responseInit = {\n                    status: xhr.status,\n                    statusText: xhr.statusText,\n                    headers: headers,\n                    url: xhr.responseURL || headers.get(\"X-Request-URL\"),\n                };\n                let response = new Response(body, responseInit);\n                // In case dataType is \"arrayBuffer\", \"blob\", \"formData\", \"json\", \"text\"\n                // Response has methods to return these as promises\n                if (typeof response[options.dataType] === \"function\") {\n                    // TODO: should whitelist dataType to json, blob\n                    response[options.dataType]().then((data) => {\n                        this.resolve(data);\n                    });\n                } else {\n                    this.resolve(response);\n                }\n            };\n\n            // TODO: also dispatch all arguments here on errors\n            xhr.onerror = () => {\n                this.reject(new TypeError(\"Network error\"));\n            };\n\n            // TODO: need to have an options to pass setting to xhr (like timeout value)\n            xhr.ontimeout = () => {\n                this.reject(new TypeError(\"Network timeout\"));\n            };\n\n            xhr.open(request.method, request.url, true);\n\n            if (request.credentials === \"include\") {\n                xhr.withCredentials = true;\n            }\n\n            // TODO: come back to this\n            xhr.responseType = \"blob\";\n\n            request.headers.forEach((value, name) => {\n                if (options.body instanceof FormData && name.toLowerCase() === \"content-type\") {\n                    return;\n                }\n                xhr.setRequestHeader(name, value);\n            });\n\n            // TODO: there's no need to send anything on a GET or HEAD\n            if (options.body instanceof FormData) {\n                this.send(options.body);\n            } else {\n                request.blob().then((blob) => {\n                    // The blob can be a FormData when we're polyfilling the Request class\n                    let body = ((blob instanceof FormData) || blob.size) ? blob : null;\n                    this.send(body);\n                });\n            }\n        });\n    }\n\n    getResponseHeaders() {\n        return parseHeaders(this.xhr);\n    }\n\n    send(body) {\n        this.getXHR().send(body);\n    }\n\n    getPostprocessors() {\n        return this.options.postprocessors || fetch.defaultPostprocessors;\n    }\n\n    getErrorPostprocessors() {\n        return this.options.errorPostprocessors || fetch.defaultErrorPostprocessors;\n    }\n\n    resolve(payload) {\n        for (const postprocessor of this.getPostprocessors()) {\n            try {\n                payload = postprocessor(payload, this) || payload;\n            } catch (exception) {\n                this.reject(exception);\n                return;\n            }\n        }\n\n        if (this.options.onSuccess) {\n            this.options.onSuccess(...arguments);\n        } else {\n            this.promiseResolve(...arguments);\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    reject(error) {\n        for (const postprocessor of this.getErrorPostprocessors()) {\n            error = postprocessor(error) || error;\n        }\n\n        if (this.options.onError) {\n            this.options.onError(...arguments);\n        } else {\n            if (this._chained) {\n                this.promiseReject(...arguments);\n            } else {\n                if (this.options.errorHandler) {\n                    this.options.errorHandler(...arguments);\n                } else {\n                    console.error(\"Unhandled fetch error\", ...arguments);\n                }\n            }\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    // TODO: next 2 functions should throw an exception if you have onSuccess/onError\n    then(onResolve, onReject) {\n        this._chained = true;\n        onReject = onReject || this.options.errorHandler;\n        return this.getPromise().then(onResolve, onReject);\n    }\n\n    catch() {\n        this._chained = true;\n        return this.getPromise().catch(...arguments);\n    }\n\n    getXHR() {\n        return this.xhr;\n    }\n\n    getPromise() {\n        return this.promise;\n    }\n\n    getRequest() {\n        return this.request;\n    }\n\n    abort() {\n        this.getXHR().abort();\n    }\n\n    addXHRListener(name, callback) {\n        this.getXHR().addEventListener(...arguments);\n    }\n\n    addProgressListener(callback) {\n        this.addXHRListener(\"progress\", ...arguments);\n    }\n}\n\n// TODO: this offers only partial compatibility with $.ajax\nfunction jQueryCompatibilityPreprocessor(options) {\n    if (options.type) {\n        options.method = options.type.toUpperCase();\n    }\n\n    if (options.contentType) {\n        options.headers.set(\"Content-Type\", options.contentType);\n    }\n\n    options.headers.set(\"X-Requested-With\", \"XMLHttpRequest\");\n\n    if (isPlainObject(options.data)) {\n        let method = options.method.toUpperCase();\n        if (method === \"GET\" || method === \"HEAD\") {\n            options.urlParams = options.urlParams || options.data;\n            if (options.cache === false) {\n                options.urlParams = getURLSearchParams(options.urlParams);\n                options.urlParams.set(\"_\", Date.now());\n            }\n        } else {\n            let formData = new FormData();\n            for (const key of Object.keys(options.data)) {\n                const value = options.data[key];\n                if (Array.isArray(value)) {\n                    for (const arrayValue of value) {\n                        formData.append(key + \"[]\", arrayValue);\n                    }\n                } else {\n                    formData.append(key, value);\n                }\n\n            }\n            options.body = formData;\n        }\n    } else {\n        options.body = options.body || options.data;\n    }\n\n    return options;\n}\n\n// Can either be called with\n// - 1 argument: (Request)\n// - 2 arguments: (url/Request, options)\nfunction fetch(input, ...args) {\n    // In case we're being passed in a single plain object (not Request), assume it has a url field\n    if (isPlainObject(input)) {\n        return fetch(input.url, ...arguments);\n    }\n\n    let options = Object.assign({}, ...args);\n\n    // Ensure that there's a .headers field for preprocessors\n    options.headers = new Headers(options.headers || {});\n\n    const preprocessors = options.preprocessors || fetch.defaultPreprocessors || [];\n\n    for (const preprocessor of preprocessors) {\n        options = preprocessor(options) || options;\n    }\n\n    options.onSuccess = options.onSuccess || options.success;\n    options.onError = options.onError || options.error;\n    options.onComplete = options.onComplete || options.complete;\n\n    if (typeof options.cache === \"boolean\") {\n        options.cache = options.cache ? \"force-cache\" : \"reload\";\n        // TODO: cache still isn't fully done\n    }\n\n    options.method = options.method || \"GET\";\n\n    // If there are any url search parameters, update the url from the urlParams or urlSearchParams fields\n    // These fields can be plain objects (jQuery style) or can be URLSearchParams objects\n    const urlParams = options.urlParams || options.urlSearchParams;\n    if (urlParams) {\n        // Change the URL of the request to add a query\n        if (input instanceof Request) {\n            input = new Request(composeURL(input.url, urlParams), input);\n        } else {\n            input = new Request(composeURL(input, urlParams), {});\n        }\n    }\n\n    return new XHRPromise(input, options);\n}\n\nfetch.defaultPreprocessors = [jQueryCompatibilityPreprocessor];\nfetch.defaultPostprocessors = [];\nfetch.defaultErrorPostprocessors = [];\n\nfetch.polyfill = true;\n\nexport {XHRPromise, fetch, composeURL, parseHeaders, getURLSearchParams, jQueryCompatibilityPreprocessor};\n","import {fetch} from \"./Fetch\";\n\nexport class AjaxHandler {\n    constructor(ajaxHandler=Ajax, errorHandler=null) {\n        this.parentHandler = ajaxHandler;\n        this.preprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPreprocessors);\n        this.postprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPostprocessors);\n        this.errorPostprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultErrorPostprocessors);\n        this.errorHandler = errorHandler;\n    }\n\n    fetch(request, ...args) {\n        let baseOptions = {\n            preprocessors: this.getPreprocessors(),\n            postprocessors: this.getPostprocessors(),\n            errorPostprocessors: this.getErrorPostprocessors(),\n            errorHandler: this.getErrorHandler(),\n        };\n\n        // Request may be a plain object or a url, not going to duplicate code from fetch\n        for (const key of Object.keys(baseOptions)) {\n            if (request[key]) {\n                delete baseOptions[key];\n            }\n        }\n\n        return fetch(request, baseOptions, ...args);\n    }\n\n    request() {\n        return this.fetch(...arguments)\n    }\n\n    // Feel free to modify the post and get methods for your needs\n    get(url, options) {\n        return this.fetch(...arguments, {method: \"GET\"});\n    }\n\n    getJSON(url, data, ...args) {\n        return this.get(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    post(url, options) {\n        return this.fetch(...arguments, {method: \"POST\"});\n    }\n\n    postJSON(url, data, ...args) {\n        return this.post(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    addPreprocessor(preprocessor) {\n        this.preprocessors.push(preprocessor);\n    }\n\n    getPreprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPreprocessors()) || [];\n        return [...this.preprocessors, ...inherited];\n    }\n\n    addPostprocessor(postprocessor) {\n        this.postprocessors.push(postprocessor);\n    }\n\n    getPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPostprocessors()) || [];\n        return [...inherited, ...this.postprocessors];\n    }\n\n    addErrorPostprocessor(postprocessor) {\n        this.errorPostprocessors.push(postprocessor);\n    }\n\n    getErrorPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getErrorPostprocessors()) || [];\n        return [...inherited, ...this.errorPostprocessors];\n    }\n\n    getErrorHandler() {\n        return this.errorHandler || (this.parentHandler && this.parentHandler.getErrorHandler());\n    }\n}\n\nexport class FixedURLAjaxHandler extends AjaxHandler {\n    constructor(url, ajaxHandler=Ajax, errorHandler=null) {\n        super(ajaxHandler, errorHandler);\n        this.url = url;\n    }\n\n    get(options) {\n        return super.get(this.url, ...arguments);\n    }\n\n    getJSON(data) {\n        return super.getJSON(this.url, data);\n    }\n\n    post(options) {\n        return super.post(this.url, ...arguments);\n    }\n\n    postJSON(data) {\n        return super.postJSON(this.url, data);\n    }\n}\n\nexport let Ajax = new AjaxHandler();","import {buildColors} from \"../Color\";\nimport {BasicLevelStyleSheet} from \"../GlobalStyle\";\nimport {styleRule} from \"../../decorators/Style\";\nimport {StyleSheet} from \"../Style\";\nimport {Orientation} from \"../Constants\";\n\nexport const buttonColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker1 = {\n        backgroundColor: colors[2],\n    };\n    let darker2 = {\n        backgroundColor: colors[3],\n    };\n    let darker3 = {\n        backgroundColor: colors[4],\n    };\n    const regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    const hoverDisabled = Object.assign({}, regular);\n    return Object.assign({}, regular, {\n        \":hover\": darker1,\n        \":hover:disabled\": hoverDisabled,\n        \":focus\": darker1,\n        \":active\": darker2,\n        \":hover:active\": darker3,\n        \":focus:active\": darker3,\n        \".active\": darker3,\n    });\n};\n\nexport class ButtonStyle extends BasicLevelStyleSheet(buttonColorToStyle) {\n    base = {\n        outline: \"0\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.4em 0.8em\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS || this.themeProperties.BASE_BORDER_RADIUS,\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        lineHeight: 4/3 + \"\",\n        marginBottom: \"0\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        userSelect: \"none\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    };\n\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [this.base, {\n        fontSize: \"14px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)];\n\n    getLevel(level) {\n        return super.getLevel(level) || this.INFO;\n    }\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"12px\",\n        padding: \"0.2em 0.4em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"12px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"17px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"21px\",\n        padding: \"0.2em 0.4em\",\n    };\n}\n\nexport class ButtonGroupStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-left\": \"5px\",\n            \"display\": \"inline-block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-left\": \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-top\": \"5px\",\n            \"display\": \"block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-top\": \"0px\",\n        },\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nexport class RadioButtonGroupStyle extends StyleSheet {\n    @styleRule\n    DEFAULT = {\n        pointerEvents: \"none\",\n        \">*\": {\n            pointerEvents: \"initial\",\n            borderRadius: \"0\",\n        },\n        \">:last-child\": {\n            borderTopRightRadius: \"0.3em\",\n            borderBottomRightRadius: \"0.3em\",\n        },\n        \">:first-child\": {\n            borderTopLeftRadius: \"0.3em\",\n            borderBottomLeftRadius: \"0.3em\",\n        }\n    };\n}\n","import {Ajax} from \"../../base/Ajax\";\nimport {IconableInterface} from \"../Bootstrap3\";\nimport {UI} from \"../UIBase\";\nimport {ActionStatus} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonStyle)\nclass Button extends UI.Primitive(IconableInterface, \"button\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n\n    disable() {\n        this.options.disabled = true;\n        this.node.disabled = true;\n    }\n\n    enable() {\n        this.options.disabled = false;\n        this.node.disabled = false;\n    }\n\n    setEnabled(enabled) {\n        this.options.disabled = !enabled;\n        this.node.disabled = !enabled;\n    };\n}\n\n\nclass StateButton extends Button {\n    setOptions(options) {\n        options.state = (this.options && this.options.state) || options.state || ActionStatus.DEFAULT;\n\n        super.setOptions(options);\n\n        this.options.statusOptions = this.options.statusOptions || [];\n        for (let i = 0; i < 4; i += 1) {\n            if (typeof this.options.statusOptions[i] === \"string\") {\n                let statusLabel = this.options.statusOptions[i];\n                this.options.statusOptions[i] = {\n                    label: statusLabel,\n                    faIcon: \"\"\n                }\n            }\n        }\n    }\n\n    setState(status) {\n        this.options.state = status;\n        if (status === ActionStatus.DEFAULT) {\n            this.enable();\n        } else if (status === ActionStatus.RUNNING) {\n            this.disable();\n        } else if (status === ActionStatus.SUCCESS) {\n        } else if (status === ActionStatus.FAILED) {\n        }\n\n        this.redraw();\n    }\n\n    render() {\n        let stateOptions = this.options.statusOptions[this.options.state - 1];\n\n        this.options.label = stateOptions.label;\n        this.options.faIcon = stateOptions.faIcon;\n\n        return super.render();\n    }\n}\n\n\nclass AjaxButton extends StateButton {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions() || {}, {\n            resetToDefaultTimeout: 1000\n        });\n    }\n\n    getAjaxHandler() {\n        return this.options.ajaxHandler || Ajax;\n    }\n\n    setAjaxHandler(ajaxHandler) {\n        this.options.ajaxHandler = ajaxHandler;\n    }\n\n    clearResetTimeout() {\n        if (this.stateResetTimeout) {\n            clearTimeout(this.stateResetTimeout);\n            delete this.stateResetTimeout;\n        }\n    }\n\n    scheduleStateReset() {\n        this.clearResetTimeout();\n        this.stateResetTimeout = setTimeout(() => {\n            this.setState(ActionStatus.DEFAULT);\n            this.clearResetTimeout();\n        }, this.resetToDefaultTimeout);\n    }\n\n    ajax(methodName, ...args) {\n        this.setState(ActionStatus.RUNNING);\n        let ajaxPromise = this.getAjaxHandler()[methodName](...args);\n        ajaxPromise.getPromise().then(\n            (data) => {\n                this.setState(ActionStatus.SUCCESS);\n                this.scheduleStateReset();\n            },\n            (error) => {\n                this.setState(ActionStatus.FAILED);\n                this.scheduleStateReset();\n            }\n        );\n        return ajaxPromise;\n    }\n\n    ajaxCall(data) {\n        return this.ajax(\"fetch\", data);\n    }\n}\nfor (const methodName of [\"fetch\", \"request\", \"get\", \"post\", \"getJSON\", \"postJSON\"]) {\n    AjaxButton.prototype[methodName] = function(...args) {\n        return this.ajax(methodName, ...args);\n    }\n}\n\nexport {Button, StateButton, AjaxButton};\n","import {UI} from \"../UIBase\";\nimport {Button} from \"./Button\";\nimport {SimpleStyledElement} from \"../Bootstrap3\";\nimport {Orientation} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonGroupStyle, RadioButtonGroupStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonGroupStyle)\nclass ButtonGroup extends SimpleStyledElement {\n    getDefaultOptions() {\n        return {\n            orientation: Orientation.HORIZONTAL,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.Orientation(this.options.orientation));\n    }\n}\n\n\n@registerStyle(RadioButtonGroupStyle)\nclass RadioButtonGroup extends SimpleStyledElement {\n    setOptions(options) {\n        super.setOptions(options);\n        this.index = this.options.index || 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n    }\n\n    render() {\n        this.buttons = [];\n        for (let i = 0; i < this.options.givenOptions.length; i += 1) {\n            this.buttons.push(\n                <Button key={i} onClick={() => {this.setIndex(i);}} size={this.getSize()}\n                  label={this.options.givenOptions[i].toString()} level={this.getLevel()}\n                  className={this.index === i ? \"active\" : \"\"}/>);\n        }\n        return this.buttons;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    getValue() {\n        return this.options.givenOptions[this.index];\n    }\n\n    setIndex(index) {\n        this.dispatch(\"setIndex\", {\n            index: index,\n            oldIndex: this.index,\n            value: this.options.givenOptions[index],\n            oldValue: this.options.givenOptions[this.index]\n        });\n        this.buttons[this.index].removeClass(\"active\");\n        this.index = index;\n        this.buttons[this.index].addClass(\"active\");\n    }\n}\n\nexport {ButtonGroup, RadioButtonGroup};\n","import {UI} from \"./UIBase\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelStyleSheet, GlobalStyle} from \"./GlobalStyle\";\nimport {registerStyle, Theme} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\nimport {Level} from \"./Constants\";\n\nexport function cardPanelColorToStyle(color) {\n    let colors = buildColors(color);\n    return {\n        borderColor: colors[4],\n    };\n}\n\nexport class CardPanelStyle extends BasicLevelStyleSheet(cardPanelColorToStyle) {\n    @styleRule\n    DEFAULT = [{\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n        flexDirection: \"row\",\n        padding: \"5px\",\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT,\n        textTransform: this.themeProperties.CARD_PANEL_TEXT_TRANSFORM,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n    },\n        cardPanelHeaderColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n    };\n\n    @styleRule\n    body = {\n    };\n\n    @styleRule\n    panel = [{\n        borderWidth: this.themeProperties.BASE_BORDER_WIDTH,\n        borderRadius: this.themeProperties.BASE_BORDER_RADIUS,\n        boxShadow: this.themeProperties.BASE_BOX_SHADOW,\n        borderStyle: this.themeProperties.BASE_BORDER_STYLE,\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    },\n        cardPanelColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    centered = {\n        textAlign: \"center\",\n        justifyContent: \"center\",\n    };\n}\n\nfunction cardPanelHeaderColorToStyle(color){\n    let colors = buildColors(color);\n    return {\n        color: colors[6],\n        backgroundColor: colors[1],\n        borderBottomColor: colors[4],\n    };\n}\n\nexport const CardPanelHeaderStyle = BasicLevelStyleSheet(cardPanelHeaderColorToStyle);\n\n@registerStyle(CardPanelStyle)\nclass CardPanel extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.panel);\n    }\n\n    getLevel() {\n        return super.getLevel() || Level.PRIMARY;\n    }\n\n    getTitle() {\n        return this.options.title;\n    }\n\n    getHeaderStyleSheet() {\n        return CardPanelHeaderStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            headingCentered: true,\n            bodyCentered: false,\n        };\n    }\n\n    getHeadingClasses() {\n        let headingClasses = \"\";\n        const headingLevel = this.getHeaderStyleSheet().Level(this.getLevel()),\n            {headingCentered} = this.options;\n\n        if (headingLevel) {\n            headingClasses = headingClasses + headingLevel;\n        }\n\n        headingClasses = headingClasses + this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            headingClasses = headingClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        if (headingCentered) {\n            headingClasses = headingClasses + this.styleSheet.centered;\n        }\n\n        return headingClasses;\n    }\n\n    getBodyClasses() {\n        const {bodyCentered} = this.options;\n\n        let bodyClasses = this.styleSheet.body;\n        if (bodyCentered) {\n            bodyClasses = bodyClasses + this.styleSheet.centered;\n        }\n\n        return bodyClasses;\n    }\n\n    getChildrenToRender() {\n        const headingClasses = this.getHeadingClasses();\n        const bodyClasses = this.getBodyClasses();\n\n        return [\n            <div ref=\"panelTitle\" className={headingClasses}>\n                {this.getTitle()}\n            </div>,\n            <div ref=\"panelBody\" className={bodyClasses} style={this.options.bodyStyle}>\n                {this.render()}\n            </div>,\n        ];\n    }\n}\n\nexport {CardPanel};\n","import {UI, registerStyle} from \"UI\";\nimport {StyleSheet, styleRule} from \"Style\";\nimport {Size} from \"./Constants\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelSizeStyleSheet} from \"./GlobalStyle\";\n\n\nclass RowListStyle extends BasicLevelSizeStyleSheet {\n    @styleRule\n    rowList = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    DEFAULT = {\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING,\n\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    };\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n    };\n\n    @styleRule\n    alternativeColorsOddRow = {\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE,\n    };\n\n    @styleRule\n    noAlternativeColors = {\n        borderTopWidth: this.themeProperties.ROW_LIST_ROW_BORDER_WIDTH,\n        borderTopStyle: this.themeProperties.BASE_BORDER_STYLE,\n        borderTopColor: this.themeProperties.BASE_BORDER_COLOR,\n    };\n}\n\n\n@registerStyle(RowListStyle)\nexport class RowList extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.rowList);\n    }\n\n    getDefaultOptions(options) {\n        return {\n            alternateColors: true,\n        }\n    }\n\n    getRowClasses(index) {\n        let rowClasses = this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            rowClasses = rowClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        const {alternateColors} = this.options;\n\n        if (alternateColors && index % 2 === 1) {\n            rowClasses = rowClasses + this.styleSheet.alternativeColorsOddRow;\n        } else if (!alternateColors && index > 0) {\n            rowClasses = rowClasses + this.styleSheet.noAlternativeColors;\n        }\n\n        return rowClasses;\n    }\n\n    render() {\n        const {rows, rowParser} = this.options;\n\n        return rows.map((row, index) => {\n            return <div className={this.getRowClasses(index)}>\n                {rowParser(row)}\n            </div>\n        });\n    }\n}","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\nimport {CardPanelStyle} from \"../CardPanel\";\n\nclass CollapsibleStyle extends StyleSheet {\n    transitionDuration = 0.4;\n\n    @styleRule\n    collapsing = {\n        marginTop: \"0\",\n        transitionTimingFunction: \"ease\",\n        transitionDuration: `${this.transitionDuration}s`,\n        transitionProperty: \"margin-top\",\n        transitionDelay: \"-0.15s\",\n    };\n\n    @styleRule\n    collapsed = {\n        marginTop: \"-100% !important\",\n        transitionDelay: \"0s !important\",\n    };\n}\n\n\nclass CollapsiblePanelStyle extends CardPanelStyle {\n    @styleRuleInherit\n    panel = {\n        boxShadow: null,\n        borderWidth: \"1px\",\n        borderColor: \"#ccc !important\",\n        borderRadius: \"3px\",\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        borderBottom: \"1px solid transparent\",\n        borderTopLeftRadius: \"3px\",\n        borderTopRightRadius: \"3px\",\n        backgroundColor: \"#fefefe\",\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        }\n    };\n\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":before\": {\n            transition: \"transform .2s linear\",\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            display: \"inline-block\",\n            lineHeight: \"0.7em\",\n            width: \"0.7em\",\n            fontSize: \"150%\",\n            verticalAlign: \"bottom\",\n            height: \"0.7em\",\n            textAlign: \"center\",\n            transform: \"rotate(0deg)\",\n            marginRight: \".2em\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":before\": {\n            transform: \"rotate(-90deg) !important\",\n        },\n    };\n}\n\nexport {CollapsibleStyle, CollapsiblePanelStyle};\n","import {CollapsibleStyle} from \"./Style\";\n\nfunction CollapsibleMixin(BaseClass, CollapsibleClass = CollapsibleStyle) {\n    class CollapsibleElement extends BaseClass {\n        getDefaultOptions() {\n            return {\n                collapsed: true,\n            };\n        }\n\n        static collapsibleStyleSheet = new CollapsibleClass();\n\n        getCollapsibleStyleSheet() {\n            return this.options.collapsibleStyleSheet || this.constructor.collapsibleStyleSheet;\n        }\n\n        expand(panel) {\n            this.options.collapsed = false;\n            this.dispatch(\"expand\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.removeClass(\"hidden\");\n            setTimeout(() => {\n                panel.removeClass(collapsibleStyle.collapsed);\n            }, 100);\n        }\n\n        collapse(panel) {\n            this.options.collapsed = true;\n            this.dispatch(\"collapse\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.addClass(collapsibleStyle.collapsed);\n            let transitionEndFunction = () => {\n                if (this.options.collapsed) {\n                    panel.addClass(\"hidden\");\n                }\n            };\n            panel.addNodeListener(\"transitionend\", transitionEndFunction);\n        }\n    }\n\n    return CollapsibleElement;\n}\n\n\nexport {CollapsibleMixin};\n","import {UI} from \"../UIBase\";\nimport {CollapsibleMixin} from \"./CollapsibleMixin\";\nimport {CardPanel} from \"../CardPanel\";\nimport {CollapsiblePanelStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(CollapsiblePanelStyle)\nclass CollapsiblePanel extends CollapsibleMixin(CardPanel) {\n    toggle() {\n        if (this.options.collapsed) {\n            this.expand();\n        } else {\n            this.collapse();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(this.styleSheet.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        this.toggleButton.addClass(this.styleSheet.collapsedButton);\n    }\n\n    setTitle(title) {\n        this.options.title = title;\n        this.toggleButton.setChildren(title);\n    }\n\n    getChildrenToRender() {\n        let collapsedPanelClass = \"\";\n        let collapsedHeadingClass = \"\";\n        let hiddenClass = \"\";\n        let contentStyle = {};\n\n        if (this.options.collapsed) {\n            collapsedHeadingClass = this.styleSheet.collapsedButton;\n            collapsedPanelClass = this.styleSheet.collapsed;\n            hiddenClass = \"hidden\";\n        }\n        if (!this.options.noPadding) {\n            contentStyle = {\n                padding: \"8px 8px\",\n            };\n        }\n\n        return [<div className={this.styleSheet.heading}>\n                    <div ref=\"toggleButton\"  className={`${this.styleSheet.button} ${collapsedHeadingClass}`}\n                        onClick={() => this.toggle()}>\n                        {this.getTitle()}\n                    </div>\n                </div>,\n                <div style={{overflow: \"hidden\"}}>\n                  <div ref=\"contentArea\" className={`${collapsedPanelClass} ${hiddenClass}`}\n                       style={contentStyle}>\n                        {this.render()}\n                    </div>\n                </div>\n        ];\n    }\n}\n\n\nclass DelayedCollapsiblePanel extends CollapsiblePanel {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            UI.renderingStack.push(this);\n            this.contentArea.options.children = this.render();\n            UI.renderingStack.pop();\n            this.contentArea.redraw();\n            this.delayedMount();\n        }\n        super.toggle();\n    }\n\n    render() {\n        if (!this._haveExpanded) {\n            return [];\n        }\n        return this.getDelayedChildren();\n    }\n}\n\nexport {CollapsiblePanel, DelayedCollapsiblePanel};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FloatingWindowStyle extends StyleSheet {\n    @styleRule\n    hiddenAnimated = {\n        visibility: \"hidden\",\n        opacity: \"0\",\n        transition: \"opacity 0.1s linear\",\n    };\n\n    @styleRule\n    visibleAnimated = {\n        visibility: \"visible\",\n        opacity: \"1\",\n        transition: \"opacity 0.1s linear\",\n    };\n}\n\n\nclass ModalStyle extends FloatingWindowStyle {\n    @styleRule\n    container = {\n        position: \"fixed\",\n        top: \"0px\",\n        left: \"0px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: \"9999\",\n    };\n\n    @styleRule\n    background = {\n        position: \"fixed\",\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.5)\",\n    };\n\n    @styleRule\n    header = {\n        padding: \"15px\",\n        borderBottom: \"1px solid #e5e5e5\",\n    };\n\n    @styleRule\n    body = {\n        position: \"relative\",\n        padding: \"15px\",\n    };\n\n    @styleRule\n    footer = {\n        padding: \"15px\",\n        textAlign: \"right\",\n        borderTop: \"1px solid #e5e5e5\",\n    };\n}\n\nexport {FloatingWindowStyle, ModalStyle};\n","import {UI} from \"../UIBase\";\nimport {FloatingWindowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FloatingWindowStyle)\nclass FloatingWindow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            transitionTime: 0,\n            style: {\n                zIndex: 2016,\n            }\n        };\n    }\n\n    fadeOut() {\n        this.removeClass(this.styleSheet.visibleAnimated);\n        this.addClass(this.styleSheet.hiddenAnimated);\n    }\n\n    fadeIn() {\n        this.removeClass(this.styleSheet.hiddenAnimated);\n        this.addClass(this.styleSheet.visibleAnimated);\n    }\n\n    show() {\n        // TODO: refactor this to use this.parent and UI.Element appendChild\n        if (!this.isInDocument()) {\n            this.parentNode.appendChild(this.node);\n            this.redraw();\n            setTimeout(() => {\n                this.fadeIn();\n            }, 0);\n        }\n    }\n\n    setParentNode(parentNode) {\n        this.options.parentNode = parentNode;\n    }\n\n    get parentNode() {\n        if (!this.options.parentNode) {\n            if (this.parent) {\n                if (this.parent instanceof HTMLElement) {\n                    this.options.parentNode = this.parent;\n                } else {\n                    this.options.parentNode = this.parent.node;\n                }\n            } else {\n                this.options.parentNode = document.body;\n            }\n        }\n        return this.options.parentNode;\n    }\n\n    hide() {\n        // TODO: refactor this to use this.parent and UI.Element removeChild\n        if (this.isInDocument()) {\n            this.fadeOut();\n            setTimeout(() => {\n                if (this.isInDocument()) {\n                    this.parentNode.removeChild(this.node);\n                }\n            }, this.options.transitionTime);\n        }\n    }\n}\n\n\nclass VolatileFloatingWindow extends FloatingWindow {\n    bindWindowListeners() {\n        this.hideListener = this.hideListener || (() => {this.hide();});\n        window.addEventListener(\"click\", this.hideListener);\n    }\n\n    unbindWindowListeners() {\n        window.removeEventListener(\"click\", this.hideListener);\n    }\n\n    toggle() {\n        if (!this.isInDocument()) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    show() {\n        if (!this.isInDocument()) {\n            this.bindWindowListeners();\n            super.show();\n        }\n    }\n\n    hide() {\n        if (this.isInDocument()) {\n            this.unbindWindowListeners();\n            super.hide();\n        }\n    }\n\n    onMount() {\n        if (!this.options.notVisible) {\n            this.bindWindowListeners();\n        } else {\n            setTimeout(() => {\n                this.hide();\n            });\n        }\n\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\nexport {FloatingWindow, VolatileFloatingWindow};\n","import {ButtonGroup} from \"../button/ButtonGroup\";\nimport {Button} from \"../button/Button\";\nimport {FloatingWindow} from \"./FloatingWindow\";\nimport {ModalStyle} from \"./Style\";\nimport {Panel, TemporaryMessageArea} from \"../UIPrimitives\";\nimport {UI} from \"../UIBase\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {Level, Size} from \"../Constants\";\n\n@registerStyle(ModalStyle)\nclass Modal extends UI.Element {\n    getDefaultOptions() {\n        return {\n            closeButton: true,\n            destroyOnHide: true,\n            visible: false,\n        };\n    }\n\n    getChildrenToRender() {\n        return [\n            <Panel ref=\"modalContainer\" className={(this.options.visible ? \"\" : \"hidden\") + this.styleSheet.container}>\n                <Panel ref=\"behindPanel\" className={this.styleSheet.hiddenAnimated + this.styleSheet.background} onClick={() => this.hide()}/>\n                {this.getModalWindow()}\n            </Panel>\n        ];\n    }\n\n    getModalWindow() {\n        let closeButton = null;\n        if (this.options.closeButton) {\n            // TODO: this should be in a method\n            closeButton = <div style={{right: \"10px\", zIndex: \"10\", position: \"absolute\"}}>\n                <Button className=\"close\" size={Size.EXTRA_LARGE} style={{border: \"none\"}} label=\"&times;\" onClick={() => this.hide()}/>\n            </div>;\n        }\n\n        return <FloatingWindow ref=\"modalWindow\" style={this.getModalWindowStyle()}>\n            {closeButton}\n            {this.render()}\n        </FloatingWindow>;\n    }\n\n    getModalWindowStyle() {\n        if (this.options.fillScreen) {\n            this.options.width = \"85%\";\n        }\n        // TODO(@Rocky): I don't like this very much, honestly...\n        return {\n            position: \"relative\",\n            padding: \"1%\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            borderRadius: \"10px\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: this.options.width || \"50%\",\n            height: this.options.height || \"auto\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    isVisible() {\n        return this.options.visible;\n    }\n\n    hide() {\n        if (!this.isVisible()) {\n            return;\n        }\n\n        this.options.visible = false;\n        this.modalWindow.fadeOut();\n\n        setTimeout(() => {\n            this.behindPanel.removeClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.addClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalContainer.addClass(\"hidden\");\n                if (this.options.destroyOnHide) {\n                    this.destroyNode();\n                }\n            }, this.modalWindow.options.transitionTime || 0);\n\n            this.detachListener(this.closeListenerHandler);\n        }, this.modalWindow.options.transitionTime || 0);\n        document.body.classList.remove(\"unscrollable\");\n    }\n\n    show() {\n        this.options.visible = true;\n        if (!this.node) {\n            this.mount(document.body);\n        }\n        this.modalContainer.removeClass(\"hidden\");\n        setTimeout(() => {\n            this.behindPanel.addClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.removeClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalWindow.fadeIn();\n            }, this.modalWindow.options.transitionTime);\n        }, 0);\n        this.closeListenerHandler = this.attachListener(Dispatcher.Global, \"closeAllModals\", () => {\n            this.hide();\n        });\n        document.body.classList.add(\"unscrollable\");\n    }\n\n    static show(options={}) {\n        let modal = new this(options);\n        modal.show();\n        return modal;\n    }\n}\n\n\nclass ActionModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            closeButton: false\n        });\n    }\n\n    getActionName() {\n        return this.options.actionName;\n    }\n\n    getActionLevel() {\n        return this.options.level || Level.DEFAULT;\n    }\n\n    getCloseName() {\n        return this.options.closeName || \"Close\";\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>{this.getHeader()}</div>,\n            (this.getBody() ? <div className={this.styleSheet.body}>{this.getBody()}</div> : null),\n            (this.getFooter() ? <div className={this.styleSheet.footer}>{this.getFooter()}</div> : null)\n        ];\n    }\n\n    getHeader() {\n        return <h4>{this.getTitle()}</h4>;\n    }\n\n    getTitle() {\n        return this.options.title || this.getActionName();\n    }\n\n    getBody() {\n        return null;\n    }\n\n    getActionButton() {\n        return <Button level={this.getActionLevel()} label={this.getActionName()} onClick={() => this.action()}/>;\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label={this.getCloseName()} onClick={() => this.hide()}/>\n                  {this.getActionButton()}\n            </ButtonGroup>\n        ];\n    }\n\n    action() {}\n}\n\n\nconst ActionModalButton = (ActionModal) => class ActionModalButton extends Button {\n    getModalOptions() {\n        let modalOptions = {\n            actionName: this.options.label,\n            level: this.options.level\n        };\n\n        Object.assign(modalOptions, this.options.modalOptions);\n        return modalOptions;\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            ActionModal.show(this.getModalOptions());\n        });\n    }\n};\n\n\nclass ErrorModal extends ActionModal {\n    getTitle() {\n        return \"An Error occurred\";\n    }\n\n    getBody() {\n        return this.options.error.message || this.options.error;\n    }\n\n    getFooter() {\n        return <Button level={Level.DANGER} label=\"Dismiss\" onClick={() => this.hide()}/>;\n    }\n}\n\nexport {Modal, ErrorModal, ActionModal, ActionModalButton};\n","import {styleRule, StyleSheet} from \"../Style\";\nimport {Device} from \"../../base/Device\";\nimport {Theme} from \"../style/Theme\";\n\nclass GlobalContainerStyle extends StyleSheet {\n    constructor() {\n        super({updateOnResize: Device.isMobileDevice()});\n    }\n\n    @styleRule\n    default = {\n        height: () => {return Device.isMobileDevice() ? `${window.innerHeight}px` : \"100vh\"},\n        paddingTop: this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,\n        background: this.themeProperties.COLOR_BACKGROUND_BODY,\n        width: \"100%\",\n        \">*\": {\n            height: \"100%\",\n            width: \"100%\",\n            paddingTop:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\n                ),\n            paddingBottom:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP\n                ),\n            overflow: Device.isMobileDevice() ? \"\" : \"auto\",\n        }\n    };\n}\n\nexport {GlobalContainerStyle};","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {GlobalContainerStyle} from \"./Style\";\nimport {Device} from \"../../base/Device\";\n\n@registerStyle(GlobalContainerStyle)\nclass GlobalContainer extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.default);\n    }\n\n    onMount() {\n        if (!Device.isTouchDevice() || !Device.isMobileDevice()) {\n            Object.assign(document.body.style, {\n                overflow: \"hidden\",\n            });\n        }\n        GlobalContainer.Global = GlobalContainer.Global || this;\n    }\n}\n\nexport {GlobalContainer};","import {UI} from \"../UIBase\";\n\nclass Divider extends UI.Element {\n    dragMousedown(event) {};\n\n    dragMousemove(event) {};\n\n    dragMouseup(event) {};\n\n    dividerMousedownFunction(event) {\n        this.dragMousedown(event);\n        this.parent.dispatch(\"dividerMousedown\", {divider: this, domEvent: event});\n\n        let dragMousemoveFunction = (event) => {\n            this.dragMousemove(event);\n            event.preventDefault(); // for touch devices\n            this.parent.dispatch(\"dividerMousemove\", event);\n        };\n\n        this.parent.addNodeListener(\"touchmove\", dragMousemoveFunction);\n        this.parent.addNodeListener(\"mousemove\", dragMousemoveFunction);\n\n        let dragMouseupFunction = (event) => {\n            this.dragMouseup(event);\n            this.parent.dispatch(\"dividerMouseup\", event);\n            this.parent.removeNodeListener(\"touchmove\", dragMousemoveFunction);\n            window.removeEventListener(\"touchend\", dragMouseupFunction);\n            this.parent.removeNodeListener(\"mousemove\", dragMousemoveFunction);\n            window.removeEventListener(\"mouseup\", dragMouseupFunction);\n        };\n\n        window.addEventListener(\"touchend\", dragMouseupFunction);\n        window.addEventListener(\"mouseup\", dragMouseupFunction);\n    }\n\n    onMount() {\n        // TODO: fix this hack when Device.isTouchDevice works\n        this.addNodeListener(\"touchstart\", (event) => {this.touchDeviceTriggered = true; this.dividerMousedownFunction(event);});\n        this.addNodeListener(\"mousedown\", (event) => {if (!this.touchDeviceTriggered) {this.dividerMousedownFunction(event);}});\n    }\n}\n\nexport {Divider};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\n\nclass DividerStyle extends StyleSheet {\n    @styleRule\n    noTextSelection = {\n        \"-webkit-user-select\": \"none\",\n        \"-moz-user-select\": \"none\",\n        \"-ms-user-select\": \"none\",\n        \"-o-user-select\": \"none\",\n        userSelect: \"none\",\n    };\n}\n\nclass AccordionStyle extends DividerStyle {\n    @styleRule\n    accordion = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">:nth-of-type(even)\": {\n            flexGrow: \"1\",\n            flexShrink: \"1\",\n            flexBasis: \"auto\",\n            overflow: \"auto\",\n            position: \"relative\",\n        },\n        \">:nth-of-type(odd)\": {\n            fontSize: \"1em\",\n            textTransform: \"uppercase\",\n            padding: \"8px 8px\",\n        }\n    };\n\n    @styleRule\n    grab = {\n        cursor: \"grab\",\n        cursor: \"-moz-grab\",\n        cursor: \"-webkit-grab\",\n    };\n\n    @styleRule\n    grabbing = {\n        cursor: \"grabbing\",\n        cursor: \"-moz-grabbing\",\n        cursor: \"-webkit-grabbing\",\n    };\n\n    @styleRule\n    collapseIcon = {\n        width: \"0.7em\",\n        fontSize: \"120% !important\",\n        fontWeight: \"900 !important\",\n        textAlign: \"center\",\n        marginRight: \"0.2em\",\n    };\n}\n\n\nclass SectionDividerStyle extends DividerStyle {\n    barThickness = 2;\n    barPadding = 3;\n    dividerColor = () => \"#DDD\";\n\n    @styleRule\n    horizontalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        height: \"100%\",\n        cursor: \"col-resize\",\n        width: this.barThickness + 2 * this.barPadding + \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderLeft: `${this.barPadding}px solid transparent`,\n        borderRight: `${this.barPadding}px solid transparent`,\n        marginLeft: `${-this.barThickness / 2 - this.barPadding}px`,\n        marginRight: `${-this.barThickness / 2}px`,\n        display: \"inline-block\",\n    };\n\n    @styleRule\n    verticalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        cursor: \"row-resize\",\n        width: \"100%\",\n        height: this.barThickness + 2 * this.barPadding +  \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderBottom: `${this.barPadding}px solid transparent`,\n        borderTop: `${this.barPadding}px solid transparent`,\n        marginBottom: `${-this.barThickness / 2  - this.barPadding}px`,\n        marginTop: `${-this.barThickness / 2 - this.barPadding}px`,\n    };\n\n    @styleRule\n    horizontalSection = {\n        position: \"relative\",\n        whiteSpace: \"nowrap\",\n        \">*\": {\n            whiteSpace: \"initial\",\n            verticalAlign: \"top\",\n            paddingLeft: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingRight: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingLeft: \"0\",\n        },\n        \">:last-child\": {\n            paddingRight: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n        \">:nth-of-type(odd)\": {\n            display: \"inline-block\",\n        }\n    };\n\n    @styleRule\n    verticalSection = {\n        position: \"relative\",\n        \">*\": {\n            paddingTop: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingBottom: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingTop: \"0\",\n        },\n        \">:last-child\": {\n            paddingBottom: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n}\n\nclass TitledDividerStyle extends SectionDividerStyle {\n    barThickness = 16;\n    barPadding = 1;\n    transitionTime = .3;\n\n    dividerStyle = {\n        backgroundColor: \"white\",\n        borderColor: \"#DDD !important\",\n    };\n\n    @styleRuleInherit\n    horizontalDivider = Object.assign(this.dividerStyle, {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        \">*\": {\n            flex: \"1\",\n            display: \"flex\",\n            color: \"rgba(0,0,0, .4)\",\n        },\n        \">:first-child\": {\n            alignItems: \"flex-end\",\n        },\n        \">:last-child\": {\n            alignItems: \"flex-start\",\n        },\n        \">:nth-child(2)\": {\n            flex: \".2\",\n            alignItems: \"center\",\n        }\n    });\n\n    @styleRule\n    horizontalDots = {\n        transform: \"rotate(90deg) scaleX(5)\",\n    };\n\n    @styleRuleInherit\n    verticalDivider = Object.assign(this.dividerStyle, {\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n\n    @styleRule\n    verticalDots = {\n        flex: \"1\",\n        fontSize: \"70% !important\",\n        height: 0,\n        textAlign: \"center\",\n        transform: \"scaleX(10) translateY(-.4em)\",\n    };\n\n    @styleRule\n    arrowButton = {\n        fontSize: \"230% !important\",\n        padding: \"1em .2em\",\n        color: \"rgba(0,0,0, .4)\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"black\",\n        }\n    };\n\n    @styleRule\n    buttonsDisabled = {\n        \">:first-child\": {\n            pointerEvents: \"none\",\n        },\n        \">:last-child\": {\n            pointerEvents: \"none\",\n        },\n    };\n\n    @styleRule\n    barCollapsePanel = {\n        position: \"relative\",\n        \">:first-child\": {\n            width: \"100%\",\n            height: \"100%\",\n        },\n        \">:nth-child(2)\": {\n            display: \"none\",\n            opacity: \"0\",\n            transition: \"opacity \" + this.transitionTime + \"s ease\",\n        },\n    };\n\n    @styleRule\n    hiddenContent = {\n        \">:first-child\": {\n            display: \"none\",\n        },\n        \">:nth-child(2)\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    collapsedBarTitle = {\n        cursor: \"pointer\",\n        borderLeft: \"1px solid #ccc\",\n        borderRight: \"1px solid #ccc\",\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        backgroundColor: \"#fff\",\n        flexDirection: \"column\",\n        zIndex: 5,\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        },\n        \">:nth-child(2)\": {\n            flex: \"1\",\n            transform: \"rotate(90deg)\",\n        },\n        \">:nth-child(2)>:first-child\": {\n            textTransform: \"uppercase\",\n            fontWeight: \"bold\",\n            fontSize: \"130%\",\n            whiteSpace: \"nowrap\",\n            marginTop: \"-.4em\",\n            transform: \"translateY(10%)\",\n        },\n        \">*\": {\n            display: \"flex\",\n            alignItems: \"center\",\n        },\n        \">:first-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n        \">:last-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n    };\n\n    @styleRule\n    animatedSectionDivider = {\n        \">*\": {\n            transition: this.transitionTime + \"s height ease, \" + this.transitionTime + \"s width ease\",\n        }\n    };\n\n    @styleRule\n    paddingRemoved = {\n        \">*\": {\n            padding: \"0 !important\",\n            overflow: \"hidden\",\n        },\n        \">:nth-of-type(even)\": {\n            display: \"none !important\",\n        }\n    };\n}\n\nexport {AccordionStyle, SectionDividerStyle, TitledDividerStyle};\n","// TODO: Too much \"hidden\"\nimport {Device} from \"../../base/Device\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Divider} from \"./Divider\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../UI\";\nimport {SectionDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\n\n\n\n// options.orientation is the orientation of the divided elements\n@registerStyle(SectionDividerStyle)\nexport class DividerBar extends Divider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            orientation: Orientation.HORIZONTAL,\n        });\n    }\n\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalDivider);\n        } else {\n            attr.addClass(this.styleSheet.horizontalDivider);\n        }\n    }\n}\n\n\n/* SectionDivider class should take in:\n    - Vertical or horizontal separation\n    - All the children it's dividing\n    - An option on how to redivide the sizes of the children\n */\n@registerStyle(SectionDividerStyle)\nexport class SectionDivider extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({\n            autoCollapse: false,\n        }, super.getDefaultOptions())\n    }\n\n    constructor(options) {\n        super(options);\n        this.uncollapsedSizes = new WeakMap();\n    }\n\n    getDividerBarClass() {\n        return DividerBar;\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalSection);\n        } else {\n            attr.addClass(this.styleSheet.horizontalSection);\n        }\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n\n    getDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            return element.getWidth();\n        } else {\n            return element.getHeight();\n        }\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    getMinDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL && element.options.hasOwnProperty(\"minWidth\")) {\n            return element.options.minWidth;\n        } else if (this.getOrientation() === Orientation.VERTICAL && element.options.hasOwnProperty(\"minHeight\")) {\n            return element.options.minHeight;\n        } else {\n            return this.getDimension(this) / this.panels.length / 4;\n        }\n    }\n\n    getHiddenDivider(index) {\n        let divider;\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i + 1].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        divider = null;\n        for(let i = index - 1; i >= 0; i -= 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        return null;\n    }\n\n    getVisibleDivider(index) {\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        return null;\n    }\n\n    collapseChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getVisibleDivider(index);\n        if (divider) {\n            divider.hide();\n        }\n\n        this.setDimension(child, \"0\");\n        child.hide();\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) !== 0 && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + childSize / unCollapsedCount) * 100\n                                  / parentSize - 0.5 / this.children.length + \"%\");\n            }\n        }\n\n        this.recalculateDimensions();\n    }\n\n    expandChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getHiddenDivider(index);\n        if (divider) {\n            divider.show();\n        }\n\n        child.show();\n        let childSize = this.uncollapsedSizes.get(child);\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - childSize / (unCollapsedCount - 1)) * 100\n                                  / parentSize - this.panels.length / 2 + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n        this.recalculateDimensions();\n    }\n\n    isCollapsed(child) {\n        return !this.getDimension(child);\n    }\n\n    toggleChild(index) {\n        if (this.isCollapsed(this.panels[index])) {\n            this.expandChild(index);\n        } else {\n            this.collapseChild(index);\n        }\n    }\n\n    recalculateDimensions() {\n        if (!this.isInDocument()) {\n            return;\n        }\n        let parentSize = this.getDimension(this);\n        let fixedTotalSize = 0;\n        let unfixedTotalSize = 0;\n        for (let panel of this.panels) {\n            if (panel.options.fixed) {\n                fixedTotalSize += this.getDimension(panel);\n            } else {\n                unfixedTotalSize += this.getDimension(panel);\n            }\n        }\n        let ratio = (parentSize - fixedTotalSize) / parentSize;\n        for (let panel of this.panels) {\n            if (!panel.options.fixed && !panel.hasClass(\"hidden\")) {\n                this.setDimension(panel, this.getDimension(panel) * 100 * ratio / unfixedTotalSize + \"%\");\n            }\n        }\n    }\n\n    getPreviousUnfixedChild(index) {\n        for (let i = index; i >= 0 ; i -= 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    getNextUnfixedChild(index) {\n        for (let i = index + 1; i < this.panels.length; i += 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    dividerMouseDownFunction(dividerEvent) {\n        let previousEvent = dividerEvent.domEvent;\n        const index = this.dividers.indexOf(dividerEvent.divider);\n\n        const previousPanel = this.getPreviousUnfixedChild(index);\n        const nextPanel = this.getNextUnfixedChild(index);\n\n        if (previousPanel && nextPanel) {\n            const parentSize = this.getDimension(this);\n            let panelsSize = parentSize;\n\n            for (let panel of this.panels) {\n                if (panel.options.fixed) {\n                    panelsSize -= this.getDimension(panel);\n                }\n            }\n\n            const deltaFunction = (this.getOrientation() === Orientation.HORIZONTAL ?\n                                 (event) => Device.getEventX(event) :  (event) => Device.getEventY(event));\n\n            const mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n                const delta = deltaFunction(event) - deltaFunction(previousEvent);\n\n                const nextSize = this.getDimension(nextPanel) - delta;\n                const previousSize = this.getDimension(previousPanel) + delta;\n\n                if (this.options.autoCollapse) {\n                    if ((delta > 0 && nextPanel.collapsed) || (delta < 0 && previousPanel.collapsed)) {\n                        return;\n                    }\n\n                    if (delta < 0 && nextPanel.collapsed && this.options.autoCollapse) {\n                        this.expandChild(index + 1);\n                        return;\n                    }\n\n                    if (delta > 0 && previousPanel.collapsed) {\n                        this.expandChild(index);\n                        return;\n                    }\n\n                    if (nextSize < this.getMinDimension(nextPanel)) {\n                        this.collapseChild(index + 1);\n                        return;\n                    }\n\n                    if (previousSize < this.getMinDimension(previousPanel)) {\n                        this.collapseChild(index);\n                        return;\n                    }\n                } else {\n                    if (nextSize < this.getMinDimension(nextPanel) || previousSize < this.getMinDimension(previousPanel)) {\n                        return;\n                    }\n                }\n\n                this.setDimension(nextPanel, nextSize * 100 / parentSize + \"%\");\n                this.setDimension(previousPanel, previousSize * 100 / parentSize + \"%\");\n\n                previousEvent = event;\n            });\n\n            const mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n                if (this.clearListeners) {\n                    this.clearListeners();\n                }\n            });\n\n            this.clearListeners = () => {\n                mouseMoveListener.remove();\n                mouseUpListener.remove();\n                this.clearListeners = null;\n            }\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMouseDownFunction(dividerEvent));\n        setTimeout(() => {\n            this.recalculateDimensions();\n        });\n    }\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        let leftChildVisible = false;\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (let child of unwrapArray(this.render())) {\n            if (this.panels.length) {\n                let hiddenClass = \"hidden\";\n                if (leftChildVisible && !child.hasClass(\"hidden\")) {\n                    hiddenClass = \"\";\n                }\n                let divider = <DividerBarClass className={hiddenClass} orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            leftChildVisible |= !child.hasClass(\"hidden\");\n            children.push(child);\n            this.panels.push(child);\n        }\n        return children;\n    }\n}","// TODO: This class is incomplete for horizontal orientation and more than 2 panels.\n\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {DividerBar, SectionDivider} from \"./SectionDivider\";\nimport {TitledDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\nimport {FAIcon} from \"../FontAwesome\";\n\n\n\n@registerStyle(TitledDividerStyle)\nclass TitledSectionDividerBar extends DividerBar {\n    render() {\n        if (this.options.orientation === Orientation.VERTICAL) {\n            return [\n\n                <FAIcon icon=\"ellipsis-h\" className={this.styleSheet.verticalDots} />,\n\n            ]\n        } else {\n            return [\n                <div><FAIcon ref=\"rightButton\" icon=\"caret-right\" className={this.styleSheet.arrowButton}/></div>,\n                <div><FAIcon icon=\"bars\" className={this.styleSheet.horizontalDots}/></div>,\n                <div><FAIcon ref=\"leftButton\" icon=\"caret-left\" className={this.styleSheet.arrowButton} /></div>,\n            ];\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.leftButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.leftButton.addClickListener(() => {\n            this.dispatch(\"collapsePrevious\");\n        });\n        this.rightButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.rightButton.addClickListener(() => {\n            this.dispatch(\"collapseNext\");\n        })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nclass BarCollapsePanel extends UI.Element {\n    extraNodeAttributes(attr) {\n        const panelChild = this.getGivenChildren()[0];\n        attr.addClass(this.styleSheet.barCollapsePanel);\n        let panelSize = panelChild.options.size;\n        if (this.collapsed) {\n            attr.addClass(this.styleSheet.hiddenContent);\n            panelSize = this.options.collapsedSize;\n        }\n        if (panelSize) {\n            if (this.options.orientation === Orientation.VERTICAL) {\n                attr.setStyle(\"height\", panelSize);\n            } else {\n                attr.setStyle(\"width\", panelSize);\n            }\n        }\n\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.setStyle(\"width\", \"100%\");\n        } else {\n            attr.setStyle(\"height\", \"100%\");\n        }\n    }\n\n    getChildrenToRender() {\n        this.collapsed = this.getGivenChildren()[0].options.collapsed;\n        const isFirst = this.parent.panels.indexOf(this) === 0;\n        const isLast = this.parent.panels.indexOf(this) === this.parent.panels.length - 1;\n        const firstCaret = isLast ? \"left\" : \"right\";\n        const lastCaret = isFirst ? \"right\" : \"left\";\n        return [\n            this.render(),\n            <div ref=\"collapsedBarTitle\" style={{display: this.collapsed ? \"flex\": \" none\"}}\n                 className={this.styleSheet.collapsedBarTitle}>\n                <div><FAIcon icon={\"caret-\" + firstCaret}/></div>\n                <div className={this.styleSheet.title}>\n                    <div>\n                        {this.options.title}\n                    </div>\n                </div>\n                <div><FAIcon icon={\"caret-\" + lastCaret}/></div>\n            </div>\n        ]\n    }\n\n    toggle() {\n        if (this.collapsed) {\n            this.collapsed = false;\n            this.removeClass(this.styleSheet.hiddenContent);\n            this.collapsedBarTitle.setStyle(\"display\", \"none\");\n        } else {\n            this.collapsed = true;\n            this.collapsedBarTitle.setStyle(\"display\", \"flex\");\n            setTimeout(() => {\n                this.addClass(this.styleSheet.hiddenContent);\n            }, 100)\n\n        }\n    }\n\n    onMount() {\n         this.collapsedBarTitle.addClickListener(() => {\n             this.dispatch(\"expand\");\n         });\n         this.addListener(\"resize\", () => {\n             for (const child of unwrapArray(this.render())) {\n                 child.dispatch(\"resize\");\n             }\n         })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nexport class TitledSectionDivider extends SectionDivider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            collapsedSize: 40,\n            autoCollapse: true,\n        });\n    }\n\n    getDividerBarClass() {\n        return TitledSectionDividerBar;\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    collapseChild(index) {\n        if (this.clearListeners) {\n            this.clearListeners();\n        }\n\n        this.addClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        this.setDimension(child, this.options.collapsedSize);\n        child.toggle();\n\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + (childSize - this.options.collapsedSize)/ unCollapsedCount) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    expandChild(index) {\n        this.removeClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let childSize = this.uncollapsedSizes.get(child);\n        child.toggle();\n\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - (childSize - this.options.collapsedSize)/ (unCollapsedCount - 1)) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (const child of unwrapArray(this.render())) {\n            if (child.options.collapsed) {\n                this.addClass(this.styleSheet.paddingRemoved);\n            }\n            if (this.panels.length) {\n                let divider = <DividerBarClass orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            const wrappedChild = <BarCollapsePanel orientation={this.options.orientation} collapsedSize={this.options.collapsedSize}\n                                                   title={child.options.title || \"...\"}>{child}</BarCollapsePanel>;\n            children.push(wrappedChild);\n            this.panels.push(wrappedChild);\n        }\n        return children;\n    }\n\n    onMount() {\n        super.onMount();\n        for (let i = 0; i < this.panels.length; i += 1) {\n            const panel = this.panels[i];\n            this.attachListener(panel, \"expand\", () => {\n                this.uncollapsedSizes.set(panel, this.getDimension(this) / this.panels.length);\n                this.expandChild(i);\n            });\n        }\n        for (let i = 0; i < this.dividers.length; i += 1) {\n            this.attachListener(this.dividers[i], \"collapseNext\", () => this.collapseChild(i + 1));\n            this.attachListener(this.dividers[i], \"collapsePrevious\", () => this.collapseChild(i));\n        }\n    }\n}","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../UI\";\nimport {getComputedStyle} from \"../Utils\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Device} from \"../../base/Device\";\nimport {AccordionStyle} from \"./Style\";\nimport {FACollapseIcon} from \"../../ui/FontAwesome\";\nimport {Divider} from \"./Divider\";\n\n@registerStyle(AccordionStyle)\nclass AccordionDivider extends Divider {\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n        this.addClass(this.styleSheet.grabbing);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n        this.removeClass(this.styleSheet.grabbing);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.grab);\n    }\n\n    render() {\n        return [<FACollapseIcon ref=\"collapseIcon\" collapsed={false} className={this.styleSheet.collapseIcon}/>, this.options.children];\n    }\n\n    setCollapsed(value) {\n        this.collapseIcon.setCollapsed(value);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addListener(\"togglePanel\", () => {this.collapseIcon.toggleCollapsed();});\n    }\n}\n\n\n@registerStyle(AccordionStyle)\nclass Accordion extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.accordion);\n    }\n\n    getChildrenToRender() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        for (let child of unwrapArray(this.render())) {\n            let title = (child.getTitle ? child.getTitle() : (child.options.title ? child.options.title : \"\"));\n            let divider = <AccordionDivider>{title}</AccordionDivider>;\n            this.dividers.push(divider);\n            this.panels.push(child);\n            children.push(divider);\n            children.push(child);\n        }\n        return children;\n    }\n\n    getNextVisibleChild(index) {\n        for (let i = index; i < this.panels.length; i += 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    getPreviousVisibleChild(index) {\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    dividerMousedownFunction(dividerEvent) {\n        let dragTriggered, panelsHeight, totalFlex;\n\n        let previousEvent = dividerEvent.domEvent;\n        let index = this.dividers.indexOf(dividerEvent.divider);\n\n        let previousPanel = this.getPreviousVisibleChild(index);\n        let nextPanel = this.getNextVisibleChild(index);\n\n        panelsHeight = this.getHeight();\n        for (let divider of this.dividers) {\n            panelsHeight -= divider.getHeight();\n        }\n        totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n\n        let mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n            dragTriggered = true;\n            if (index != -1 && nextPanel && previousPanel) {\n                // Calculate the height to transfer from one panel to another\n                let delta = (Device.getEventY(event) - Device.getEventY(previousEvent)) * totalFlex / panelsHeight;\n\n                let nextSize = parseFloat(getComputedStyle(nextPanel.node, \"flex\"));\n                let previousSize = parseFloat(getComputedStyle(previousPanel.node, \"flex\"));\n\n                // Cap the delta value, to at most zero our panels\n                delta = Math.sign(delta) * Math.min(Math.abs(delta), (delta > 0 ? nextSize : previousSize));\n\n                nextPanel.setStyle(\"flex\", nextSize - delta);\n                previousPanel.setStyle(\"flex\", previousSize + delta);\n\n                previousEvent = event;\n\n                this.dispatch(\"dragging\");\n            }\n        });\n\n        let mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n            if (!dragTriggered) {\n                dividerEvent.divider.dispatch(\"togglePanel\");\n                this.toggleChild(this.panels[index]);\n            }\n            mouseMoveListener.remove();\n            mouseUpListener.remove();\n            this.dispatch(\"childrenStatusChange\");\n        });\n    }\n\n    toggleChild(child) {\n        let totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n        let sign = child.hasClass(\"hidden\") ? 1 : -1;\n        totalFlex += sign * parseFloat(getComputedStyle(child, \"flex\"));\n        child.toggleClass(\"hidden\");\n        if (totalFlex < 1) {\n            for (let panel of this.panels) {\n                if (!panel.hasClass(\"hidden\") && parseFloat(getComputedStyle(panel.node, \"flex\")) < 1) {\n                    panel.setStyle(\"flex\", 1);\n                }\n            }\n        }\n    }\n\n    getChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: getComputedStyle(panel.node, \"flex\"),\n                collapsed: panel.hasClass(\"hidden\")\n            });\n        }\n        return childrenStatus;\n    }\n\n    getDefaultChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: 1,\n                collapsed: false\n            })\n        }\n        return childrenStatus;\n    }\n\n    setChildrenStatus(childrenStatus) {\n        for (let i = 0; i < childrenStatus.length; i += 1) {\n            this.panels[i].setStyle(\"flex\", childrenStatus[i].flex);\n            let collapsed = childrenStatus[i].collapsed;\n            if (collapsed) {\n                this.panels[i].addClass(\"hidden\");\n            } else {\n                this.panels[i].removeClass(\"hidden\");\n            }\n            this.dividers[i].setCollapsed(collapsed);\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMousedownFunction(dividerEvent));\n    }\n}\n\nexport {Accordion};\n","import {UI, getComputedStyle, registerStyle} from \"./UI\";\nimport {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {FAIcon} from \"../ui/FontAwesome\";\nimport {Orientation} from \"./Constants\";\n\nclass CarouselStyle extends StyleSheet {\n    navigatorHeight = \"35px\";\n    hoverColor = \"#364251\";\n    transitionTime = \"0.3\";\n    textColor = \"inherit\";\n    navigatorTransitionTime = \"0s\";\n\n    @styleRule\n    carousel = {\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    container = {\n        whiteSpace: \"nowrap\",\n        height: \"100%\",\n        \">*\": {\n            width: \"100%\",\n            height: \"100%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n        },\n        \">:first-child\": {\n            width: \"0\",\n            transition: `margin-left ease ${this.transitionTime}s`,\n        }\n    };\n\n    @styleRule\n    navigator = {\n        width: \"100%\",\n        height: this.navigatorHeight,\n        display: \"flex\",\n    };\n\n    @styleRule\n    navigatorIcon = {\n        color: this.textColor,\n        fontSize: \"180% !important\",\n        textAlign: \"center\",\n        cursor: \"pointer\",\n        flex: \"1\",\n        fontWeight: \"900 !important\",\n        lineHeight: this.navigatorHeight + \" !important\",\n        transition: `background-color ${this.navigatorTransitionTime}`,\n        \":hover\": {\n            backgroundColor: this.hoverColor,\n        },\n    };\n}\n\nclass CarouselNavigator extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navigator);\n    }\n\n    render() {\n        return [\n            <FAIcon icon=\"angle-left\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"previousPage\");}} />,\n            <FAIcon icon=\"angle-right\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"nextPage\");}} />,\n        ];\n    }\n}\n\n\n@registerStyle(CarouselStyle)\nclass Carousel extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.carousel);\n    }\n\n    appendChild(child, doMount) {\n        this.options.children.push(child);\n        if (doMount) {\n            this.setActive(child);\n        }\n        child.mount(this, null);\n        this.redraw();\n    }\n\n    eraseChild(child) {\n        if (this.options.children.indexOf(child) === this.options.children.length - 1) {\n            this.setActiveIndex(Math.max(this.options.children.length - 2, 0));\n        }\n        this.options.children.splice(this.options.children.indexOf(child), 1);\n        this.redraw();\n    }\n\n    render() {\n        if (this.activeIndex == null) {\n            this.activeIndex = 0;\n            for (let i = 0; i < this.options.children.length; i += 1) {\n                if (this.options.children[i].options.active) {\n                    this.activeIndex = i;\n                    break;\n                }\n            }\n        }\n\n        return [<CarouselNavigator className={this.options.children.length > 1 ? \"\" : \"hidden\"}/>,\n            <div className={this.styleSheet.container}>\n                <div ref=\"pusher\" style={{marginLeft: `${-this.activeIndex * 100}%`}}/>\n                {this.options.children}\n            </div>];\n    }\n\n    setActive(panel) {\n        this.setActiveIndex(this.options.children.indexOf(panel));\n    }\n\n    setActiveIndex(index) {\n        this.activeIndex = index;\n        this.pusher.setStyle(\"margin-left\", `${-index * this.getWidth()}px`);\n    }\n\n    getActive() {\n        return this.options.children[this.activeIndex];\n    }\n\n    onMount() {\n        this.addListener(\"nextPage\", () => this.setActiveIndex((this.activeIndex + 1) % this.options.children.length));\n        this.addListener(\"previousPage\", () => this.setActiveIndex((this.activeIndex + this.options.children.length - 1) % this.options.children.length));\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n}\n\nexport {Carousel, CarouselStyle};\n","import {StyleSheet, styleRule} from \"./Style\";\n\nclass RangePanelStyle extends StyleSheet {\n    rowHeight = 52;\n\n    @styleRule\n    default = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        overflow: \"auto\",\n        overflowY: \"hidden\",\n    };\n\n    @styleRule\n    tableContainer = {\n        flex: \"1\",\n        height: \"100%\",\n        width: \"100%\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    scrollablePanel = {\n        overflow: \"auto\",\n        height: \"calc(100% - 30px)\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    fakePanel = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    footer = {\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        position: \"absolute\",\n        bottom: \"0px\",\n        width: \"100%\",\n        whiteSpace: \"nowrap\",\n        paddingBottom: \"15px\",\n        paddingTop: \"3px\",\n    };\n\n    @styleRule\n    jumpToButton = {\n        marginLeft: \"5px\",\n        padding: \"2.3px 10px\",\n        verticalAlign: \"bottom\",\n    };\n\n    @styleRule\n    table = {\n        width: \"calc(100% - 15px)\",\n        marginBottom: \"0px\",\n        top: \"0px\",\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        \">tbody>tr>td\": {\n            height: `${this.rowHeight}px !important`,\n            whiteSpace: \"nowrap !important\",\n        }\n    };\n}\n\nexport {RangePanelStyle};\n","import {UI, UIElement, NumberInput, Button} from \"./UI\";\nimport {RangePanelStyle} from \"./RangePanelStyle\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {Size} from \"./Constants\";\n\nfunction RangePanelInterface(PanelClass) {\n    class RangePanel extends PanelClass {\n    }\n    return RangePanel;\n}\n\n\nclass EntriesManager extends Dispatchable {\n    constructor(entries, options={}) {\n        super();\n        this.rawEntries = entries;\n        this.options = options;\n        this.cacheEntries();\n    }\n\n    getRawEntries() {\n        return this.rawEntries;\n    }\n\n    cacheEntries() {\n        this.cachedEntries = this.sortEntries(this.filterEntries(this.getRawEntries()));\n        this.dispatch(\"update\");\n    }\n\n    getEntries() {\n        return this.cachedEntries;\n    }\n\n    getEntriesCount() {\n        return this.cachedEntries.length;\n    }\n\n    getEntriesRange(low, high) {\n        return this.cachedEntries.slice(low, high);\n    }\n\n    updateEntries(entries) {\n        this.rawEntries = entries;\n        this.cacheEntries();\n    }\n\n    sortEntries(entries) {\n        return this.getComparator() ? entries.sort(this.getComparator()) : entries;\n    }\n\n    filterEntries(entries) {\n        const filter = this.getFilter();\n        return filter ? entries.filter(filter) : entries;\n    }\n\n    getComparator() {\n        return this.options.comparator;\n    }\n\n    setComparator(comparator) {\n        this.options.comparator = comparator;\n        this.cacheEntries();\n    }\n\n    getFilter() {\n        return this.options.filter;\n    }\n\n    setFilter(filter) {\n        this.options.filter = filter;\n        this.cacheEntries();\n    }\n}\n\n\n// A wrapper for tables which optimizes rendering when many entries / updates are involved. It currently has hardcoded\n// row height for functionality reasons.\nfunction RangeTableInterface(TableClass) {\n    class RangeTable extends UI.Primitive(TableClass, \"div\") {\n        constructor(options) {\n            super(options);\n            this.lowIndex = 0;\n            this.highIndex = 0;\n        }\n\n        getRangePanelStyleSheet() {\n            return RangePanelStyle.getInstance();\n        }\n\n        getRowHeight() {\n            return this.options.rowHeight || this.getRangePanelStyleSheet().rowHeight;\n        }\n\n        getEntriesManager() {\n            if (!this.entriesManager) {\n                this.entriesManager = new EntriesManager(super.getEntries());\n            }\n            return this.entriesManager;\n        }\n\n        extraNodeAttributes(attr) {\n            attr.addClass(this.getRangePanelStyleSheet().default);\n        }\n\n        render() {\n            const rangePanelStyleSheet = this.getRangePanelStyleSheet();\n            const fakePanelHeight = (this.getRowHeight() * this.getEntriesManager().getEntriesCount() + 1) + \"px\";\n            const headHeight = this.containerHead ? this.containerHead.getHeight() : 0;\n            this.computeIndices();\n\n            // Margin is added at redraw for the case when the scoreboard has horizontal scrolling during a redraw.\n            const margin = (this.node &&  this.node.scrollLeft) || 0;\n\n            return [\n                <div ref=\"tableContainer\" className={rangePanelStyleSheet.tableContainer}\n                     style={{paddingTop: headHeight + \"px\", marginLeft: margin + \"px\"}}>\n                    <div ref=\"scrollablePanel\" className={rangePanelStyleSheet.scrollablePanel}>\n                        <div ref=\"fakePanel\" className={rangePanelStyleSheet.fakePanel} style={{height: fakePanelHeight}}/>\n                        <table ref=\"container\" className={`${this.styleSheet.table} ${rangePanelStyleSheet.table}`}\n                                               style={{marginLeft: -margin + \"px\"}}>\n                            <thead ref=\"containerHead\">\n                            {this.renderContainerHead()}\n                            </thead>\n                            <tbody ref=\"containerBody\">\n                            {this.renderContainerBody()}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>,\n                <div ref=\"footer\" className={rangePanelStyleSheet.footer} style={{marginLeft: margin + \"px\"}}>\n                    <span ref=\"tableFooterText\">\n                        {this.getFooterContent()}\n                    </span>\n                    <NumberInput ref=\"jumpToInput\" placeholder=\"jump to...\" style={{textAlign: \"center\",}}/>\n                    <Button ref=\"jumpToButton\" size={Size.SMALL} className={rangePanelStyleSheet.jumpToButton}>Go</Button>\n                </div>\n            ];\n        }\n\n        applyScrollState() {\n            this.scrollablePanel.node.scrollTop = this.scrollState;\n        }\n\n        saveScrollState() {\n            if (this.scrollablePanel && this.scrollablePanel.node) {\n                this.scrollState = this.scrollablePanel.node.scrollTop;\n            }\n        }\n\n        renderContainerHead() {\n            return this.renderTableHead();\n        }\n\n        renderContainerBody() {\n            // TODO: this method should not be here, and tables should have a method \"getEntriesToRender\" which will be overwritten in this class.\n            this.rows = [];\n\n            const entries = this.getEntriesManager().getEntriesRange(this.lowIndex, this.highIndex);\n\n            for (let i = 0; i < entries.length; i += 1) {\n                const entry = entries[i];\n                const RowClass = this.getRowClass(entry);\n                this.rows.push(<RowClass key={this.getEntryKey(entry, i + this.lowIndex)} index={i + this.lowIndex}\n                                         {...this.getRowOptions(entry)} parent={this}/>);\n            }\n            return this.rows;\n        }\n\n        getFooterContent() {\n            if (this.lowIndex + 1 > this.highIndex) {\n                return `No results. Jump to `;\n            }\n            return `${this.lowIndex + 1}  ${this.highIndex} of ${this.getEntriesManager().getEntriesCount()}. `;\n        }\n\n        jumpToIndex(index) {\n            // Set the scroll so that the requested position is in the center.\n            const lowIndex = parseInt(index - (this.highIndex - this.lowIndex) / 2 + 1);\n            const scrollRatio = lowIndex / (this.getEntriesManager().getEntriesCount() + 0.5);\n            this.scrollablePanel.node.scrollTop = scrollRatio * this.scrollablePanel.node.scrollHeight;\n        }\n\n        computeIndices() {\n            if (!this.tableContainer || !this.containerHead || !this.footer) {\n                return;\n            }\n            const scrollRatio = this.scrollablePanel.node.scrollTop / this.scrollablePanel.node.scrollHeight;\n            const entriesCount = this.getEntriesManager().getEntriesCount();\n            // Computing of entries range is made using the physical scroll on the fake panel.\n            this.lowIndex = parseInt(scrollRatio * (entriesCount + 0.5));\n            if (isNaN(this.lowIndex)) {\n                this.lowIndex = 0;\n            }\n            this.highIndex = Math.min(this.lowIndex + parseInt((this.getHeight() - this.containerHead.getHeight()\n                    - this.footer.getHeight()) / this.getRowHeight()), entriesCount);\n        }\n\n        setScroll() {\n            // This is the main logic for rendering the right entries. Right now, it best works with a fixed row height,\n            // for other cases no good results are guaranteed. For now, that row height is hardcoded in the class'\n            // stylesheet.\n\n            if (this.inSetScroll) {\n                return;\n            }\n            if (!document.body.contains(this.node)) {\n                this.tableFooterText.setChildren(this.getFooterContent());\n                this.containerBody.setChildren(this.renderContainerBody());\n                return;\n            }\n            this.inSetScroll = true;\n            this.computeIndices();\n            // Ugly hack for chrome stabilization.\n            // This padding top makes the scrollbar appear only on the tbody side\n            this.tableContainer.setStyle(\"paddingTop\", this.containerHead.getHeight() + \"px\");\n            this.fakePanel.setHeight(this.getRowHeight() * this.getEntriesManager().getEntriesCount() + \"px\");\n            // The scrollable panel must have the exact height of the tbody so that there is consistency between entries\n            // rendering and scroll position.\n            this.scrollablePanel.setHeight(this.getRowHeight() * (this.highIndex - this.lowIndex) + \"px\");\n            // Update the entries and the footer info.\n            this.tableFooterText.setChildren(this.getFooterContent());\n            this.containerBody.setChildren(this.renderContainerBody());\n            // This is for setting the scrollbar outside of the table area, otherwise the scrollbar wouldn't be clickable\n            // because of the logic in \"addCompatibilityListeners\".\n            this.container.setWidth(this.fakePanel.getWidth() + \"px\");\n            this.inSetScroll = false;\n        }\n\n        addCompatibilityListeners() {\n            // The physical table has z-index -1 so it does not respond to mouse events, as it is \"behind\" fake panel.\n            // The following listeners repair that.\n            this.addNodeListener(\"mousedown\", () => {\n                this.container.setStyle(\"pointerEvents\", \"all\");\n            });\n            this.container.addNodeListener(\"mouseup\", (event) => {\n                const mouseDownEvent = new MouseEvent(\"click\", event);\n                const domElement = document.elementFromPoint(parseFloat(event.clientX), parseFloat(event.clientY));\n                setTimeout(() => {\n                    this.container.setStyle(\"pointerEvents\", \"none\");\n                    domElement.dispatchEvent(mouseDownEvent);\n                }, 100);\n            });\n\n            // Adding listeners that force resizing\n            this.addListener(\"setActive\", () => {\n                this.setScroll();\n            });\n            this.addListener(\"resize\", () => {\n                this.setScroll();\n            });\n            window.addEventListener(\"resize\", () => {\n                this.setScroll();\n            });\n        }\n\n        addTableAPIListeners() {\n            // This event isn't used anywhere but this is how range updates should be made.\n            this.addListener(\"entriesChange\", (event) => {\n                if (!(event.leftIndex >= this.highIndex || event.rightIndex < this.lowIndex)) {\n                    this.setScroll();\n                }\n            });\n            this.addListener(\"showCurrentUser\", () => {\n                const index = this.getEntriesManager().getEntries().map(entry => entry.userId).indexOf(USER.id) + 1;\n                this.jumpToIndex(index);\n            });\n            // Delay is added for smoother experience of scrolling.\n            this.attachListener(this.getEntriesManager(), \"update\", () => {\n                this.setScroll();\n            });\n        }\n\n        addSelfListeners() {\n            this.scrollablePanel.addNodeListener(\"scroll\", () => {\n                this.setScroll();\n            });\n            this.addNodeListener(\"scroll\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.footer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.container.setStyle(\"marginLeft\", -this.node.scrollLeft);\n            });\n            window.addEventListener(\"resize\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", 0);\n                this.footer.setStyle(\"marginLeft\", 0);\n                this.container.setStyle(\"marginLeft\", 0);\n            });\n            this.jumpToInput.addNodeListener(\"keyup\", (event) => {\n                if (event.code === \"Enter\") {\n                    this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n                }\n            });\n            this.jumpToButton.addClickListener(() => {\n                this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n            });\n        }\n\n        onMount() {\n            super.onMount();\n\n            this.addCompatibilityListeners();\n\n            this.addTableAPIListeners();\n\n            this.addSelfListeners();\n\n            setTimeout(() => {\n                this.redraw();\n            })\n        }\n    }\n    return RangeTable;\n}\n\nexport {RangePanelInterface, RangeTableInterface, EntriesManager};\n","import {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass TableStyle extends StyleSheet {\n    cellStyle =  {\n        padding: \"8px\",\n        lineHeight: \"1.42857143\",\n        verticalAlign: \"top\",\n        borderTop: \"1px solid #ddd\",\n    };\n\n    theadCellStyle = {\n        borderBottom: \"2px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    table = {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        marginBottom: \"20px\",\n        borderSpacing: \"0\",\n        borderCollapse: \"collapse\",\n        \">*>*>td\": this.cellStyle,\n        \">*>*>th\": this.cellStyle,\n        \">*>thead>*>*\": this.theadCellStyle,\n    };\n\n    @styleRule\n    tableStripped = {\n        \">tbody>tr:nth-of-type(odd)\": {\n            backgroundColor: \"#f5f5f5\",\n        }\n    };\n\n}\n\nclass SortableTableStyle extends TableStyle {\n    @styleRule\n    sortIcon = {\n        position: \"absolute\",\n        right: \"0px\",\n        bottom: \"0px\",\n        visibility: \"hidden\",\n        float: \"right\",\n    };\n\n    @styleRuleInherit\n    table = {\n        [\" th:hover .\" + this.sortIcon.getClassName()]: {\n            visibility: \"inherit\",\n        },\n        \" th:hover\": {\n            cursor: \"pointer\",\n        }\n    };\n}\n\nexport {TableStyle, SortableTableStyle};\n","import {TableStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n// TODO: the whole table architecture probably needs a rethinking\nclass TableRow extends UI.Primitive(\"tr\") {\n    render() {\n        let rowCells = [];\n\n        for (let column of this.options.columns) {\n            rowCells.push(this.renderEntryCell(column));\n        }\n\n        return rowCells;\n    }\n\n    renderEntryCell(column) {\n        return <td style={column.cellStyle} key={column.id}>{column.value(this.options.entry, this.options.index)}</td>;\n    }\n};\n\n@registerStyle(TableStyle)\nclass Table extends UI.Primitive(\"table\") {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.setColumns(options.columns || []);\n        this.entries = options.entries || [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.table);\n    }\n\n    getRowClass() {\n        return TableRow;\n    }\n\n    getRowOptions(entry) {\n        return {\n            entry: entry,\n            columns: this.columns,\n        };\n    }\n\n    render() {\n        return [\n            <thead>\n                {this.renderTableHead()}\n            </thead>,\n            <tbody>\n                {this.renderTableBody()}\n            </tbody>\n        ];\n    }\n\n    renderTableHead() {\n        return <tr>{this.columns.map(this.renderHeaderCell, this)}</tr>;\n    }\n\n    getEntryKey(entry, index) {\n        return entry.id != null ? entry.id : index;\n    }\n\n    renderTableBody() {\n        this.rows = [];\n\n        let entries = this.getEntries();\n        for (let i = 0; i < entries.length; i += 1) {\n            let entry = entries[i];\n            let RowClass = this.getRowClass(entry);\n            this.rows.push(<RowClass key={this.getEntryKey(entry, i)} index={i} {...this.getRowOptions(entry)} parent={this}/>);\n        }\n        return this.rows;\n    }\n\n    // Renders the whole header cell based on a column\n    renderHeaderCell(column) {\n        return <th style={column.headerStyle} ref={\"columnHeader\" + column.id}>\n                {this.renderColumnHeader(column)}\n            </th>;\n    }\n\n    // Only renders the content of the header cell\n    renderColumnHeader(column) {\n        if (typeof column.headerName === \"function\") {\n            return column.headerName();\n        }\n        return column.headerName;\n    }\n\n    // Original entries should not be modified. Overwrite this function to appy any modification in a new array.\n    getEntries() {\n        return this.entries || [];\n    }\n\n    columnDefaults(column, index) {\n        column.id = index;\n    }\n\n    setColumns(columns) {\n        this.columns = columns;\n        for (let i = 0; i < this.columns.length; i += 1) {\n            this.columnDefaults(this.columns[i], i);\n        }\n    }\n}\n\nexport * from \"./Style\";\nexport {Table, TableRow};\n","import {UI} from \"../UIBase\";\nimport {Table, TableRow} from \"./Table\";\nimport {CollapsibleMixin} from \"../collapsible/CollapsibleMixin\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule} from \"../../decorators/Style\";\n\nclass TableRowInCollapsibleTable extends TableRow {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    render() {\n        return <tr>{super.render()}</tr>;\n    }\n}\n\nclass CollapsibleTableStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":after\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            marginTop: \"-0.2em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":after\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        backgroundColor: \"initial !important\",\n    };\n}\n\nlet collapsibleTableStyle = new CollapsibleTableStyle();\n\n// TODO: refactor this to support redraw and render override\nclass CollapsibleTableRow extends CollapsibleMixin(TableRow) {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    getDefaultOptions() {\n        return {\n            collapsed: true,\n        }\n    }\n\n    onMount() {\n        this.toggleButton.addClickListener(() => this.toggle());\n    }\n\n    toggle() {\n        if (!this.options.collapsed) {\n            this.collapse();\n        } else {\n            this.expand();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n        }, this.getCollapsibleStyleSheet().transitionDuration * 500);\n    }\n\n    // TODO: Very bad redraw practice here\n    redraw() {\n        if (!super.redraw()) {\n            return false;\n        }\n\n        if (this.options.collapsed) {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.addClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.addClass(\"hidden\");\n        } else {\n            this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.removeClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.removeClass(\"hidden\");\n        }\n        return true;\n    }\n\n    getInitialCollapsedContent() {\n        return this.renderCollapsible(this.options.entry);\n    }\n\n    render() {\n        return [\n            <tr className={collapsibleTableStyle.heading}>{super.render()}</tr>,\n            <tr>\n                <td style={{overflow: \"hidden\", padding: \"0px\"}}\n                    colspan={this.options.columns.length}>\n                    <div ref=\"contentArea\"\n                         className={`${this.getCollapsibleStyleSheet().collapsed} hidden`}>\n                            {this.getInitialCollapsedContent()}\n                    </div>\n                </td>\n            </tr>\n        ];\n    }\n}\n\nclass DelayedCollapsibleTableRow extends CollapsibleTableRow {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            this.redrawCollapsible();\n        }\n        super.toggle();\n    }\n\n    redrawCollapsible() {\n        UI.renderingStack.push(this);\n        this.contentArea.options.children = this.renderCollapsible(this.options.entry);\n        UI.renderingStack.pop();\n        this.contentArea.redraw();\n    }\n\n    getInitialCollapsedContent() {\n        return [];\n    }\n}\n\nfunction CollapsibleTableInterface(BaseTableClass) {\n    return class CollapsibleTable extends BaseTableClass {\n        setOptions(options) {\n            super.setOptions(options);\n\n            if (options.renderCollapsible) {\n                this.renderCollapsible = options.renderCollapsible;\n            }\n        }\n\n        render() {\n            return [\n                <thead>\n                    {this.renderTableHead()}\n                </thead>,\n                this.renderTableBody()\n            ];\n        }\n\n        getRowClass() {\n            return CollapsibleTableRow;\n        }\n\n        setColumns(columns) {\n            let toggleColumn = {\n                value: (entry) => {\n                    let rowClass = this.getRowClass(entry);\n                    // TODO: Fix it lad!\n                    if (rowClass === CollapsibleTableRow || rowClass.prototype instanceof CollapsibleTableRow) {\n                        return <a ref=\"toggleButton\"\n                        className={`${collapsibleTableStyle.button} ${collapsibleTableStyle.collapsedButton}`}/>;\n                    }\n                    return <a ref=\"toggleButton\"/>;\n                },\n                cellStyle: {\n                    width: \"1%\",\n                    \"whiteSpace\": \"nowrap\",\n                }\n            };\n\n            super.setColumns([toggleColumn].concat(columns));\n        }\n    };\n}\n\nlet CollapsibleTable = CollapsibleTableInterface(Table);\n\nexport {CollapsibleTable, CollapsibleTableInterface, CollapsibleTableRow, DelayedCollapsibleTableRow,\n        TableRowInCollapsibleTable, collapsibleTableStyle};\n","import {SortableTableStyle} from \"./Style\";\nimport {FASortIcon} from \"../FontAwesome\";\nimport {UI} from \"../UIBase\";\nimport {Table} from \"./Table\";\nimport {defaultComparator} from \"../../base/Utils\";\nimport {Direction} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\n\nfunction SortableTableInterface(BaseTableClass, SortIconClass = FASortIcon) {\n    @registerStyle(SortableTableStyle)\n    class SortableTable extends BaseTableClass {\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.addClass(this.styleSheet.table);\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n\n            this.columnSortingOrder = options.columnSortingOrder || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            // TODO: fix multiple clicks registered here\n            // Sort table by clicked column\n            for (let column of this.columns) {\n                this[\"columnHeader\" + column.id].addClickListener(() => {\n                    this.sortByColumn(column);\n                    this.dispatch(\"reorder\");\n                });\n            }\n        }\n\n        renderColumnHeader(column) {\n            let sortIcon = <SortIconClass className={this.styleSheet.sortIcon}/>;\n            if (this.sortBy === column) {\n                if (this.sortDescending) {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.DOWN}/>;\n                } else {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.UP}/>;\n                }\n            }\n\n            return <div style={{position: \"relative\"}}>{super.renderColumnHeader(column)} {sortIcon}</div>;\n        }\n\n        sortByColumn(column) {\n            if (column === this.sortBy) {\n                this.sortDescending = (this.sortDescending != true);\n            } else {\n                this.sortDescending = true;\n            }\n\n            this.sortBy = column;\n\n            this.redraw();\n        }\n\n        getComparator() {\n            if (!this.sortBy && this.columnSortingOrder.length === 0) {\n                return null;\n            }\n\n            const colCmp = (a, b, col) => {\n                if (!col) return 0;\n\n                let keyA = col.rawValue ? col.rawValue(a) : col.value(a);\n                let keyB = col.rawValue ? col.rawValue(b) : col.value(b);\n                return col.cmp(keyA, keyB);\n            };\n\n            return (a, b) => {\n                let cmpRes;\n\n                if (this.sortBy) {\n                    cmpRes = colCmp(a, b, this.sortBy);\n                    if (cmpRes !== 0) {\n                        return (this.sortDescending ? -cmpRes : cmpRes);\n                    }\n                }\n\n                for (let i = 0; i < this.columnSortingOrder.length; i += 1) {\n                    cmpRes = colCmp(a, b, this.columnSortingOrder[i]);\n                    if (this.columnSortingOrder[i].sortDescending) {\n                        cmpRes = -cmpRes;\n                    }\n\n                    if (cmpRes !== 0) {\n                        return cmpRes;\n                    }\n                }\n                return 0;\n            }\n        }\n\n        sortEntries(entries) {\n            let sortedEntries = entries.slice();\n\n            if (this.getComparator()) {\n                sortedEntries.sort(this.getComparator());\n            }\n\n            return sortedEntries;\n        }\n\n        getEntries() {\n            return this.sortEntries(super.getEntries());\n        }\n\n        columnDefaults(column, index) {\n            super.columnDefaults(column, index);\n\n            if (!column.hasOwnProperty(\"cmp\")) {\n                column.cmp = defaultComparator;\n            }\n        }\n    }\n    return SortableTable;\n}\n\nlet SortableTable = SortableTableInterface(Table);\n\nexport {SortableTable, SortableTableInterface};\n","import {isPlainObject, isNumber} from \"../base/Utils\";\n\nexport class TimeUnit {\n    static CANONICAL = {};\n    static ALL = [];\n    static FIXED_DURATION = [];\n    static VARIABLE_DURATION = [];\n\n    constructor(name, baseUnit, multiplier, options = {}) {\n        this.name = name;\n        this.pluralName = name + \"s\";\n        this.baseUnit = baseUnit;\n        this.multiplier = multiplier;\n        this.milliseconds = ((baseUnit && baseUnit.getMilliseconds()) || 1) * multiplier;\n        this.variableMultiplier = options.variableMultiplier || false;\n        this.variableDuration = this.variableMultiplier || (baseUnit && baseUnit.isVariable());\n    }\n\n    static toTimeUnit(timeUnit) {\n        if (timeUnit instanceof TimeUnit) {\n            return timeUnit;\n        }\n        return this.CANONICAL[timeUnit];\n    }\n\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    getPluralName() {\n        return this.pluralName;\n    }\n\n    getMilliseconds() {\n        return this.milliseconds;\n    }\n\n    isVariable() {\n        return this.variableDuration;\n    }\n\n    hasVariableMultiplier() {\n        return this.variableMultiplier;\n    }\n\n    getDateValue(date) {\n\n    }\n\n    setDateValue(date, value) {\n    }\n}\n\nTimeUnit.MILLISECOND = new TimeUnit(\"millisecond\", null, 1);\nTimeUnit.SECOND = new TimeUnit(\"second\", TimeUnit.MILLISECOND, 1000);\nTimeUnit.MINUTE = new TimeUnit(\"minute\", TimeUnit.SECOND, 60);\nTimeUnit.HOUR = new TimeUnit(\"hour\", TimeUnit.MINUTE, 60);\nTimeUnit.DAY = new TimeUnit(\"day\", TimeUnit.HOUR, 24, {variableMultiplier: true});\nTimeUnit.WEEK = new TimeUnit(\"week\", TimeUnit.DAY, 7);\nTimeUnit.MONTH =  new TimeUnit(\"month\", TimeUnit.DAY, 30, {variableMultiplier: true});\nTimeUnit.QUARTER = new TimeUnit(\"quarter\", TimeUnit.MONTH, 3);\nTimeUnit.TRIMESTER = new TimeUnit(\"trimester\", TimeUnit.MONTH, 4);\nTimeUnit.SEMESTER = new TimeUnit(\"semester\", TimeUnit.MONTH, 6);\nTimeUnit.YEAR = new TimeUnit(\"year\", TimeUnit.DAY, 365, {variableMultiplier: true});\n\nTimeUnit.DAY.dateMethodSuffix = \"Date\";\nTimeUnit.MONTH.dateMethodSuffix = \"Month\";\nTimeUnit.YEAR.dateMethodSuffix = \"FullYear\";\n\nexport class Duration {\n    constructor(duration) {\n        if (duration instanceof self.Date) {\n            throw new Error(\"Can't automatically transform Date to Duration, use date.getTime() if you really want to\");\n        }\n        if (isNumber(duration)) {\n            this.milliseconds = duration;\n            return;\n        }\n        if (duration instanceof Duration) {\n            Object.assign(this, duration);\n            return;\n        }\n        if (isPlainObject(duration)) {\n            this.milliseconds = 0;\n            for (const key of Object.keys(duration)) {\n                let timeUnit = TimeUnit.CANONICAL[key];\n                if (!timeUnit) {\n                    throw Error(\"Unknown time unit:\", key);\n                }\n                // TODO: throw an error if can't parse these values\n                if (timeUnit.isVariable()) {\n                    this[key] = parseInt(duration[key]);\n                    this.relativeDuration = true;\n                } else {\n                    this.milliseconds += parseFloat(duration[key]) * timeUnit.milliseconds;\n                }\n            }\n            return;\n        }\n        if (arguments.length > 0) {\n            throw Error(\"Invalid Duration arguments: \", ...arguments);\n        }\n        this.milliseconds = 0;\n    }\n\n    static toDuration(duration) {\n        if (duration instanceof Duration) {\n            return duration;\n        }\n        return new this(duration);\n    }\n\n    increment(duration) {\n        duration = this.constructor.toDuration(duration);\n        for (const key in duration) {\n            if (!(key in TimeUnit.CANONICAL)) {\n                continue;\n            }\n            if (this.hasOwnProperty(key)) {\n                this[key] += duration[key];\n            } else {\n                this[key] = duration[key];\n            }\n        }\n        return this;\n    }\n\n    add(duration) {\n        return this.clone().increm(duration);\n    }\n\n    subtract(duration) {\n        duration = this.constructor.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    // Returns true if was defined terms of absolute primitives (anything less than a day)\n    isAbsolute() {\n        return !this.isVariable();\n    }\n\n    isVariable() {\n        return this.relativeDuration;\n    }\n\n    negate() {\n        let duration = new Duration(this);\n        for (const key in duration) {\n            if (key in TimeUnit.CANONICAL) {\n                duration[key] = -duration[key];\n            }\n        }\n        return duration;\n    }\n\n    // Returns a new Duration with a positive length\n    abs() {\n        return new Duration(Math.abs(+this));\n    }\n\n    clone() {\n        return new Duration(this);\n    }\n\n    // The primitive value\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    toNanoseconds() {\n        return Math.floor(+this * 1e6);\n    }\n\n    // TODO: for all these units, should have a way to get the float and int value\n    toMilliseconds() {\n        return Math.floor(+this);\n    }\n\n    getMilliseconds() {\n        return this.toMilliseconds() % 1000;\n    }\n\n    toSeconds() {\n        return Math.floor(+this / 1000);\n    }\n\n    getSeconds() {\n        return this.toSeconds() % 60;\n    }\n\n    toMinutes() {\n        return Math.floor(+this / (1000 * 60));\n    }\n\n    getMinutes() {\n        return this.toMinutes() % 60;\n    }\n\n    toHours() {\n        return Math.floor(+this / (1000 * 60 * 60));\n    }\n\n    getHours() {\n        return this.toHours() % 24;\n    }\n\n    toDays() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24));\n    }\n\n    toMonths() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 30));\n    }\n\n    toYears() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 365));\n    }\n\n    toString(locale) {\n        // Humanize the duration (should work with localization)\n    }\n}\n\nexport function addCanonicalTimeUnit(key, timeUnit) {\n    TimeUnit.ALL.push(timeUnit);\n    if (timeUnit.isVariable()) {\n        TimeUnit.VARIABLE_DURATION.push(timeUnit);\n    } else {\n        TimeUnit.FIXED_DURATION.push(timeUnit);\n    }\n\n    TimeUnit.CANONICAL[timeUnit.name] = timeUnit;\n    if (timeUnit.pluralName) {\n        TimeUnit.CANONICAL[timeUnit.pluralName] = timeUnit;\n    }\n\n    const timeUnitsName = timeUnit.pluralName;\n\n    // TODO: not sure about this anymore\n    Duration[key] = new Duration({\n        [timeUnitsName]: 1,\n    });\n}\n\nexport function addCanonicalTimeUnits() {\n    for (const key in TimeUnit) {\n        const timeUnit = TimeUnit[key];\n        if (timeUnit instanceof TimeUnit) {\n            addCanonicalTimeUnit(key, timeUnit);\n        }\n    }\n}\n\naddCanonicalTimeUnits();\n","import {padNumber, suffixWithOrdinal, extendsNative, instantiateNative, isNumber} from \"../base/Utils\";\nimport {TimeUnit, Duration} from \"./Duration\";\n\n// MAX_UNIX_TIME is either ~Feb 2106 in unix seconds or ~Feb 1970 in unix milliseconds\n// Any value less than this is interpreted as a unix time in seconds\n// If you want to go around this behavious, you can use the static method .fromUnixMilliseconds()\n// To disable, set this value to 0\nexport let MAX_AUTO_UNIX_TIME = Math.pow(2, 32);\n\nconst BaseDate = self.Date;\n\n@extendsNative\nclass StemDate extends BaseDate {\n    // Still need to do this mess because of Babel, should be removed when moving to native ES6\n    static create(value) {\n        // Try to do an educated guess if this date is in unix seconds or milliseconds\n        if (arguments.length === 1 && isNumber(value) && value < MAX_AUTO_UNIX_TIME) {\n            return instantiateNative(BaseDate, StemDate, value * 1000.0);\n        } else {\n            return instantiateNative(BaseDate, StemDate, ...arguments);\n        }\n    }\n\n    static toDate(date) {\n        if (date instanceof StemDate) {\n            return date;\n        } else {\n            return new this(date);\n        }\n    }\n\n    static now() {\n        return new this(BaseDate.now());\n    }\n\n    toDate() {\n        return this;\n    }\n\n    static fromUnixMilliseconds(unixMilliseconds) {\n        return this.create(new BaseDate(unixMilliseconds));\n    }\n\n    static fromUnixSeconds(unixSecons) {\n        return this.fromUnixMilliseconds(unixSecons * 1000);\n    }\n\n    // Creates a Date object from an instance of DOMHighResTimeStamp, returned by performance.now() for instance\n    static fromHighResTimestamp(highResTimestamp) {\n        return this.fromUnixMilliseconds(highResTimestamp + self.performance.timing.navigationStart)\n    }\n\n    // You don't usually need to call this in most cases, constructor uses MAX_AUX_UNIX_TIME\n    static unix(unixTime) {\n        return this.fromUnixSeconds(unixTime);\n    }\n\n    set(date) {\n        date = this.constructor.toDate(date);\n        this.setTime(date.setTime());\n    }\n\n    clone() {\n        return new this.constructor(this.getTime());\n    }\n\n    toUnix() {\n        return this.getTime() / 1000;\n    }\n\n    unix() {\n        return Math.floor(this.toUnix());\n    }\n\n    isBefore(date) {\n        return this.getTime() < StemDate.toDate(date).getTime();\n    }\n\n    equals(date) {\n        return this.getTime() === StemDate.toDate(date).getTime();\n    }\n\n    get(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        return timeUnit.getDateValue(this);\n    }\n\n    isSame(date, timeUnit) {\n        if (!timeUnit) {\n            return this.equals(date);\n        }\n\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        date = this.constructor.toDate(date);\n        let diff = this.diff(date);\n        if (diff >= 2 * timeUnit) {\n            // If the distance between the two dates is more than 2 standard lengths of the time unit\n            // This would be wrong if you would have time unit that can sometimes last more than twice their canonical duration\n            // Works correctly for all implemented time units\n            return false;\n        }\n        return this.get(timeUnit) == date.get(timeUnit);\n    }\n\n    isAfter(date) {\n        return this.getTime() > StemDate.toDate(date).getTime();\n    }\n\n    isSameOrBefore(date) {\n        return this.isBefore(date) || this.equals(date);\n    }\n\n    isSameOrAfter(date) {\n        return this.isAfter(date) || this.equals(date);\n    }\n\n    isBetween(a, b) {\n        return this.isSameOrAfter(a) && this.isSameOrBefore(b);\n    }\n\n    getWeekDay() {\n        return this.getDay();\n    }\n\n    addUnit(timeUnit, count = 1) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        count = parseInt(count);\n\n        if (!timeUnit.isVariable()) {\n            this.setTime(this.getTime() + timeUnit.getMilliseconds() * count);\n            return this;\n        }\n\n        while (!timeUnit.dateMethodSuffix) {\n            count *= timeUnit.multiplier;\n            timeUnit = timeUnit.baseUnit;\n        }\n\n        const dateMethodSuffix = timeUnit.dateMethodSuffix;\n        const currentValue = this[\"get\" + dateMethodSuffix]();\n        this[\"set\" + dateMethodSuffix](currentValue + count);\n\n        return this;\n    }\n\n    static min() {\n        // TODO: simplify and remove code duplication\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isBefore(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    static max() {\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isAfter(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    // Assign the given date if current value if greater than it\n    capUp(date) {\n        date = this.constructor.toDate(date);\n        if (this.isAfter(date)) {\n            this.set(date);\n        }\n    }\n\n    // Assign the given date if current value if less than it\n    capDown(date) {\n        date = this.constructor.toDate(date);\n        if (this.isBefore(date)) {\n            this.set(date);\n        }\n    }\n\n    roundDown(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        // TODO: this is wrong for semester, etc, should be different then\n        while (timeUnit = timeUnit.baseUnit) {\n            this[\"set\" + timeUnit.dateMethodSuffix](0);\n        }\n        return this;\n    }\n\n    roundUp(timeUnit) {\n        const roundDown = this.clone().roundDown(timeUnit);\n        if (this.equals(roundDown)) {\n            this.set(roundDown);\n            return this;\n        }\n        this.addUnit(timeUnit);\n        return this.roundDown(timeUnit);\n    }\n\n\n    round(timeUnit) {\n        let roundUp = this.clone().roundUp(timeUnit);\n        let roundDown = this.clone().roundDown(timeUnit);\n        // At a tie, preffer to round up, that's where time's going\n        if (this.diff(roundUp) <= this.diff(roundDown)) {\n            this.setTime(roundUp.getTime());\n        } else {\n            this.setTime(roundDown.getTime());\n        }\n        return this;\n    }\n\n    add(duration) {\n        duration = Duration.toDuration(duration);\n        if (duration.isAbsolute()) {\n            this.setTime(this.getTime() + duration.toMilliseconds());\n            return this;\n        }\n        for (const key in duration) {\n            const timeUnit = TimeUnit.CANONICAL[key];\n            if (timeUnit) {\n                this.addUnit(timeUnit, duration[key]);\n            }\n        }\n        return this;\n    }\n\n    subtract(duration) {\n        duration = Duration.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    diffDuration(date) {\n        return new Duration(this.diff(date));\n    }\n\n    // TODO: this should be a duration\n    diff(date) {\n        date = this.constructor.toDate(date);\n        return Math.abs(+this - date);\n    }\n\n    // Just to keep moment compatibility, until we actually implement locales\n    locale(loc) {\n        return this;\n    }\n\n    static splitToTokens(str) {\n        // TODO: \"[HH]HH\" will be split to [\"HH\", \"HH\"], so the escape does not solve the problem\n        let tokens = [];\n        let lastIsLetter = null;\n        let escapeByCurlyBracket = false;\n        let escapeBySquareBracket = false;\n        for (let i = 0; i < str.length; i++) {\n            let charCode = str.charCodeAt(i);\n            if (charCode === 125 && escapeByCurlyBracket) { // '}' ending the escape\n                escapeByCurlyBracket = false;\n                lastIsLetter = null;\n            } else if (charCode === 93 && escapeBySquareBracket) { // ']' ending the escape\n                escapeBySquareBracket = false;\n                lastIsLetter = null;\n            } else if (escapeByCurlyBracket || escapeBySquareBracket) { // The character is escaped no matter what it is\n                tokens[tokens.length - 1] += str[i];\n            } else if (charCode === 123) { // '{' starts a new escape\n                escapeByCurlyBracket = true;\n                tokens.push(\"\");\n            } else if (charCode === 91) { // '[' starts a new escape\n                escapeBySquareBracket = true;\n                tokens.push(\"\");\n            } else {\n                let isLetter = (65 <= charCode && charCode <= 90) || (97 <= charCode && charCode <= 122);\n                if (isLetter === lastIsLetter) {\n                    tokens[tokens.length - 1] += str[i];\n                } else {\n                    tokens.push(str[i]);\n                }\n                lastIsLetter = isLetter;\n            }\n        }\n        if (escapeByCurlyBracket || escapeBySquareBracket) {\n            console.warn(\"Unfinished escaped sequence!\");\n        }\n        return tokens;\n    }\n\n    evalToken(token) {\n        let func = this.constructor.tokenFormattersMap.get(token);\n        if (!func) {\n            return token;\n        }\n        return func(this);\n    }\n\n    format(str=\"ISO\") {\n        let tokens = this.constructor.splitToTokens(str);\n        tokens = tokens.map(token => this.evalToken(token));\n        return tokens.join(\"\");\n    }\n\n    isValid() {\n        return (this.toString() !== \"Invalid Date\");\n    }\n\n    utc() {\n        // Temp hack\n        return this.constructor.fromUnixMilliseconds(+this + this.getTimezoneOffset() * 60 * 1000);\n    }\n\n    isLeapYear() {\n        let year = this.getFullYear();\n        return (year % 4 == 0) && ((year % 100 != 0) || (year % 400 == 0));\n    }\n\n    daysInMonth() {\n        // The 0th day of the next months is actually the last day in the current month\n        let lastDayInMonth = new BaseDate(this.getFullYear(), this.getMonth() + 1, 0);\n        return lastDayInMonth.getDate();\n    }\n\n    getDaysCountPerMonth(index) {\n        const months = [31, 28 + this.isLeapYear(), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        return months[index];\n    }\n\n    getDayInYear() {\n        const month = this.getMonth();\n        let totalDays = 0;\n        for (let i = 0; i < month; i += 1) {\n            totalDays += this.getDaysCountPerMonth(i);\n        }\n        return totalDays + this.getDate() - 1;\n    }\n\n    getWeekInYear() {\n        return (this.getDayInYear() - this.getWeekDay()) / 7;\n    }\n}\n\nDuration.prototype.format = function (pattern) {\n    return StemDate.fromUnixMilliseconds(this.toMilliseconds()).utc().format(pattern);\n};\n\nconst miniWeekDays = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\nconst shortWeekDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nconst longWeekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconst longMonths = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nclass DateLocale {\n    constructor(obj={}) {\n        Object.assign(this, obj);\n        this.formats = this.formats || {};\n    }\n\n    getFormat(longDate) {\n        return this.formats[longDate];\n    }\n\n    setFormat(pattern, func) {\n        this.formats[pattern] = func;\n    }\n\n    format(date, pattern) {\n        return date.format(pattern);\n    }\n\n    getRelativeTime() {\n        throw Error(\"Not implemented\");\n    }\n}\n\nStemDate.tokenFormattersMap = new Map([\n    [\"ISO\", date => date.toISOString()],\n\n    [\"Y\", date => date.getFullYear()],\n    [\"YY\", date => padNumber(date.getFullYear() % 100, 2)],\n    [\"YYYY\", date => date.getFullYear()],\n\n    [\"M\", date => (date.getMonth() + 1)],\n    [\"MM\", date => padNumber(date.getMonth() + 1, 2)],\n    [\"MMM\", date => shortMonths[date.getMonth()]],\n    [\"MMMM\", date => longMonths[date.getMonth()]],\n\n    [\"D\", date => date.getDate()],\n    [\"Do\", date => suffixWithOrdinal(date.getDate())],\n    [\"DD\", date => padNumber(date.getDate(), 2)],\n\n    [\"d\", date => date.getWeekDay()],\n    [\"do\", date => suffixWithOrdinal(date.getWeekDay())],\n    [\"dd\", date => miniWeekDays[date.getWeekDay()]],\n    [\"ddd\", date => shortWeekDays[date.getWeekDay()]],\n    [\"dddd\", date => longWeekdays[date.getWeekDay()]],\n\n    [\"H\", date => date.getHours()],\n    [\"HH\", date => padNumber(date.getHours(), 2)],\n    [\"h\", date => date.getHours() % 12],\n    [\"hh\", date => padNumber(date.getHours() % 12, 2)],\n\n    [\"m\", date => date.getMinutes()],\n    [\"mm\", date => padNumber(date.getMinutes(), 2)],\n\n    [\"s\", date => date.getSeconds()],\n    [\"ss\", date => padNumber(date.getSeconds(), 2)],\n\n    [\"S\", date => Math.floor(date.getMilliseconds() / 100)],\n    [\"SS\", date => padNumber(Math.floor(date.getMilliseconds() / 10), 2)],\n    [\"SSS\", date => padNumber(date.getMilliseconds(), 3)],\n    [\"ms\", date => padNumber(date.getMilliseconds(), 3)],\n\n    [\"LL\", date => date.format(\"MMMM Do, YYYY\")],\n]);\n\nlet Date = StemDate;\n\nexport {Date, StemDate};\n","import {StemDate} from \"./Date\";\nimport {TimeUnit} from \"./Duration\"\n\n// File meant to handle server time/client time differences\nlet ServerTime = {\n    now() {\n        return StemDate().subtract(this.getOffset());\n    },\n\n    getOffset() {\n        return this.offset;\n    },\n\n    set(date, onlyIfMissing=false) {\n        if (!onlyIfMissing || this.offset == null) {\n            this.offset = Date.now() - (new StemDate(date));\n        }\n    },\n\n    setPageLoadTime(unixTime, estimatedLatency=0) {\n        this.serverPageLoad = unixTime;\n        this.offset = performance.timing.responseStart - unixTime * 1000;\n    }\n};\n\n// TODO: should use +TimeUnit.DAY\nexport const DAY_IN_MILLISECONDS = 24 * 60 * 60 * 1000;\n\n// TODO: should have a generic method time1.isSame(\"x\", time);\nexport function isDifferentDay(timeA, timeB) {\n    // return !StemDate(timeA).same(TimeUnit.DAY, timeB);\n    timeA = StemDate(timeA);\n    timeB = StemDate(timeB);\n\n    // First check if difference is gre\n    if (timeA.diff(timeB) > +TimeUnit.DAY) {\n        return true;\n    }\n    // Check if different day of the month, when difference is less than a day\n    return (timeA.getDate() !== timeB.getDate());\n}\n\nexport {ServerTime};\n\nexport * from \"./Date\";\nexport * from \"./Duration\";\n","import {UI, TextInput, VolatileFloatingWindow, getOffset, VerticalSlideBar} from \"./UI\";\nimport {StemDate, DAY_IN_MILLISECONDS} from \"../time/Time\";\n// import {Button} from \"./button/Button\";\n\nclass DatePickerTable extends UI.Element {\n\n}\n\nclass TimePickerWidget extends UI.Element {\n    render() {\n        let hours = parseInt(this.options.time / (60 * 60 * 1000));\n        let minutes = parseInt((this.options.time - 60 * 60 * 1000 * hours) / (60 * 1000));\n        let seconds = parseInt((this.options.time - 60 * 60 * 1000 * hours - 60 * 1000 * minutes) / (1000));\n        let textSpanStyle = {\n            display: \"inline-block\",\n            flex: 1,\n            textAlign: \"center\",\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            padding: \"0 5px\"\n        };\n        return [\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <div style={textSpanStyle} ref=\"hours\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"minutes\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"seconds\" />\n            </div>,\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <VerticalSlideBar value={hours / 23} ref=\"hourSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={minutes / 59} ref=\"minuteSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={seconds / 59} ref=\"secondSlider\" height={200} barHeight={5} style={{flex: 1, marginRight: \"5px\"}}/>\n            </div>\n        ];\n    }\n\n    onMount() {\n        let changeCallback = () => {\n            let hours = parseInt(this.hourSlider.getValue() * 23);\n            let minutes = parseInt(this.minuteSlider.getValue() * 59);\n            let seconds = parseInt(this.secondSlider.getValue() * 59);\n            this.hours.node.innerHTML = (hours < 10 ? \"0\" : \"\") + hours;\n            this.minutes.node.innerHTML = (minutes < 10 ? \"0\" : \"\") + minutes;\n            this.seconds.node.innerHTML = (seconds < 10 ? \"0\" : \"\") + seconds;\n            let time = (hours * 60 * 60  + minutes * 60 + seconds) * 1000;\n            this.dispatch(\"changeTime\", time);\n        };\n        this.hourSlider.addListener(\"change\", changeCallback);\n        this.minuteSlider.addListener(\"change\", changeCallback);\n        this.secondSlider.addListener(\"change\", changeCallback);\n        changeCallback();\n    }\n}\n\nclass DateTimeWindow extends VolatileFloatingWindow {\n    setOptions(options) {\n        options.style = Object.assign({\n            marginBottom: \"5px\",\n            border: \"1px solid #bbb\",\n            borderRadius: \"2px\",\n            position: \"absolute\",\n            overflow: \"auto\",\n            boxShadow: \"0 6px 12px rgba(0,0,0,.175)\",\n            backgroundColor: \"white\",\n            padding: \"10px\",\n            zIndex: 10000\n        }, options.style || {});\n        super.setOptions(options);\n        this.computeInitial();\n    }\n\n    render() {\n        return [\n            <DatePickerTable ref=\"datePicker\" date={this.date} />,\n            <TimePickerWidget ref=\"timePicker\" time={this.time} />\n        ];\n    }\n\n    computeInitial() {\n        let initialDateTime = StemDate.parse(this.formatISO(this.options.initialDateTime)) || StemDate.now();\n        this.time = initialDateTime % DAY_IN_MILLISECONDS;\n        this.date = parseInt(initialDateTime / DAY_IN_MILLISECONDS);\n    }\n\n    formatISO(str) {\n        if (!str) {\n            return \"\";\n        }\n        while (str.indexOf(\"/\") !== -1) {\n            str = str.replace(\"/\", \" \");\n        }\n        while (str.indexOf(\":\") !== -1) {\n            str = str.replace(\":\", \" \");\n        }\n        let tokens = str.split(\" \");\n        return tokens[2] + \"-\" + tokens[1] + \"-\" + tokens[0] + \"T\" + tokens[3] + \":\" + tokens[4] + \":\" + tokens[5] + \".000Z\";\n    }\n\n    getValue() {\n        let currentDate = this.time + DAY_IN_MILLISECONDS * this.date;\n        currentDate = StemDate.create(currentDate);\n        let date = currentDate.toISOString();\n        date = date.slice(8, 10) + \"/\" + date.slice(5, 7) + \"/\" + date.slice(0, 4);\n        return date + \" \" + currentDate.toTimeString().slice(0, 8);\n    }\n\n    onMount() {\n        this.options.output.setValue(this.getValue());\n        this.datePicker.addListener(\"changeDate\", (date) => {\n            this.date = date;\n            this.options.output.setValue(this.getValue());\n        });\n        this.timePicker.addListener(\"changeTime\", (time) => {\n            this.time = time;\n            this.options.output.setValue(this.getValue());\n        });\n    }\n}\n\nclass DateTimePicker extends UI.Element {\n    setOptions(options) {\n        options.format = options.format || \"DD/MM/YYYY HH:mm:ss\";\n        super.setOptions(options);\n        if (this.options.date) {\n            this.setDate(this.options.date);\n        }\n    }\n\n    parseDateFromString(str, format) {\n        if (format !== \"DD/MM/YYYY HH:mm:ss\") {\n            throw Error(\"Format not supported!\");\n        }\n        // Just parsing DD/MM/YYYY HH:mm:ss for now\n        while (str.indexOf('/') !== -1) {\n            str = str.replace('/', ' ');\n        }\n        while (str.indexOf(':') !== -1) {\n            str = str.replace(':', ' ');\n        }\n        let tokens = str.split(' ');\n        let integerTokens = [];\n        for (let token of tokens) {\n            let number = parseFloat(token);\n            if (!isNaN(number)) {\n                integerTokens.push(number);\n            }\n        }\n        let years = (integerTokens.length >= 3 ? integerTokens[2] : 0);\n        let months = (integerTokens.length >= 2 ? integerTokens[1] - 1 : 0);\n        let days = (integerTokens.length >= 1 ? integerTokens[0] : 0);\n        let hours = (integerTokens.length >= 4 ? integerTokens[3] : 0);\n        let minutes = (integerTokens.length >= 5 ? integerTokens[4] : 0);\n        let seconds = (integerTokens.length >= 6 ? integerTokens[5] : 0);\n        let date = new StemDate(years, months, days, hours, minutes, seconds);\n        if (!date.getTime()) {\n            return null;\n        }\n        return date;\n    }\n\n    getDate() {\n        let str = this.textInput.getValue();\n        if (!str) {\n            return null;\n        }\n        let format = this.options.format;\n        return this.parseDateFromString(str, format);\n    }\n\n    setDate(date) {\n        this.options.date = date;\n        this.options.dateString = date.format(this.options.format);\n        if (this.textInput) {\n            this.textInput.setValue(this.options.dateString);\n        }\n    }\n\n    render() {\n        return [\n            <TextInput ref=\"textInput\" placeholder={this.options.format} value={this.options.dateString || \"\"} />,\n            /*<Button ref=\"calendarSpan\" faIcon=\"calendar\"/>*/\n        ]\n    }\n\n    // onMount() {\n    //     this.calendarSpan.addClickListener((event) => {\n    //         if (!this.dateTimeWindow) {\n    //             let textInputOffset = getOffset(this.textInput);\n    //             this.dateTimeWindow = DateTimeWindow.create(document.body, {\n    //                 style: {\n    //                     top: textInputOffset.top + 5 + this.textInput.getHeight() + \"px\",\n    //                     left: textInputOffset.left + 5 + \"px\"\n    //                 },\n    //                 initialDateTime: this.textInput.getValue(),\n    //                 output: this.textInput\n    //             });\n    //         } else {\n    //             this.dateTimeWindow.hide();\n    //             delete this.dateTimeWindow;\n    //         }\n    //         event.stopPropagation();\n    //     });\n    // }\n}\n\nexport {DateTimePicker};\n","export function enqueueIfNotLoaded(target, key, descriptor) {\n    const method = descriptor.value;\n    return Object.assign({}, descriptor, {\n        value: function() {\n            if (this.isLoaded()) {\n                return method.call(this, ...arguments);\n            } else {\n                this.enqueueMethodCall(method, arguments);\n                return null;\n            }\n        }\n    });\n}\n\n\nexport const EnqueueableMethodMixin = (BaseClass) => class EnqueueableMethodClass extends BaseClass {\n    isLoaded() {\n        throw Error(\"Not implemented!\");\n    }\n\n    enqueueMethodCall(method, args) {\n        this.methodCallQueue = this.methodCallQueue || [];\n        this.methodCallQueue.push([method, args]);\n    }\n\n    resolveQueuedMethods() {\n        if (!this.isLoaded()) {\n            throw Error(\"Cannot process scheduled jobs, element not loaded\");\n        }\n        for (let methodCall of this.methodCallQueue || []) {\n            methodCall[0].call(this, ...methodCall[1]);\n        }\n        delete this.methodCallQueue;\n    }\n};\n","// Wrapper over the Ace code editor, needs ace to be loaded\n// TODO: should be renamed to AceCodeEditor?\nimport {UI} from \"./UIBase\";\nimport {StyleSheet, styleRule} from \"./Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {EnqueueableMethodMixin, enqueueIfNotLoaded} from \"../base/EnqueueableMethodMixin\";\n\n\nclass CodeEditor extends EnqueueableMethodMixin(UI.Element) {\n    static requireAce(callback) {\n        throw Error(\"You need to implement requireAce\");\n    }\n\n    isLoaded() {\n        return !!this.getAce();\n    }\n\n    setOptions(options) {\n        let defaultOptions = {\n            aceMode: \"text\",\n            readOnly: false,\n            aceTheme: \"dawn\",\n            aceKeyboardHandler: \"ace\",\n            fontSize: 14,\n            tabSize: 4,\n            showLineNumber: true,\n            showPrintMargin: false,\n            printMarginSize: 80,\n        };\n        options = Object.assign(defaultOptions, options);\n\n        super.setOptions(options);\n\n        if (this.options.aceMode) {\n            this.options.aceMode = this.options.aceMode.toLowerCase();\n        }\n\n        if (this.options.aceMode === \"cpp\" || this.options.aceMode === \"c\") {\n            this.options.aceMode = \"c_cpp\";\n        }\n\n        if (this.getAce()) {\n            this.applyAceOptions();\n        }\n    }\n\n    redraw() {\n        if (this.getAce()) {\n            this.aceResize();\n            this.applyRef();\n            return;\n        }\n        super.redraw();\n    }\n\n    whenLoaded(callback) {\n        if (this.isLoaded()) {\n            callback();\n        } else {\n            this.addListenerOnce(\"aceReady\", callback);\n        }\n    }\n\n    onMount() {\n        // Sometimes when the parent div resizes the ace editor doesn't fully update.\n        this.addListener(\"resize\", () => {\n            this.aceResize();\n        });\n\n        this.addListener(\"change\", () => {\n            this.aceResize();\n        });\n\n        if (!window.ace) {\n            this.constructor.requireAce(() => {\n                this.onDelayedMount();\n            });\n            return;\n        }\n        this.onDelayedMount();\n    }\n\n    onDelayedMount() {\n        this.ace = window.ace.edit(this.node);\n\n        // Removes some warnings\n        this.getAce().$blockScrolling = Infinity;\n\n        this.resolveQueuedMethods();\n\n        this.applyAceOptions();\n\n        //#voodoo was here to automatically redraw when unhiding\n        //This Ace event listener might be useful in the future\n        this.getAce().renderer.$textLayer.addEventListener(\"changeCharacterSize\", (event) => {\n            this.aceResize();\n        });\n        this.dispatch(\"aceReady\");\n    }\n\n    getAce() {\n        return this.ace;\n    }\n\n    getValue() {\n        return this.getAce().getValue();\n    }\n\n    @enqueueIfNotLoaded\n    applyAceOptions() {\n        //set the language mode\n        this.setAceMode(this.options.aceMode);\n        this.setAceKeyboardHandler(this.options.aceKeyboardHandler);\n        this.setAceTheme(this.options.aceTheme);\n        this.setAceFontSize(this.options.fontSize);\n        this.setAceTabSize(this.options.tabSize);\n        this.setAceLineNumberVisible(this.options.showLineNumber);\n        this.setAcePrintMarginVisible(this.options.showPrintMargin);\n        this.setAcePrintMarginSize(this.options.printMarginSize);\n        this.setReadOnly(this.options.readOnly);\n        this.setUseWrapMode(this.options.lineWrapping || false);\n\n        if (this.options.numLines) {\n            this.options.maxLines = this.options.minLines = this.options.numLines;\n        }\n\n        if (this.options.maxLines) {\n            this.setAceOptions({\n                maxLines: this.options.maxLines\n            });\n        }\n\n        if (this.options.minLines) {\n            this.setAceOptions({\n                minLines: this.options.minLines\n            });\n        }\n\n        if (this.options.value) {\n            this.setValue(this.options.value, -1);\n        }\n        if (this.options.hasOwnProperty(\"enableBasicAutocompletion\") ||\n            this.options.hasOwnProperty(\"enableLiveAutocompletion\")) {\n            let langTools =\"/static/js/ext/ace/ext-language_tools.js\";\n            require([langTools], () => {\n                this.setBasicAutocompletion(this.options.enableBasicAutocompletion);\n                this.setLiveAutocompletion(this.options.enableLiveAutocompletion);\n                this.setSnippets(this.options.enableSnippets);\n            });\n        }\n    }\n\n    @enqueueIfNotLoaded\n    aceResize() {\n        this.getAce().resize();\n    }\n\n    @enqueueIfNotLoaded\n    setValue(sourceCode, fakeUserChange) {\n        // We need to wrap the ace call in these flags so any event listeners can know if this change\n        // was done by us or by the user\n        this.apiChange = !fakeUserChange;\n        this.getAce().setValue(sourceCode, -1);\n        this.apiChange = false;\n    }\n\n    @enqueueIfNotLoaded\n    setAceOptions(options) {\n        this.getAce().setOptions(options);\n    }\n\n    // TODO: should this be setEditable?\n    @enqueueIfNotLoaded\n    setReadOnly(value) {\n        this.getAce().setReadOnly(value);\n    };\n\n    @enqueueIfNotLoaded\n    setAceMode(aceMode) {\n        if (aceMode.hasOwnProperty(\"aceMode\")) {\n            aceMode = aceMode.aceMode;\n        }\n        this.getAce().getSession().setMode(\"ace/mode/\" + aceMode);\n    }\n\n    getAceKeyboardHandler() {\n        return this.getAce().$keybindingId;\n    }\n\n    @enqueueIfNotLoaded\n    setAceKeyboardHandler(keyboardHandler) {\n        if (keyboardHandler.hasOwnProperty(\"aceName\")) {\n            keyboardHandler = keyboardHandler.aceName;\n        }\n        this.getAce().setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    getAceMode() {\n        return this.getAce().getSession().getMode();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTheme(theme) {\n        if (theme.hasOwnProperty(\"aceName\")) {\n            theme = theme.aceName;\n        }\n        this.getAce().setTheme(\"ace/theme/\" + theme);\n    }\n\n    getAceTheme() {\n        return this.getAce().getTheme();\n    }\n\n    @enqueueIfNotLoaded\n    setAceFontSize(fontSize) {\n        this.getAce().setOptions({\n            fontSize: fontSize + \"px\"\n        });\n    }\n\n    getAceFontSize() {\n        return this.getAce().getFontSize();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTabSize(tabSize) {\n        this.getAce().setOptions({\n            tabSize: tabSize\n        });\n    }\n\n    getAceTabSize() {\n        return this.getAce().getOption(\"tabSize\");\n    }\n\n    @enqueueIfNotLoaded\n    setAceLineNumberVisible(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getAceLineNumberVisible() {\n        return this.getAce().renderer.getShowGutter();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginVisible(value) {\n        this.getAce().setShowPrintMargin(value);\n    }\n\n    getAcePrintMarginVisible() {\n        return this.getAce().getShowPrintMargin();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginSize(printMarginSize) {\n        this.getAce().setPrintMarginColumn(printMarginSize);\n    }\n\n    getAcePrintMarginSize() {\n        return this.getAce().getPrintMarginColumn();\n    }\n\n    @enqueueIfNotLoaded\n    setBasicAutocompletion(value) {\n        this.getAce().setOptions({\n            enableBasicAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setLiveAutocompletion(value) {\n        this.getAce().setOptions({\n            enableLiveAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setSnippets(value) {\n        this.getAce().setOptions({\n            enableSnippets: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setAnnotations(annotations) {\n        this.getAce().getSession().setAnnotations(annotations);\n    }\n\n    @enqueueIfNotLoaded\n    setUseWrapMode(value) {\n        this.getAce().getSession().setUseWrapMode(value);\n    }\n\n    @enqueueIfNotLoaded\n    setIndentedSoftWrap(value) {\n        this.getAce().setOption(\"indentedSoftWrap\", value);\n    }\n\n    @enqueueIfNotLoaded\n    blockScroll() {\n        this.getAce().$blockScrolling = Infinity;\n    }\n\n    @enqueueIfNotLoaded\n    setFoldStyle(foldStyle) {\n        this.getAce().getSession().setFoldStyle(foldStyle);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightActiveLine(value) {\n        this.getAce().setHighlightActiveLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightGutterLine(value) {\n        this.getAce().setHighlightGutterLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setShowGutter(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getScrollTop() {\n        return this.getAce().getSession().getScrollTop();\n    }\n\n    @enqueueIfNotLoaded\n    setScrollTop(value) {\n        this.getAce().getSession().setScrollTop(value);\n    }\n\n    @enqueueIfNotLoaded\n    addMarker(startLine, startCol, endLine, endCol, ...args) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().addMarker(new Range(startLine, startCol, endLine, endCol), ...args);\n    }\n\n    @enqueueIfNotLoaded\n    removeMarker(marker) {\n        this.getAce().getSession().removeMarker(marker);\n    }\n\n    getRendererLineHeight() {\n        return this.getAce().renderer.lineHeight;\n    }\n\n    getTextRange(startLine, startCol, endLine, endCol) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().doc.getTextRange(new Range(startLine, startCol, endLine, endCol));\n    }\n\n    @enqueueIfNotLoaded\n    setTextRange(startLine, startCol, endLine, endCol, text) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().replace(new Range(startLine, startCol, endLine, endCol), text);\n    }\n\n    @enqueueIfNotLoaded\n    removeLine(line) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().remove(new Range(line, 0, line + 1, 0));\n    }\n\n    @enqueueIfNotLoaded\n    insertAtLine(line, str) {\n        let column = this.getAce().session.getLine(line - 1).length;\n        this.getAce().gotoLine(line, column);\n        this.insert(str);\n    }\n\n    @enqueueIfNotLoaded\n    replaceLine(line, str) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().replace(new Range(line, 0, line + 1, 0), str);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionEventListener(event, callback) {\n        this.getAce().getSession().addEventListener(event, callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionChangeListener(callback) {\n        this.addAceSessionEventListener(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceChangeListener(callback) {\n        this.getAce().on(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceEventListener() {\n        this.getAce().addEventListener(...arguments);\n    }\n\n    @enqueueIfNotLoaded\n    focus() {\n        this.getAce().focus();\n    }\n\n    @enqueueIfNotLoaded\n    gotoEnd() {\n        let editor = this.getAce();\n        let editorRow = editor.session.getLength() - 1;\n        let editorColumn = editor.session.getLine(editorRow).length;\n        editor.gotoLine(editorRow + 1, editorColumn);\n    }\n\n    @enqueueIfNotLoaded\n    setUndoManager(undoManager) {\n        this.getAce().getSession().setUndoManager(undoManager);\n    }\n\n    @enqueueIfNotLoaded\n    setAceRendererOption(key, value) {\n        this.getAce().renderer.setOption(key, value);\n    }\n\n    // Inserts the text at the current cursor position\n    @enqueueIfNotLoaded\n    insert(text) {\n        this.getAce().insert(text);\n    }\n\n    // Appends the text at the end of the document\n    @enqueueIfNotLoaded\n    append(text) {\n        var lastRow = this.getAce().getSession().getLength() - 1;\n        if (lastRow < 0) {\n            lastRow = 0;\n        }\n        var lastRowLength = this.getAce().getSession().getLine(lastRow).length;\n        var scrolledToBottom = this.getAce().isRowFullyVisible(lastRow);\n        // console.log(\"Scroll to bottom \", scrolledToBottom);\n        this.getAce().getSession().insert({\n            row: lastRow,\n            column: lastRowLength\n        }, text);\n\n        this.aceResize();\n\n        if (scrolledToBottom) {\n            // TODO: Include scroll lock option!\n            // TODO: See if scrolling to bottom can be done better\n            // TODO: for some reason the scroll bar height is not being updated, this needs to be fixed\n            this.getAce().scrollToLine(this.getAce().getSession().getLength() - 1, true, true, function () {});\n        }\n    }\n\n    copyTextToClipboard() {\n        this.getAce().selectAll();\n        this.getAce().focus();\n        document.execCommand('copy');\n    }\n}\n\n\nclass StaticCodeHighlighterStyle extends StyleSheet {\n    @styleRule\n    hideActive = {\n        \" .ace_gutter-active-line\": {\n            display: \"none\",\n        },\n        \" .ace_active-line\": {\n            display: \"none\",\n        },\n        \" .ace_cursor\": {\n            display: \"none\",\n        }\n    }\n}\n\n\n@registerStyle(StaticCodeHighlighterStyle)\nclass StaticCodeHighlighter extends CodeEditor {\n    setOptions(options) {\n        options = Object.assign({\n            fontSize: 13,\n            readOnly: true,\n            lineWrapping: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.hideActive)\n    }\n}\n\nexport {CodeEditor, StaticCodeHighlighter};\n","import {UI, Panel, StyleSheet, styleRule, registerStyle, Image} from \"UI\";\n\n\nclass TextTranslationEntryStyle extends StyleSheet {\n    @styleRule\n    panel = {\n        background: \"white\",\n        width: \"80vw\",\n        maxHeight: \"400px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        padding: \"10px 20px\",\n        boxShadow: \"1px 1px 6px rgba(0,0,0,.5)\",\n        margin: \"20px\",\n        borderRadius: \"6px\"\n    };\n\n    @styleRule\n    title = {\n        fontSize: \"2em\",\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    contentContainer = {\n        display: \"flex\",\n        padding: \"20px 0\",\n        flexDirection: \"row\",\n        \">*\": {\n            flex: \"1\",\n        },\n        flex: \"1\",\n    };\n\n    @styleRule\n    imageContainer = {\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    image = {\n        borderRadius: \"4px\",\n        height: \"100%\",\n    };\n\n    @styleRule\n    textContainer = {\n        overflow: \"auto\",\n    };\n\n    @styleRule\n    text = {\n        color: \"rgba(0,0,0,.8)\",\n        textAlign: \"justify\",\n    };\n}\n\n\n@registerStyle(TextTranslationEntryStyle)\nexport class TextTranslationEntry extends Panel {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.panel);\n    }\n\n    render() {\n        const [title, content, photoUrl] = [\"getTitle\", \"getContent\", \"getPhotoUrl\"].map(\n            func => this.options.translation[func]());\n        const {styleSheet} = this;\n        return [\n            <div className={styleSheet.title}>{title}</div>,\n            <div className={styleSheet.contentContainer}>\n                <div className={styleSheet.imageContainer}>\n                    <Image className={styleSheet.image} src={photoUrl}/>\n                </div>\n                <div className={styleSheet.textContainer}>\n                    <div className={styleSheet.text}>{content}</div>\n                </div>\n            </div>\n        ];\n    }\n}","import {Dispatchable} from \"../base/Dispatcher\";\n\nclass State extends Dispatchable {\n    constructor() {\n        super();\n        this.stores = new Map();\n        // A version of applyEvent that's binded to this\n        // TODO: applyEvent should use the @bind decorator\n        this.applyEventWrapper = (event) => {\n            this.applyEvent(event);\n        }\n    }\n\n    getStore(objectType) {\n        objectType = objectType && objectType.toLowerCase();\n        return this.stores.get(objectType);\n    }\n\n    getStoreForEvent(event) {\n        const objectType = event.objectType || event.store;\n        return this.getStore(objectType);\n    }\n\n    addStore(store) {\n        let objectType = store.objectType.toLowerCase();\n        if (!this.stores.has(objectType)) {\n            this.stores.set(objectType, store);\n        } else {\n            throw Error(\"GlobalState: Adding a store for an existing object type: \" + store.objectType);\n        }\n    }\n\n    applyEvent(event) {\n        if (event == null) {\n            return;\n        }\n        if (Array.isArray(event)) {\n            for (let individualEvent of event) {\n                this.applyEvent(individualEvent);\n            }\n            return;\n        }\n        if (event.state) {\n            this.importState(event.state);\n            // We can have events that only have a state\n            if (!this.getStoreForEvent(event)) {\n                return;\n            }\n        }\n        let store = this.getStoreForEvent(event);\n        if (store) {\n            return store.applyEvent(event);\n        } else {\n            console.log(\"GlobalState: Missing store for event: \", event);\n        }\n    }\n\n    get(objectType, objectId) {\n        let store = this.getStore(objectType);\n        if (store) {\n            let args = Array.prototype.slice.call(arguments, 1);\n            return store.get(...args);\n        } else {\n            console.error(\"GlobalState: Can't find store \", objectType);\n            return null;\n        }\n    }\n\n    // Import the store for objectType and remove it from stateMap\n    importStateFromTempMap(objectType, stateMap) {\n        let storeState = stateMap.get(objectType);\n        stateMap.delete(objectType);\n\n        let store = this.getStore(objectType);\n\n        if (!store) {\n            console.error(\"Failed to import state, can't find store \", objectType);\n            return;\n        }\n        for (let dependency of store.getDependencies()) {\n            this.importStateFromTempMap(dependency.toLowerCase(), stateMap);\n        }\n        store.importState(storeState);\n    }\n\n    // Imports the state information from a plain object\n    importState(state) {\n        if (Array.isArray(state)) {\n            for (let obj of state) {\n                this.importState(obj);\n            }\n            return;\n        }\n        // Import everything in a map and then do an implicit topological sort by dependencies\n        let stateMap = new Map();\n        for (let objectType in state) {\n            stateMap.set(objectType.toLowerCase(), state[objectType]);\n        }\n        while (stateMap.size > 0) {\n            let allKeys = stateMap.keys();\n            let objectType = allKeys.next().value;\n            this.importStateFromTempMap(objectType, stateMap);\n        }\n    }\n}\n\nlet GlobalState = new State();\n\n// When creating a store without an explicit state, this value should be assumes\n// Change it to null for instance of you don't want stores to be added to any state by default\nlet DefaultState = GlobalState;\n\nself.GlobalState = GlobalState;\n\nexport {State, GlobalState, DefaultState};\n","import {Dispatchable, CleanupJobs} from \"../base/Dispatcher\";\nimport {DefaultState} from \"./State\";\n\n// The store information is kept in a symbol, to not interfere with serialization/deserialization\nexport const StoreSymbol = Symbol(\"Store\");\n\nclass StoreObject extends Dispatchable {\n    constructor(obj, event, store) {\n        super();\n        Object.assign(this, obj);\n        this.setStore(store);\n    };\n\n    static getStoreName() {\n        return this.name;\n    }\n\n    setStore(store) {\n        this[StoreSymbol] = store;\n    }\n\n    getStore() {\n        return this[StoreSymbol];\n    }\n\n    // By default, applying an event just shallow copies the fields from event.data\n    applyEvent(event) {\n        Object.assign(this, event.data);\n    };\n\n    // Add a listener for all updates, callback will receive the events after they were applied\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n\n    // Add a listener on updates from events with this specific type.\n    // Can accept an array as eventType\n    // Returns an object that implements the Cleanup interface.\n    addEventListener(eventType, callback) {\n        if (Array.isArray(eventType)) {\n            const handlers = eventType.map(e => this.addEventListener(e, callback));\n            return new CleanupJobs(handlers);\n        }\n        // Ensure the private event dispatcher exists\n        if (!this._eventDispatcher) {\n            this._eventDispatcher = new Dispatchable();\n            this.addUpdateListener((event) => {\n                this._eventDispatcher.dispatch(event.type, event, this);\n            });\n        }\n        return this._eventDispatcher.addListener(eventType, callback);\n    }\n\n    getStreamName() {\n        throw \"getStreamName not implemented\";\n    }\n\n    registerToStream() {\n        this.getStore().getState().registerStream(this.getStreamName());\n    }\n}\n\nclass BaseStore extends Dispatchable {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super();\n        this.options = options;\n        this.objectType = objectType.toLowerCase();\n        this.ObjectWrapper = ObjectWrapper;\n        this.attachToState();\n    }\n\n    attachToState() {\n        if (this.getState()) {\n            this.getState().addStore(this);\n        }\n    }\n\n    getState() {\n        // Allow explicit no state\n        if (this.options.hasOwnProperty(\"state\")) {\n            return this.options.state;\n        } else {\n            return DefaultState;\n        }\n    }\n\n    // Is used by the state object to see which stores need to be loaded first\n    getDependencies() {\n        return this.options.dependencies || [];\n    }\n}\n\n// Store type primarily intended to store objects that come from a server DB, and have a unique numeric .id field\nclass GenericObjectStore extends BaseStore {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super(...arguments);\n        this.objects = new Map();\n    }\n\n    has(id) {\n        return !!this.get(id);\n    }\n\n    get(id) {\n        if (id == null) {\n            return null;\n        }\n        return this.objects.get(parseInt(id));\n    }\n\n    getObjectIdForEvent(event) {\n        return event.objectId || event.data.id;\n    }\n\n    getObjectForEvent(event) {\n        let objectId = this.getObjectIdForEvent(event);\n        return this.get(objectId);\n    }\n\n    // TODO: should this default to iterable?\n    all(asIterable) {\n        let values = this.objects.values();\n        if (!asIterable) {\n            values = Array.from(values);\n        }\n        return values;\n    }\n\n    createObject(event) {\n        const obj = new this.ObjectWrapper(event.data, event, this);\n        obj.setStore(this);\n        return obj;\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        let existingObject = this.getObjectForEvent(event);\n\n        if (existingObject) {\n            let refreshEvent = Object.assign({}, event);\n            refreshEvent.type = \"refresh\";\n            existingObject.applyEvent(refreshEvent);\n            existingObject.dispatch(\"update\", event);\n            return existingObject;\n        } else {\n            let newObject = this.createObject(event);\n            this.objects.set(this.getObjectIdForEvent(event), newObject);\n\n            if (sendDispatch) {\n                this.dispatch(\"create\", newObject, event);\n            }\n            return newObject;\n        }\n    }\n\n    applyUpdateOrCreateEvent(event) {\n        var obj = this.getObjectForEvent(event);\n        if (!obj) {\n            obj = this.applyCreateEvent(event, false);\n            this.dispatch(\"create\", obj, event);\n        } else {\n            this.applyEventToObject(obj, event);\n        }\n        this.dispatch(\"updateOrCreate\", obj, event);\n        return obj;\n    }\n\n    applyDeleteEvent(event) {\n        let objDeleted = this.getObjectForEvent(event);\n        if (objDeleted) {\n            this.objects.delete(this.getObjectIdForEvent(event));\n            objDeleted.dispatch(\"delete\", event, objDeleted);\n            this.dispatch(\"delete\", objDeleted, event);\n        }\n        return objDeleted;\n    }\n\n    applyEventToObject(obj, event) {\n        obj.applyEvent(event);\n        obj.dispatch(\"update\", event);\n        this.dispatch(\"update\", obj, event);\n        return obj;\n    }\n\n    applyEvent(event) {\n        event.data = event.data || {};\n\n        if (event.type === \"create\") {\n            return this.applyCreateEvent(event);\n        } else if (event.type === \"delete\") {\n            return this.applyDeleteEvent(event);\n        } else if (event.type === \"updateOrCreate\") {\n            return this.applyUpdateOrCreateEvent(event);\n        } else {\n            var obj = this.getObjectForEvent(event);\n            if (!obj) {\n                console.error(\"I don't have object of type \", this.objectType, \" \", event.objectId);\n                return;\n            }\n            return this.applyEventToObject(obj, event);\n        }\n    }\n\n    importState(objects) {\n        objects = objects || [];\n        for (let obj of objects) {\n            this.fakeCreate(obj);\n        }\n    }\n\n    // Create a fake creation event, to insert the raw object\n    fakeCreate(obj, eventType=\"fakeCreate\") {\n        if (!obj) {\n            return;\n        }\n        var event = {\n            objectType: this.objectType,\n            objectId: obj.id,\n            type: eventType,\n            data: obj,\n        };\n        return this.applyCreateEvent(event);\n    }\n\n    // Add a listener on all object creation events\n    // If fakeExisting, will also pass existing objects to your callback\n    addCreateListener(callback, fakeExisting) {\n        if (fakeExisting) {\n            for (let object of this.objects.values()) {\n                let event = {\n                    objectType: this.objectType,\n                    objectId: object.id,\n                    type: \"fakeCreate\",\n                    data: object,\n                };\n                callback(object, event);\n            }\n        }\n\n        return this.addListener(\"create\", callback);\n    }\n\n    // Add a listener for any updates to objects in store\n    // The callback will receive the object and the event\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    // Add a listener for any object deletions\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n}\n\nclass SingletonStore extends BaseStore {\n    constructor(objectType, options={}) {\n        super(objectType, SingletonStore, options);\n    }\n\n    get() {\n        return this;\n    }\n\n    all() {\n        return [this];\n    }\n\n    applyEvent(event) {\n        Object.assign(this, event.data);\n        this.dispatch(\"update\", event, this);\n    }\n\n    importState(obj) {\n        Object.assign(this, obj);\n        this.dispatch(\"update\", event, this);\n    }\n\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n}\n\n// Use the same logic as StoreObject when listening to events\nSingletonStore.prototype.addEventListener = StoreObject.prototype.addEventListener;\n\nexport {StoreObject, BaseStore, GenericObjectStore, SingletonStore};\n","import {Ajax} from \"Ajax\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class TextTranslation extends StoreObject {\n    constructor(...args) {\n        super(...args);\n        // TODO: Get rid of this once we have database working.\n        this.initMock();\n    }\n\n    initMock() {\n        this.title = [\"Course 1\", \"Introduction to vrajeala\", \"How to rock like a roll\", \"X - a professional or beginner mistake?\"]\n            [Math.floor(Math.random() * 4)];\n        this.photoUrl = [\n            \"http://www.aktual24.ro/wp-content/uploads/2016/10/document.jpg\",\n            \"https://sites.fas.harvard.edu/~hpcws/august28,1980.JPG\",\n            \"https://upload.wikimedia.org/wikipedia/commons/7/76/1853_Subscription_document.JPG\",\n            \"http://www.elonka.com/kryptos/sanborn/KGBCyrillic.jpg\"\n        ][parseInt(Math.random() * 4)];\n        this.content = [\"Stupid user or stupid UI?\\n\" +\n        \"That time I lost ~400 because I didnt scroll down\\n\" +\n        \"\\n\" +\n        \"I remember reading this story about Hulu stealing $6 from Lauren LoPrete with a sneaky UX trick:\\n\" +\n        \"Ask me how Hulu stole $6.00 from me with this one sneaky UX trick.\\n\" +\n        \"\\n\" +\n        \"Yep, thats me. Youre probably wondering how I got here in the first place. Back in 2015, Cinnamon Toast Crunch had a\\n\" +\n        \"blog.prototypr.io\\t\\n\" +\n        \"To summarise, Lauren never pressed save after toggling an option to switch pricing plans. That was because the confirmation button to save her changes was all the way at the bottom of the pageyoud somehow have to know to scroll all the way to the bottom, and click continue, then follow a process to confirm.\\n\" +\n        \"A similar thing happened to me, and I incurred a ~400 bill. Maybe its partly down to my own stupidity, but have a read and make up your mind. Long story short, I feel like the UI provided important payment information in the wrong place at the wrong time, almost hiding it from me through the use of cleverly placed call-to-actions.\\n\" +\n        \"First, here is an overview of the problem:\\n\" +\n        \"Overview: App Stopped != Zero Cost\\n\" +\n        \"I was using Redhats web hosting service to run a website, and upgraded to their bronze pricing plan to make use of extra pay-as-you-use resources. After I no longer needed their service, I hit Stop App, thinking Id shut it down.\\n\" +\n        \"In my mind, a stopped status suggests that the service is no longer in use (so I wont be billed). I was using an older version of their service, but it looked something like this when Stopped:\\n\" +\n        \"\\n\" +\n        \"Therefore, I forgot all about it and got billed around 400 for the entire time the app was stopped. Maybe I didnt read everything carefully, but I felt a bit tricked.\\n\" +\n        \"After contacting Customer Support, I was told the information on pricing was clear:\\n\" +\n        \"\\n\" +\n        \"I just never saw it, because it was provided right at the bottom of the sign up pageno where near the focus of the user. See belowthe call to action for upgrading an account is shown far above the billing information, so many users are bound to miss it. Theres also 5 call-to-action buttons before the information (highlighted by the blue numbers):\",\n        \"The Subtle Art of Connecting With Anyone\\n\" +\n        \"The late George Carlin is probably one of my favorite comedians.\\n\" +\n        \"I always found him to be raw and honest, and like most great comedians, there was a sense that he wasnt there to just make you laugh. He had a subtle truth to share and that truth was best delivered as a joke.\\n\" +\n        \"In this way, towards the later years of his career, he said something in an interview with Jon Stewart that resonated with me quite a bit.\\n\" +\n        \"I love, love individuals. I hate groups of people.\\n\" +\n        \"Of course, we can all apply our own nuanced lens to that statement and pick out exceptions here and there, but to me at least, there is some sense there.\\n\" +\n        \"Many groups of people do great things. Many groups of people do bad things. In either case, what they have in common is that they are ideologues. And realistically speaking, if they werent, they likely wouldnt accomplish much.\\n\" +\n        \"Still, there is something there that rubs me the wrong way. Maybe its their pure conviction that theyre right, or maybe its just their way of operating.\\n\" +\n        \"Thats why the first part of that statement, about loving individuals, is interesting. Because I do. And Im consistently reminded of that fact every time I get out of my regular routine and meet a swarm of new people.\\n\" +\n        \"In fact, the more I do that, the more convinced I get that there likely isnt anyone out there I wouldnt be able to see some commonality with if I sat down with them privately for, say, an hour or two.\\n\" +\n        \"Thats fascinating to me, and it makes me wonder what it really is about individual relationships that makes them succeed.\\n\" +\n        \"How and why does a personal connection with someone work?\\n\" +\n        \"The Value of a Shared Culture\\n\" +\n        \"A while ago, someone asked me how I would describe what its like to bond with someone. I remember thinking about it for a moment before saying,\\n\" +\n        \"Its like sharing an invisible stream of consciousness with each other.\\n\" +\n        \"Im not entirely sure I knew what that meant then, but I think I do now.\\n\" +\n        \"One of the reasons that groups of people are able to bond together is because of the shared culture that they have created. This culture is essentially an invisible presence that contains knowledge about what a particular group values, how they conduct themselves, and where they want to go.\\n\" +\n        \"Movements have a culture. Companies have a culture. Families have a culture.\\n\" +\n        \"Its the glue that binds us together. Its what adds context to our discussions, its what inspires us when no one is looking, and its what moves us to action.\",\n        \"A list for those in search of free tools to add to the toolkit.\\n\" +\n        \"\\n\" +\n        \"A busy desk with a keyboard, a notebook, a cable, pencils and glasses near an iMac by Sabri Tuzcu on Unsplash\\n\" +\n        \"As a typical broke college student, I am a huge fan of free things which is probably why I have always found software so fascinating. You can literally make anything for the cost of nothing when it comes to software thanks to open source. One of the reasons I became a programmer was because there was no entry fee. The only things I needed were time, dedication, and a whole lot of patience. Despite being free, these tools are things I used constantly because of their undeniable quality.\\n\" +\n        \"Atom\\n\" +\n        \"\\n\" +\n        \"Logo for the Atom Text Editor\\n\" +\n        \"Atom is one of my go-to applications and is becoming more and more useful everyday. Not only is Atom a 100% hackable text editor, its also a unique IDE. With it being open sourced, people have created thousands of packages to help maximize workflow and create a better working environment. Working in python? No problem, just install autocomplete-python and let it finish your sentences. Find yourself using HTML, CSS, or JavaScript? Theres a package for that. Theres a package for anything, and if there isnt, then you can make your own. Also, Atom just looks delightful and feels great to write in.\\n\" +\n        \"Although it can be extremely slow to start on Windows, the launch time is not even an issue on Linux systems. I have used Atom to use all of the above languages and Ruby and it has been a charm to use for all of them.\\n\" +\n        \"Overall Rating: 9/10\\n\" +\n        \"IntelliJ IDEA/PyCharm\\n\" +\n        \"When Im feeling something more fully-featured than a text editor and decide to use an IDE, my favorites by far are IntelliJ IDEA and PyCharm (both developed by JetBrains). While people will argue that vim/emacs are far superior, I began with using fully featured IDEs like Eclipse, so I find comfort in having all of the features at my disposal. IntelliJ revolves around Java while PyCharm is, as you guessed it, all about Python. (JetBrains also develops Android Studio which is essentially IntelliJ but with Android development front-and-center.\\n\" +\n        \"On the downside, an IDE is almost always going to be less lightweight than something as simple as a text editor, but these IDEs have always been more than enough for my needs. I have, however, found them to be far faster than Eclipse and much easier to get along with. Eclipse, while a great tool, can be quite awkward to work with and I find that JetBrains IDEs are much nicer to look at as well.\\n\" +\n        \"Overall Rating: 9/10\\n\" +\n        \"OneNote/Simplenote\\n\" +\n        \"\\n\" +\n        \"A fountain pen on a spiral notebook by Aaron Burden on Unsplash\\n\" +\n        \"Note taking is something that I think everyone can benefit from, but if youre anything like me then you suffer from crazy high levels of choice paralysis. Its sometimes hard to find a good replacement for pen and paper, but for those who prefer to have everything digitally saved, Ive found that OneNote and Simplenote are the best options for note taking.\"]\n        [parseInt(Math.random() * 3)];\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    getPhotoUrl() {\n        return this.photoUrl;\n    }\n\n    getContent() {\n        return this.content;\n    }\n}\n\nexport const TextTranslationStore = new GenericObjectStore(\"translation\", TextTranslation);\n","import {UI} from \"UI\";\nimport {TextTranslationEntry} from \"./TextTranslationEntry\";\nimport {TextTranslation} from \"../state/TextTranslationStore\";\n\n\nexport class TextTranslationList extends UI.Element {\n    render() {\n        return [...'           '].map(x => <TextTranslationEntry translation={new TextTranslation()} />);\n    }\n}","import {UI, Link, registerStyle} from \"UI\";\nimport {StyleSheet, styleRule} from \"UI\";\nimport {TextTranslationList} from \"translation/TextTranslationList\";\n\n\nclass CardStyle extends StyleSheet {\n    @styleRule\n    container = {\n        width: \"450px\",\n        maxHeight: \"100%\",\n        maxWidth: \"100%\",\n        backgroundColor: \"#fff\",\n        boxShadow: \"#a05100 0px 0px 10px\",\n    };\n\n    @styleRule\n    header = {\n        height: \"100px\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontSize: \"28px\",\n    };\n\n    @styleRule\n    body = {\n        paddingLeft: \"20px\",\n        paddingRight: \"20px\",\n        paddingBottom: \"40px\",\n        textAlign: \"center\",\n        fontSize: \"17px\",\n        \">p\": {\n            margin: \"0px\",\n        }\n    };\n}\n\nclass QuoteStyle extends StyleSheet {\n    @styleRule\n    quote = {\n        color: \"#aaa\",\n        fontStyle: \"italic\",\n        fontSize: \"17px\",\n        marginTop: \"10px\",\n    };\n}\n\nclass IndexPageStyle extends StyleSheet {\n    @styleRule\n    container = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n    };\n\n    @styleRule\n    topContainer = {\n        flexGrow: \"1.5\",\n        width: \"100%\",\n        backgroundColor: \"#f0a150\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    bottomContainer = {\n        flexGrow: \"2\",\n        width: \"100%\",\n        fontSize: \"18px\",\n        paddingTop: \"20px\",\n        textAlign: \"center\",\n    };\n}\n\n\n@registerStyle(CardStyle)\nexport class Card extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let {headerText, bodyText} = this.options;\n\n        return [\n            <div className={this.styleSheet.header}>\n                {headerText}\n            </div>,\n            <div className={this.styleSheet.body}>\n                {\n                    bodyText.map((line) => {\n                        return <p>{line}</p>;\n                    })\n                }\n            </div>\n        ];\n    }\n}\n\n@registerStyle(QuoteStyle)\nclass Quote extends UI.Element {\n    render() {\n        let {text, hasQuotes} = this.options,\n            message = text;\n        if (hasQuotes) {\n            message = \"\\\"\" + message + \"\\\"\";\n        }\n\n        return <div className={this.styleSheet.quote}>\n            {message}\n        </div>;\n    }\n}\n\n@registerStyle(IndexPageStyle)\nexport class IndexPage extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        return [\n            <TextTranslationList style={{height: \"100%\"}}/>\n        ];\n    }\n}","// TODO: this file should be called StoreExtenders\nimport {unwrapArray, splitInChunks} from \"../base/Utils\";\nimport {Ajax} from \"../base/Ajax\";\nimport {GlobalState} from \"./State\";\n\nconst AjaxFetchMixin = (BaseStoreClass) => class AjaxFetchMixin extends BaseStoreClass {\n    fetch(id, successCallback, errorCallback, forceFetch=false) {\n        if (!forceFetch) {\n            let obj = this.get(id);\n            if (obj) {\n                successCallback(obj);\n                return;\n            }\n        }\n        if (!this.fetchJobs) {\n            this.fetchJobs = [];\n        }\n        this.fetchJobs.push({id: id, success: successCallback, error: errorCallback});\n        if (!this.fetchTimeout) {\n            this.fetchTimeout = setTimeout(() => {\n                this.executeAjaxFetch();\n            }, this.options.fetchTimeoutDuration || 0);\n        }\n    };\n\n    getFetchRequestData(ids, fetchJobs) {\n        return {\n            ids: ids,\n        };\n    }\n\n    getFetchRequestObject(ids, fetchJobs) {\n        let requestData = this.getFetchRequestData(ids, fetchJobs);\n\n        // TODO: options.fetchURL should also support a function(ids, fetchJobs), do it when needed\n        return {\n            url: this.options.fetchURL,\n            type: this.options.fetchType || \"GET\",\n            dataType: \"json\",\n            data: requestData,\n            cache: false,\n            success: (data) => {\n                GlobalState.importState(data.state || {});\n                for (let fetchJob of fetchJobs) {\n                    let obj = this.get(fetchJob.id);\n                    if (obj) {\n                        fetchJob.success(obj);\n                    } else {\n                        console.error(\"Failed to fetch object \", fetchJob.id, \" of type \", this.objectType);\n                        if (fetchJob.error) {\n                            fetchJob.error();\n                        }\n                    }\n                }\n            },\n            error: (error) => {\n                console.error(\"Failed to fetch objects of type \", this.objectType, \":\\n\", error);\n                for (let fetchJob of fetchJobs) {\n                    if (fetchJob.error) {\n                        fetchJob.error(error);\n                    }\n                }\n            }\n        }\n    }\n\n    //returns an array of ajax requests that have to be executed\n    getFetchRequests(fetchJobs) {\n        let idFetchJobs = new Map();\n\n        for (let fetchJob of fetchJobs) {\n            let objectId = fetchJob.id;\n            if (!idFetchJobs.has(objectId)) {\n                idFetchJobs.set(objectId, new Array());\n            }\n            idFetchJobs.get(objectId).push(fetchJob);\n        }\n\n        let maxChunkSize = this.options.maxFetchObjectCount || 256;\n\n        let idChunks = splitInChunks(Array.from(idFetchJobs.keys()), maxChunkSize);\n        let fetchJobsChunks = splitInChunks(Array.from(idFetchJobs.values()), maxChunkSize);\n\n        let requests = [];\n        for (let i = 0; i < idChunks.length; i += 1) {\n            requests.push(this.getFetchRequestObject(idChunks[i], unwrapArray(fetchJobsChunks[i])))\n        }\n\n        return requests;\n    }\n\n    executeAjaxFetch() {\n        let fetchJobs = this.fetchJobs;\n        this.fetchJobs = null;\n\n        let requests = this.getFetchRequests(fetchJobs);\n\n        for (let requestObject of requests) {\n            Ajax.fetch(requestObject);\n        }\n\n        clearTimeout(this.fetchTimeout);\n        this.fetchTimeout = null;\n    };\n\n};\n\nconst VirtualStoreObjectMixin = (BaseStoreObjectClass) => class VirtualStoreObjectMixin extends BaseStoreObjectClass {\n    hasTemporaryId() {\n        return (typeof this.id === \"string\" || this.id instanceof String) && this.id.startsWith(\"temp-\");\n    }\n\n    // Meant for updating temporary objects that need to exist before being properly created\n    updateId(newId) {\n            if (this.id == newId) {\n                return;\n            }\n            let oldId = this.id;\n            if (!this.hasTemporaryId()) {\n                console.error(\"This is only meant to replace temporary ids!\");\n            }\n            this.id = newId;\n            this.dispatch(\"updateId\", {oldId: oldId});\n        }\n};\n\n// TODO: there's still a bug in this class when not properly matching virtual obj sometimes I think\nconst VirtualStoreMixin = (BaseStoreClass) => class VirtualStoreMixin extends BaseStoreClass {\n    static generateVirtualId() {\n        if (!this.virtualIdCounter) {\n            this.virtualIdCounter = 0;\n        }\n        this.virtualIdCounter += 1;\n        return this.virtualIdCounter;\n    }\n\n    generateVirtualId() {\n        return this.constructor.generateVirtualId();\n    }\n\n    // TODO: we probably shouldn't have getVirtualObject take in an event\n    getVirtualObject(event) {\n        return this.objects.get(\"temp-\" + event.virtualId);\n    }\n\n    get(id) {\n        return this.objects.get(id);\n    }\n\n    applyUpdateObjectId(object, id) {\n        if (object.id === id) {\n            return;\n        }\n        let oldId = object.id;\n        object.updateId(id);\n        this.objects.delete(oldId);\n        this.objects.set(object.id, object);\n        this.dispatch(\"updateObjectId\", object, oldId);\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        if (event.virtualId) {\n            let existingVirtualObject = this.getVirtualObject(event);\n            if (existingVirtualObject) {\n                this.applyUpdateObjectId(existingVirtualObject, event.objectId);\n            }\n        }\n\n        return super.applyCreateEvent(...arguments);\n    }\n};\n\nexport {AjaxFetchMixin, VirtualStoreMixin, VirtualStoreObjectMixin};\n","// A basic store that can be used to keep objects that map to ISO-code backed languages\nimport {StoreObject, GenericObjectStore} from \"Store\";\n\nclass LanguageObject extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.translationMap = new Map();\n    }\n\n    toString() {\n        let name = this.name;\n        if (this.localName && this.localName != this.name) {\n            name += \" (\" + this.localName + \")\";\n        }\n        return name;\n    }\n\n    buildTranslation(callback) {\n        Language.dispatch(\"buildTranslationMap\", this);\n        callback(this.translationMap);\n    }\n}\n\nclass LanguageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"Language\", LanguageObject);\n    }\n\n    getLanguageForCode(isoCode) {\n        for (let language of this.all()) {\n            if (language.isoCode === isoCode) {\n                return language;\n            }\n        }\n    }\n\n    setLocale(language) {\n        if (this.Locale == language) {\n            return;\n        }\n        this.Locale = language;\n        this.dispatch(\"localeChange\", language);\n    }\n\n    getLocale() {\n        return this.Locale;\n    }\n}\n\nvar Language = new LanguageStoreClass();\n\nexport {Language};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {Language} from \"LanguageStore\";\n\nclass Article extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.edits = new Map();\n    }\n\n    canBeEditedByUser(user=USER) {\n        return user.isSuperUser || this.userCreatedId == user.id;\n    }\n\n    addEdit(articleEdit) {\n        this.edits.set(articleEdit.id, articleEdit);\n    }\n\n    getEdits() {\n        return Array.from(this.edits.values());\n    }\n\n    getTranslation(language=Language.Locale) {\n        for (let article of ArticleStore.all()) {\n            if (article.baseArticleId === this.id && article.languageId === language.id) {\n                return article;\n            }\n        }\n        return this;\n    }\n\n    getBaseArticle() {\n        return ArticleStore.get(this.baseArticleId) || this;\n    }\n}\n\nclass ArticleEdit extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass ArticleStoreClass extends AjaxFetchMixin(GenericObjectStore) {\n    getTranslation(id, language=Language.Locale) {\n        let baseArticle = this.get(id);\n        if (baseArticle) {\n            baseArticle = baseArticle.getTranslation(language);\n        }\n        return baseArticle;\n    }\n}\n\nvar ArticleStore = new ArticleStoreClass(\"article\", Article, {\n    fetchURL: \"/fetch_article/\",\n    maxFetchObjectCount: 32,\n});\n\nvar ArticleEditStore = new GenericObjectStore(\"articleedit\", ArticleEdit, {\n    dependencies: [\"article\"],\n});\n\nArticleEditStore.addCreateListener((articleEdit) => {\n    let article = articleEdit.getArticle();\n    article.addEdit(articleEdit);\n});\n\nexport {Article, ArticleStore, ArticleEditStore};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {ArticleStore} from \"ArticleStore\";\n\nclass BlogEntry extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass BlogEntryStoreClass extends GenericObjectStore {\n    constructor(objectType=\"BlogEntry\", ObjectWrapper=BlogEntry) {\n        super(objectType, ObjectWrapper, {\n            dependencies: [\"Article\"],\n        });\n    }\n\n    getEntryForURL(urlName) {\n        return this.all().find(blogEntry => blogEntry.urlName === urlName);\n    }\n}\n\nvar BlogEntryStore = new BlogEntryStoreClass();\n\nexport {BlogEntryStore};\n","// TODO: this file is in dire need of a rewrite\nexport class StringStream {\n    constructor(string, options) {\n        this.string = string;\n        this.pointer = 0;\n    }\n\n    done() {\n        return this.pointer >= this.string.length;\n    }\n\n    advance(steps=1) {\n        this.pointer += steps;\n    }\n\n    char() {\n        let ch = this.string.charAt(this.pointer);\n        this.pointer += 1;\n        return ch;\n    }\n\n    whitespace(whitespaceChar=/\\s/) {\n        let whitespaceStart = this.pointer;\n\n        while (!this.done() && whitespaceChar.test(this.at(0))) {\n            this.pointer += 1;\n        }\n\n        // Return the actual whitespace in case it is needed\n        return this.string.substring(whitespaceStart, this.pointer);\n    }\n\n    // Gets first encountered non-whitespace substring\n    word(validChars=/\\S/, skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let wordStart = this.pointer;\n        while (!this.done() && validChars.test(this.at(0))) {\n            this.pointer += 1;\n        }\n        return this.string.substring(wordStart, this.pointer);\n    }\n\n    number(skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let nanString = \"NaN\";\n        if (this.startsWith(nanString)) {\n            this.advance(nanString.length);\n            return NaN;\n        }\n\n        let sign = \"+\";\n        if (this.at(0) === \"-\" || this.at(0) === \"+\") {\n            sign = this.char();\n        }\n\n        let infinityString = \"Infinity\";\n        if (this.startsWith(infinityString)) {\n            this.advance(infinityString.length);\n            return sign === \"+\" ? Infinity : -Infinity;\n        }\n\n        let isDigit = (char) => {\n            return (char >= \"0\" || char <= \"9\");\n        };\n\n        if (this.at(0) === \"0\" && (this.at(1) === \"X\" || this.at(1) === \"x\")) {\n            // hexadecimal number\n            this.advance(2);\n\n            let isHexDigit = (char) => {\n                return isDigit(char) || (char >= \"A\" && char <= \"F\") ||(char >= \"a\" && char <= \"f\");\n            };\n\n            let numberStart = this.pointer;\n            while (!this.done() && isHexDigit(this.at(0))) {\n                this.pointer += 1;\n            }\n\n            return parseInt(sign + this.string.substring(numberStart), 16);\n        }\n\n        let numberStart = this.pointer;\n        while (!this.done() && isDigit(this.at(1))) {\n            this.pointer += 1;\n            if (this.peek === \".\") {\n                this.advance(1);\n                while (!this.done() && isDigit(this.at(1))) {\n                    this.pointer += 1;\n                }\n                break;\n            }\n        }\n        return parseFloat(sign + this.string.substring(numberStart, this.pointer));\n    }\n\n    // Gets everything up to delimiter, usually end of line, limited to maxLength\n    line(delimiter=/\\r*\\n/, maxLength=Infinity) {\n        if (delimiter instanceof RegExp) {\n            // Treat regex differently. It will probably be slower.\n            let str = this.string.substring(this.pointer);\n            let delimiterMatch = str.match(delimiter);\n\n            let delimiterIndex, delimiterLength;\n            if (delimiterMatch === null) {\n                // End of string encountered\n                delimiterIndex = str.length;\n                delimiterLength = 0;\n            } else {\n                delimiterIndex = delimiterMatch.index;\n                delimiterLength = delimiterMatch[0].length;\n            }\n\n            if (delimiterIndex >= maxLength) {\n                this.pointer += maxLength;\n                return str.substring(0, maxLength);\n            }\n\n            this.advance(delimiterIndex + delimiterLength);\n            return str.substring(0, delimiterIndex);\n        }\n\n        let delimiterIndex = this.string.indexOf(delimiter, this.pointer);\n\n        if (delimiterIndex === -1) {\n            delimiterIndex = this.string.length;\n        }\n\n        if (delimiterIndex - this.pointer > maxLength) {\n            let result = this.string.substring(this.pointer, this.pointer + maxLength);\n            this.advance(maxLength);\n            return result;\n        }\n\n        let result = this.string.substring(this.pointer, delimiterIndex);\n        this.pointer = delimiterIndex + delimiter.length;\n        return result;\n    }\n\n    // The following methods have no side effects\n\n    // Access char at offset position, relative to current pointer\n    at(index) {\n        return this.string.charAt(this.pointer + index);\n    }\n\n    peek(length=1) {\n        return this.string.substring(this.pointer, this.pointer + length);\n    }\n\n    startsWith(prefix) {\n        if (prefix instanceof RegExp) {\n            // we modify the regex to only check for the beginning of the string\n            prefix = new RegExp(\"^\" + prefix.toString().slice(1, -1));\n            return prefix.test(this.string.substring(this.pointer));\n        }\n        return this.peek(prefix.length) === prefix;\n    }\n\n    // Returns first position of match\n    search(pattern) {\n        let position;\n        if (pattern instanceof RegExp) {\n            position = this.string.substring(this.pointer).search(pattern);\n        } else {\n            position = this.string.indexOf(pattern, this.pointer) - this.pointer;\n        }\n        return position < 0 ? -1 : position;\n    }\n\n    clone() {\n        let newStream = new this.constructor(this.string);\n        newStream.pointer = this.pointer;\n        return newStream;\n    }\n}\n\nfunction kmp(input) {\n    if (input.length === 0) {\n        return [];\n    }\n\n    let prefix = [0];\n    let prefixLength = 0;\n\n    for (let i = 1; i < input.length; i += 1) {\n        while (prefixLength > 0 && input[i] !== input[prefixLength]) {\n            prefixLength = prefix[prefixLength];\n        }\n\n        if (input[i] === input[prefixLength]) {\n            prefixLength += 1;\n        }\n\n        prefix.push(prefixLength);\n    }\n    return prefix;\n}\n\nclass ModifierAutomation {\n    // build automaton from string\n    constructor(options) {\n        this.options = options;\n        this.steps = 0;\n        this.startNode = {\n            value: null,\n            startNode: true,\n        };\n        this.node = this.startNode;\n\n        let lastNode = this.startNode;\n\n        let char = options.pattern.charAt(0);\n        let startPatternNode = {\n            value: char,\n            startNode: true,\n        };\n\n        let patternPrefix = kmp(options.pattern);\n        let patternNode = [startPatternNode];\n\n        if (options.leftWhitespace) {\n            // We don't want to match if the first char is not preceeded by whitespace\n            let whitespaceNode = {\n                value: \" \",\n                whitespaceNode: true,\n            };\n            whitespaceNode.next = (input) => {\n                if (input === char) return startPatternNode;\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            lastNode.next = (input) => {\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            this.node = whitespaceNode;\n        } else {\n            lastNode.next = (input) => {\n                return input === char ? startPatternNode : this.startNode;\n            }\n        }\n        lastNode = startPatternNode;\n\n        for (let i = 1; i < options.pattern.length; i += 1) {\n            let char = options.pattern[i];\n            let newNode = {\n                value: char,\n            };\n            patternNode.push(newNode);\n\n            let backNode = (patternPrefix[i - 1] === 0) ? this.startNode : patternNode[patternPrefix[i - 1] - 1];\n\n            lastNode.next = (input) => {\n                if (input === char) {\n                    return newNode;\n                }\n\n                return backNode.next(input);\n            };\n            lastNode = newNode;\n        }\n        lastNode.patternLastNode = true;\n\n        if (options.captureContent) {\n            this.capture = [];\n            let captureNode = {\n                value: \"\",\n                captureNode: true,\n            };\n\n            // We treat the first character separately in order to support empty capture\n            let char = options.endPattern.charAt(0);\n            let endCaptureNode = {\n                value: char\n            };\n\n            let endPatternPrefix = kmp(options.endPattern);\n            let endPatternNodes = [endCaptureNode];\n\n            lastNode.next = captureNode.next = (input) => {\n                return input === char ? endCaptureNode : captureNode;\n            };\n\n            lastNode = endCaptureNode;\n            for (let i = 1; i < options.endPattern.length; i += 1) {\n                let char = options.endPattern[i];\n                let newNode = {\n                    value: char,\n                };\n                endPatternNodes.push(newNode);\n\n                let backNode = (endPatternPrefix[i - 1] === 0) ? captureNode : endPatternNodes[endPatternPrefix[i - 1] - 1];\n\n                lastNode.next = (input) => {\n                    if (input === char) {\n                        return newNode;\n                    }\n                    return backNode.next(input);\n                };\n                lastNode = newNode;\n            }\n\n            lastNode.endPatternLastNode = true;\n        }\n\n        lastNode.endNode = true;\n        lastNode.next = (input) => {\n            return this.startNode.next(input);\n        };\n    }\n\n    nextState(input) {\n        this.steps += 1;\n\n        this.node = this.node.next(input);\n\n        if (this.node.startNode) {\n            this.steps = 0;\n            delete this.patternStep;\n            delete this.endPatternStep;\n        }\n\n        if (this.node.patternLastNode) {\n            this.patternStep = this.steps - this.options.pattern.length + 1;\n        }\n        if (this.node.endPatternLastNode) {\n            // TODO(@all): Shouldn't it be this.options.endPattern.length instead of this.options.pattern.length?\n            this.endPatternStep = this.steps - this.options.pattern.length + 1;\n        }\n\n        return this.node;\n    }\n\n    done() {\n        return this.node.endNode;\n    }\n}\n\nclass Modifier {\n    constructor(options) {\n    }\n\n    modify(currentArray, originalString) {\n        let matcher = new ModifierAutomation({\n            pattern: this.pattern,\n            captureContent: this.captureContent, // TODO: some elements should not wrap\n            endPattern: this.endPattern,\n            leftWhitespace: this.leftWhitespace,\n        });\n\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let newArray = [];\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            let char = originalString[i];\n\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                matcher.nextState(\"\\\\\" + char); // prevent char from advancing automata\n                continue;\n            }\n\n            matcher.nextState(char);\n\n            if (matcher.done()) {\n                let modifierStart = i - (matcher.steps - matcher.patternStep);\n                let modifierEnd = i - (matcher.steps - matcher.endPatternStep) + this.endPattern.length;\n\n                let modifierCapture = [];\n\n                while (newArray.length > 0 && modifierStart <= newArray[newArray.length - 1].start) {\n                    let element = newArray.pop();\n\n                    modifierCapture.push(element);\n                }\n\n                if (newArray.length > 0 && modifierStart < newArray[newArray.length - 1].end) {\n                    let element = newArray.pop();\n                    newArray.push({\n                        isString: true,\n                        start: element.start,\n                        end: modifierStart,\n                    });\n                    modifierCapture.push({\n                        isString: true,\n                        start: modifierStart,\n                        end: element.end,\n                    });\n                }\n\n                if (currentElement.start < modifierStart) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: modifierStart,\n                    });\n                }\n                modifierCapture.reverse();\n\n                // this is the end of the capture\n                modifierCapture.push({\n                    isString: true,\n                    start: Math.max(currentElement.start, modifierStart),\n                    end: modifierEnd,\n                });\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(modifierCapture, originalString)),\n                    start: modifierStart,\n                    end: modifierEnd,\n                });\n\n                // We split the current element to in two(one will be captured, one replaces the current element\n                currentElement = {\n                    isString: true,\n                    start: modifierEnd,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n\n        return newArray;\n    }\n\n    processChildren(capture, originalString) {\n        return capture.map((element) => {\n            return this.processChild(element, originalString);\n        });\n    }\n\n    processChild(element, originalString) {\n        if (element.isDummy) {\n            return \"\";\n        } if (element.isString) {\n            return originalString.substring(element.start, element.end);\n        } else {\n            return element.content;\n        }\n    }\n}\n\nfunction InlineModifierMixin(BaseModifierClass) {\n    return class InlineModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.captureContent = true;\n        }\n\n        wrap(content) {\n            if (content.length > 0) {\n                content[0] = content[0].substring(content[0].indexOf(this.pattern) + this.pattern.length);\n\n                let lastElement = content.pop();\n                lastElement = lastElement.substring(0, lastElement.lastIndexOf(this.endPattern));\n                content.push(lastElement);\n\n                return {\n                    tag: this.tag,\n                    children: content\n                };\n            }\n        }\n    }\n}\n\nfunction LineStartModifierMixin(BaseModifierClass) {\n    return class LineStartModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.groupConsecutive = false;\n        }\n\n        isValidElement(element) {\n            return element.content &&\n                element.content.tag === \"p\" &&\n                element.content.children.length > 0 &&\n                !element.content.children[0].tag && // child is text string\n                element.content.children[0].startsWith(this.pattern);\n        }\n\n        modify(currentArray, originalString) {\n            let newArray = [];\n\n            for (let i = 0; i < currentArray.length; i += 1) {\n                let element = currentArray[i];\n                if (this.isValidElement(element)) {\n                    if (this.groupConsecutive) {\n                        let elements = [];\n\n                        let start, end;\n                        start = currentArray[i].start;\n                        while (i < currentArray.length && this.isValidElement(currentArray[i])) {\n                            elements.push(this.wrapItem(currentArray[i].content.children));\n\n                            i += 1;\n                        }\n                        // we make sure no elements are skipped\n                        i -= 1;\n\n                        end = currentArray[i].end;\n\n                        newArray.push({\n                            start: start,\n                            end: end,\n                            content: this.wrap(elements)\n                        });\n                    } else {\n                        // We use object assign here to keep the start and end properties. (Maybe along with others)\n                        let newElement = Object.assign({}, element, {\n                            content: this.wrap(element.content.children)\n                        });\n                        newArray.push(newElement);\n                    }\n\n                } else {\n                    newArray.push(element);\n                }\n            }\n            return newArray;\n        }\n\n        wrapItem(content) {\n            let firstChild = content[0];\n\n            let patternIndex = firstChild.indexOf(this.pattern);\n            let patternEnd = patternIndex + this.pattern.length;\n\n            content[0] = firstChild.substring(patternEnd);\n\n            return {\n                tag: this.itemTag,\n                children: content,\n            }\n        }\n\n        wrap(content) {\n            return {\n                tag: this.tag,\n                children: content,\n            }\n        }\n    }\n}\n\nfunction RawContentModifierMixin(BaseModifierClass) {\n    return class RawContentModifier extends BaseModifierClass {\n        processChildren(children, originalString) {\n            if (children.length === 0) {\n                return [];\n            }\n\n            return [originalString.substring(children[0].start, children[children.length - 1].end)];\n        }\n    }\n}\n\nexport class BlockCodeModifier extends Modifier {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"```\";\n        this.endPattern = \"\\n```\";\n        this.leftWhitespace = true;\n        this.captureContent = true;\n    }\n\n    processChildren(capture, originalString) {\n        this.codeOptions = null;\n        if (capture.length > 0) {\n            let codeBlock = originalString.substring(capture[0].start, capture[capture.length - 1].end);\n\n            codeBlock = codeBlock.substring(codeBlock.indexOf(this.pattern) + this.pattern.length);\n            codeBlock = codeBlock.substring(0, codeBlock.lastIndexOf(this.endPattern));\n\n            let firstLineEnd = codeBlock.indexOf(\"\\n\") + 1;\n            let firstLine = codeBlock.substring(0, firstLineEnd).trim();\n            codeBlock = codeBlock.substring(firstLineEnd);\n\n            if (firstLine.length > 0) {\n                this.codeOptions = {};\n                let lineStream = new StringStream(firstLine);\n                this.codeOptions.aceMode = lineStream.word();\n\n                Object.assign(this.codeOptions, MarkupParser.parseOptions(lineStream));\n            }\n\n            return codeBlock;\n        }\n        return \"\";\n    }\n\n    getElement(content) {\n        return {\n            tag: this.constructor.tag || \"pre\",\n            children: [content],\n        }\n    }\n\n    wrap(content, options) {\n        let codeHighlighter = this.getElement(content);\n\n        // TODO: this code should not be here\n        let codeOptions = {\n            aceMode: \"c_cpp\",\n            maxLines: 32,\n        };\n\n        if (this.codeOptions) {\n            Object.assign(codeOptions, this.codeOptions);\n            delete this.codeOptions;\n        }\n\n        Object.assign(codeOptions, codeHighlighter);\n        return codeOptions;\n    }\n}\n\nclass HeaderModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"#\";\n    }\n\n    wrap(content) {\n        let firstChild = content[0];\n\n        let hashtagIndex = firstChild.indexOf(\"#\");\n        let hashtagEnd = hashtagIndex + 1;\n        let headerLevel = 1;\n\n        let nextChar = firstChild.charAt(hashtagEnd);\n        if (nextChar >= \"1\" && nextChar <= \"6\") {\n            headerLevel = parseInt(nextChar);\n            hashtagEnd += 1;\n        } else if (nextChar === \"#\") {\n            while (headerLevel < 6 && firstChild.charAt(hashtagEnd) === \"#\") {\n                headerLevel += 1;\n                hashtagEnd += 1;\n            }\n        }\n\n        content[0] = firstChild.substring(hashtagEnd);\n        return {\n            tag: \"h\" + headerLevel,\n            children: content,\n        };\n    }\n}\n\nclass HorizontalRuleModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"---\";\n    }\n\n    wrap(content) {\n        return {\n            tag: \"hr\"\n        };\n    }\n}\n\nclass UnorderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ul\";\n        this.itemTag = \"li\";\n        this.pattern = \"- \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass OrderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ol\";\n        this.itemTag = \"li\";\n        this.pattern = \"1. \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass ParagraphModifier extends Modifier {\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let capturedContent = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                capturedContent.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if (originalString[i] === \"\\n\") {\n                if (currentElement.start < i) {\n                    capturedContent.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: i,\n                    });\n                }\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(capturedContent, originalString)),\n                    start: lineStart,\n                    end: i + 1,\n                });\n                capturedContent = [];\n                lineStart = i + 1;\n\n                if (originalString[i + 1] === \"\\n\") {\n                    let start, end;\n                    start = i;\n\n                    while (i + 1 < originalString.length && originalString[i + 1] === \"\\n\") {\n                        i += 1;\n                    }\n                    end = i + 1;\n\n                    newArray.push({\n                        content: {\n                            tag: \"br\",\n                        },\n                        start: start,\n                        end: end,\n                    });\n\n                    lineStart = i + 1;\n                } else {\n                    // TODO: these dummies break code. Refactor!\n                    // newArray.push({\n                    //     isDummy: true,\n                    //     start: i,\n                    //     end: i + 1,\n                    // });\n                }\n\n                currentElement = {\n                    isString: true,\n                    start: lineStart,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            capturedContent.push(currentElement);\n        }\n        if (capturedContent.length > 0) {\n            newArray.push({\n                content: this.wrap(this.processChildren(capturedContent, originalString)),\n                start: lineStart,\n                end: originalString.length,\n            })\n        }\n        return newArray;\n    }\n\n    wrap(capture) {\n        return {\n            tag: \"p\",\n            children: capture,\n        }\n    }\n}\n\nclass StrongModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"*\";\n        this.endPattern = \"*\";\n        this.tag = \"strong\";\n    }\n}\n\nclass ItalicModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"/\";\n        this.endPattern = \"/\";\n        this.tag = \"em\";\n    }\n}\n\nclass InlineCodeModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"`\";\n        this.endPattern = \"`\";\n        this.tag = \"code\";\n    }\n\n    processChildren(children, originalString) {\n        if (children.length === 0) {\n            return [];\n        }\n\n        return [originalString.substring(children[0].start, children[children.length - 1].end)];\n    }\n}\n\nclass InlineVarModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$\";\n        this.endPattern = \"$\";\n        this.tag = \"var\";\n    }\n}\n\nclass InlineLatexModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$$\";\n        this.endPattern = \"$$\";\n        this.tag = \"Latex\";\n    }\n}\n\nclass LinkModifier extends Modifier {\n\n    static isCorrectUrl(str) {\n        if (str.startsWith(\"http://\") || str.startsWith(\"https://\")) {\n            return true;\n        }\n    }\n    static trimProtocol(str) {\n        if (str[4] === 's') {\n            return str.substring(8, str.length);\n        }\n        return str.substring(7, str.length);\n    }\n\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        let checkAndAddUrl = (start, end) => {\n            let substr = originalString.substring(start, end);\n            if (this.constructor.isCorrectUrl(substr)) {\n                if (currentElement.start < start) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: start,\n                    });\n                }\n\n                newArray.push({\n                    isJSX: true,\n                    content: {\n                        tag: \"a\",\n                        href: substr,\n                        children: [this.constructor.trimProtocol(substr)],\n                        target: \"_blank\"\n                    },\n                    start: start,\n                    end: end,\n                });\n\n                currentElement = {\n                    isString: true,\n                    start: end,\n                    end: currentElement.end,\n                };\n            }\n        };\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if ((/\\s/).test(originalString[i])) {\n                checkAndAddUrl(lineStart, i);\n                lineStart = i + 1;\n            }\n        }\n        if (lineStart < originalString.length) {\n            checkAndAddUrl(lineStart, originalString.length);\n        }\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n        return newArray;\n    }\n}\n\nlet MarkupModifier = Modifier;\n\nexport {MarkupModifier, HeaderModifier, ParagraphModifier, InlineCodeModifier, InlineLatexModifier, StrongModifier, LinkModifier};\n\nclass MarkupParser {\n    constructor(options) {\n        options = options || {};\n\n        this.modifiers = options.modifiers || this.constructor.modifiers;\n        this.uiElements = options.uiElements || new Map();\n    }\n\n    parse(content) {\n        if (!content) return [];\n\n        let result = [];\n\n        let arr = this.parseUIElements(content);\n\n        for (let i = this.modifiers.length - 1; i >= 0; i -= 1) {\n            let modifier = this.modifiers[i];\n\n            arr = modifier.modify(arr, content);\n        }\n\n        for (let el of arr) {\n            if (el.isDummy) {\n                // just skip it\n            } else if (el.isString) {\n                result.push(content.substring(el.start, el.end));\n            } else {\n                result.push(el.content);\n            }\n        }\n        return result;\n    }\n\n    parseUIElements(content) {\n        let stream = new StringStream(content);\n\n        let result = [];\n        let textStart = 0;\n\n        while (!stream.done()) {\n            let char = stream.char();\n\n            if (char === \"<\" && (/[a-zA-Z]/).test(stream.at(0))) {\n                stream.pointer -= 1; //step back to beginning of ui element\n                let elementStart = stream.pointer;\n                let uiElement;\n                try {\n                    uiElement = this.parseUIElement(stream);\n                } catch (e) {\n                    // failed to parse jsx element\n                    continue;\n                }\n\n                if (this.uiElements.has(uiElement.tag)) {\n                    result.push({\n                        isString: true,\n                        start: textStart,\n                        end: elementStart,\n                    });\n\n                    result.push({\n                        content: uiElement,\n                        isJSX: true,\n                        start: elementStart,\n                        end: stream.pointer,\n                    });\n                    textStart = stream.pointer;\n                }\n            }\n        }\n\n        if (textStart < content.length) {\n            result.push({\n                isString: true,\n                start: textStart,\n                end: content.length,\n            });\n        }\n\n        return result;\n    }\n\n    parseUIElement(stream, delimiter=(/\\/?>/)) {\n        // content should be of type <ClassName option1=\"string\" option2={{jsonObject: true}} />\n        // TODO: support nested elements like <ClassName><NestedClass /></ClassName>\n\n        stream.whitespace();\n        if (stream.done()) {\n            return null;\n        }\n\n        if (stream.at(0) !== \"<\") {\n            throw Error(\"Invalid UIElement declaration.\");\n        }\n\n        let result = {};\n\n        stream.char(); // skip the '<'\n\n        result.tag = stream.word();\n        stream.whitespace();\n\n        Object.assign(result, this.parseOptions(stream, delimiter));\n        stream.line(delimiter);\n\n        return result;\n    }\n    \n    parseOptions(stream, optionsEnd) {\n        return this.constructor.parseOptions(stream, optionsEnd);\n    }\n\n    // optionsEnd cannot include whitespace or start with '='\n    static parseOptions(stream, optionsEnd) {\n        let options = {};\n\n        stream.whitespace();\n\n        while (!stream.done()) {\n            // argument name is anything that comes before whitespace or '='\n            stream.whitespace();\n\n            let validOptionName = /[\\w$]/;\n            let optionName;\n            if (validOptionName.test(stream.at(0))) {\n                optionName = stream.word(validOptionName);\n            }\n\n            stream.whitespace();\n\n            if (optionsEnd && stream.search(optionsEnd) === 0) {\n                options[optionName] = true;\n                break;\n            }\n            if (!optionName) {\n                throw Error(\"Invalid option name\");\n            }\n\n            if (stream.peek() === \"=\") {\n                stream.char();\n                stream.whitespace();\n\n                if (stream.done()) {\n                    throw Error(\"No argument given for option: \" + optionName);\n                }\n\n                if (stream.peek() === '\"') {\n                    // We have a string here\n                    let optionString = \"\";\n                    let foundStringEnd = false;\n\n                    stream.char();\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '\"') {\n                            foundStringEnd = true;\n                            break;\n                        }\n                        optionString += char;\n                    }\n\n                    if (!foundStringEnd) {\n                        // You did not close that string\n                        throw Error(\"Argument string not closed: \" + optionString);\n                    }\n                    options[optionName] = optionString;\n                } else if (stream.peek() === '{') {\n                    // Once you pop, the fun don't stop\n                    let bracketCount = 0;\n\n                    let validJSON = false;\n                    let jsonString = \"\";\n                    stream.char();\n\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '{') {\n                            bracketCount += 1;\n                        } else if (char === '}') {\n                            if (bracketCount > 0) {\n                                bracketCount -= 1;\n                            } else {\n                                // JSON ends here\n                                options[optionName] = jsonString.length > 0 ? this.parseJSON5(jsonString) : undefined;\n                                validJSON = true;\n                                break;\n                            }\n                        }\n                        jsonString += char;\n                    }\n                    if (!validJSON) {\n                        throw Error(\"Invalid JSON argument for option: \" + optionName + \". Input: \" + jsonString);\n                    }\n                } else {\n                    throw Error(\"Invalid argument for option: \" + optionName + \". Need string or JSON.\");\n                }\n            } else {\n                options[optionName] = true;\n            }\n            stream.whitespace();\n        }\n\n        return options;\n    }\n\n    parseTextLine(stream) {\n        let lastModifier = new Map();\n\n        let capturedContent = [];\n\n        // This will always be set to the last closed modifier\n        let capturedEnd = -1;\n\n        let textStart = stream.pointer;\n        let contentStart = stream.pointer;\n\n        while (!stream.done()) {\n            if (stream.startsWith(/\\s+\\r*\\n/)) {\n                // end of line, stop here\n                break;\n            }\n\n            if (stream.at(0) === \"<\") {\n                capturedContent.push({\n                    content: stream.string.substring(contentStart, stream.pointer),\n                    start: contentStart,\n                    end: stream.pointer\n                });\n                let uiElementStart = stream.pointer;\n                let uiElement = this.parseUIElement(stream, (/\\/*>/));\n                capturedContent.push({\n                    content: uiElement,\n                    start: uiElementStart,\n                    end: stream.pointer,\n                });\n                contentStart = stream.pointer;\n                continue;\n            }\n\n            let char = stream.char();\n\n            if (char === \"\\\\\") {\n                // escape next character\n                char += stream.char();\n            }\n        }\n\n        let remainingContent = stream.string.substring(textStart, stream.pointer);\n        if (remainingContent.length > 0) {\n            capturedContent.push(remainingContent);\n        }\n        stream.line(); // delete line endings\n\n        return capturedContent;\n    }\n}\n\nMarkupParser.modifiers = [\n    new BlockCodeModifier(),\n    new HeaderModifier(),\n    new HorizontalRuleModifier(),\n    new UnorderedListModifier(),\n    new OrderedListModifier(),\n    new ParagraphModifier(),\n    new InlineCodeModifier(),\n    new InlineLatexModifier(),\n    new InlineVarModifier(),\n    new StrongModifier(),\n    new ItalicModifier(),\n    new LinkModifier()\n];\n\n// json5.js\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\nMarkupParser.parseJSON5 = (function() {\n    // This is a function that can parse a JSON5 text, producing a JavaScript\n    // data structure. It is a simple, recursive descent parser. It does not use\n    // eval or regular expressions, so it can be used as a model for implementing\n    // a JSON5 parser in other languages.\n\n    // We are defining the function inside of another function to avoid creating\n    // global variables.\n\n    let at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch;           // The current character\n    let escapee = {\n        \"'\": \"'\",\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        '\\n': '',       // Replace escaped newlines in strings w/ empty string\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t'\n    };\n    let text;\n\n    let renderChar = (chr) => {\n        return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n    };\n\n    let error = (m) => {\n        // Call error when something is wrong.\n\n        let error = new SyntaxError();\n        // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n        error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n        error.at = at;\n        // These two property names have been chosen to agree with the ones in Gecko, the only popular\n        // environment which seems to supply this info on JSON.parse\n        error.lineNumber = lineNumber;\n        error.columnNumber = columnNumber;\n        throw error;\n    };\n\n    let next = (c) => {\n        // If a c parameter is provided, verify that it matches the current character.\n\n        if (c && c !== ch) {\n            error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n        }\n\n        // Get the next character. When there are no more characters,\n        // return the empty string.\n\n        ch = text.charAt(at);\n        at++;\n        columnNumber++;\n        if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n            lineNumber++;\n            columnNumber = 0;\n        }\n        return ch;\n    };\n\n    let peek = () => {\n        // Get the next character without consuming it or\n        // assigning it to the ch varaible.\n\n        return text.charAt(at);\n    };\n\n    let identifier = () => {\n        // Parse an identifier. Normally, reserved words are disallowed here, but we\n        // only use this for unquoted object keys, where reserved words are allowed,\n        // so we don't check for those here. References:\n        // - http://es5.github.com/#x7.6\n        // - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n        // - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n        // TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n        let key = ch;\n\n        // Identifiers must start with a letter, _ or $.\n        if ((ch !== '_' && ch !== '$') &&\n            (ch < 'a' || ch > 'z') &&\n            (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n        }\n\n        // Subsequent characters can contain digits.\n        while (next() && (\n            ch === '_' || ch === '$' ||\n            (ch >= 'a' && ch <= 'z') ||\n            (ch >= 'A' && ch <= 'Z') ||\n            (ch >= '0' && ch <= '9'))) {\n                key += ch;\n        }\n\n        return key;\n    };\n\n    let number = () => {\n        // Parse a number value.\n        var number, sign = '', string = '', base = 10;\n\n        if (ch === '-' || ch === '+') {\n            sign = ch;\n            next(ch);\n        }\n\n        // support for Infinity (could tweak to allow other words):\n        if (ch === 'I') {\n            number = word();\n            if (typeof number !== 'number' || isNaN(number)) {\n                error('Unexpected word for number');\n            }\n            return (sign === '-') ? -number : number;\n        }\n\n        // support for NaN\n        if (ch === 'N') {\n            number = word();\n            if (!isNaN(number)) {\n                error('expected word to be NaN');\n            }\n            // ignore sign as -NaN also is NaN\n            return number;\n        }\n\n        if (ch === '0') {\n            string += ch;\n            next();\n            if (ch === 'x' || ch === 'X') {\n                string += ch;\n                next();\n                base = 16;\n            } else if (ch >= '0' && ch <= '9') {\n                error('Octal literal');\n            }\n        }\n\n        switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n        }\n\n        if (sign === '-') {\n            number = -string;\n        } else {\n            number = +string;\n        }\n\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    };\n\n    let string = () => {\n        // Parse a string value.\n        let hex, i, string = '', uffff;\n        let delim; // double quote or single quote\n\n        // When parsing for string values, we must look for ' or \" and \\ characters.\n\n        if (ch === '\"' || ch === \"'\") {\n            delim = ch;\n            while (next()) {\n                if (ch === delim) {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (ch === '\\r') {\n                        if (peek() === '\\n') {\n                            next();\n                        }\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else if (ch === '\\n') {\n                    // unescaped newlines are invalid; see:\n                    // https://github.com/aseemk/json5/issues/24\n                    // TODO this feels special-cased; are there other\n                    // invalid unescaped chars?\n                    break;\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    };\n\n    let inlineComment = () => {\n        // Skip an inline comment, assuming this is one. The current character should\n        // be the second / character in the // pair that begins this inline comment.\n        // To finish the inline comment, we look for a newline or the end of the text.\n\n        if (ch !== '/') {\n            error(\"Not an inline comment\");\n        }\n\n        do {\n            next();\n            if (ch === '\\n' || ch === '\\r') {\n                next();\n                return;\n            }\n        } while (ch);\n    };\n\n    let blockComment = () => {\n        // Skip a block comment, assuming this is one. The current character should be\n        // the * character in the /* pair that begins this block comment.\n        // To finish the block comment, we look for an ending */ pair of characters,\n        // but we also watch for the end of text before the comment is terminated.\n\n        if (ch !== '*') {\n            error(\"Not a block comment\");\n        }\n\n        do {\n            next();\n            while (ch === '*') {\n                next('*');\n                if (ch === '/') {\n                    next('/');\n                    return;\n                }\n            }\n        } while (ch);\n\n        error(\"Unterminated block comment\");\n    };\n\n    let comment = () => {\n        // Skip a comment, whether inline or block-level, assuming this is one.\n        // Comments always begin with a / character.\n\n        if (ch !== '/') {\n            error(\"Not a comment\");\n        }\n\n        next('/');\n\n        if (ch === '/') {\n            inlineComment();\n        } else if (ch === '*') {\n            blockComment();\n        } else {\n            error(\"Unrecognized comment\");\n        }\n    };\n\n    let white = () => {\n        // Skip whitespace and comments.\n        // Note that we're detecting comments by only a single / character.\n        // This works since regular expressions are not valid JSON(5), but this will\n        // break if there are other valid values that begin with a / character!\n\n        while (ch) {\n            if (ch === '/') {\n                comment();\n            } else if (/\\s/.test(ch)) {\n                next();\n            } else {\n                return;\n            }\n        }\n    };\n\n    let word = () => {\n        // true, false, or null.\n\n        switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n                next('N');\n                next('a');\n                next('N');\n                return NaN;\n        }\n        error(\"Unexpected \" + renderChar(ch));\n    };\n\n    let value;\n\n    let array = () => {\n        // Parse an array value.\n        let array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            while (ch) {\n                if (ch === ']') {\n                    next(']');\n                    return array;   // Potentially empty array\n                }\n                // ES5 allows omitting elements in arrays, e.g. [,] and\n                // [,null]. We don't allow this in JSON5.\n                if (ch === ',') {\n                    error(\"Missing array element\");\n                } else {\n                    array.push(value());\n                }\n                white();\n                // If there's no comma after this value, this needs to\n                // be the end of the array.\n                if (ch !== ',') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    };\n\n    let object = () => {\n        // Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            while (ch) {\n                if (ch === '}') {\n                    next('}');\n                    return object;   // Potentially empty object\n                }\n\n                // Keys can be unquoted. If they are, they need to be\n                // valid JS identifiers.\n                if (ch === '\"' || ch === \"'\") {\n                    key = string();\n                } else {\n                    key = identifier();\n                }\n\n                white();\n                next(':');\n                object[key] = value();\n                white();\n                // If there's no comma after this pair, this needs to be\n                // the end of the object.\n                if (ch !== ',') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\n    value = () => {\n        // Parse a JSON value. It could be an object, an array, a string, a number,\n        // or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the above\n    // functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n        // If there is a reviver function, we recursively walk the new structure,\n        // passing each name/value pair to the reviver function for possible\n        // transformation, starting with a temporary root object that holds the result\n        // in an empty key. If there is not a reviver function, we simply return the\n        // result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n})();\n\nexport {MarkupParser};\n\n\n// TODO: these should be in a unit test file, not here\nexport function TestStringStream() {\n    let tests = [];\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.char();\n        if (temp !== \"A\") {\n            throw Error(\"char seems to fail. Expected: 'A' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"la\") {\n            throw Error(\"word seems to fail. Expected: 'la' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"bala\") {\n            throw Error(\"word seems to fail. Expected: 'bala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"portocala\") {\n            throw Error(\"word seems to fail. Expected: 'portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.word();\n        if (temp !== \"Ala\") {\n            throw Error(\"word seems to fail. Expected: 'Ala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.char();\n        if (temp !== \" \") {\n            throw Error(\"word seems to fail. Expected: ' ' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line();\n        if (temp !== \"bala    portocala\") {\n            throw Error(\"line seems to fail. Expected: 'bala    portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Buna bate toba\\n Bunica bate tare\\nBunica bate tobaaa \\nCu maciuca-n casa mare!\");\n\n        let temp;\n\n        temp = ss.line();\n        if (temp !== \"Buna bate toba\") {\n            throw Error(\"line seems to fail. Expected: 'Buna bate toba' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"Bunica\") {\n            throw Error(\"word seems to fail. Expected: 'Bunica' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\");\n        if (temp !== \" bate tare\") {\n            throw Error(\"line seems to fail. Expected: ' bate tare' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\", 11);\n        if (temp !== \"Bunica bate\") {\n            throw Error(\"line seems to fail. Expected: 'Bunica bate' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"tobaaa\") {\n            throw Error(\"line seems to fail. Expected: 'tobaaa' , got '\" + temp + \"'\");\n        }\n\n        ss.char();\n        temp = ss.line();\n        if (temp !== \"\") {\n            throw Error(\"line seems to fail. Expected: '' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line('\\n', 100);\n        if (temp !== \"Cu maciuca-n casa mare!\") {\n            throw Error(\"line seems to fail. Expected: 'Cu maciuca-n casa mare!' , got '\" + temp + \"'\");\n        }\n    });\n\n\n\n    let numFailed = 0;\n    for (let i = 0; i < tests.length; i += 1) {\n        try {\n            tests[i]();\n            console.log(\"Test \", i, \" ran successfully.\");\n        } catch (e) {\n            numFailed += 1;\n            console.log(\"Failed StringStream test \", i, \"! Reason: \", e);\n        }\n    }\n\n    console.log(\"Finished running all tests. Failed: \", numFailed);\n}\n","import {UI} from \"../ui/UI\";\nimport {MarkupParser} from \"./MarkupParser\";\nimport {StaticCodeHighlighter, Panel, Link, Image} from \"../ui/UI\";\n\n// Class that for every markup tag returns the UI class to instantiate for that element\nclass MarkupClassMap {\n    constructor(fallback, extraClasses=[]) {\n        this.classMap = new Map();\n        this.fallback = fallback;\n        for (const extraClass of extraClasses) {\n            this.addClass(extraClass[0], extraClass[1]);\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.set(className, classObject);\n    }\n\n    registerDependencies(dependencies) {\n        for (let dependency of dependencies) {\n            if (dependency && dependency.registerMarkup) {\n                dependency.registerMarkup(this);\n            }\n        }\n    }\n\n    static addClass(className, classObject) {\n        this.GLOBAL.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        let classObject = this.classMap.get(className);\n        if (!classObject && this.fallback) {\n            classObject = this.fallback.getClass(className);\n        }\n        return classObject;\n    }\n\n    get(className) {\n        return this.getClass(className);\n    }\n\n    has(className) {\n        return this.getClass(className);\n    }\n};\n\nMarkupClassMap.GLOBAL = new MarkupClassMap();\n\nclass MarkupRenderer extends Panel {\n    setOptions(options) {\n        if (!options.classMap) {\n            options.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n        }\n        if (!options.parser) {\n            options.parser = new MarkupParser({\n                uiElements: options.classMap,\n            });\n        }\n        super.setOptions(options);\n\n        this.setValue(this.options.value || \"\");\n        if (this.options.classMap) {\n            this.classMap = this.options.classMap;\n        }\n    }\n\n    setValue(value) {\n        if (typeof value === \"string\") {\n            this.options.rawValue = value;\n            try {\n                value = this.options.parser.parse(value);\n            } catch (e) {\n                console.error(\"Can't parse \", value, e);\n                value = {\n                    tag: \"span\",\n                    children: [value]\n                };\n            }\n        }\n        this.options.value = value;\n    }\n\n    reparse() {\n        if (this.options.rawValue) {\n            this.setValue(this.options.rawValue);\n        }\n    }\n\n    registerDependencies(dependencies) {\n        if (dependencies.length > 0) {\n            this.classMap.registerDependencies(dependencies);\n            this.reparse();\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        return this.classMap.getClass(className);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    convertToUI(value) {\n        if (value instanceof UI.TextElement || value instanceof UI.Element) {\n            // TODO: investigate this!\n            return value;\n        }\n\n        if (typeof value === \"string\") {\n            return new UI.TextElement(value);\n        }\n        if (Array.isArray(value)) {\n            return value.map(x => this.convertToUI(x));\n        }\n        if (value.children) {\n            value.children = this.convertToUI(value.children);\n        }\n\n        let classObject = this.getClass(value.tag) || value.tag;\n\n        // TODO: maybe just copy to another object, not delete?\n        //delete value.tag;\n        return UI.createElement(classObject, value, ...(value.children || []));\n    }\n\n    render() {\n        return this.convertToUI(this.getValue());\n    }\n}\n\nMarkupClassMap.addClass(\"CodeSnippet\", StaticCodeHighlighter);\n\nconst SafeUriEnhancer = (BaseClass, attribute) => class SafeUriClass extends BaseClass {\n    setOptions(options) {\n        if (options.hasOwnProperty(attribute) && !this.constructor.isSafeUri(options[attribute])) {\n            return super.setOptions(Object.assign({}, options, {[attribute]: undefined}));\n        }\n        return super.setOptions(options);\n    }\n\n    static isSafeUri(uri) {\n        return uri.indexOf(\":\") === -1 ||\n               uri.startsWith(\"http:\") ||\n               uri.startsWith(\"https:\") ||\n               uri.startsWith(\"mailto:\");\n    }\n};\n\nMarkupClassMap.addClass(\"Link\", SafeUriEnhancer(Link, \"href\"));\nMarkupClassMap.addClass(\"Image\", SafeUriEnhancer(Image, \"src\"));\n\nexport {MarkupClassMap, MarkupRenderer};\n","import {UI, Panel, Button, CodeEditor, SectionDivider, ButtonGroup, TextArea, Orientation, Level} from \"UI\";\nimport {MarkupRenderer} from \"markup/MarkupRenderer\";\n\n\nclass MarkupEditor extends Panel {\n    getDefaultOptions() {\n        return {\n            showButtons: true\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"textAlign\", \"center\");\n    }\n\n    getMarkupRenderer() {\n        let rendererOptions = {};\n        if (this.options.classMap) {\n            rendererOptions.classMap = this.options.classMap;\n        }\n        return <MarkupRenderer ref={this.refLink(\"markupRenderer\")} value={this.options.value} style={{height:\"100%\", overflow: \"auto\"}} {...rendererOptions} />;\n    }\n\n    getEditor() {\n        return <TextArea ref=\"codeEditor\" style={{\n            width: \"100%\",\n            height: \"calc(100% - 3px)\",\n            resize: \"none\",\n            backgroundColor: \"#F9F9F9\"\n        }} value={this.options.value || \"\"}/>;\n    }\n\n    render() {\n        let buttons;\n        if (this.options.showButtons) {\n            buttons = <ButtonGroup>\n                <Button ref=\"toggleLeftButton\" label={UI.T(\"Editor\")} level={Level.SUCCESS}/>\n                <Button ref=\"toggleRightButton\" label={UI.T(\"Article\")} level={Level.SUCCESS}/>\n            </ButtonGroup>;\n        }\n\n        return [\n            buttons,\n            <SectionDivider ref=\"sectionDivider\" orientation={Orientation.HORIZONTAL}\n                            style={{textAlign: \"initial\", height: \"100%\", width: \"100%\", display:\"inline-block\",\n                                    overflow: \"hidden\"}}>\n                <Panel ref=\"editorPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"hidden\"}}>\n                    {this.getEditor()}\n                </Panel>\n                <Panel ref=\"rendererPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"auto\", padding: \"10px\"}}>\n                    {this.getMarkupRenderer()}\n                </Panel>\n            </SectionDivider>\n        ]\n    }\n\n    updateValue(markup) {\n        this.markupRenderer.setValue(markup);\n        this.markupRenderer.redraw();\n    }\n\n    appendValue(markup, separator=\"\\n\") {\n        let value = this.getValue();\n        if (value && separator != null) {\n            value += separator;\n        }\n        value += markup;\n        this.setValue(value);\n        this.updateValue(value);\n    }\n\n    setEditorOptions() {\n        this.editorPanel.addListener(\"resize\", () => {\n            this.codeEditor.setWidth(this.editorPanel.getWidth() - 15);\n        });\n\n        this.codeEditor.addNodeListener(\"input\", () => {\n            let markup = this.codeEditor.getValue();\n            try {\n                this.updateValue(markup);\n            } catch (e) {\n                console.error(\"Exception in parsing markup: \", e);\n            }\n        });\n    }\n\n    onMount() {\n        if (this.options.showButtons) {\n            this.toggleLeftButton.addClickListener(() => {\n                if (this.editorPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(0);\n                    this.toggleLeftButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(0);\n                    this.toggleLeftButton.setLevel(Level.DANGER);\n                }\n            });\n            this.toggleRightButton.addClickListener(() => {\n                if (this.rendererPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(1);\n                    this.toggleRightButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(1);\n                    this.toggleRightButton.setLevel(Level.DANGER);\n                }\n            });\n        }\n\n        this.setEditorOptions();\n    }\n\n    getValue() {\n        return this.codeEditor.getValue();\n    }\n\n    setValue(value) {\n        this.updateValue(value);\n        return this.codeEditor.setValue(value);\n    }\n}\n\nexport {MarkupEditor};\n","import {Ajax} from \"Ajax\";\nimport {AjaxFetchMixin} from \"StoreMixins\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nclass User extends StoreObject {\n    constructor(obj) {\n        super(obj);\n    }\n\n    getName() {\n    }\n\n    getCustomSetting(key, defaultValue) {\n        let keyChain = key.split(\":\");\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (key in currentDict) {\n                currentDict = currentDict[key];\n            } else {\n                return defaultValue;\n            }\n        }\n        return currentDict;\n    }\n\n    getParsedCustomSetting(key, defaultValue) {\n        return JSON.parse(this.getCustomSetting(key, defaultValue));\n    }\n\n    setCustomSetting(key, value) {\n        let keyChain = key.split(\":\");\n        let lastKey = keyChain.pop();\n        if (!this.customSettings) {\n            this.customSettings = {};\n        }\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (!(key in currentDict)) {\n                currentDict[key] = {};\n            }\n            currentDict = currentDict[key];\n        }\n        currentDict[lastKey] = value;\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: JSON.parse(value),\n            rawValue: value,\n            origin: \"set\",\n        });\n    }\n\n    saveCustomSetting(key, value) {\n        if (this.id != USER.id) {\n            console.error(\"Invalid user\");\n            return;\n        }\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: value,\n            origin: \"save\",\n        });\n\n        let request = {\n            customSettingsKey: key,\n            customSettingsValue: value,\n        };\n\n        if (!this.timeouts) {\n            this.timeouts = new Map();\n        }\n        if (this.timeouts.has(key)) {\n            clearTimeout(this.timeouts.get(key));\n        }\n        this.timeouts.set(key, setTimeout(() => {\n            Ajax.postJSON(\"/accounts/profile_changed/\", request).then(() => {}, () => {});\n        }));\n    }\n\n    applyEvent(event) {\n        if (event.type === \"setCustomSetting\") {\n            console.log(\"Updated custom settings: \", event);\n            this.setCustomSetting(event[\"data\"].key, event[\"data\"].value);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n}\n\nvar UserStore = new GenericObjectStore(\"user\", User);\n\nUserStore.getCurrentUser = function () {\n    return window.USER;\n};\n\nclass PublicUser extends StoreObject {\n    getDisplayHandle() {\n        let name;\n        if (this.displayName) {\n            name = this.name || this.username;\n        } else {\n            name = this.username || this.name;\n        }\n        return name || (\"user-\" + this.id);\n    }\n\n    getProfileUrl() {\n        if (this.username) {\n            return \"/user/\" + this.username;\n        } else {\n            return \"/userid/\" + this.id;\n        }\n    }\n}\n\n// TODO: extend AjaxFetchMixin, to put the options in the constructor\nvar PublicUserStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar PublicUserStore = new PublicUserStoreClass(\"publicuser\", PublicUser, {\n    fetchTimeoutDuration: 20,\n    maxFetchObjectCount: 512,\n    fetchURL: \"/accounts/public_user_profiles/\",\n});\n\nwindow.USER = Object.assign({\n    id: 0,\n    customSettings: {}\n}, window.USER || {});\n\nwindow.USER = UserStore.fakeCreate(window.USER);\n\nclass UserNotification extends StoreObject {\n    getUser() {\n        return UserStore.get(this.userId);\n    }\n\n    isRead() {\n        return (this.id <= this.getUser().lastReadNotificationId);\n    }\n}\n\nvar UserNotificationStore = new GenericObjectStore(\"UserNotification\", UserNotification, {dependencies: [\"user\"]});\n\nexport {UserStore, PublicUserStore, UserNotificationStore};\n","import {UI} from \"UI\";\nimport {PublicUserStore} from \"UserStore\";\n\nclass UserHandle extends UI.Element {\n    setOptions(options) {\n        options.userId = options.userId || options.id;\n\n        super.setOptions(options);\n\n        this.options.color = this.options.color || \"#2089b5\";\n        this.setUser(PublicUserStore.get(this.options.userId));\n    }\n\n    setUser(user) {\n        this.user = user;\n    }\n\n    getNodeType() {\n        return \"span\";\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        this.handle.setStyle(\"color\", color);\n    }\n\n    render() {\n        let handle;\n        if (!this.user) {\n            PublicUserStore.fetch(this.options.userId, (user) => {\n                this.setUser(user);\n                this.redraw();\n            });\n            handle = <b ref=\"handle\" style={{color: \"#BBB\"}}>{\"user-\" + this.options.userId}</b>;\n        } else {\n            handle = <span ref=\"handle\" style={{cursor: \"pointer\", color: this.options.color}}\n                      onClick={() => {window.open(this.user.getProfileUrl(), \"_blank\")}}><b>{this.user.getDisplayHandle()}</b></span>\n        }\n\n        //The purpose of the container is to simplify the usage of the popup.\n        return [\n            <span ref=\"container\" style={{position: \"relative\", overflow: \"hidden\"}}>\n                {handle}\n                {this.options.children}\n            </span>\n        ]\n    }\n}\n\nexport {UserHandle};\n","import {UI, SVG, Switcher, Button} from \"UI\";\nimport {MarkupRenderer, MarkupClassMap} from \"MarkupRenderer\";\nimport {Language} from \"LanguageStore\";\n\nimport {Article, ArticleStore} from \"./state/ArticleStore\";\n\n\nclass ArticleRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = options.classMap || this.constructor.markupClassMap;\n        super.setOptions(options);\n    }\n\n    getEditButton() {\n        if (this.options.showEditButton && this.options.article.canBeEditedByUser()) {\n            let url = this.options.editButtonUrl || (\"/article/\" + this.options.article.id + \"/edit/\");\n            return <div className=\"text-left\">\n                <a href={url} target=\"_blank\">\n                    <Button label={UI.T(\"Edit\")}\n                               style={{\"margin\": \"10px\"}}/></a>\n            </div>;\n        }\n    }\n\n    render() {\n        return [\n            this.getEditButton(),\n            super.render()\n        ];\n    }\n\n    setArticle(article) {\n        this.updateOptions({ article });\n    }\n\n    getValue() {\n        super.setValue(this.getArticleToRender().markup);\n        return super.getValue();\n    }\n\n    getArticleToRender() {\n        return this.options.article.getTranslation();\n    }\n\n    getArticleDependencies() {\n        const dependencies = this.options.article.dependency;\n        return dependencies && dependencies.split(\",\");\n    }\n\n    redraw() {\n        const dependencies = this.getArticleDependencies();\n        if (!dependencies) {\n            super.redraw();\n            return;\n        }\n\n        // Not using require directly to fool webpack\n        window[\"require\"](dependencies, (...args) => {\n            this.registerDependencies(args);\n            super.redraw();\n        });\n    }\n\n    onMount() {\n        if (this.options.liveLanguage) {\n            this.attachListener(Language, \"localeChange\", () => this.redraw());\n        }\n    }\n}\n\nclass RecursiveArticleRenderer extends ArticleRenderer {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.articleId = this.options.articleId || this.options.id;\n    }\n\n    redraw() {\n        if (this.options.article) {\n            return super.redraw();\n        } else {\n            ArticleStore.fetch(this.options.articleId, (article) => this.updateOptions({ article }));\n        }\n    }\n}\n\nclass ArticleSwitcher extends Switcher {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            fullHeight: true,\n        });\n    }\n\n    constructor() {\n        super(...arguments);\n        this.articleChildMap = new WeakMap();\n    }\n\n    setOptions(options) {\n        options = Object.assign({\n            lazyRender: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    getPageForArticle(article) {\n        if (!this.articleChildMap.has(article)) {\n            this.articleChildMap.set(article, <ArticleRenderer article={article} showEditButton={this.options.showEditButton} />);\n        }\n        return this.articleChildMap.get(article);\n    }\n\n    setActive(article) {\n        if (!(article instanceof Article)) {\n            super.setActive(article);\n            return;\n        }\n        super.setActive(this.getPageForArticle(article));\n    }\n\n    setActiveArticleId(articleId) {\n        ArticleStore.fetch(articleId, (article) => {\n            this.setActive(article);\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        if (this.options.initialArticle) {\n            this.setActive(this.options.initialArticle);\n        }\n        if (this.options.initialArticleId) {\n            this.setActiveArticleId(this.options.initialArticleId);\n        }\n    }\n}\n\nArticleRenderer.markupClassMap = new MarkupClassMap(MarkupClassMap.GLOBAL, [\n    [\"Article\", RecursiveArticleRenderer],\n    [\"RawSVG\", SVG.RawSVG]\n]);\n\nexport {ArticleRenderer, RecursiveArticleRenderer, ArticleSwitcher};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\nconst color = {\n    BLUE: \"#20232d\",\n    HOVER_BLUE: \"#364251\",\n    BLACK: \"#181a22\",\n    HOVER_BLACK: \"#323539\",\n    WHITE: \"#eee\",\n};\n\nlet CSAStyle = {\n    color: color,\n};\n\nclass BlogStyle extends StyleSheet {\n    titleFontSize = \"2em\";\n\n    @styleRule\n    commentsTitle = {\n        height: \"20px\",\n        color: \"#333\",\n        marginTop: \"10px\",\n        fontSize: \"1em\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    bottomSection = {\n        marginTop: \"5px\",\n        height: \"50px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    blogEntryView = {\n        \"margin\": \"0 auto\",\n        \"width\": \"900px\",\n        \"max-width\": \"100%\",\n        // \"padding-top\": \"50px\",\n        // \"padding-bottom\": \"50px\",\n    };\n\n    title = {\n        \"font-size\": this.titleFontSize,\n        \"padding-top\": \"20px\",\n        \"padding-bottom\": \"10px\",\n        \"text-decoration\": \"italic\",\n        \"width\": \"100%\",\n        \"text-align\": \"center\",\n        \"word-wrap\": \"normal\",\n        \"line-height\": \"60px\",\n    };\n\n    writtenBy = {\n        \"width\": \"100%\",\n        \"text-align\": \"left\",\n        \"padding-top\": \"20px\",\n        \"font-size\": \"1em\",\n        \"color\": \"#666\",\n    };\n\n    article = {\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n    };\n\n    link = {\n        textDecoration: \"none\",\n        textAlign: \"center\",\n        marginTop: \"-15pt\",\n        fontSize: \"1.1em\",\n    };\n\n    blogArticleRenderer = {\n        overflow: \"hidden\",\n        position: \"relative\",\n        maxHeight: \"180px\",\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n        marginBottom: \"25px\",\n    };\n\n    @styleRule\n    whiteOverlay = {\n        height: \"100px\",\n        background: \"linear-gradient(rgba(255,255,255,0), #fff)\",\n        position: \"absolute\",\n        marginTop: \"-120px\",\n        pointerEvents: \"none\",\n        width: \"92%\",\n    };\n\n    @styleRule\n    loadMoreButton = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"40px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        borderColor: CSAStyle.color.BLUE,\n        fontSize: \"1em\",\n        transition: \".2s\",\n        textTransform: \"uppercase\",\n        opacity: \"1\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active:focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    sendMessageButtonStyle = {\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        borderColor: \"#333\",\n        fontSize: \"13px\",\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus:active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass BlogArticleRendererStyle extends StyleSheet {\n    hStyle = {\n        \"text-align\": \"center\",\n        \"margin-top\": \"30px\",\n        \"margin-bottom\": \"30px\",\n        \"width\": \"100%\",\n    };\n\n    @styleRule\n    blogArticleRenderer = {\n        \" h1\": this.hStyle,\n        \" h2\": this.hStyle,\n        \" h3\": this.hStyle,\n        \" h4\": this.hStyle,\n        \" h5\": this.hStyle,\n        \" h6\": this.hStyle,\n    };\n\n    @styleRule\n    quote = {\n        \"font-style\": \"italic\",\n        \"margin-top\": \"20px\",\n        \"margin-bottom\": \"20px\",\n        \"color\": \"#707070\",\n        \"float\": \"right\",\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n    };\n}\n\n\nexport {BlogStyle, BlogArticleRendererStyle};\n","import {UI, registerStyle} from \"UI\";\nimport {ArticleRenderer} from \"ArticleRenderer\";\nimport {MarkupClassMap} from \"MarkupRenderer\";\nimport {BlogArticleRendererStyle} from \"./BlogStyle\";\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogArticleRenderer extends ArticleRenderer {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.blogArticleRenderer);\n    }\n}\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogQuote extends UI.Primitive(\"div\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.quote);\n    }\n\n    render() {\n        return [\n            <div style={{\n                \"flex-grow\": \"1000000\",\n                \"min-width\": \"10%\",\n                \"display\": \"inline-block\",\n            }}></div>,\n            <div style={{\n                \"flex-grow\": \"1\",\n                \"display\": \"inline-block\",\n            }}>\n                {this.options.value}\n            </div>\n        ];\n    }\n}\n\n\nBlogArticleRenderer.markupClassMap = new MarkupClassMap(ArticleRenderer.markupClassMap);\nBlogArticleRenderer.markupClassMap.addClass(\"Quote\", BlogQuote);\n\n\nexport {BlogArticleRenderer, BlogQuote};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Modal,\n    Panel,\n    Select,\n    SortableTable,\n    TemporaryMessageArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {FAIcon} from \"FontAwesome\";\nimport {Ajax} from \"Ajax\";\nimport {StemDate} from \"Time\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Language} from \"LanguageStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {GlobalStyle} from \"GlobalStyle\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\n\n\nclass TransferOwnershipModal extends ActionModal {\n    getActionName() {\n        return \"Transfer ownership\";\n    }\n\n    getActionLevel() {\n        return Level.PRIMARY;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getBody() {\n        return [\n            <UI.TextElement ref=\"text\" value={\"Set owner for \" + this.getArticle().name + \":\"}/>,\n            <Form style={{marginTop: \"10px\"}}>\n                <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                    <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId} />\n                </FormField>\n            </Form>\n        ];\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"transferOwnershipButton\" level={this.getActionLevel()} onClick={() => this.action()}\n                               statusOptions={[this.getActionName(), {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"},\n                                               this.getActionName(), \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    action() {\n        let newOwner = this.ownerFormInput.getValue();\n        let request = {\n            newOwner: newOwner\n        };\n\n        this.messageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.transferOwnershipButton.postJSON(\"/article/\" + this.getArticle().id + \"/set_owner/\", request).then(\n            () => this.hide(),\n            (error) => this.messageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete article\";\n    }\n\n    getBody() {\n        return <UI.TextElement ref=\"text\" value={\"Delete \" + this.getArticle().name + \"?\"}/>;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.getArticle().id + \"/delete/\", {}).then(\n            () => {\n                let table = this.options.parent.table;\n                table.options.articles.splice(table.getArticleIndex(this.getArticle().id), 1);\n                table.redraw();\n                this.hide();\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\nclass CreateArticleModal extends ActionModal {\n    getActionName() {\n        return \"Create article\";\n    }\n\n    getBody() {\n        return <Form style={{marginTop: \"10px\"}}>\n            <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                <TextInput ref=\"articleNameInput\"  value=\"\"/>\n            </FormField>\n            <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                <TextInput ref=\"dependencyInput\" value=\"\"/>\n            </FormField>\n            <FormField ref=\"languageFormField\" label=\"Language\">\n                <Select ref=\"languageSelect\" options={Language.all()}/>\n            </FormField>\n            <FormField ref=\"publicFormField\" label=\"Public\">\n                <CheckboxInput ref=\"publicCheckbox\" checked={false}/>\n            </FormField>\n        </Form>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY} onClick={() => {this.createArticle()}}\n                               statusOptions={[\"Create article\", {faIcon: \"spinner fa-spin\", label:\" creating article ...\"},\n                                               \"Create article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    createArticle(options) {\n        let name = this.articleNameInput.getValue();\n        let dependency = this.dependencyInput.getValue();\n        let languageId = this.languageSelect.get().id;\n        let isPublic = this.publicCheckbox.getValue();\n        let request = {\n            name: name,\n            dependency: dependency,\n            languageId: languageId,\n            isPublic: isPublic\n        };\n        if (options) {\n            Object.assign(request, options);\n        }\n        this.createArticleButton.postJSON(\"/create_article/\", request).then(\n            (data) => {\n                this.options.parent.table.addArticle(ArticleStore.get(data.article.id));\n                this.hide();\n            },\n            (error) => {\n                this.messageArea.showMessage(error.message, \"red\");\n            }\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass AddTranslationModal extends CreateArticleModal {\n    getActioName() {\n        return \"Add translation\";\n    }\n\n    getBody() {\n        const baseArticle = this.options.baseArticle;\n        return <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                        <TextInput ref=\"articleNameInput\"  value={\"Translation for \" + baseArticle.name}/>\n                    </FormField>\n                    <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                        <TextInput ref=\"dependencyInput\" value={baseArticle.dependency}/>\n                    </FormField>\n                    <FormField ref=\"languageFormField\" label=\"Language\">\n                        <Select ref=\"languageSelect\" options={Language.all()}/>\n                    </FormField>\n                    <FormField ref=\"publicFormField\" label=\"Public\">\n                        <CheckboxInput ref=\"publicCheckbox\" checked={baseArticle.isPublic}/>\n                    </FormField>\n                </Form>\n    }\n\n    getFooter() {\n        const baseArticle = this.options.baseArticle;\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY}\n                               onClick={() => this.createArticle({\n                                   baseArticleId: baseArticle.id,\n                                   markup: baseArticle.markup\n                               })}\n                               statusOptions={[\"Add translation\", {faIcon: \"spinner fa-spin\", label:\" creating translation article ...\"},\n                                               \"Success\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n}\n\nclass ArticleOwnerSpan extends UI.Primitive(\"span\") {\n    getArticle() {\n        return this.options.article;\n    }\n\n    render() {\n        return <UserHandle id={this.getArticle().userCreatedId}/>;\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(), () => this.redraw());\n    }\n}\n\nclass ArticlePublicSpan extends FAIcon {\n    getDefaultOptions() {\n        return {\n            size: \"lg\"\n        };\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    isPublic() {\n        return this.options.article.isPublic;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"color\", this.isPublic() ? \"green\" : \"red\");\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.icon = this.isPublic() ? \"check\" : \"times\";\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(),\n            () => this.updateOptions({icon: this.isPublic() ? \"check\" : \"times\"})\n        );\n    }\n}\n\nclass ArticleTable extends SortableTable {\n    setOptions(options) {\n        super.setOptions(options);\n        this.resetColumnSortingOrder();\n    }\n\n    resetColumnSortingOrder() {\n        this.columnSortingOrder = [this.columns[4], this.columns[5], this.columns[0],\n            this.columns[3], this.columns[2], this.columns[1]];\n    }\n\n    getArticleIndex(articleId) {\n        for (let i = 0; i < this.options.articles.length; i += 1) {\n            if (this.options.articles[i].id === articleId)\n                return i;\n        }\n        return -1;\n    }\n\n    addArticle(article) {\n        this.options.articles.push(article);\n        this.redraw();\n    }\n\n    setColumns() {\n        let cellStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let headerStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let columns = [{\n            value: article => <Link href={\"/article/\" + article.id + \"/edit/\"} value={article.name} />,\n            rawValue: article => article.name,\n            headerName: \"Article\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticleOwnerSpan article={article} />,\n            rawValue: article => PublicUserStore.get(article.userCreatedId).username,\n            headerName: \"Author\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticlePublicSpan article={article} />,\n            rawValue: article => (article.isPublic ? \"Yes\" : \"No\"),\n            headerName: \"Public\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => Language.get(article.languageId).name,\n            rawValue: article => Language.get(article.languageId).name,\n            headerName: \"Language\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateCreated).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateCreated,\n            sortDescending: true,\n            headerName: \"Date created\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateModified).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateModified,\n            sortDescending: true,\n            headerName: \"Date modified\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }];\n        if (!this.options.parent.options.readOnly) {\n            if (USER.isSuperUser) {\n                columns.push({\n                    value: article => <Button level={Level.PRIMARY} label=\"Set owner\"\n                                              onClick={() => TransferOwnershipModal.show({ article })}/>,\n                    headerName: \"Set owner\",\n                    headerStyle: headerStyle,\n                    cellStyle: cellStyle\n                });\n            }\n            columns.push({\n                value: article => <Button level={Level.DANGER} label=\"Delete\"\n                                             onClick={() => {\n                                                 DeleteArticleModal.show({\n                                                     article,\n                                                     parent: this.options.parent\n                                                 });\n                                             }}/>,\n                headerName: \"Delete\",\n                headerStyle: headerStyle,\n                cellStyle: cellStyle\n            });\n        }\n        super.setColumns(columns);\n    }\n\n    getEntries() {\n        return this.sortEntries(this.options.articles);\n    }\n}\n\nclass ArticleManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Article manager\",\n            articles: [],\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(GlobalStyle.Container.SMALL);\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\">\n                <Button level={Level.PRIMARY} label=\"Create article\"\n                           onClick={() => CreateArticleModal.show({parent: this})}\n                           style={{marginTop: \"5px\", marginBottom: \"5px\"}}/>\n            </div>;\n        }\n\n        return [\n            <div className=\"pull-left\">\n                <h4><strong>{this.options.title}</strong></h4>\n            </div>,\n            addButton,\n            <ArticleTable ref=\"table\" articles={this.options.articles} parent={this}/>,\n        ];\n    }\n\n    onMount() {\n        if (this.options.articles && this.options.articles.length > 0) {\n            return;\n        }\n        Ajax.getJSON(\"/get_available_articles/\", {}).then(\n            () => this.table.updateOptions({articles: ArticleStore.all()})\n        );\n    }\n}\n\nclass ArticleTranslationManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Translation manager\"\n        };\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        this.table = <ArticleTable articles={[]} parent={this}/>;\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\"><Button level={Level.PRIMARY} label=\"Add translation\"\n                                                            onClick={() => AddTranslationModal.show({\n                                                                parent: this,\n                                                                baseArticle: this.options.baseArticle\n                                                            })}\n                                                            style={{marginTop: \"5px\", marginBottom: \"5px\"}}/></div>;\n        }\n        return [<div className=\"pull-left\"><h4><strong>{this.options.title}</strong></h4></div>, addButton, this.table];\n    }\n\n    onMount() {\n        if (!this.options.baseArticle) {\n            return;\n        }\n\n        Ajax.getJSON(\"/article/\" + this.options.baseArticle.id + \"/get_translations/\", {}).then(\n            () => {\n                for (let article of ArticleStore.all()) {\n                    if (article.baseArticleId === this.options.baseArticle.id) {\n                        this.table.options.articles.push(article);\n                    }\n                }\n                this.table.redraw();\n            }\n        );\n    }\n}\n\nexport {ArticleManager, ArticleTranslationManager};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Panel,\n    SectionDivider,\n    Select,\n    TabArea,\n    TemporaryMessageArea,\n    TextArea,\n    TextInput,\n    Level,\n    UI,\n} from \"UI\";\nimport {Language} from \"LanguageStore\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\nimport {ArticleTranslationManager} from \"./ArticleManager\";\nimport {ArticleRenderer} from \"./ArticleRenderer\";\nimport {MarkupEditor} from \"./markup/MarkupEditor\";\n\n\nconst deleteRedirectLink = \"/\";\n\nclass ArticleMarkupEditor extends MarkupEditor {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.value = this.options.article.markup;\n    }\n\n    getMarkupRenderer() {\n        return <ArticleRenderer ref={this.refLink(\"markupRenderer\")} article={this.options.article} style={{flex:\"1\", height: \"100%\", overflow: \"auto\"}} />\n    }\n\n    updateValue(markup) {\n        this.options.article.markup = markup;\n        super.updateValue(markup);\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete Article\";\n    }\n\n    getBody() {\n        return <p>Delete {this.options.article.name}?</p>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.options.article.id + \"/delete/\", {}).then(\n            () => {\n                if (this.options.article.baseArticleId)\n                    window.location.replace(\"/article/\" + this.options.article.baseArticleId + \"/edit/\");\n                else\n                    window.location.replace(deleteRedirectLink);\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n}\n\nclass ArticleEditor extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n\n    }\n\n    getArticle() {\n        return ArticleStore.get(this.options.articleId);\n    }\n\n    initializeVersioning() {\n        if (ArticleEditor.DiffWidgetClass) {\n            this.versions = [];\n            this.versionsLabels = [];\n            for (let article of this.getArticle().getEdits()) {\n                this.versions.push(article.content);\n                this.versionsLabels.push(\"Version \" + article.id);\n            }\n            this.versions.push(this.getArticle().markup);\n            this.versionsLabels.push(\"Edit version\");\n            this.versions.reverse();\n            this.versionsLabels.reverse();\n\n            this.leftEditable = true;\n            this.rightEditable = false;\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            height: \"100%\",\n        });\n    }\n\n    render() {\n        this.initializeVersioning();\n        let translationsPanel = null;\n        let baseArticleForm = null;\n        if (this.getArticle().baseArticleId) {\n            baseArticleForm = <FormField ref=\"baseArticleFormField\" label=\"Base article\">\n                <Link href={\"/article/\" + this.getArticle().baseArticleId + \"/edit/\"} value=\"Go to base article\" />\n            </FormField>;\n        } else {\n            translationsPanel = <Panel title=\"Translations\">\n                <ArticleTranslationManager title={\"Translations for \" + this.getArticle().name}\n                                    baseArticle={this.getArticle()}/>\n            </Panel>\n        }\n        let ownershipPanel = null;\n        if (USER.isSuperUser) {\n            ownershipPanel = <Panel title=\"Ownership\">\n                <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                        <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId}/>\n                    </FormField>\n                </Form>\n                <AjaxButton ref=\"setOwnerButton\" level={Level.INFO} onClick={() => {\n                                let newOwner = this.ownerFormInput.getValue();\n                                this.setOwner(newOwner);\n                               }}\n                               statusOptions={[\"Transfer ownership\", {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"}, \"Transfer ownership\", \"Failed\"]}\n                        />\n                <TemporaryMessageArea ref=\"setOwnerMessageArea\"/>\n            </Panel>\n        }\n\n        let revisionsPanel;\n        if (ArticleEditor.DiffWidgetClass) {\n            let DiffWidgetClass = ArticleEditor.DiffWidgetClass;\n                revisionsPanel = <Panel title=\"Revisions\" style={{height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel>\n                    <Select ref=\"leftTextSelector\" options={this.versionsLabels}/>\n                    <Select style={{float:\"right\", marginRight:\"25px\"}} ref=\"rightTextSelector\" options={this.versionsLabels}/>\n                </Panel>\n                <DiffWidgetClass ref=\"diffWidget\" leftEditable={this.leftEditable} rightEditable={this.rightEditable}\n                                 leftTextValue={this.versions[2]} arrows={this.arrows} rightTextValue={this.versions[1]}\n                                     style={{flex:\"1\", height: \"calc(100% - 100px)\", width: \"calc(100% - 100px)\"}} />\n            </Panel>;\n        }\n\n        return [\n            <h3>{this.getArticle().name + \" Id=\" + this.options.articleId}</h3>,\n                <TabArea ref=\"tabArea\" variableHeightPanels style={{flex: \"1\", height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel title=\"Edit\" active style={{height: \"100%\", overflow: \"hidden\"}}>\n                    <AjaxButton ref=\"saveMarkupButton\" level={Level.INFO} onClick={() => {\n                                    let content = this.markupEditor.getValue();\n                                    this.saveMarkup(content);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <TemporaryMessageArea ref=\"saveMarkupMessageArea\"/>\n                    <ArticleMarkupEditor style={{height: \"100%\", marginTop: \"-31px\", display: \"flex\", flexDirection: \"column\"}}\n                                         ref=\"markupEditor\" article={this.getArticle()} />\n                </Panel>\n                {revisionsPanel}\n                <Panel title=\"Summary\">\n                    <Form style={{marginTop: \"10px\"}}>\n                        <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                            <TextInput ref=\"articleNameFormInput\"  value={this.getArticle().name}/>\n                        </FormField>\n                        <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                            <TextInput ref=\"dependencyFormInput\" value={this.getArticle().dependency}/>\n                        </FormField>\n                        {baseArticleForm}\n                        <FormField ref=\"languageFormField\" label=\"Language\">\n                            <Select ref=\"languageSelect\" options={Language.all()}\n                                       selected={Language.get(this.getArticle().languageId)}/>\n                        </FormField>\n                        <FormField ref=\"publicFormField\" label=\"Public\">\n                            <CheckboxInput ref=\"publicCheckbox\" checked={this.getArticle().isPublic}/>\n                        </FormField>\n                    </Form>\n                    <AjaxButton ref=\"saveOptionsButton\" level={Level.INFO} onClick={() => {\n                                    let name = this.articleNameFormInput.getValue();\n                                   let dependency = this.dependencyFormInput.getValue();\n                                   let languageId = this.languageSelect.get().id;\n                                   let isPublic = this.publicCheckbox.getValue();\n                                   let options = {\n                                       name: name,\n                                       dependency: dependency,\n                                       languageId: languageId,\n                                       isPublic: isPublic\n                                   };\n                                   this.saveOptions(options);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <Button ref=\"deleteArticleButton\" level={Level.DANGER} label=\"Delete article\"\n                               style={{marginLeft: \"3px\"}}\n                               onClick={() => this.deleteArticleModal.show()}/>\n                    <TemporaryMessageArea ref=\"saveOptionsMessageArea\"/>\n                </Panel>\n                {translationsPanel}\n                {ownershipPanel}\n            </TabArea>\n        ];\n    }\n\n    saveMarkup(content) {\n        let request = {\n            markup: content\n        };\n\n        this.saveMarkupMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveMarkupButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => {\n                // Add a new version in the dropdown if the save is a success\n                if (ArticleEditor.DiffWidgetClass) {\n                    this.addNewVersion(content);\n                }\n                this.saveMarkupMessageArea.showMessage(\"Saved article\");\n            },\n            (error) => this.saveMarkupMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    saveOptions(options) {\n        let request = {};\n        Object.assign(request, options);\n\n        this.saveOptionsMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveOptionsButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => window.location.replace(\"/article/\" + this.options.articleId + \"/edit/\"),\n            (error) => this.saveOptionsMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    setOwner(newOwner) {\n        this.setOwnerMessageArea.showMessage(\"Saving...\", \"black\", null);\n        this.setOwnerButton.postJSON(\"/article/\" + this.options.articleId + \"/set_owner/\", {\n            newOwner: newOwner\n        }).then(\n            () => this.setOwnerMessageArea.showMessage(\"Author successfully changed\"),\n            (error) => this.setOwnerMessageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    addNewVersion(content) {\n        this.versionsLabels[0] = (\"Version \" + this.versionsLabels.length);\n        this.versions[0] = content;\n\n        this.versions.unshift(this.markupEditor.getValue());\n        this.versionsLabels.unshift(\"Edit version\");\n\n        let leftIndex = this.leftTextSelector.getIndex();\n        let rightIndex = this.rightTextSelector.getIndex();\n\n        this.leftTextSelector.redraw();\n        this.rightTextSelector.redraw();\n\n        this.setLeftIndex(leftIndex);\n        this.setRightIndex(rightIndex);\n    }\n\n    setLeftIndex(index) {\n        this.leftTextSelector.setIndex(index);\n        this.diffWidget.setLeftText(this.versions[index]);\n    }\n\n    setRightIndex(index) {\n        this.rightTextSelector.setIndex(index);\n        this.diffWidget.setRightText(this.versions[index]);\n    }\n\n    onMount() {\n        this.deleteArticleModal = <DeleteArticleModal article={this.getArticle()}/>;\n\n        if (ArticleEditor.DiffWidgetClass) {\n            this.tabArea.titleArea.children[1].addClickListener(() => {\n                this.versions[0] = this.markupEditor.getValue();\n                this.setLeftIndex(this.leftTextSelector.getIndex());\n                this.setRightIndex(this.rightTextSelector.getIndex());\n                //this.diffWidget.diffGutterPanel.scroll();\n            });\n\n            let updateEditable = () => {\n                this.leftEditable = (this.leftTextSelector.getIndex() === 0);\n                this.rightEditable = (this.rightTextSelector.getIndex() === 0);\n                this.diffWidget.setLeftEditable(this.leftEditable);\n                this.diffWidget.setRightEditable(this.rightEditable);\n            };\n\n            this.leftTextSelector.addChangeListener(() => {\n                this.diffWidget.setLeftText(this.versions[this.leftTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.rightTextSelector.addChangeListener(() => {\n                this.diffWidget.setRightText(this.versions[this.rightTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.setLeftIndex(0);\n            this.setRightIndex(1);\n\n            //this.diffWidget.diffGutter.redraw();\n        }\n\n        window.onbeforeunload = () => {\n            // Are you sure you want to close the page?\n            return \"\";\n        }\n    }\n}\n\nexport {ArticleEditor};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class UserReactionCollection extends StoreObject {\n    getUserReactionStore() {\n        return this.getStore().getState().getStore(\"UserReaction\");\n    }\n\n    // TODO should be done as generator? Clearly needs to have indexed data!\n    getReactions() {\n        let reactions = [];\n        for (let reaction of this.getUserReactionStore().all()) {\n            if (reaction.collectionId == this.id) {\n                reactions.push(reaction);\n            }\n        }\n        return reactions;\n    }\n\n    getCurrentUserReaction() {\n        let currentUser = window.USER;\n        for (const userReaction of this.getReactions()) {\n            if (userReaction.userId == currentUser.id) {\n                return userReaction;\n            }\n        }\n        return null;\n    }\n\n    getCurrentUserReactionType() {\n        const currentUserReaction = this.getCurrentUserReaction();\n        return currentUserReaction && currentUserReaction.type;\n    }\n}\n\nexport class UserReaction extends StoreObject {\n}\n\nexport let UserReactionCollectionStore = new GenericObjectStore(\"UserReactionCollection\", UserReactionCollection);\nexport let UserReactionStore = new GenericObjectStore(\"UserReaction\", UserReaction);","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {AjaxFetchMixin, VirtualStoreObjectMixin, VirtualStoreMixin} from \"StoreMixins\";\nimport {PublicUserStore} from \"UserStore\";\nimport {UserReactionCollectionStore} from \"UserReactionStore\";\nimport {MarkupParser} from \"MarkupParser\";\nimport {ServerTime, StemDate} from \"Time\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass MessageInstance extends VirtualStoreObjectMixin(StoreObject) {\n    constructor(obj, event) {\n        super(obj, event);\n\n        PublicUserStore.fakeCreate(event.user);\n    }\n\n    getNormalizedId() {\n        // TODO: Pretty bad implementation, works though\n        let messageId = this.id + \"\";\n        if (messageId.startsWith(\"temp-\")) {\n            messageId = messageId.substr(5);\n        }\n        return parseInt(messageId);\n    }\n\n    getDate() {\n        return this.timeAdded;\n    }\n\n    getUser() {\n        let user = PublicUserStore.get(this.userId);\n        if (user) {\n            return user.username;\n        }\n        return \"user-\" + this.userId;\n    }\n\n    getContent() {\n        return this.content;\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getReactionCollection(fakeIfMissing=false) {\n        let reactionCollection = UserReactionCollectionStore.get(this.reactionCollectionId);\n        if (fakeIfMissing && !reactionCollection) {\n            return {\n                upvotesCount: 0,\n                downvotesCount: 0,\n                getCurrentUserReactionType() {},\n            };\n        }\n        return reactionCollection;\n    }\n\n    getNumLikes() {\n        return this.getReactionCollection(true).upvotesCount;\n    }\n\n    getNumDislikes() {\n        return this.getReactionCollection(true).downvotesCount;\n    }\n\n    getVotesBalance() {\n        return this.getNumLikes() - this.getNumDislikes();\n    }\n\n    getUserVote() {\n        return this.getReactionCollection(true).getCurrentUserReactionType();\n    }\n\n    getPreviousMessage() {\n        // TODO: this should be cached and kept by the message thread\n        let ans = null;\n        let currentId = this.getNormalizedId();\n        // If message has temporary id, then it is identical with the previous message id, so instead the\n        // previous previous message would be found instead.\n        if (this.hasTemporaryId()) {\n            currentId += 1;\n        }\n        for (let message of this.getMessageThread().getMessages()) {\n            if (message.id < currentId && (!ans || ans.id < message.id)) {\n                ans = message;\n            }\n        }\n        return ans;\n    }\n\n    getNextMessage() {\n        throw \"Implement me!\";\n    }\n\n    hasMarkupEnabled() {\n        return this.getMessageThread().hasMarkupEnabled();\n    }\n\n    getTimeOfDay() {\n        return StemDate.unix(this.timeAdded).format(\"HH:mm\");\n    }\n\n    edit(content, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            message: content,\n        }).then(onSuccess, onError);\n    }\n\n    react(reaction, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            reaction: reaction,\n        }).then(onSuccess, onError);\n    }\n\n    like(onSuccess, onError) {\n        this.react(\"like\", onSuccess, onError);\n    }\n\n    dislike(onSuccess, onError) {\n        this.react(\"dislike\", onSuccess, onError);\n    }\n\n    resetReaction(onSuccess, onError) {\n        this.react(\"resetReaction\", onSuccess, onError);\n    }\n\n    deleteMessage(onSuccess, onError) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    applyEvent(event) {\n        if (event.type === \"messageEdit\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"edit\", event);\n        } else if (event.type === \"reaction\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"reaction\", event);\n        } else if (event.type === \"messageDelete\") {\n            this.dispatch(\"delete\", event);\n            this.getMessageThread().deleteMessageInstance(this);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    updateId(newId) {\n        if (this.id == newId) {\n            return;\n        }\n        let oldId = this.id;\n        super.updateId(newId);\n        let messageThread = this.getMessageThread();\n        messageThread.messages.delete(oldId);\n        messageThread.messages.set(this.id, this);\n    }\n\n    setPostError(postError) {\n        this.postError = postError;\n        this.dispatch(\"postError\", postError);\n        console.log(\"Post error: \", postError);\n    }\n}\n\nclass MessageThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.messages = new Map();\n        // TODO: for now don't register for private chats, you get them as user events\n        // TODO: don't change the global here, you fool!\n        if (!this.streamName.startsWith(\"messagethread-privatechat-\")) {\n            GlobalState.registerStream(this.streamName);\n        }\n        this.online = new Set(this.online || []);\n        this.online.delete(0);\n    }\n\n    hasMarkupEnabled() {\n        return this.markupEnabled || false;\n    }\n\n    addMessageInstance(messageInstance, event) {\n        this.messages.set(messageInstance.id, messageInstance);\n        this.dispatch(\"newMessage\", event);\n    }\n\n    deleteMessageInstance(messageInstance) {\n        this.messages.delete(messageInstance.id);\n    }\n\n    applyEvent(event) {\n        if (event.data.online) {\n            this.online = event.data.online = new Set(event.data.online);\n            this.online.delete(0);\n        }\n        if (event.type === \"online\") {\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaJoined\") {\n            if (event.data.userId != 0) {\n                this.online.add(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaLeft\") {\n            if (event.data.userId != 0) {\n                this.online.delete(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    getMessages(orderDescending=false) {\n        // TODO: should be also as iterable\n        let messages = Array.from(this.messages.values());\n        if (orderDescending) {\n            return messages.sort((a, b) => {return b.id - a.id});\n        }\n        return messages.sort((a, b) => {return a.id - b.id});\n    }\n\n    getNumMessages() {\n        return this.messages.size;\n    }\n\n    getMaxMessageId() {\n        let value = 0;\n        for (let messageInstance of this.messages.values()) {\n            if (!messageInstance.hasTemporaryId() && messageInstance.id > value) {\n                value = messageInstance.id;\n            }\n        }\n        return value;\n    }\n\n    // This method will return the last message of the message thread,\n    // regardless of whether it is virtual or real.\n    getLastMessage() {\n        let lastMessage = null;\n        for (let messageInstance of this.messages.values()) {\n            if (!lastMessage || lastMessage.getNormalizedId() < messageInstance.getNormalizedId() ||\n                    (lastMessage.getNormalizedId() === messageInstance.getNormalizedId() && messageInstance.hasTemporaryId())) {\n                lastMessage = messageInstance;\n            }\n        }\n        return lastMessage;\n    }\n}\n\nclass MessageInstanceStoreClass extends VirtualStoreMixin(GenericObjectStore) {\n    constructor() {\n        super(\"MessageInstance\", MessageInstance, {dependencies: [\"messagethread\", \"publicuser\"]});\n    }\n\n    createVirtualMessageInstance(messageContent, messageThread, temporaryId) {\n        let virtualMessageInstance = {\n            content: messageContent,\n            temporaryId: temporaryId,\n            id: \"temp-\" + temporaryId,\n            timeAdded: ServerTime.now().toUnix(),\n            userId: parseInt(USER.id),\n            messageThreadId: messageThread.id,\n            meta: {},\n        };\n\n        return this.fakeCreate(virtualMessageInstance, \"virtualMessage\");\n    };\n}\n\nvar MessageInstanceStore = new MessageInstanceStoreClass();\n\nMessageInstanceStore.addCreateListener((messageInstance, createEvent) => {\n    messageInstance.getMessageThread().addMessageInstance(messageInstance, createEvent);\n});\n\n\nvar MessageThreadStore = new GenericObjectStore(\"messagethread\", MessageThread);\n\nclass BaseChatObject extends StoreObject {\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getOnlineUserIds() {\n        return this.getMessageThread().online;\n    }\n}\n\nclass GroupChat extends BaseChatObject {\n}\n\nvar GroupChatStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar GroupChatStore = new GroupChatStoreClass(\"groupChat\", GroupChat, {\n    fetchURL: \"/chat/group_chat_state/\",\n    maxFetchObjectCount: 1,\n});\n\nGroupChatStore.getFetchRequestData = function (ids, fetchJobs) {\n    return {\n        chatId: ids[0],\n    };\n};\n\nclass PrivateChat extends BaseChatObject {\n    getOtherUserId() {\n        return (USER.id === this.user1Id ? this.user2Id : this.user1Id);\n    }\n}\n\nvar PrivateChatStore = new GenericObjectStore(\"PrivateChat\", PrivateChat, {\n});\n\nPrivateChatStore.getChatWithUser = function(userId) {\n    let myUserId = USER.id;\n    if (myUserId === userId) {\n        for (let privateChat of this.all()) {\n            if (privateChat.user1Id === userId && privateChat.user2Id === userId) {\n                return privateChat;\n            }\n        }\n        return null;\n    }\n    for (let privateChat of this.all()) {\n        if (privateChat.user1Id === userId || privateChat.user2Id === userId) {\n            return privateChat;\n        }\n    }\n};\n\nPrivateChatStore.fetchForUser = function (userId, onSuccess, onError) {\n    Ajax.postJSON(\"/chat/private_chat_state/\", {\n        userId: userId,\n    }).then(\n        (data) => onSuccess(PrivateChatStore.get(data.privateChatId)),\n        onError\n    );\n};\n\nPrivateChatStore.addListener(\"update\", (obj, event) => {\n    if (event.type === \"privateMessage\") {\n        GlobalState.importState(event.state);\n    }\n});\n\nexport {MessageInstance, MessageInstanceStore, MessageThread, MessageThreadStore, PrivateChatStore, GroupChatStore};\n","import {UI, FloatingWindow, Direction, Panel, Button} from \"UI\";\nimport {Device} from \"Device\";\n\nexport class BasePopup extends FloatingWindow {\n    static bodyPopups = new Set();\n\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.x = 0;\n        options.y = 0;\n        options.contentPadding = \"7px\";\n        options.contentStyle = {};\n        options.arrowDirection = Direction.UP;\n        options.arrowColor = \"white\";\n        options.backgroundColor = \"white\";\n        return options;\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.style = Object.assign({\n            boxShadow: \"0px 0px 4px rgba(0,0,0,0.5)\",\n            borderRadius: \"5px\",\n            display: \"table\",\n            maxWidth: \"350px\",\n            backgroundColor: this.options.backgroundColor,\n            position: \"absolute\",\n            left: (this.options.x) + \"px\",\n            top: (this.options.y) + \"px\",\n            zIndex: \"3\",\n            right: \"0px\"\n        }, this.options.style);\n        this.createArrowStyle();\n    }\n\n    setContent(content) {\n        this.options.children = content;\n        this.redraw();\n    }\n\n    getContent() {\n        return <div style={Object.assign({padding: this.options.contentPadding}, this.options.contentStyle)} ref=\"contentArea\">\n                {this.options.children}\n            </div>;\n    }\n\n    createArrowStyle() {\n        let baseArrowOutline = {\n            \"left\": \"50%\",\n            \"z-index\": \"-3\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n            marginLeft: \"-11px\"\n        };\n\n        this[\"arrow\" + Direction.UP + \"Outline\"] = Object.assign({\n            \"border-bottom\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"-10.8px\",\n            marginLeft: \"-11px\"\n        }, baseArrowOutline);\n\n        this[\"arrow\" + Direction.DOWN + \"Outline\"] = Object.assign({\n            \"border-top\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"2px\"\n        }, baseArrowOutline);\n\n        let baseArrow = {\n            \"left\": \"50%\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n        };\n\n        this[\"arrow\" + Direction.UP] = Object.assign({\n            \"margin-top\": \"-10px\",\n            \"border-bottom\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n\n        this[\"arrow\" + Direction.DOWN] = Object.assign({\n            \"border-top\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n    }\n\n    getArrow() {\n        let direction = this.options.arrowDirection;\n        return [\n            <Panel ref=\"popupArrow\" style={this[\"arrow\" + direction]}/>,\n            <Panel ref=\"popupArrowOutline\" style={this[\"arrow\" + direction + \"Outline\"]} />\n        ];\n    }\n\n    render() {\n        return (this.options.arrowDirection === Direction.UP) ?\n            [this.getArrow(), this.getContent()] :\n            [this.getContent(), this.getArrow()];\n    }\n\n    bindInsideParent() {\n        if (this.target) {\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = (this.options.arrowDirection === Direction.UP ? this.target.offsetHeight : 0);\n        }\n        let left = parseFloat(this.options.x);\n        let top = parseFloat(this.options.y) + (this.options.arrowDirection === Direction.UP ? 11 : - this.getHeight() - 11);\n        let arrowMargin = -11;\n        left -= this.getWidth() / 2;\n        if (this.options.bodyPlaced && this.target) {\n            const rect = this.target.getBoundingClientRect();\n            left += rect.left;\n            top += rect.top;\n        }\n        if (this.target && !this.options.bodyPlaced) {\n            if (this.node.offsetParent && !this.options.bodyPlaced) {\n                let left2 = left + this.node.offsetParent.offsetLeft;\n                if (left2 < 0) {\n                    left -= left2 - 2;\n                    arrowMargin += left2 + 2;\n                } else if (left2 + this.getWidth() > this.node.offsetParent.offsetParent.offsetWidth) {\n                    let delta = this.node.offsetParent.offsetParent.offsetWidth - (left2 + this.getWidth());\n                    arrowMargin -= delta - 2;\n                    left += delta - 2;\n                }\n            }\n        } else {\n            if (left < 0) {\n                arrowMargin += left + 2;\n                left = 2;\n            } else if (left + this.getWidth() > this.parentNode.offsetWidth) {\n                let delta = left + this.getWidth() - this.parentNode.offsetWidth;\n                arrowMargin += delta;\n                left -= delta;\n            }\n        }\n        this.popupArrow.setStyle(\"margin-left\", arrowMargin + \"px\");\n        this.popupArrowOutline.setStyle(\"margin-left\", arrowMargin + \"px\");\n\n        this.setStyle(\"left\", left + \"px\");\n        this.setStyle(\"top\", top + \"px\");\n    }\n\n    setParent(parent) {\n        let newParent;\n        if (parent instanceof HTMLElement) {\n            newParent = parent;\n        } else {\n            newParent = parent.node;\n        }\n        if (newParent === this.parentNode) {\n            return;\n        }\n        if (this.isInDocument()) {\n            this.parentNode.removeChild(this.node);\n            newParent.appendChild(this.node);\n            this.setParentNode(newParent);\n        } else {\n            this.setParentNode(newParent);\n        }\n    }\n\n    setCenter(center, manual=false) {\n        this.options.x = center.x;\n        this.options.y = center.y;\n        if (manual) {\n            setTimeout(() => {\n                this.bindInsideParent();\n            }, 0);\n        } else {\n            this.bindInsideParent();\n        }\n    }\n\n    static clearBodyPopups() {\n        for (const popup of this.bodyPopups) {\n            popup.hide();\n        }\n        this.bodyPopups.clear();\n    }\n\n    onUnmount() {\n        super.onUnmount();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.delete(this);\n        }\n    }\n\n    onMount() {\n        if(this.options.target) {\n            if (this.options.target instanceof HTMLElement) {\n                this.target = this.options.target;\n            } else {\n                this.target = this.options.target.node;\n            }\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = this.target.offsetHeight;\n        }\n        super.onMount();\n        // Set the Popup inside the parent\n        this.bindInsideParent();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.add(this);\n        }\n    }\n}\n\nexport class Popup extends BasePopup {\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.titleFontSize = \"12pt\";\n        options.contentFontSize = \"10pt\";\n        options.arrowColor = \"#F3F3F3\";\n        return options;\n    }\n\n    getContent() {\n        let contentArea = super.getContent();\n        contentArea.options.style = Object.assign({\n            fontSize: this.options.contentFontSize\n        }, contentArea.options.style || {});\n\n        return [<Panel ref=\"titleArea\" style={{backgroundColor: \"#F3F3F3\", paddingLeft: \"20px\", fontSize: this.options.titleFontSize,\n                fontWeight:\"bold\", paddingTop: \"6px\", paddingBottom: \"6px\", textAlign: \"center\",\n                borderBottom: \"1px solid #BEBEBE\"}}>\n                {this.getTitleAreaContent()}\n            </Panel>,\n            contentArea,\n        ];\n    }\n\n    setTitle(newTitle) {\n        this.options.title = newTitle;\n        this.redraw();\n    }\n\n    getTitleAreaContent() {\n        return [<Button className=\"pull-right\" ref=\"closeButton\" style={{backgroundColor:\"transparent\",border: \"none\", color: \"#888888\", fontSize:\"18pt\", padding:\"2px\", marginRight:\"3px\", marginTop:\"-12px\"}} label=\"\"/>,\n            <div style={{marginRight: \"25px\"}}>{this.options.title}</div>\n        ];\n    }\n\n    bindWindowListeners() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n\n        let documentListener = () => {\n            this.hide();\n            if (!Device.supportsEvent(\"click\")) {\n                document.removeEventListener(\"touchstart\", documentListener);\n            } else {\n                document.removeEventListener(\"click\", documentListener);\n            }\n        };\n        if (!Device.supportsEvent(\"click\")) {\n            document.addEventListener(\"touchstart\", documentListener);\n        } else {\n            document.addEventListener(\"click\", documentListener);\n        }\n\n    }\n\n    show() {\n        super.show();\n        this.bindWindowListeners();\n    }\n\n    redraw() {\n        if (this.isInDocument()) {\n            this.bindInsideParent();\n        }\n        super.redraw();\n    }\n\n    onMount() {\n        super.onMount();\n\n        // fake a click event that will propagate to window and trigger\n        // the events of any other popup, closing them\n        let fakeClickEvent = document.createEvent(\"MouseEvents\");\n        fakeClickEvent.initEvent(\"click\", true, false);\n        document.body.dispatchEvent(fakeClickEvent);\n\n        // Make the popup close when something else is clicked\n        this.bindWindowListeners();\n\n        // Close button behavior\n        this.closeButton.addClickListener(() => {\n            this.hide();\n            this.closeButton.node.blur();\n        });\n        let closeButtonColor = this.closeButton.options.style.color;\n        this.closeButton.addNodeListener(\"mouseover\", () => {\n            this.closeButton.setStyle(\"color\", \"#0082AD\");\n        });\n        this.closeButton.addNodeListener(\"mouseout\", () => {\n            this.closeButton.setStyle(\"color\", closeButtonColor);\n        });\n    }\n}\n","import {UI, Button, Link, Modal, Level, Size, Direction} from \"UI\";\nimport {MarkupEditor} from \"./MarkupEditor\";\nimport {BasePopup} from \"../Popup\";\n// import {Emoji as EmojiMini} from \"EmojiMini\";\n// import \"EmojiUI\";\n\nUI.Emoji = UI.Emoji || UI.Element;\n\nclass ClickableEmote extends UI.Emoji {\n    redraw() {\n        this.redrawTimeout = setTimeout(()=> super.redraw());\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            const textBox = this.options.textBox;\n            if (textBox) {\n                textBox.appendValue(this.getValueText(), \" \");\n            }\n            if (this.options.afterClick) {\n                this.options.afterClick();\n            }\n        });\n    }\n\n    onUnmount() {\n        clearTimeout(this.redrawTimeout);\n    }\n}\n\nclass ClickableEmoji extends ClickableEmote {\n    getValueText() {\n        return \":\" + this.options.value + \":\";\n    }\n}\n\nclass ClickableTwitchEmote extends ClickableEmote {\n    getValueText() {\n        return this.options.value;\n    }\n}\n\nclass EmojiButton extends Button {\n    getPopup() {\n        const textBox = this.options.getTextBox();\n        const afterClick = () => this.closePopup();\n        let emotesList = [];\n        for (let emoji in EmojiMini.EMOJI) {\n            emotesList.push(<ClickableEmoji textBox={textBox} afterClick={afterClick} value={emoji}/>);\n        }\n        for (let twitchEmoji in EmojiMini.TWITCH_EMOTICONS) {\n            emotesList.push(<ClickableTwitchEmote textBox={textBox} afterClick={afterClick} value={twitchEmoji}/>);\n        }\n        return BasePopup.create(this.parent, {\n                target: this,\n                children: emotesList,\n                arrowDirection: Direction.DOWN,\n                style: {\n                    display: \"flex\",\n                    overflow: \"auto\",\n                    height: \"300px\",\n                    width: \"300px\",\n                }\n            });\n    }\n\n    closePopup() {\n        if (this.emojiPopup) {\n            this.emojiPopup.destroyNode();\n            delete this.emojiPopup;\n        }\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            if (this.emojiPopup) {\n                this.closePopup();\n            } else {\n                this.emojiPopup = this.getPopup();\n            }\n        })\n    }\n\n    onUnmount() {\n        this.closePopup();\n    }\n}\n\nclass MarkupEditorModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            height: \"85%\",\n            width: \"80%\",\n            destroyOnHide: false\n        });\n    }\n\n    getMarkupEditorStyle() {\n        return {\n            height: \"85%\",\n            border: \"solid 5px #DDD\",\n            borderRadius: \"10px\"\n        };\n    }\n\n    getButtonStyle() {\n        return {\n            margin: \"5px\"\n        }\n    }\n\n    render() {\n        return [\n            <MarkupEditor ref={this.refLink(\"markupEditor\")} classMap={this.options.classMap} showButtons={false} style={this.getMarkupEditorStyle()}/>,\n            <div ref={this.refLink(\"buttonPanel\")} style={{\"text-align\": \"center\"}} >\n                <Button ref=\"graphExample\" label=\"Graph\"\n                           onClick={() => {this.appendGraphExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"submissionExample\" label=\"Submission\"\n                           onClick={() => {this.appendSubmissionExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"codeSnippetExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Code\"\n                           onClick={() => {this.appendCodeExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"linkExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Link\"\n                           onClick={() => {this.appendLinkExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"latexExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"LaTeX\"\n                           onClick={() => {this.appendLatexExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref={this.refLink(\"doneButton\")} level={Level.PRIMARY} label=\"Done\"\n                           className=\"pull-right\" style={this.getButtonStyle()}/>\n            </div>,\n            //<span ref={this.refLink(\"emotesContainer\")} style={{float: \"left\", position: \"relative\", margin: \"5px\"}}>\n            //    <EmojiButton ref=\"emotes\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Emoticons\" getTextBox={() => this.markupEditor}/>\n            //</span>\n            //<Button ref=\"userExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"User\"\n            //           onClick={() => {this.appendUserExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n            <div className=\"\" style={{\"position\":\"absolute\", \"width\":\"90%\", \"margin-top\":\"45px\"}}>\n                <Link href=\"/about/#markup\" value=\"More details here\" />\n            </div>\n        ];\n    }\n\n    appendLatexExample() {\n        this.markupEditor.appendValue(\"$$lim_{x\\\\to\\\\infty} f(x)$$\");\n    }\n\n    appendGraphExample() {\n        this.markupEditor.appendValue(\"<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />\");\n    }\n\n    appendSubmissionExample() {\n        this.markupEditor.appendValue(\"<Submission id={25717} />\");\n    }\n\n    appendCodeExample() {\n        this.markupEditor.appendValue(\n            \"```java\\n\" +\n            \"class Main {\\n\" +\n            \"    public static void main (String[] args) throws java.lang.Exception {\\n\" +\n            \"        System.out.println(\\\"42\\\");\\n\" +\n            \"    }\\n\" +\n            \"}\\n\" +\n            \"```\");\n    }\n\n    appendUserExample() {\n        this.markupEditor.appendValue(\"<User id={1} />\");\n    }\n\n    appendLinkExample() {\n        this.markupEditor.appendValue(\"<Link href=\\\"https://csacademy.com\\\" value=\\\"Cool website\\\" newTab/>\");\n    }\n\n    hide() {\n        super.hide();\n        if (this.options.hideCallback) {\n            this.options.hideCallback(this);\n        }\n    }\n\n    show() {\n        super.show();\n        if (this.options.showCallback) {\n            this.options.showCallback(this);\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport {MarkupEditorModal};\n","import {UI} from \"UI\";\nimport {MarkupClassMap, MarkupRenderer} from \"markup/MarkupRenderer\";\n\nclass ChatMarkupRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = this.constructor.classMap;\n        super.setOptions(options);\n    }\n}\n\nChatMarkupRenderer.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n\nexport {ChatMarkupRenderer};\n","import {Dispatchable} from \"./Dispatcher\";\n\nclass ScriptResolver extends Dispatchable {\n    constructor(scriptPath) {\n        super();\n        this.loaded = false;\n        this.jobs = [];\n        // TODO: should be more thought out\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.async = true;\n        scriptElement.src = scriptPath;\n        scriptElement.onload = () => this.onLoad();\n        // TODO: what about error?\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoad() {\n        this.loaded = true;\n        for (let i = 0; i < this.jobs.length; i += 1) {\n            this.jobs[i](this);\n        }\n        this.jobs = [];\n    }\n\n    resolve(callback) {\n        if (this.loaded) {\n            callback(this);\n            return;\n        }\n        this.jobs.push(callback);\n    }\n}\n\nlet scriptResolveMap = new Map();\n\nfunction ensureSingle(script) {\n    let scriptResolver = scriptResolveMap.get(script);\n    if (!scriptResolver) {\n        scriptResolver = new ScriptResolver(script);\n        scriptResolveMap.set(script, scriptResolver);\n    }\n    return new Promise(function(resolve, reject) {\n        scriptResolver.resolve(resolve, reject);\n    });\n}\n\nfunction ensure(scripts, callback) {\n    if (!Array.isArray(scripts)) {\n        scripts = [scripts];\n    }\n    let promises = scripts.map(script => ensureSingle(script));\n    Promise.all(promises).then(function () {\n        callback(...arguments);\n    })\n}\n\nexport {ensure};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nimport {Language} from \"./LanguageStore\";\n\n\nclass TranslationKey extends StoreObject {\n}\n\nexport const TranslationKeyStore = new GenericObjectStore(\"TranslationKey\", TranslationKey);\n\nclass TranslationEntry extends StoreObject {\n    getLanguage() {\n        return Language.get(this.languageId);\n    }\n\n    getTranslationKey() {\n        return TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nexport const TranslationEntryStore = new GenericObjectStore(\"TranslationEntry\", TranslationEntry);\n\nLanguage.addListener(\"buildTranslationMap\", (language) => {\n    for (let translationEntry of TranslationEntryStore.all()) {\n        if (translationEntry.languageId === language.id) {\n            language.translationMap.set(translationEntry.getTranslationKey().value, translationEntry.value);\n        }\n    }\n});\n","import {GenericObjectStore, StoreObject} from \"Store\";\nimport {TranslationKeyStore} from \"TranslationStore\";\n\nclass ErrorMessage extends StoreObject {\n    getTranslation() {\n        let translationKey = TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nclass ErrorMessageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"ErrorMessage\", ErrorMessage);\n    }\n}\n\nlet ErrorMessageStore = new ErrorMessageStoreClass();\n\nexport {ErrorMessageStore, ErrorMessage};\n","import {UI, ErrorModal} from \"UI\";\nimport {StoreObject} from \"Store\";\nimport {ErrorMessageStore, ErrorMessage} from \"ErrorMessageStore\";\n\nconst ErrorHandlers = {};\n\nErrorHandlers.wrapError = (error) => {\n    if (error instanceof StoreObject) {\n        return error;\n    }\n\n    if (error.id) {\n        return ErrorMessageStore.fakeCreate(error);\n    } else {\n        if (typeof error === \"string\" || error instanceof String) {\n            error = {message: error};\n        } else if (error instanceof Error) {\n            error = {\n                name: error.name,\n                message: error.message\n            };\n        }\n        return new ErrorMessage(error);\n    }\n};\n\nErrorHandlers.showErrorAlert = (error) => {\n    ErrorModal.show({\n        error: ErrorHandlers.wrapError(error)\n    });\n};\n\nErrorHandlers.PAGE_NOT_FOUND = ErrorHandlers.wrapError(\"Page not found.\");\n\nexport {ErrorHandlers};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\n\nclass SocialAccountManager extends Dispatchable {\n    constructor(socialApp, options) {\n        super();\n        this.socialApp = socialApp;\n        this.options = options;\n    }\n\n    getSocialApp() {\n        return this.socialApp;\n    }\n\n    getClientId() {\n        return this.getSocialApp().getClientId();\n    }\n\n    setLoaded() {\n        this.loaded = true;\n        this.dispatch(\"loaded\");\n    }\n\n    static getInstance() {\n        if (!this._Global) {\n            this._Global = new this();\n        }\n        return this._Global;\n    }\n\n    // TODO: all managers should call the onError function (if one is passed in) to report issues\n    static login(callback, onError) {\n        this.getInstance().login(...arguments);\n    }\n\n    static connect(callback, onError) {\n        this.getInstance().connect(...arguments);\n    }\n}\n\nexport {SocialAccountManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\nimport {GlobalState} from \"State\";\n\nexport class SocialApp extends StoreObject {\n    getClientId() {\n        return this.clientId;\n    }\n}\n\nclass SocialAppStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"SocialApp\", SocialApp);\n    }\n\n    getSocialApps() {\n        return this.all();\n    }\n\n    getSocialAppByName(name) {\n        return this.all().find(socialApp => socialApp.name === name);\n    }\n}\n\nexport let SocialAppStore = new SocialAppStoreClass();\n","import {Ajax} from \"Ajax\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {NOOP_FUNCTION} from \"Utils\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GoogleManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Google\"), {\n            loginByTokenUrl: \"/accounts/google/login/token/\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data, onSuccess=NOOP_FUNCTION) {\n        Ajax.postJSON(url, data).then(onSuccess);\n    }\n\n    ensureScriptNodeExists() {\n        const id = \"google-jsapi\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.onload = () => {\n            gapi.load(\"auth2\", () => {\n                gapi.auth2.init({\n                    client_id: this.getClientId(),\n                }).then(() => {\n                    // Handle the initial sign-in state.\n                    // this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n                    this.updateSigninStatus(this.getGoogleAuth().isSignedIn.get());\n\n                    // Listen for sign-in state changes.\n                    // gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n                    this.getGoogleAuth().isSignedIn.listen(this.updateSigninStatus);\n\n                    this.setLoaded();\n                });\n            });\n        };\n        scriptElement.src = \"https://apis.google.com/js/platform.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    getGoogleAuth() {\n        return gapi.auth2.getAuthInstance();\n    }\n\n    getGoogleUser() {\n        return this.getGoogleAuth().currentUser.get();\n    }\n\n    getAuthResponse() {\n        return this.getGoogleUser().getAuthResponse();\n    }\n\n    updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n            console.log(\"Google user is signed in\");\n        }\n    }\n\n    handleProcess(process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n        this.getGoogleAuth().grantOfflineAccess({\n            redirect_uri: \"postmessage\",\n            immediate: false,\n        }).then((data) => {\n            Object.assign(data, {\n                process: process,\n            });\n            this.sendData(this.options.loginByTokenUrl, data, () => self.location.reload());\n        });\n    }\n\n    login() {\n        this.handleProcess(\"login\");\n    }\n\n    connect() {\n        this.handleProcess(\"connect\")\n    }\n}\n\nexport {GoogleManager};\n","import {Ajax} from \"Ajax\";\nimport {Dispatchable} from \"Dispatcher\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass FacebookManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Facebook\"), {\n            version: \"v2.7\",\n            loginByTokenUrl: \"/accounts/facebook/login/token/\",\n            loginOptions: {\n                auth_type: \"rerequest\",\n                scope: \"email\"\n            },\n            logoutUrl: \"/accounts/logout/\",\n            // TODO: should probably look at https://www.facebook.com/translations/FacebookLocales.xml and Language.Locale\n            locale: \"en_US\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data) {\n        Ajax.postJSON(url, data).then(\n            (data) => {\n                if (data.next) {\n                    self.location.href = data.next;\n                } else {\n                    location.reload();\n                }\n            },\n            (error) => {\n                this.dispatch(\"loginError\", error);\n            }\n        );\n    }\n\n    ensureScriptNodeExists() {\n        self.fbAsyncInit = () => {\n            FB.init({\n                appId: this.getClientId(),\n                version: this.options.version,\n                status: true,\n                cookie: true,\n                xfbml: true\n            });\n\n            this.setLoaded();\n        };\n\n        const id = \"facebook-jssdk\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.src = \"//connect.facebook.net/\" + this.options.locale + \"/sdk.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoginCanceled(response) {\n    }\n\n    onLoginError(response) {\n    }\n\n    onLoginSuccess(response, nextUrl, process) {\n        let data = {\n            next: nextUrl || '',\n            process: process,\n            accessToken: response.authResponse.accessToken,\n            expiresIn: response.authResponse.expiresIn\n        };\n        this.sendData(this.options.loginByTokenUrl, data);\n    }\n\n    logout() {\n        if (!self.FB) {\n            return;\n        }\n        FB.logout((response) => {\n            this.onLogoutSuccess(response, nextUrl);\n        });\n    }\n\n    onLogoutSuccess(response) {\n        if (this.options.logoutUrl) {\n            this.sendData(this.options.logoutUrl, data);\n        }\n    }\n\n    handleProcess(nextUrl, action, process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n\n        if (action === \"reauthenticate\") {\n            this.options.loginOptions.auth_type = action;\n        }\n\n        FB.login((response) => {\n            if (response.authResponse) {\n                this.onLoginSuccess(response, nextUrl, process);\n            } else if (response && response.status && [\"not_authorized\", \"unknown\"].indexOf(response.status) > -1) {\n                this.onLoginCanceled(response);\n            } else {\n                this.onLoginError(response);\n            }\n        }, this.options.loginOptions);\n    }\n\n    login(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"login\");\n    }\n\n    connect(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"connect\");\n    }\n}\n\nexport {FacebookManager};\n","import {composeURL} from \"Fetch\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\nimport {SocialAppStore} from \"SocialAppStore\";\n\nclass GithubManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Github\"), {\n            loginWindowOptions: \"height=600,width=800,scrollbars=yes\",\n        });\n    }\n\n    login(callback) {\n        const githubUri = \"https://github.com/login/oauth/authorize\";\n\n        const rawParams = {\n            client_id: this.getClientId(),\n        };\n\n        const uri = composeURL(githubUri, rawParams);\n        const githubWindow = window.open(uri, \"githubWindow\", this.options.loginWindowOptions);\n\n        githubWindow.onbeforeunload = callback;\n    }\n}\n\nexport {GithubManager};\n","import {StoreObject, GenericObjectStore} from \"Store\";\n\nclass Country extends StoreObject {\n    toString() {\n        return this.name;\n    }\n\n    getIsoCode() {\n        return this.isoCode;\n    }\n\n    getEmojiName() {\n        return \"flag_\" + this.getIsoCode().toLowerCase()\n    }\n}\n\nconst ALL_COUNTRIES_PLACEHOLDER = (name) => ({id: 0, name: \"\", toString: () => name || \"All Countries\"});\nconst NO_COUNTRY_PLACEHOLDER = (name) => ({id: -1, name: \"\", toString: () => name || \"None\"});\n\nconst COUNTRY_COMPARATOR = (a, b) => {\n    if (a.name > b.name) {\n        return 1;\n    }\n    return -1;\n};\n\nclass CountryStoreClass extends GenericObjectStore {\n    allWithNone(noneName=\"None\") {\n         return [\n            NO_COUNTRY_PLACEHOLDER(noneName),\n            ...this.all().sort(COUNTRY_COMPARATOR)\n        ];\n    }\n\n    getCountriesFromIds(countriesIds, allCountries=true) {\n        let countries = [];\n        for (let countryId of countriesIds) {\n            countries.push(CountryStore.get(countryId));\n        }\n        let result = countries.sort(COUNTRY_COMPARATOR);\n        if (allCountries) {\n            result.unshift(ALL_COUNTRIES_PLACEHOLDER());\n        }\n        return result;\n    }\n}\n\nconst CountryStore = new CountryStoreClass(\"country\", Country);\n\n\nexport {Country, CountryStore, ALL_COUNTRIES_PLACEHOLDER};\n","import {StyleSheet, styleRule} from \"UI\";\nimport {Device} from \"Device\";\n\n\nlet loginHeight = 500;\nlet registerHeight = 500;\nlet width = 500;\nlet buttonHeight = 60;\nlet fontAwesomeIconHeight = 40;\nlet fontAwesomeIconWidth = 60;\nlet textColor = \"#252525\";\nlet signInButtonHeight = 50;\nlet signInButtonWidth = 120;\n\n\nclass LoginStyle extends StyleSheet {\n\n    @styleRule\n    loginRegisterSystem = () => {\n        if (Device.isTouchDevice()) {\n            console.log(\"Touch device mode on\");\n            return {\n                position: \"absolute\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                backgroundColor: \"#fff\",\n                maxHeight: \"100%\",\n                maxWidth: \"100%\",\n            };\n        } else {\n            return {\n                maxWidth: \"100%\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                margin: \"0 auto\",\n                backgroundColor: \"#fff\",\n            };\n        }\n    };\n\n    @styleRule\n    loginRegisterButtons = {\n        display: \"inline-block\",\n        float: \"left\",\n        width: \"100%\",\n        height: buttonHeight / loginHeight * 100 + \"%\",\n    };\n\n    @styleRule\n    loginSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderLeft: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    @styleRule\n    registerSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderRight: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    selectedLeft = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedLeftClass = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    selectedRight = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedRightClass = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    loginWidget = {\n        height: loginHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    @styleRule\n    registerWidget = {\n        height: registerHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    fontAwesomeIcon = {\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        width: \"15%\",\n        maxWidth: \"15%\",\n        textAlign: \"center\",\n        fontSize: \"150%\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderTopLeftRadius: \"5px\",\n        borderBottomLeftRadius: \"5px\",\n        borderRight: \"0px solid white\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    input = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderRadius: \"0\",\n        borderTopRightRadius: \"5px\",\n        borderBottomRightRadius: \"5px\",\n        marginTop: \"20px\",\n        fontWeight: \"bold\",\n        color: textColor,\n        border: \"0px solid #d3d5d9\",\n        borderLeft: \"0px solid white\",\n        boxShadow: \"none\",\n        fontSize: \"85%\",\n        \":focus\": {\n            boxShadow: \"none\",\n            outline: \"none\",\n            border: \"0px solid #d3d5d9\",\n            borderLeft: \"0px solid white\",\n        }\n    };\n\n    @styleRule\n    countrySelect = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        lineHeight: \"30px\",\n        marginTop: \"30px\",\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    badLogin = {\n        height: \"30px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: this.themeProperties.COLOR_DANGER,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    rememberMe = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"5px\",\n    };\n\n    @styleRule\n    rememberMeCheckbox = {\n        float: \"left\"\n    };\n\n    @styleRule\n    forgotPassword = {\n        display: \"inline-block\",\n        float: \"right\",\n        paddingRight: \"5px\",\n    };\n\n    @styleRule\n    signInButtonContainer = {\n        width: \"100%\",\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"20px auto\"\n    };\n\n    @styleRule\n    signInButton = {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        backgroundColor: \"#f6f6f6\",\n        marginTop: \"20px\",\n        minWidth: signInButtonWidth + \"px\",\n        height: signInButtonHeight + \"px\",\n        textAlign: \"center\",\n        lineHeight: signInButtonHeight + \"px\",\n        border: \"0px solid #d3d5d9\",\n        fontSize: \"18px\",\n        color: \"#252525\",\n        \":hover\": {\n            border: \"0px solid #0b79a7\",\n            borderBottom: \"2px solid #0b79a7\",\n            color: \"#0b79a7\",\n        }\n    };\n\n    @styleRule\n    horizontalLine = {\n        borderBottom: \"1px solid #d3d5d9\",\n        width: \"100%\",\n        marginTop: \"20px\",\n    };\n\n    connectWith = {\n        width: \"100%\",\n        textAlign: \"center\",\n        marginTop: \"20px\",\n    };\n\n    connectIcons = {\n        width: \"60%\",\n        marginLeft: \"20%\",\n        marginRight: \"20%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    faLogo = {\n        height: \"40px\",\n        paddingLeft: \"15px\",\n        paddingRight: \"15px\",\n        borderRadius: \"3px\",\n        textAlign: \"center\",\n        fontSize: \"18px\",\n        marginLeft: \"5px\",\n        marginRight: \"5px\",\n        transition: \".2s\",\n        color: \"#fff\",\n        \":hover\": {\n            transition: \".2s\",\n            opacity: \".9\",\n        },\n        cursor: \"pointer\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    recaptchaContainer = {\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    connectWithButtonsSpan = {\n        paddingLeft: \"15px\",\n        fontSize: \"15px\",\n    };\n\n    @styleRule\n    thirdPartyLoginContainer = {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexWrap: \"wrap\",\n        margin: \"15px 0\",\n    };\n\n    socialConnectDimensions = \"35px\";\n\n    @styleRule\n    socialConnectButtonContainer = {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: this.socialConnectDimensions,\n        color: \"#fff\",\n        paddingRight: \"10px\",\n        borderRadius: \"5px\",\n        margin: \"5px\",\n        outline: \"none\",\n        paddingTop: \"0\",\n        cursor: \"pointer\",\n        fontSize: \"13px\",\n        border: \"0\",\n        \":hover\": {\n            opacity: \".85\",\n        }\n    };\n\n    @styleRule\n    socialConnectButtonIcon = {\n        height: this.socialConnectDimensions,\n        width: this.socialConnectDimensions,\n        display: \"flex !important\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n}\n\n\nexport {LoginStyle}\n","import {\n    UI,\n    BasicTabTitle,\n    CheckboxInput,\n    EmailInput,\n    TextInput,\n    Link,\n    PasswordInput,\n    SubmitInput,\n    Switcher,\n    Select,\n    registerStyle,\n    TemporaryMessageArea,\n    Theme\n} from \"UI\";\n\nimport {ensure} from \"Require\";\nimport {Ajax} from \"Ajax\";\nimport {GoogleManager} from \"./GoogleManager\";\nimport {FacebookManager} from \"./FacebookManager\";\nimport {GithubManager} from \"./GithubManager\";\nimport {CountryStore} from \"CountryStore\";\n\nimport {FAIcon} from \"FontAwesome\";\nimport {LoginStyle} from \"./LoginStyle\";\n\nimport {SocialAppStore} from \"SocialAppStore\";\n\nconst ERROR_TIMEOUT = 6 * 1000;\n\nconst accountsConfig = {\n    username: true,\n    country: true,\n};\n\nconst socialLoginSpecificInfo = {\n    Google: {\n        name: \"Google\",\n        color: \"#de4b39\",\n        icon: \"google-plus\",\n        loginManager: GoogleManager,\n    },\n    Facebook: {\n        name: \"Facebook\",\n        color: \"#3b5998\",\n        icon: \"facebook\",\n        loginManager: FacebookManager,\n    },\n    Github: {\n        name: \"Github\",\n        color: \"#000\",\n        icon: \"github\",\n        loginManager: GithubManager,\n    },\n};\n\n\n@registerStyle(LoginStyle)\nclass SocialConnectButton extends UI.Primitive(\"button\") {\n    extraNodeAttributes(attr) {\n        let {specificInfo} = this.options;\n\n        attr.addClass(this.styleSheet.socialConnectButtonContainer);\n        attr.setStyle({\n            backgroundColor: specificInfo.color,\n        });\n    }\n\n    getLoginManager() {\n        return this.options.specificInfo.loginManager.getInstance();\n    }\n\n    render() {\n        let {specificInfo} = this.options;\n\n        return [\n            <FAIcon icon={specificInfo.icon} className={this.styleSheet.socialConnectButtonIcon} />,\n            <span> {specificInfo.name}</span>\n        ];\n    }\n\n    onMount() {\n        // Access the login manager, to load any scripts needed by the social provider\n        // TODO: try to find a way to not load all provider scripts on the login page\n        this.getLoginManager();\n        this.addClickListener(() => {\n            const loginElement = this.options.loginElement;\n            loginElement && loginElement.clearErrorMessage();\n            this.getLoginManager().login();\n        });\n    }\n}\n\n@registerStyle(LoginStyle)\nclass ThirdPartyLogin extends UI.Element {\n    getSocialApps() {\n        return SocialAppStore.all();\n    }\n\n    getConnectWith() {\n        return (\n            <div style={this.styleSheet.connectWith}>\n                {UI.T(\"or connect with\")}\n            </div>\n        );\n    }\n\n    getConnectWithButtons() {\n        return (\n            <div className={this.styleSheet.thirdPartyLoginContainer}>\n                {\n                    this.getSocialApps().map(\n                        socialApp => <SocialConnectButton specificInfo={socialLoginSpecificInfo[socialApp.name]}\n                                                          loginElement={this.options.loginElement} />\n                    )\n                }\n            </div>\n        );\n    }\n\n    render() {\n        return [\n            this.getConnectWith(),\n            this.getConnectWithButtons(),\n        ];\n    }\n}\n\n@registerStyle(LoginStyle)\nexport class LoginWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginWidget);\n    }\n\n    getEmailInput(emailIcon=\"user\") {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon\n                    icon={emailIcon}\n                    style={this.styleSheet.fontAwesomeIcon}\n                />\n                <EmailInput\n                    autofocus=\"autofocus\"\n                    placeholder=\"Email address\"\n                    name=\"email\"\n                    ref=\"emailInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getPasswordInput(passwordInputOptions={}) {\n        passwordInputOptions = Object.assign({\n            name: \"password\",\n            className: this.styleSheet.input,\n            ref: \"passwordInput\",\n            placeholder: \"Password\",\n            style: {marginBottom: \"20px\"}\n        }, passwordInputOptions);\n        return [\n            <div style={{width: \"80% !important\",}}>\n                <FAIcon icon=\"lock\"\n                        style={this.styleSheet.fontAwesomeIcon}\n                />\n                <PasswordInput {...passwordInputOptions} />\n            </div>\n        ];\n    }\n\n    getRememberMeCheckbox() {\n        return [\n            <CheckboxInput checked={true}\n                              ref=\"rememberInput\" className={this.styleSheet.rememberMeCheckbox} />,\n            <div className={this.styleSheet.rememberMe}>{UI.T(\"Remember me\")}</div>,\n        ];\n    }\n\n    getForgotPassword() {\n        return <Link className={this.styleSheet.forgotPassword} href=\"/accounts/password_reset\"\n                     value={UI.T(\"Forgot Password?\")} />;\n    }\n\n    getClearBothArea() {\n        return <div style={{clear: \"both\", height: \"20px\"}}/>;\n    }\n\n    getErrorArea() {\n        return <TemporaryMessageArea className={this.styleSheet.badLogin} ref=\"loginErrorMessage\"/>;\n    }\n\n    getSignInValue() {\n        return \"Sign In\";\n    }\n\n    getSignInButton() {\n        return <div className={this.styleSheet.signInButtonContainer}>\n            <SubmitInput className={this.styleSheet.signInButton} value={this.getSignInValue()} />\n        </div>;\n    }\n\n    getHorizontalLine() {\n        return <div className={this.styleSheet.horizontalLine}>\n        </div>;\n    }\n\n    getThirdPartyLogin() {\n        return SocialAppStore.all().length ? [\n            this.getHorizontalLine(),\n            <ThirdPartyLogin loginElement={this}/>,\n        ]: null;\n    }\n\n    render() {\n\n        return [\n            <form ref=\"form\">\n                {this.getEmailInput()}\n                {this.getPasswordInput()}\n                {this.getRememberMeCheckbox()}\n                {this.getForgotPassword()}\n                {this.getSignInButton()}\n                {this.getClearBothArea()}\n                {this.getErrorArea()}\n            </form>,\n            this.getThirdPartyLogin(),\n        ];\n    }\n\n    setErrorMessage(error, isError=true) {\n        this.loginErrorMessage.showMessage(error.message, isError? Theme.Global.getProperty(\"COLOR_DANGER\") : \"#000\", ERROR_TIMEOUT);\n    }\n\n    clearErrorMessage() {\n        this.loginErrorMessage.clear();\n    }\n\n    sendLogin() {\n        this.clearErrorMessage();\n        const data = {\n            email: this.emailInput.getValue(),\n            password: this.passwordInput.getValue(),\n            remember: this.rememberInput.getValue()\n        };\n        Ajax.postJSON(\"/accounts/login/\", data).then(\n            () => location.reload(),\n            (error) => this.setErrorMessage(error)\n        );\n    }\n\n    onMount() {\n        if (this.form) {\n            this.form.addNodeListener(\"submit\", (event) => {\n                this.sendLogin();\n                event.preventDefault();\n            });\n        }\n    }\n}\n\n\nclass RecaptchaWidget extends UI.Element {\n    render() {\n        return <div key={Math.random()} />;\n    }\n\n    redraw() {\n        super.redraw();\n\n        if (window.grecaptcha && window.GOOGLE_RECAPTCHA_PUBLIC_KEY) {\n            this.captchaId = grecaptcha.render(this.children[0].node, {\n                \"sitekey\": window.GOOGLE_RECAPTCHA_PUBLIC_KEY,\n            });\n        }\n    }\n\n    getResponse() {\n        return grecaptcha.getResponse(this.captchaId);\n    }\n\n    onMount() {\n        window.onRecaptchaCallback = () => this.redraw();\n\n        ensure(\"https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback\", () => {});\n    }\n}\n\n\n@registerStyle(LoginStyle)\nexport class RegisterWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerWidget);\n    }\n\n    getSignUpButton() {\n        return  <div className={this.styleSheet.signInButtonContainer}>\n                    <SubmitInput className={this.styleSheet.signInButton} value=\"Sign Up\" ref=\"submitButton\"/>\n                </div>;\n    }\n\n    getUsernameInput() {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon icon=\"user\"\n                        style={this.styleSheet.fontAwesomeIcon}/>\n                <TextInput\n                    placeholder=\"Username\"\n                    ref=\"usernameInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getCountryInput() {\n        return [\n            <div style={{width: \"100%\", marginBottom: \"20px\"}}>\n                <FAIcon icon=\"flag\" style={this.styleSheet.fontAwesomeIcon} />\n                <Select ref=\"countrySelect\" options={CountryStore.allWithNone(\"Don't set country\")}\n                        className={this.styleSheet.countrySelect} />\n                <div style={{clear: \"both\"}}/>\n            </div>\n        ];\n    }\n\n    render() {\n        let formFields = [\n            this.getEmailInput(),\n            this.getPasswordInput()\n        ];\n        if (accountsConfig.username) {\n            formFields.splice(1, 0, this.getUsernameInput());\n            formFields[0] = this.getEmailInput(\"envelope\");\n        }\n        if (accountsConfig.country) {\n            formFields[formFields.length - 1] = this.getPasswordInput({style: {}});\n            formFields.push(this.getCountryInput());\n        }\n        // TODO: This should be done in another way.\n        if (window.location.hostname !== \"localhost\") {\n            this.recaptchaWidget = <RecaptchaWidget />\n        }\n        return [\n            <form ref=\"form\">\n                {formFields}\n                <div className={this.styleSheet.recaptchaContainer}>\n                    {this.recaptchaWidget}\n                    {this.getSignUpButton()}\n                    <TemporaryMessageArea ref=\"errorArea\" />\n                </div>\n            </form>\n        ];\n    }\n\n    sendRegistration() {\n        this.submitButton.updateOptions({value: \"Signing up...\"});\n\n        const data = {\n            email: this.emailInput.getValue(),\n            recaptchaKey: this.recaptchaWidget && this.recaptchaWidget.getResponse(),\n            password: this.passwordInput.getValue(),\n        };\n        if (this.usernameInput) {\n            data.username = this.usernameInput.getValue();\n        }\n        if (this.countrySelect) {\n           data.countryId = this.countrySelect.get().id;\n        }\n        Ajax.postJSON(\"/accounts/signup_request/\", data).then(\n            () => {\n                this.recaptchaWidget && this.recaptchaWidget.hide();\n                this.submitButton.hide();\n                this.errorArea.showMessage(\"Done! Please check your email to continue\", \"black\", 26 * 60 * 60 * 1000);\n            },\n            (error) => {\n                this.errorArea.showMessage(\"Error in registration: \" + error.message, \"red\", 4000);\n                this.submitButton.updateOptions({value: \"Sign Up\"});\n                this.recaptchaWidget && this.recaptchaWidget.redraw();\n            }\n        );\n    }\n\n    onMount() {\n        this.form.addNodeListener(\"submit\", (event) => {\n            event.preventDefault();\n            this.sendRegistration();\n        })\n    }\n}\n\nRegisterWidget.prototype.getEmailInput = LoginWidget.prototype.getEmailInput;\nRegisterWidget.prototype.getPasswordInput = LoginWidget.prototype.getPasswordInput;\nRegisterWidget.prototype.getHorizontalLine = LoginWidget.prototype.getHorizontalLine;\n\n\n// original name: LoginRegisterSystem\n@registerStyle(LoginStyle)\nclass NormalLogin extends UI.Element {\n    constructor() {\n        super();\n\n        this.state = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginRegisterSystem);\n    }\n\n    getLoginButton() {\n        let style = {};\n\n        if (this.state === 0) {\n            style = this.styleSheet.selectedLeft;\n        }\n\n        return <div className={this.styleSheet.loginSystemButton}\n                    style={style}\n                    ref=\"loginButton\">\n            {UI.T(\"Log In\")}\n        </div>\n    }\n\n    getRegisterButton() {\n        let style = {};\n\n        if (this.state === 1) {\n            style = this.styleSheet.selectedRight;\n        }\n\n        return <div className={this.styleSheet.registerSystemButton}\n                    style={style}\n                    ref=\"registerButton\">\n            {UI.T(\"Sign Up\")}\n        </div>\n    }\n\n    render() {\n        let result = [\n            <div className={this.styleSheet.loginRegisterButtons}>\n                {this.getLoginButton()}\n                {this.getRegisterButton()}\n            </div>,\n            <Switcher ref=\"switcher\">\n                <LoginWidget ref=\"loginWidget\" active={this.state === 0} />\n                <RegisterWidget ref=\"registerWidget\" active={this.state === 1} />\n            </Switcher>\n        ];\n\n        return result;\n    }\n\n    onMount() {\n        this.loginButton.addClickListener(() => {\n            this.state = 0;\n            this.switcher.setActive(this.loginWidget);\n            this.redraw();\n        });\n\n        this.registerButton.addClickListener(() => {\n            this.state = 1;\n            this.switcher.setActive(this.registerWidget);\n            this.redraw();\n        });\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass LoginTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Log In\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedLeftClass);\n        }\n    }\n}\n\n@registerStyle(LoginStyle)\nclass RegisterTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Register\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedRightClass);\n        }\n    }\n}\n\n\nclass Login extends UI.Element {\n    render() {\n        return [\n            <NormalLogin/>,\n        ];\n    }\n}\n\nexport {Login};\n","import {UI, Modal} from \"UI\";\nimport {Login} from \"Login\";\nimport {Device} from \"Device\";\n\nclass LoginModal extends Modal {\n    getModalWindowStyle() {\n        if (Device.isTouchDevice()) {\n            return {\n                position: \"relative\",\n                padding: \"0\",\n                boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n                // margin: \"60px auto\",\n                display: this.options.display || \"block\",\n                left: \"0\",\n                right: \"0\",\n                width: \"100vw\",\n                height: \"600px\",\n                background: \"white\",\n                overflow: this.options.overflow || \"auto\",\n                maxHeight: \"100%\",\n                maxWidth: \"500px\",\n                verticalAlign: \"center\",\n                margin: \"0 auto\",\n            }\n        }\n        return {\n            position: \"relative\",\n            padding: \"0\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: \"500px\",\n            height: this.options.height || \"600px\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    render() {\n        return <Login/>;\n    }\n\n    static requireLogin(func) {\n        if (USER.isAuthenticated) {\n            return func();\n        } else {\n            this.show();\n        }\n    }\n}\n\nexport {LoginModal};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\nimport {Orientation} from \"ui/Constants\";\n\nclass VotingWidgetStyle extends StyleSheet {\n    height = 40;\n    size = 1;\n    likeColor = this.options.likeColor || \"#1E8921\"; //            |\n    dislikeColor = this.options.dislikeColor || \"#C5302C\"; //      |- Triadic colors + Shades\n    notVoteColor = this.options.notVoteColor || \"#313534\";\n    balanceColor = this.options.balanceColor || \"#313534\";\n    orientation = Orientation.VERTICAL;\n\n    @styleRule\n    container = {\n        height: \"40px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    mainClass = {\n        height: \"40px\",\n        lineHeight: \"40px\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"inline-block\",\n        float: \"right\",\n        textAlign: \"right\",\n    };\n\n    thumbsStyle = {\n        fontSize: this.height / 2 + \"px\",\n        lineHeight: this.height + \"px\",\n    };\n\n    @styleRule\n    displayStyle = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"3px\",\n    };\n\n    counterStyle = {\n        fontSize: 18 * this.size + \"px\",\n        fontWeight: \"900\",\n        color: this.balanceColor,\n    };\n\n    @styleRule\n    thumbsUpHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.likeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    thumbsDownHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.dislikeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    padding = {\n        width: \"3px\",\n        float: \"left\",\n        display: \"inline-block\",\n        height: this.height + \"px\",\n    };\n}\n\nexport {VotingWidgetStyle}","import {UI, registerStyle} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\nimport {UserReactionCollection} from \"UserReactionStore\";\nimport {Orientation, VoteStatus} from \"ui/Constants\";\nimport {VotingWidgetStyle} from \"./VotingWidgetStyle\";\n\nclass VotingWidget extends UI.Element {\n    setOptions(options) {\n        options = Object.assign({\n            votesBalance: 0,\n            userVote: VoteStatus.NONE,\n            size: 1,\n            likeColor: this.options.likeColor || \"#1E8921\", //            |\n            dislikeColor: this.options.dislikeColor || \"#C5302C\", //      |- Triadic colors + Shades\n            notVoteColor: this.options.notVoteColor || \"#313534\",\n            balanceColor: this.options.balanceColor || \"#313534\",\n            orientation: Orientation.VERTICAL,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            textAlign: \"center\",\n            marginRight: \"10px\",\n        });\n    }\n\n    render() {\n        let buttonsStyle = {\n            paddingLeft: \"4px\",\n            paddingRight: \"4px\",\n            paddingTop: \"0px\",\n            paddingBottom: \"0px\",\n            lineHeight: \"0px\",\n            backgroundColor: \"transparent\",\n            borderColor: \"transparent\",\n            fontSize: 40 * this.options.size + \"px\",\n            marginTop: 8 * this.options.size + \"px\",\n            marginBottom: 8 * this.options.size + \"px\",\n            display: this.options.orientation === Orientation.VERTICAL ? \"block\" : \"inline-block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            opacity: 0.7,\n            cursor: \"pointer\",\n            color: this.options.notVoteColor,\n        };\n\n        let likeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = this.options.likeColor;\n        }\n\n        let dislikeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = this.options.dislikeColor;\n        }\n\n        let counterStyle = {\n            fontSize: 18 * this.options.size + \"px\",\n            fontWeight: \"900\",\n            \"color\": this.options.balanceColor,\n        };\n\n        return [\n            <span className=\"fa fa-caret-up voteButton\" ref=\"likeButton\"\n                       faIcon=\"caret-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <span ref=\"counterContainer\" style={counterStyle}>\n                <UI.TextElement ref=\"counter\" value={this.getVotesBalance() + \"\"}/>\n            </span>,\n            <span className=\"fa fa-caret-down voteButton\" ref=\"dislikeButton\"\n                       faIcon=\"caret-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n\n    getVotesBalance() {\n        return this.options.votesBalance;\n    }\n\n    getUserVote() {\n        return this.options.userVote;\n    }\n}\n\nclass CommentVotingWidget extends VotingWidget {\n    getVotesBalance() {\n        return this.options.message.getVotesBalance();\n    }\n\n    getUserVote() {\n        return this.options.message.getUserVote();\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.updateTarget(this.options.message);\n    }\n\n    updateTarget(target) {\n        if (!target || target instanceof UserReactionCollection) {\n            this.options.target = target;\n            return;\n        }\n        const possibleTarget = target.getReactionCollection();\n        if (possibleTarget) {\n            this.options.target = possibleTarget;\n            return;\n        }\n        let tempListener = this.attachEventListener(target, \"createReactionCollection\", () => {\n            this.updateOptions({target: target.getReactionCollection()});\n            this.setupListener();\n            tempListener.remove();\n        });\n    }\n\n    setupListener() {\n        let target = this.options.target;\n        if (target) {\n            this.attachUpdateListener(target, () => {\n                this.redraw();\n            })\n        }\n    }\n\n\n    onMount() {\n        this.setupListener();\n        this.likeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.LIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.like();\n            }\n        });\n        this.dislikeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.DISLIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.dislike();\n            }\n        });\n\n        this.options.message.addListener(\"reaction\", () => {\n            this.redraw();\n        });\n    }\n}\n\n// TODO: rewrite\n@registerStyle(VotingWidgetStyle)\nclass CommentVotingWidgetWithThumbs extends CommentVotingWidget {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    getNumLikes() {\n        return this.options.message.getNumLikes();\n    }\n\n    getNumDislikes() {\n        return this.options.message.getNumDislikes();\n    }\n\n    render() {\n        let thumbsUpScoreStyle = {};\n        let thumbsDownScoreStyle = {};\n\n        // TODO: remove duplicate code\n        let likeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = thumbsUpScoreStyle.color = this.options.likeColor;\n            thumbsUpScoreStyle.fontWeight = \"bold\";\n        }\n\n        let dislikeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = thumbsDownScoreStyle.color = this.options.dislikeColor;\n            thumbsDownScoreStyle.fontWeight = \"bold\";\n        }\n\n        return [\n            <span className={this.styleSheet.displayStyle} style={thumbsUpScoreStyle}>{this.getNumLikes()}</span>,\n            <span className={\"fa fa-thumbs-up voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsUpHoverStyle} ref=\"likeButton\" faIcon=\"thumbs-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <div className={this.styleSheet.padding} />,\n            <span className={this.styleSheet.displayStyle} style={thumbsDownScoreStyle}>{this.getNumDislikes()}</span>,\n            <span className={\"fa fa-thumbs-down voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsDownHoverStyle} ref=\"dislikeButton\" faIcon=\"thumbs-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n}\n\nexport {VotingWidget, CommentVotingWidget, CommentVotingWidgetWithThumbs};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n\n\nclass ChatStyle extends StyleSheet {\n    navbarHeight = \"50px\";\n    renderMessageHeight = \"100px\";\n\n    userFontSize = \"1.1em\";\n    commentFontSize = \"1.1em\";\n\n    backgroundColor = \"#fff\";\n    hrBackgroundColor = \"#ddd\";\n    hoverBackgroundColor = \"#f8f8f8\";\n\n    @styleRule\n    renderMessageView = {\n        height: \"100%\",\n        width: \"100%\",\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n        wordBreak: \"break-word\",\n    };\n\n    @styleRule\n    renderMessage = {\n        height: this.renderMessageHeight,\n        maxHeight: this.renderMessageHeight,\n        width: \"100%\",\n        borderTop: \"1px solid \" + this.hrBackgroundColor,\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n    };\n\n    @styleRule\n    chatInput = {\n        height: \"100%\",\n        width: \"calc(100% - 50px)\",\n        // \"line-height\": \"30px\",\n        paddingTop: \"0\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        paddingLeft: \"8px\",\n        border: \"0px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"inline-block\",\n        float: \"left\",\n        outline: \"none\",\n        position: \"absolute\",\n        \":focus\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n        \":active\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n    };\n\n    @styleRule\n    messageBoxButton = {\n        textAlign: \"center\",\n        flex: \"1\",\n        backgroundColor: \"#fff\",\n        border: \"0\",\n        fontSize: \"18px\",\n        transition: \".2s\",\n        color: \"#333\",\n        padding: \"0\",\n        \":hover\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n            outline: \"none\",\n        },\n        \":focus:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n        \":hover:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n    };\n\n    previewButton = { // TODO: This is currently not restyled.\n        // We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: \"100%\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n        textTransform: \"uppercase\",\n        marginTop: \"15px\",\n    };\n\n    @styleRule\n    messageTimeStampHr = {\n        height: \"1px\",\n        marginTop: \"1.5em\",\n        marginBottom: \"1.5em\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        backgroundColor: this.hrBackgroundColor,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    messageTimeStamp = {\n        height: \"1.5em\",\n        width: \"auto\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        backgroundColor: this.backgroundColor,\n        textAlign: \"center\",\n        color: \"#222\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    groupChatMessage = {\n        width: \"100%\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    comment = {\n        paddingLeft: \"12px\",\n        paddingRight: \"12px\",\n        paddingTop: \"12px\",\n        paddingBottom: \"12px\",\n        \":hover\": {\n            backgroundColor: this.hoverBackgroundColor,\n        },\n    };\n\n    @styleRule\n    userHandle = {\n        fontSize: this.userFontSize,\n    };\n\n    @styleRule\n    commentContent = {\n        \" p\": {\n            marginTop: \"0\",\n            marginBottom: \"0\",\n            fontSize: this.commentFontSize,\n            color: \"#454545\",\n            // textAlign: \"justify\",\n            wordWrap: \"break-word\",\n        },\n    };\n\n    @styleRule\n    timestamp = {\n        color: \"#262626\",\n        fontWeight: \"bold\",\n        margin: \"0 10px\",\n    };\n}\n\nexport {ChatStyle};\n","// Plugins should be used to extends on runtime the functionality of a class, to easily split functionality\nimport {Dispatchable} from \"./Dispatcher\";\n\nclass Plugin extends Dispatchable {\n    constructor(parent) {\n        super();\n        this.linkToParent(parent);\n    }\n\n    linkToParent(parent) {\n        this.parent = parent;\n    }\n\n    name() {\n        return this.constructor.pluginName();\n    }\n\n    static pluginName() {\n        return this.name;\n    }\n}\n\n// TODO: rename this to use Mixin in title\nvar Pluginable = function (BaseClass) {\n    return class Pluginable extends BaseClass {\n        // TODO: this should probably take in a plugin instance also\n        registerPlugin(PluginClass) {\n            if (!this.hasOwnProperty(\"plugins\")) {\n                this.plugins = new Map();\n            }\n            // TODO: figure out plugin dependencies\n            let plugin = new PluginClass(this);\n            let pluginName = plugin.name();\n\n            if (this.plugins.has(pluginName)) {\n                console.error(\"You are overwriting an existing plugin: \", pluginName, \" for object \", this);\n            }\n\n            this.plugins.set(pluginName, plugin);\n        }\n\n        removePlugin(pluginName) {\n            let plugin = this.getPlugin(pluginName);\n            if (plugin) {\n                plugin.remove(this);\n                this.plugins.delete(plugin.name());\n            } else {\n                console.error(\"Can't remove plugin \", pluginName);\n            }\n        }\n\n        getPlugin(pluginName) {\n            if (!(typeof pluginName === \"string\")) {\n                pluginName = pluginName.pluginName();\n            }\n            if (this.plugins) {\n                return this.plugins.get(pluginName);\n            } else {\n                return null;\n            }\n        }\n    }\n};\n\nexport {Plugin, Pluginable};\n","import {UI, Switcher, AjaxButton, TextArea, Button, ButtonGroup, Panel, InfiniteScrollable, registerStyle} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {MessageThreadStore, MessageThread, MessageInstance, MessageInstanceStore, GroupChatStore} from \"MessageThreadStore\";\nimport {UserHandle} from \"UserHandle\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {LoginModal} from \"LoginModal\";\nimport {isDifferentDay} from \"Time\";\nimport {RunOnce} from \"Dispatcher\";\nimport {Ajax} from \"Ajax\";\nimport {ChatStyle} from \"ChatStyle\";\nimport {Pluginable} from \"Plugin\";\nimport {Level, Size} from \"ui/Constants\";\n\nimport {ButtonStyle} from \"ui/button/ButtonStyle\";\nimport {InputStyle} from \"ui/input/Style\";\n\nButtonStyle.getInstance().ensureFirstUpdate();\nInputStyle.getInstance().ensureFirstUpdate();\n\nclass PreviewMarkupButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            MarkupEditorModal.show({\n                classMap: ChatMarkupRenderer.classMap,\n                showCallback: (modal) => {modal.markupEditor.setValue(this.options.getValue());\n                                          modal.markupEditor.codeEditor.getAce().focus();},\n                hideCallback: (modal) => {this.options.setValue(modal.markupEditor.getValue());}\n            });\n        });\n    }\n}\n\nclass EditableMessage extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: true,\n        });\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    render() {\n        return [<Button ref=\"editButton\" onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</Button>,\n            <Switcher ref=\"contentSwitcher\">\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>\n        ];\n    }\n\n    showEditMode() {\n        if (!this.editContent) {\n            let writingSectionStyle = {\n                \"margin-top\": \"5px\"\n            };\n            let chatInputStyle = {\n                overflow: \"auto\",\n                height: \"60px\",\n                width: \"100%\",\n            };\n\n            this.editContent = <div style={writingSectionStyle}>\n                <TextArea ref={this.refLink(\"messageInput\")} style={chatInputStyle} className=\"form-control\"\n                             value={this.message.getContent()}/>\n                <ButtonGroup>\n                    <Button label={UI.T(\"Cancel\")} level={Level.DEFAULT} size={Size.SMALL}\n                               onClick={() => {this.hideEditMode()}} />\n                    <PreviewMarkupButton size={Size.SMALL}\n                                         getValue={() => {return this.messageInput.getValue();}}\n                                         setValue={(value) => {this.messageInput.setValue(value);this.messageInput.node.focus();}}\n                    />\n                    <Button label={UI.T(\"Save changes\")} level={Level.PRIMARY}\n                               onClick={() => this.saveMessageChanges()} size={Size.SMALL} />\n                    {this.options.deletable ? <Button level={Level.DANGER} label={UI.T(\"Delete\")} size={Size.SMALL}\n                                                         onClick={() => this.deleteMessage()}/> : \"\"}\n                </ButtonGroup>\n            </div>;\n        } else {\n            this.messageInput.setValue(this.message.getContent());\n        }\n\n        if (!this.contentSwitcher.hasChild(this.editContent)) {\n            this.contentSwitcher.appendChild(this.editContent);\n        }\n        this.contentSwitcher.setActive(this.editContent);\n    }\n\n    hideEditMode() {\n        this.contentSwitcher.setActive(this.contentContainer);\n    }\n\n    toggleEditMode() {\n        if (this.contentSwitcher.getActive() === this.contentContainer) {\n            this.showEditMode();\n        } else {\n            this.hideEditMode();\n        }\n    }\n\n    saveMessageChanges() {\n        let content = this.messageInput.getValue();\n\n        if (content) {\n            this.message.edit(content, () => {\n                this.hideEditMode();\n            });\n        }\n    }\n\n    deleteMessage() {\n        if (this.options.deletable) {\n            this.message.deleteMessage();\n        }\n    }\n\n    onMount() {\n        this.message.addListener(\"edit\", () => {\n            this.content.setValue(this.message.getContent());\n            this.redraw();\n        });\n\n        this.message.addListener(\"delete\", () => {\n            // TODO: refactor this, should delete message, not hide\n            this.hide();\n        });\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass GroupChatMessage extends EditableMessage {\n    setOptions(options) {\n        super.setOptions(options);\n        if (this.message.hasTemporaryId()) {\n            // TODO: this can also happen when editing a message, another case for later\n            this.message.addListener(\"postError\", () => {\n                this.redraw();\n            });\n            this.message.addListener(\"updateId\", () => {\n                // TODO: we might need to updated our position here\n                this.options.key = this.message.id;\n            })\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.groupChatMessage);\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    render() {\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n        // if (USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\"}, this.styleSheet.timestamp)}\n                            onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStampHr}>\n                <div className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        return [\n            date,\n            <div className={this.styleSheet.comment}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {editButton}\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass PrivateChatMessage extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.groupChatMessage);\n        return attr;\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    isOwnMessage() {\n        return this.message.userId === USER.id;\n    }\n\n    render() {\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div className={this.styleSheet.messageTimeStampHr}>\n                <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        let content = [\n            <div className={this.styleSheet.comment} style={{margin: \"8px 16px\", backgroundColor: \"#eee\",}}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n\n        let paddingDiv = <div style={{flexGrow: \"1000000\"}} />;\n\n        let result;\n        if (this.isOwnMessage()) {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {paddingDiv}\n                    {content}\n                </div>\n            ];\n        } else {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {content}\n                    {paddingDiv}\n                </div>\n            ];\n        }\n\n        return result;\n    }\n}\n\n\nclass ChatMessageScrollSection extends InfiniteScrollable {\n    setOptions(options) {\n        options = Object.assign({\n            entryComparator: (a, b) => {\n                return a.getNormalizedId() - b.getNormalizedId();\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    getTopMessage() {\n        return this.children[1];\n    }\n}\n\n\nlet ChatWidget = (ChatMessageClass) => {\n    @registerStyle(ChatStyle)\n    class ChatWidgetClass extends Pluginable(Panel) {\n        getDefaultOptions(options) {\n            return {\n                dateTimestamps: true,\n                renderMessage: (messageInstance) => {\n                    return <ChatMessageClass key={messageInstance.getNormalizedId()} message={messageInstance} />;\n                }\n            };\n        }\n\n        get messageThread() {\n            return this.options.messageThread;\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n            this.initializeShowLoadMoreButton();\n        }\n\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.setStyle({\n                display: \"flex\",\n                flexDirection: \"column\",\n            });\n        }\n\n        canOverwrite() {\n            return false;\n        }\n\n        initializeShowLoadMoreButton() {\n            // TODO: this is a shitty way of knowing if there are more messages!\n            if (this.messageThread.getNumMessages() >= 20) {\n                this.showLoadMoreButton = true;\n            }\n        }\n\n        createVirtualMessage(request, message) {\n            let virtualId = this.messageThread.getMaxMessageId() + \"-\" + MessageInstanceStore.generateVirtualId() + \"-\" + Math.random();\n            let virtualMessageInstance = MessageInstanceStore.createVirtualMessageInstance(message, this.messageThread, virtualId);\n            request.virtualId = virtualId;\n            return virtualMessageInstance;\n        }\n\n        sendMessage(message) {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            let request = Object.assign({}, this.options.baseRequest || {});\n\n            message = message || this.chatInput.getValue();\n            message = message.trim();\n\n            if (!message) {\n                return;\n            }\n            request.message = message;\n\n            // Create a virtual message to be drawn temporarily\n            let virtualMessageInstance = this.createVirtualMessage(request, message);\n\n            let onSuccess = (data) => {\n                if (data.error) {\n                    virtualMessageInstance.setPostError(data.error);\n                    return;\n                }\n                if (virtualMessageInstance && virtualMessageInstance.hasTemporaryId()) {\n                    MessageInstanceStore.applyUpdateObjectId(virtualMessageInstance, data.messageId);\n                    GlobalState.importState(data.state);\n                }\n            };\n\n            let onError = (error) => {\n                if (virtualMessageInstance) {\n                    virtualMessageInstance.setPostError(42);\n                }\n                console.log(\"Error in sending chat message:\\n\" + error.message);\n                console.log(error.stack);\n            };\n\n            this.messageWindow.scrollToBottom();\n\n            this.chatInput.setValue(\"\");\n            this.chatInput.dispatch(\"messageSent\");\n\n            Ajax.postJSON(this.getPostURL(), request, {disableStateImport: true}).then(onSuccess, onError);\n        }\n\n        saveScrollPosition() {\n            this.scrollPosition = this.messageWindow.node.scrollTop;\n            this.scrollPercent = this.scrollPosition / (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n        }\n\n        applyScrollPosition() {\n            this.messageWindow.node.scrollTop = this.scrollPosition || this.messageWindow.node.scrollHeight;\n            this.chatInput.node.focus();\n        }\n\n        addResizeListeners() {\n            this.messageWindow.addNodeListener(\"scroll\", () => {\n                let scrollTop = this.messageWindow.node.scrollTop;\n                if (scrollTop < 20) {\n                    this.loadMoreMessages();\n                }\n            });\n\n            this.addListener(\"hide\", () => {this.saveScrollPosition();});\n            this.addListener(\"show\", () => {this.applyScrollPosition();});\n\n            window.addEventListener(\"resize\", () => {\n                this.saveScrollPosition();\n                this.setAdaptiveHeight();\n            });\n\n            this.addListener(\"resize\", () => {\n                this.setAdaptiveHeight();\n                this.messageWindow.node.scrollTop = this.scrollPercent * (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n            });\n        }\n\n        getDesiredHeight() {\n            if (this.options.style && this.options.style.height) {\n                return this.options.style.height;\n            }\n            let viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            let navbarHeight = document.getElementById(\"navbar\").offsetHeight; // use offsetHeight to accommodate padding and margin\n\n            let availableHeight = viewportHeight - navbarHeight - (this.options.extraHeightOffset || 25);\n            return Math.max(availableHeight || 0, 100) + \"px\"; // it needs at least 100px\n        }\n\n        setAdaptiveHeight() {\n            this.setStyle(\"height\", this.getDesiredHeight());\n        }\n\n        setHeight(height) {\n            this.setStyle(\"height\", height);\n        }\n\n        renderMessageView() {\n            let loadMoreButton;\n\n\n            if (this.showLoadMoreButton) {\n                loadMoreButton = (\n                    <div className=\"text-center\">\n                        <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                       style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                        />\n                    </div>\n                );\n            }\n\n            return [\n                <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                          ref=\"messageWindow\"\n                                          entryRenderer={this.options.renderMessage}\n                                          entries={this.messageThread.getMessages()}\n                                          staticTop={loadMoreButton} />\n            ];\n        }\n\n        getGetType() {\n            return \"GET\";\n        }\n\n        loadMoreMessages() {\n            // TODO: wrap this in something\n            if (this.outstandingRequest) {\n                return;\n            }\n            this.outstandingRequest = true;\n\n            const topMessage = this.messageWindow.getTopMessage();\n\n            let messageInstances = this.messageThread.getMessages();\n            let lastMessageId = 999999999;\n            if (messageInstances.length) {\n                lastMessageId = messageInstances[0].id;\n            }\n\n            let request = Object.assign({\n                lastMessageId: lastMessageId\n            }, this.options.baseRequest || {});\n\n            const oldScrollHeight = this.messageWindow.node.scrollHeight;\n\n            if (this.loadMoreButton) {\n                this.loadMoreButton.ajaxCall({\n                    url: this.getGetURL(),\n                    type: this.getGetType(),\n                    dataType: \"json\",\n                    data: request,\n                    complete: () => {\n                        //TODO(@Rocky): find out why this doesn't work\n                        this.outstandingRequest = false;\n                    }\n                }).then((data) => {\n                    const emptyData = !data.state || !data.state.MessageInstance;\n                    if (emptyData || data.state.MessageInstance.length < 20) {\n                        if (this.loadMoreButton) {\n                            this.loadMoreButton.hide();\n                        }\n                        this.showLoadMoreButton = false;\n\n                        if (emptyData) {\n                            return;\n                        }\n                    }\n\n                    let scrollDelta = 0;\n                    if (!topMessage.shouldShowDayTimestamp()) {\n                        scrollDelta += topMessage.dayTimestamp.getHeight();\n                        topMessage.dayTimestamp.addClass(\"hidden\");\n                    }\n                    this.messageWindow.scrollToHeight(this.messageWindow.node.scrollHeight - oldScrollHeight - scrollDelta);\n\n                    this.outstandingRequest = false;\n                });\n            }\n        }\n\n        renderMessageBox() {\n            return <div ref=\"writingSection\" className={this.styleSheet.renderMessage}>\n                <TextArea readOnly={this.messageThread.muted}\n                             ref=\"chatInput\"\n                             placeholder=\"Type a message...\"\n                             className={this.styleSheet.chatInput} />\n                <div style={{display: \"flex\", flexDirection: \"column\", height: \"100%\", position: \"absolute\", right: \"0px\", width: \"50px\"}}>\n                    <Button ref=\"sendMessageButton\"\n                               faIcon=\"paper-plane\"\n                               disabled={this.messageThread.muted}\n                               onClick={() => this.sendMessage()}\n                               className={this.styleSheet.messageBoxButton} />\n                    <PreviewMarkupButton ref=\"previewMessageButton\"\n                                   getValue={() => {return this.chatInput.getValue();}}\n                                   setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                                   className={this.styleSheet.messageBoxButton}\n                                   faIcon=\"eye\" />\n                </div>\n            </div>;\n        }\n\n        renderStatus() {\n            if (this.messageThread.muted) {\n                return [\n                    <h4 style={{color: \"red\", textAlign: \"center\"}}>This chat is currently turned off.</h4>\n                ];\n            } else {\n                if (USER.isSuperUser) {\n                    let userData = [];\n                    for (let userId of this.messageThread.online) {\n                        userData.push([\n                            <UserHandle id={parseInt(userId)}/>\n                        ]);\n                    }\n                    return userData;\n                }\n            }\n        }\n\n        render() {\n            return [\n                this.renderMessageView(),\n                this.renderMessageBox(),\n            ];\n        }\n\n        getDefaultPlugins() {\n            return ChatWidget.defaultPlugins || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            for (let plugin of (this.options.plugins || this.getDefaultPlugins())) {\n                this.registerPlugin(plugin);\n            }\n\n            this.attachUpdateListener(this.messageThread, (event) => {\n                if (event.type === \"muted\") {\n                    this.redraw();\n                }\n            });\n\n            this.attachListener(this.messageThread, \"newMessage\", (event) => {\n                //console.log(\"Received chat message: \", event);\n                let messageInstance = MessageInstanceStore.get(event.data.id);\n\n                // We calculate before adding new message\n                let messageWindowScrollTop = this.messageWindow.node.scrollTop;\n                let messageWindowscrollMax = this.messageWindow.node.scrollHeight - this.messageWindow.node.offsetHeight;\n                this.messageWindow.insertEntry(messageInstance);\n\n                // If we were at the bottom before message was appended, scroll automatically\n                if (messageWindowScrollTop + 20 > messageWindowscrollMax) {\n                    setTimeout(() => {\n                        this.messageWindow.scrollToBottom();\n                    }, 0);\n                }\n            });\n\n            this.addResizeListeners();\n        }\n    }\n    return ChatWidgetClass;\n};\n\nclass GroupChatWidget extends ChatWidget(GroupChatMessage) {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            overflowY: \"hidden\",\n        });\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                   style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                      ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages()}\n                                      staticTop={loadMoreButton}/>\n        ];\n    }\n}\n\nclass PrivateChatWidget extends ChatWidget(PrivateChatMessage) {\n    setOptions(options) {\n        options = Object.assign({\n            messageThread: options.privateChat.getMessageThread(),\n            baseRequest: {\n                userId: options.privateChat.getOtherUserId(),\n                privateChatId: options.privateChat.id\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    setPrivateChat(privateChat) {\n        this.options.privateChat = privateChat;\n        this.setOptions(this.options);\n    }\n\n    getPostURL() {\n        return \"/chat/private_chat_post/\";\n    }\n\n    getGetType() {\n        return \"POST\"; // It might create a chat if it doesn't have one\n    }\n\n    getGetURL() {\n        return \"/chat/private_chat_state/\";\n    }\n}\n\nclass VotableChatMessage extends GroupChatMessage {\n    render() {\n        let result = super.render();\n        result[1].options.children.push(<CommentVotingWidgetWithThumbs style={{display: \"inline-block\"}} message={this.options.message} />);\n        return result;\n    }\n}\n\nclass VotableGroupChatWidget extends ChatWidget(VotableChatMessage) {\n    setOptions(options) {\n        options.messageThread = options.messageThread || MessageThreadStore.get(GroupChatStore.get(options.chatId).messageThreadId);\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n}\n\nexport {ChatWidget, EditableMessage,\n    GroupChatWidget, PrivateChatWidget, VotableGroupChatWidget,\n    GroupChatMessage, PrivateChatMessage, VotableChatMessage,\n    PreviewMarkupButton, ChatMessageScrollSection};\n","import {StyleSheet, styleRule} from \"UI\";\n\nclass CommentWidgetStyle extends StyleSheet {\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n    };\n\n    writingSectionStyle = {\n        height: \"auto\",\n        marginTop: \"10px\",\n    };\n\n    @styleRule\n    chatInputStyle = {\n        height: \"30px\",\n        width: \"100%\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        outline: \"none\",\n        paddingLeft: \"8px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"block\",\n        border: \"1px solid #aaa\",\n        \":focus\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    chatInputMax = {\n        height: \"120px\",\n    };\n\n    previewButtonStyle = { // TODO: This is currently not restyled. We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"auto\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n}\n\nexport {CommentWidgetStyle}","import {UI, TimePassedSpan, Switcher, AjaxButton, TextArea, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {GroupChatStore, MessageThreadStore, MessageThread, MessageInstance} from \"MessageThreadStore\";\nimport {ChatMessageScrollSection, ChatWidget, EditableMessage} from \"ChatWidget\";\nimport {isDifferentDay, StemDate} from \"Time\";\nimport {UserHandle} from \"UserHandle\";\nimport {LoginModal} from \"LoginModal\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {Level} from \"ui/Constants\";\nimport {MarkupRenderer} from \"MarkupRenderer\";\nimport {CommentWidgetStyle} from \"./CommentWidgetStyle\";\n\n\nclass ThreadMessage extends EditableMessage {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: false,\n        });\n    }\n\n    render() {\n        let messageDate = <TimePassedSpan timeStamp={this.message.getDate()} style={{color: \"#666 !important\", textTransform: \"uppercase\", fontSize: \".85em\",}} />\n\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\", padding: \"0 10px\", fontSize: \"1.05em\", lineHeight: \"0px\",})} onClick={() => this.toggleEditMode()}>\n                edit\n            </a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <div ref=\"contentContainer\">\n                    <MarkupRenderer ref=\"content\" value={this.message.getContent()} />\n                </div>\n            </Switcher>;\n        }\n\n        let votes = <CommentVotingWidgetWithThumbs height={40} style={{float: \"left\"}} message={this.message} ref=\"commentVotingWidget\" />;\n\n        return [\n            <span style={{float: \"right\", display: \"inline-block\", height: \"40px\", lineHeight: \"40px\",}}>{messageDate}</span>,\n            <div style={{\n                height: \"40px\",\n                lineHeight: \"40px\",\n            }}>\n                <div style={{\n                    height: \"40px\",\n                    lineHeight: \"40px\",\n                    display: \"inline-block\",\n                    float: \"left\",\n                    fontSize: \".95em\",\n                    color: \"#333\",\n                }}>\n                    <UserHandle userId={this.message.userId} style={{fontSize: \"1.1em\",}}/>\n                </div>\n                {editButton}\n            </div>,\n            <div style={{\n                paddingTop: \"5px\",\n                fontSize: \"16px\",\n            }}>\n                {this.contentSwitcher}\n            </div>,\n            <div style={{\n                height: \"40px\",\n            }}>\n                {votes}\n            </div>,\n            <div style={{\n                height: \"1px\",\n                width: \"100%\",\n                backgroundColor: \"#ddd\",\n            }}></div>,\n        ];\n    }\n}\n\nclass ToggleLogin extends UI.Primitive(\"span\") {\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            LoginModal.show();\n            return;\n        });\n    }\n}\n\n\n@registerStyle(BlogStyle)\nclass BlogCommentWidget extends ChatWidget(ThreadMessage) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            entryComparator: (a, b) => {\n                return b.getNormalizedId() - a.getNormalizedId();\n            }\n        })\n    }\n\n    get commentWidgetStyle() {\n        return CommentWidgetStyle.getInstance();\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                style={this.commentWidgetStyle.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages(true)}\n                                      entryComparator={this.options.entryComparator}\n                                      staticTop={loadMoreButton} />\n        ];\n    }\n\n    renderMessageBox() {\n        return [\n            <div ref=\"writingSection\" style={this.commentWidgetStyle.writingSectionStyle}>\n                <TextArea readOnly={this.messageThread.muted}\n                          ref=\"chatInput\"\n                          onChange={() => {\n                              if (this.chatInput.getValue()) {\n                                  this.chatInput.addClass(this.commentWidgetStyle.chatInputMax);\n                              } else {\n                                  this.chatInput.removeClass(this.commentWidgetStyle.chatInputMax);\n                              }\n                          }}\n                          className={this.commentWidgetStyle.chatInputStyle}\n                          placeholder=\"Leave a comment...\"/>\n                <Button disabled={this.messageThread.muted}\n                           label=\"SUBMIT\"\n                           ref=\"sendMessageButton\"\n                           className={this.styleSheet.sendMessageButtonStyle}\n                           level={Level.PRIMARY}\n                           onClick={() => this.sendMessage()} />\n                {/*{this.messageThread.hasMarkupEnabled() ?\n                        <PreviewMarkupButton disabled={this.messageThread.muted} ref=\"markupButton\" style={previewButtonStyle}\n                                         getValue={() => {return this.chatInput.getValue();}}\n                                         setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                        /> : null}*/ /* UNCOMMENT THIS !! */}\n            </div>\n        ];\n    }\n\n    render() {\n        return [\n            this.renderMessageBox(),\n            this.renderMessageView(),\n        ];\n    }\n\n    getDefaultPlugins() {\n        return CommentWidget.defaultPlugins || [];\n    }\n\n    createVirtualMessage(request, message) {\n        return null;\n    }\n}\n\n@registerStyle(BlogStyle)\nclass CommentWidget extends BlogCommentWidget {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.key = this.messageThread.id;\n\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n        this.options.dateTimestamps = false;\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    renderMessageBox() {\n        if (USER.isAuthenticated) {\n            return super.renderMessageBox();\n        } else {\n            return <div style={{\n                color: \"#333\",\n                paddingTop: \"5px\",\n                paddingBottom: \"5px\",\n            }}>You need to&nbsp;\n                <ToggleLogin style={{\n                    backgroundColor: \"#eee\",\n                    cursor: \"pointer\",\n                    padding: \"5px 10px\",\n                }}>\n                    login\n                </ToggleLogin>\n                &nbsp;to send a comment.</div>;\n        }\n    }\n\n    render() {\n        let commentsCount = this.messageThread.getMessages().length;\n        let commentsTitle;\n\n        commentsTitle = <div className={this.styleSheet.commentsTitle}>\n            {commentsCount} {commentsCount != 1 ? \"comments\" : \"comment\"}\n        </div>;\n\n        return [commentsTitle, super.render()];\n    }\n}\n\nclass AsyncCommentThread extends UI.Element {\n    getMessageThread() {\n        let groupChat = GroupChatStore.get(this.options.chatId);\n        return groupChat && groupChat.getMessageThread();\n    }\n\n    render() {\n        let messageThread = this.getMessageThread();\n        let commentWidgetOptions = {\n            marginBottom: \"10px\",\n            paddingBottom: \"10px\",\n            height: \"auto\",\n            width: \"100%\",\n            marginTop: \"50px\",\n            marginLeft: \"0px\",\n            marginRight: \"0px\",\n            border: \"0px\",\n            maxWidth: \"900px\"\n        };\n\n        if (messageThread) {\n            return [<CommentWidget ref=\"commentsSection\" chatId={this.options.chatId} messageThread={messageThread}\n                                   style={commentWidgetOptions} />];\n        } else {\n            GroupChatStore.fetch(this.options.chatId, (groupChat) => {\n                this.redraw();\n            });\n            return [\n                <div style={{\n                    width: \"100%\",\n                    height: \"60px\",\n                    lineHeight: \"60px\",\n                    fontSize: \"1em\",\n                    textAlign: \"center\",\n                    textTransform: \"uppercase\",\n                    fontWeight: \"bold\",\n                }}>\n                    <span className=\"fa fa-spinner fa-spin\" style={{\n                        padding: \"0 8px\",\n                    }}/>\n                    Comments loading...\n                </div>\n            ];\n        }\n    }\n}\n\nexport {CommentWidget, AsyncCommentThread};\n","import {UI} from \"./UIBase\";\nimport {keyframesRule} from \"../decorators/Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {StyleSheet} from \"./Style\";\n\nfunction getCircleStyle(size, borderSize, color, animationName, animationDuration) {\n    return {\n        position: \"absolute\",\n\n        height: size + \"px\",\n        width: size + \"px\",\n\n        border: borderSize + \"px solid \" + color,\n        borderRadius: size + \"px\",\n        borderRight: borderSize + \"px transparent\",\n        borderBottom: borderSize + \"px transparent\",\n\n        rotate: \"0deg\",\n        transform: \"rotate(45deg)\",\n\n        animationName: animationName,\n        animationDuration: animationDuration,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"linear\",\n    };\n}\n\nfunction createCircle(size, borderSize, color, animationName, animationDuration) {\n    return <div style={getCircleStyle(size, borderSize, color, animationName, animationDuration)} />;\n}\n\nclass RotatingHelperStyle extends StyleSheet {\n    @keyframesRule\n    rotateClockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(360deg)\"\n        }\n    };\n\n    @keyframesRule\n    rotateCounterclockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(-360deg)\"\n        }\n    }\n}\n\n@registerStyle(RotatingHelperStyle)\nclass ConcentricCirclesLoadingScreen extends UI.Element {\n    render() {\n        let centerConstant = 100;\n        return <div style={{\n            height: \"100%\",\n            width: \"100%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginTop: \"200px\",\n        }}>\n            {createCircle(225 - centerConstant, 5, \"#3a4859\", this.styleSheet.rotateClockwise, \"2.25s\")}\n            {createCircle(200 - centerConstant, 4, \"#666666\", this.styleSheet.rotateCounterclockwise, \"1.5s\")}\n            {createCircle(175 - centerConstant, 3, \"#aaaaaa\", this.styleSheet.rotateClockwise, \"1s\")}\n            {createCircle(150 - centerConstant, 2, \"#20232d\", this.styleSheet.rotateCounterclockwise, \"3s\")}\n        </div>;\n    }\n}\n\nexport {ConcentricCirclesLoadingScreen}\n","import {ensure} from \"../base/Require\";\n\nlet DelayedElement = (BaseClass) => class DelayedElement extends BaseClass {\n    applyNodeAttributesNotLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributesLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributes() {\n        if (!this._loaded) {\n            return this.applyNodeAttributesNotLoaded();\n        } else {\n            return this.applyNodeAttributesLoaded();\n        }\n    }\n\n    renderNotLoaded() {\n        return \"Loading component...\";\n    }\n\n    renderLoaded() {\n        return super.render();\n    }\n\n    render() {\n        if (!this._loaded) {\n            return this.renderNotLoaded();\n        } else {\n            return this.renderLoaded();\n        }\n    }\n\n    setLoaded() {\n        if (this._loaded) {\n            return;\n        }\n        this._loaded = true;\n        if (!this.node) {\n            return;\n        }\n        super.redraw();\n        if (!this._executedMount) {\n            this._executedMount = true;\n            this.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        // Implement here anything you might need\n    }\n\n    redrawNotLoaded() {\n        this.beforeRedrawNotLoaded();\n        // The previous code might have triggered a redraw, skip if that was the case\n        if (!this._loaded) {\n            super.redraw();\n        }\n    }\n\n    redrawLoaded() {\n        super.redraw();\n    }\n\n    redraw() {\n        if (!this._loaded) {\n            return this.redrawNotLoaded();\n        }\n        return this.redrawLoaded();\n    }\n\n    onMount() {\n        // Nothing to be done here\n    }\n\n    onDelayedMount() {\n        super.onMount();\n    }\n};\n\nlet ScriptDelayedElement = (BaseClass, scripts) => class ScriptDelayedElement extends DelayedElement(BaseClass) {\n    beforeRedrawNotLoaded() {\n        // TODO: what happens if this gets destroyed before the load finishes? Should cancel this\n        ensure(scripts, () => {\n            this.setLoaded();\n        });\n    }\n};\n\nexport {DelayedElement, ScriptDelayedElement}\n","import {UI} from \"./UIBase\";\nimport {ConcentricCirclesLoadingScreen} from \"./ConcentricCirclesLoadingScreen\";\nimport {DelayedElement} from \"./DelayedElement\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {CardPanel} from \"./CardPanel\";\nimport {Level} from \"./Constants\";\n\n// You can configure the loading/error states by defining the \"renderLoading\" and \"renderError\" attributes of the\n// function somewhere globally in your app.\n// Example:\n// StateDependentElement.renderLoading = \"Loading...\";\n// or\n// StateDependentElement.renderLoading = () => <MyCustomLoadingAnimation />\n// StateDependentElement.renderError = (error) => <MyCustomErrorMessageClass error={error} />\n\nexport let StateDependentElement = (BaseClass) => class StateDependentElementClass extends DelayedElement(BaseClass) {\n    importState(data) {\n        GlobalState.importState(data.state || {});\n        for (let key of Object.keys(data)) {\n            if (key !== \"state\") {\n                this.options[key] = data[key];\n            }\n        }\n    }\n\n    getAjaxUrl() {\n        let url = location.pathname;\n        if (!url.endsWith(\"/\")) {\n            url += \"/\";\n        }\n        return url;\n    }\n\n    getAjaxRequest() {\n        return {};\n    }\n\n    renderNotLoaded() {\n        let renderLoading = StateDependentElement.renderLoading;\n        if (typeof renderLoading === \"function\") {\n            renderLoading = renderLoading();\n        }\n        return renderLoading;\n    }\n\n    setError(error) {\n        this.options.error = error;\n    }\n\n    renderError() {\n        let renderError = StateDependentElement.renderError;\n        if (typeof renderError === \"function\") {\n            renderError = renderError(this.options.error);\n        }\n        return renderError;\n    }\n\n    renderLoaded() {\n        if (this.options.error) {\n            return this.renderError();\n        }\n        return super.renderLoaded();\n    }\n\n    onDelayedMount() {\n        if (!this.options.error) {\n            super.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        Ajax.getJSON(this.getAjaxUrl(), this.getAjaxRequest()).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            (error) => {\n                this.setError(error);\n                this.setLoaded();\n            }\n        );\n    }\n};\n\nStateDependentElement.renderLoading = () => <ConcentricCirclesLoadingScreen/>;\n\nStateDependentElement.renderError = (error, message) => {\n    return <div style={{maxWidth: \"300px\", margin: \"0 auto\", marginTop: \"30px\"}}>\n            <CardPanel title={UI.T(\"Error in opening the URL\")} level={Level.ERROR}>\n                <h3>{message || error.message}</h3>\n            </CardPanel>\n        </div>;\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, Link, Modal, Form, FormField, TextInput, FormGroup, CheckboxInput, TemporaryMessageArea} from \"UI\";\nimport {StemDate} from \"Time\";\nimport {GlobalState} from \"State\";\nimport {BlogEntryStore} from \"BlogStore\";\nimport {ArticleStore} from \"ArticleStore\";\nimport {MarkupEditor} from \"markup/MarkupEditor\";\nimport {UserHandle} from \"UserHandle\";\nimport {BlogArticleRenderer} from \"./BlogArticleRenderer\";\nimport {ArticleEditor} from \"ArticleEditor\";\nimport {AsyncCommentThread} from \"CommentWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {slugify} from \"Utils\";\nimport {FAIcon} from \"FontAwesome\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Route, Router} from \"Router\";\nimport {Dispatcher} from \"Dispatcher\";\n\nimport {Theme} from \"ui/style/Theme\";\nimport {Level} from \"ui/Constants\";\n\nexport class BlogEntryEditModal extends Modal {\n    getModalWindowStyle() {\n        return Object.assign({}, super.getModalWindowStyle(), {\n            margin: \"0 auto\",\n            maxHeight: \"100%\",\n            overflow: \"initial\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            top: \"1vh\",\n            height: \"98vh\",\n        });\n    }\n\n    render() {\n        let entry = BlogEntryStore.get(this.options.entryId);\n        let article = entry.getArticle();\n\n        let discussionButton = null;\n        if (!entry.discussionId) {\n            discussionButton = <Button level={Level.WARNING} label=\"Create discussion\"\n                                       onClick={() => this.createDiscussion()} style={{marginLeft: \"5px\"}}/>;\n        }\n\n        return [\n            <h3>Edit Entry</h3>,\n            <Form>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" value={article.name} />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" value={entry.urlName} />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\" value={entry.visible} />\n                </FormField>\n                <Button level={Level.PRIMARY} label=\"Change settings\" onClick={() => this.changeSettings()} />\n                {discussionButton}\n                <TemporaryMessageArea ref=\"messageArea\"/>\n            </Form>,\n            <ArticleEditor ref=\"contentEditor\" articleId={article.id} style={{flex: \"1\"}} />\n        ];\n    }\n\n    changeSettings() {\n        let title = this.titleInput.getValue();\n        let urlName = this.urlInput.getValue();\n\n        let request = {\n            entryId: this.options.entryId,\n            isVisible: this.visibleCheckbox.getValue(),\n        };\n\n        if (title) {\n            request.title = title;\n        }\n\n        if (urlName) {\n            request.urlName = urlName;\n        }\n\n        Ajax.postJSON(\"/blog/change_entry_settings/\", request).then(\n            (data) => {\n                if (data.urlName) {\n                    Router.changeURL([\"blog\", data.urlName]);\n                }\n                this.hide();\n            }\n        );\n    }\n\n    createDiscussion() {\n        let request = {\n            entryId: this.options.entryId\n        };\n\n        Ajax.postJSON(\"/blog/create_entry_discussion/\", request).then(\n            () => this.hide()\n        );\n    }\n}\n\nexport class NewBlogEntryModal extends Modal {\n    render() {\n        return [\n            <h1>New Entry</h1>,\n            <FormGroup>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\"/>\n                </FormField>\n                <Button label=\"Add Entry\" level={Level.PRIMARY} onClick={() => {this.addEntry()}}/>\n                <MarkupEditor ref=\"postContentMarkup\" style={{height: \"450px\"}} />\n            </FormGroup>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.titleInput.onKeyUp(() => {\n            this.urlInput.setValue(slugify(this.titleInput.getValue()));\n        });\n    }\n\n    addEntry() {\n        let data = {};\n\n        let title = this.titleInput.getValue();\n        if (title) {\n            data.title = title;\n        }\n\n        let urlName = this.urlInput.getValue();\n        if (urlName) {\n            data.urlName = urlName;\n        }\n\n        data.isVisible = this.visibleCheckbox.getValue();\n\n        let content = this.postContentMarkup.getValue();\n        if (content) {\n            data.content = content;\n        }\n\n        Ajax.postJSON(\"/blog/add_entry/\", data).then(\n            (data) => {\n                let blogEntry = BlogEntryStore.get(data.blogEntryId);\n                Router.changeURL([\"blog\", blogEntry.urlName]);\n                this.hide();\n            }\n        );\n    }\n}\n\nclass BlogEntryPreview extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            position: \"relative\",\n            maxHeight: \"420px\",\n            marginTop: \"45px\",\n            marginBottom: \"45px\",\n        });\n    }\n\n    canOverwrite(obj) {\n        return super.canOverwrite(obj) && this.options.entryId === obj.options.entryId;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    getEntryURL() {\n        return \"/blog/\" + this.getBlogEntry().urlName + \"/\";\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n        const article = this.getBlogArticle();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            color: \"#777\",\n            fontSize: \"1em\",\n            margin: \"0\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>{UI.T(\"Last update on\")} {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        return [\n            <div style={{height: \"100%\",}}>\n                <div style={{\n                    boxShadow: \"0px 0px 10px rgb(160, 162, 168)\",\n                    \"background-color\": \"#fff\",\n                    \"padding\": \"1% 4% 10px 4%\",\n                    \"margin\": \"0 auto\",\n                    \"width\": \"900px\",\n                    \"max-width\": \"100%\",\n                    position: \"relative\"\n                }}>\n                    <div style={blogStyle.writtenBy}>\n                        {UI.T(\"Written by\")} <UserHandle\n                        userId={article.userCreatedId}/>, {publishedFormat}.{modifiedFormat}\n                    </div>\n                    <div style={blogStyle.title}>\n                        <Link href={this.getEntryURL()} value={article.name}\n                              style={{\"text-decoration\": \"none\", \"color\": \"inherit\"}}/>\n                    </div>\n                    <BlogArticleRenderer article={article} style={blogStyle.blogArticleRenderer}/>\n                    <div className={blogStyle.whiteOverlay}></div>\n                    <Link href={this.getEntryURL()} style={blogStyle.link} value={UI.T(\"Continue reading\")}/>\n                </div>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryView extends UI.Element {\n    get pageTitle() {\n        return this.getBlogArticle().name;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSheet().blogEntryView);\n    }\n\n    getComments() {\n        let chatId = this.getBlogEntry().discussionId;\n        if (!chatId) {\n            return null;\n        }\n        return (<div style={{marginBottom: \"20px\", marginTop: \"20px\"}}>\n            <AsyncCommentThread chatId={chatId}/>\n        </div>);\n    }\n\n    render() {\n        const article = this.getBlogArticle();\n        const blogStyle = this.getStyleSheet();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            margin: \"3px\",\n            color: \"#777\",\n            fontSize: \"1em\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>Last update on {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        let blogEntryEditButton;\n        // TODO: should use proper rights\n        if (USER.isSuperUser) {\n            blogEntryEditButton = <Button level={Level.DEFAULT} label=\"Edit\" onClick={() => {\n                BlogEntryEditModal.show({entryId: this.getBlogEntry().id, fillScreen: true});\n            }}/>\n        }\n\n        return [\n            <div style={{\n                \"background-color\": \"#fff\",\n                \"padding\": \"2% 5%\",\n                \"box-shadow\": \"rgb(160, 160, 160) 0px 3px 15px\",\n            }}>\n                {blogEntryEditButton}\n                <div style={blogStyle.writtenBy}>\n                    Written by <UserHandle userId={article.userCreatedId}/> on {publishedFormat}.\n                    {modifiedFormat}\n                </div>\n                <div style={blogStyle.title}>{article.name}</div>\n                <BlogArticleRenderer style={blogStyle.article} article={article}/>\n                <div style={{\n                    \"margin-top\": \"30px\",\n                    \"margin-bottom\": \"10px\",\n                }}>\n                    <Link href=\"/blog/\" style={blogStyle.link} value=\"Back to the Main Blog\"/>\n                </div>\n                {this.getComments()}\n            </div>,\n            <div className={blogStyle.bottomSection}>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryList extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"paddingTop\", \"10px\");\n    }\n\n    showNewBlogPostModal() {\n        let modal = <NewBlogEntryModal fillScreen/>;\n        modal.show();\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n\n        let entries = [];\n\n        let blogEntries = BlogEntryStore.all().sort((a, b) => {\n            return b.getArticle().dateCreated - a.getArticle().dateCreated;\n        });\n\n        for (let entry of blogEntries) {\n            entries.push(<BlogEntryPreview key={entry.id} entryId={entry.id}/>);\n        }\n\n        return [\n            USER.isSuperUser ?\n                <Button label=\"New Entry\"\n                        level={Level.DEFAULT}\n                        onClick={() => this.showNewBlogPostModal()}\n                />\n                : null,\n            <div ref=\"entriesList\">\n                {entries}\n            </div>,\n            <Button label={this.options.finishedLoading ? UI.T(\"End of blog\") : UI.T(\"Load More\")}\n                    ref=\"loadMoreButton\"\n                    style={{margin: \"0px auto\", display: \"block\"}}\n                    className={blogStyle.loadMoreButton}\n                    disabled={this.options.finishedLoading} />,\n            <div style={{\n                height: \"45px\",\n                width: \"100%\",\n            }}/>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.loadMoreButton.addClickListener(() => {\n            if (!this.options.finishedLoading) {\n                Ajax.getJSON(\"/blog/\", {\n                    lastDate: Math.min.apply(null, BlogEntryStore.all().map(x => x.getArticle().dateCreated))\n                }).then(\n                    (data) => {\n                        this.options.finishedLoading = data.finishedLoading;\n                        if (this.options.finishedLoading) {\n                            this.loadMoreButton.options.label = UI.T(\"No more posts\");\n                            this.loadMoreButton.redraw();\n                            this.loadMoreButton.disable();\n                        }\n                        this.redraw();\n                    }\n                );\n            }\n        });\n\n        this.attachCreateListener(BlogEntryStore, () => {\n            this.redraw();\n        });\n    }\n}\n\nTheme.register(BlogEntryView, BlogStyle);\nTheme.register(BlogEntryPreview, BlogStyle);\nTheme.register(BlogEntryList, BlogStyle);\n\nclass DelayedBlogEntryList extends StateDependentElement(BlogEntryList) {\n}\n\nclass DelayedBlogEntryView extends StateDependentElement(BlogEntryView) {\n    getBlogEntry() {\n        return BlogEntryStore.getEntryForURL(this.options.entryURL);\n    }\n\n    get pageTitle() {\n        if (this.getBlogEntry()) {\n            return super.pageTitle;\n        } else {\n            return null;\n        }\n    }\n\n    set pageTitle(value) {\n    }\n\n    onDelayedMount() {\n        super.onDelayedMount();\n        Router.updateURL();\n    }\n\n    getAjaxUrl() {\n        return \"/blog/get_blog_post/\";\n    }\n\n    getAjaxRequest() {\n        return {\n            entryUrlName: this.options.entryURL,\n        }\n    }\n}\n\nclass BlogRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route(\"%s\", (options) => {\n                let entryURL = options.args[options.args.length - 1];\n\n                let blogEntry = BlogEntryStore.getEntryForURL(entryURL);\n\n                if (blogEntry) {\n                    return <BlogEntryView entryId={blogEntry.id} />;\n                } else {\n                    return <DelayedBlogEntryView entryURL={entryURL} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"blog\", options={}) {\n        options.title = options.title || \"Blog\";\n        super(expr, DelayedBlogEntryList, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n\nexport {BlogEntryPreview, DelayedBlogEntryList, DelayedBlogEntryView, BlogEntryView, BlogRoute};\n","import {GlobalState} from \"State\";\nimport {StoreObject, GenericObjectStore} from \"Store\";\nimport {MessageThreadStore, MessageInstanceStore} from \"MessageThreadStore\";\nimport {PublicUserStore} from \"UserStore\";\nimport {Ajax} from \"Ajax\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nclass Forum extends StoreObject {\n    constructor() {\n        super(...arguments);\n        this.forumThreads = new Map();\n        // TODO: not appropriate to register to streams here\n        this.registerToStream();\n        ForumThreadStore.addDeleteListener((forumThread) => {\n            if (forumThread.parentId === this.id && this.forumThreads.has(forumThread.id)) {\n                this.deleteForumThread(forumThread);\n            }\n        });\n    }\n\n    getStreamName() {\n        return \"forum-\" + this.id;\n    }\n\n    getForumThreads() {\n        let forumThreads = Array.from(this.forumThreads.values());\n        // Filter out hidden forum threads\n        forumThreads = forumThreads.filter(forumThread => forumThread.isVisible());\n        forumThreads.sort((a, b) => {return b.id - a.id});\n        return forumThreads;\n    }\n\n    addForumThread(forumThread, event) {\n        this.forumThreads.set(forumThread.id, forumThread);\n        this.dispatch(\"newForumThread\", event);\n    }\n\n    deleteForumThread(forumThread) {\n        this.forumThreads.delete(forumThread.id);\n        this.dispatch(\"deleteForumThread\", forumThread);\n    }\n}\n\nvar ForumStore = new GenericObjectStore(\"forum\", Forum);\n\nclass ForumThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        let parent = this.getParent();\n        parent && parent.addForumThread(this);\n    }\n\n    getAuthor() {\n        return PublicUserStore.get(this.authorId);\n    }\n\n    isPinned() {\n        return this.pinnedIndex != null;\n    }\n\n    getPinIndex() {\n        return this.pinnedIndex;\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    getContentMessage() {\n        return MessageInstanceStore.get(this.contentMessageId);\n    }\n\n    getVotesBalance() {\n        let message = this.getContentMessage();\n        if (message) {\n            return message.getVotesBalance();\n        }\n        return this.votesBalance;\n    }\n\n    getParent() {\n        return ForumStore.get(this.parentId);\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getTimeAdded() {\n        // TODO: maybe return formatted time\n        return this.timeAdded;\n    }\n\n    getLastActive() {\n        return this.lastActive;\n    }\n\n    getNumReplies() {\n        return this.getNumMessages() - 1;\n    }\n\n    deleteThread(onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/forum/edit_forum_thread/\", {\n            forumThreadId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    getNumMessages() {\n        return this.numMessages;\n    }\n\n    isVisible() {\n        return !this.hidden;\n    }\n\n    isLoaded() {\n        // TODO: this needs to be fixed to support dynamic loading\n        // console.warn(this.getNumReplies(), this.getMessageThread().getNumMessages());\n        return this.getMessageThread() != null && this.getNumReplies() === this.getMessageThread().getNumMessages() - 1;\n    }\n}\n\nconst ForumThreadStore = new GenericObjectStore(\"forumthread\", ForumThread, {\n    dependencies: [\"forum\", \"messageinstance\"]\n});\n\n\nexport {ForumStore, ForumThreadStore};","import {UI, Button} from \"UI\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {Level} from \"ui/Constants\";\n\nclass EditThreadReplyButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            EditThreadReplyModal.show({\n                messageInstance: this.options.messageInstance,\n                classMap: ChatMarkupRenderer.classMap\n            });\n        });\n    }\n}\n\nclass EditThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.markupEditor.setValue(this.options.messageInstance.getContent());\n        // this.markupEditor.codeEditor.getAce().focus();\n        this.doneButton.addClickListener(() => {\n            this.options.messageInstance.edit(this.markupEditor.getValue());\n        });\n    }\n}\n\nexport {EditThreadReplyButton};\n","import {UI, ActionModal, ActionModalButton} from \"UI\";\n\nclass DeleteThreadReplyModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete message\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>{UI.T(\"Are you sure you want to delete the message?\")}</p>;\n    }\n\n    action() {\n        this.options.messageInstance.deleteMessage();\n        this.hide();\n    }\n}\n\nlet DeleteThreadReplyButton = ActionModalButton(DeleteThreadReplyModal);\n\nexport {DeleteThreadReplyButton};","import {StyleSheet, styleRule, styleRuleInherit} from \"UI\";\n//import {CSAStyle} from \"CSAStyle\";\n\nconst colors = {\n    // BLUE: \"#20232d\",\n    BLUE: \"#202e3e\",\n    HOVER_BLUE: \"#364251\",\n    // BLACK: \"#181a22\",\n    BLACK: \"#1c2937\",\n    // HOVER_BLACK: \"#323539\",\n    HOVER_BLACK: \"#364251\",\n    WHITE: \"#eee\",\n};\n\n\nclass ForumThreadReplyStyle extends StyleSheet {\n\n    @styleRule\n    mainClass = {\n        width: \"90%\",\n        margin: \"0 auto\",\n        maxWidth: \"1200px\",\n    }\n\n    @styleRule\n    repliesUserAndDate = {\n        height: \"40px\",\n        width: \"100%\",\n        lineHeight: \"40px\",\n        fontSize: \"15px\",\n        marginTop: \"8px\",\n        marginBottom: \"8px\",\n    };\n\n    @styleRule\n    repliesUser = {\n        display: \"inline-block\",\n        float: \"left\",\n        color: \"#444\",\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    repliesDate = {\n        display: \"inline-block\",\n        float: \"right\",\n    };\n\n    @styleRule\n    repliesContent = {\n        marginBottom: \"15px\",\n        fontSize: \"16px\",\n    };\n}\n\n\nlet height = 70;\n\nclass ForumThreadPanelStyle extends StyleSheet {\n    fontSize = \"0.9em\";\n    numRepliesFontSize = \"1.03em\";\n    messageFontSize = \"1.2em\";\n    buttonFontSize = \"1em\";\n\n    @styleRule\n    mainClass = {\n        margin: \"0 auto\",\n        marginBottom: \"20px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: \"2em\",\n        color: \"#333\",\n        minHeight: \"50px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    backButton = {\n        color: \"#444\",\n        fontSize: this.fontsize,\n        textDecoration: \"none\",\n        transition: \".15s\",\n        opacity: \"1\",\n        \":hover\": {\n            opacity: \"1\",\n            color: \"#337ab7\",\n            transition: \".15s\",\n        },\n    };\n\n    @styleRule\n    replyButtonDiv = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        height: \"50px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    replyButton = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    fullPost = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: this.fontSize,\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    dislikeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"16px\",\n    };\n\n    @styleRule\n    likeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"8px\",\n    };\n\n    @styleRule\n    author = {\n        color: \"#262626\",\n        fontSize: this.fontSize,\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        paddingLeft: \"0\",\n        // justifyContent: \"center\",\n        textTransform: \"uppercase\",\n        // fontWeight: \"bold\",\n    };\n\n    @styleRule\n    header = {\n    };\n\n    @styleRule\n    message = {\n        padding: \"5px 12px\",\n        fontSize: this.messageFontSize,\n        color: colors.BLUE,\n        \" p\": {\n            marginBottom: \"0\",\n            padding: \"5px 0\",\n        },\n    };\n\n    @styleRule\n    buttons = {\n        height: \"50px\",\n        width: \"100%\",\n        paddingTop: \"12px\",\n    };\n\n    @styleRule\n    bottomPanel = {\n        height: \"50px\",\n        width: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    };\n\n    @styleRule\n    voting = {\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    numReplies = {\n        height: \"50px\",\n        fontSize: this.numRepliesFontSize,\n        paddingLeft: \"12px\",\n        color: \"#767676\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    replies = {\n        width: \"100%\",\n        color: \"#444\",\n    };\n\n    @styleRule\n    editDeleteButtons = {\n        width: \"100%\",\n        height: \"50px\",\n        padding: \"0 7px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    };\n\n    @styleRule\n    editButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    deleteButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass ButtonStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: colors.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        marginBottom: \"0\",\n        borderColor: colors.BLUE,\n        fontSize: \"13px\",\n        transition: \".2s\",\n        outline: \"none\",\n        \":hover\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n}\n\n\nclass ForumThreadHeaderStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"0.85em\";\n    widthLimit = 800;\n\n    tagsHeight = 50;\n    // borderTopColor = \"rgb(232, 189, 35)\";\n    borderTopColor = \"#333\";\n\n    baseStyleObject = {\n        height: this.tagsHeight + \"px\",\n        // display: \"inline-block\",\n        // float: \"left\",\n        color: \"#262626\",\n        // letterSpacing: \"-0.3px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n        fontWeight: \"bold\",\n    };\n    \n    @styleRule\n    mainClass = {\n        height: \"40px\",\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        // borderBottom: \"2px solid #333\",// + this.borderTopColor,\n        color: \"#aaa\",\n        display: \"flex\",\n\n\n        boxSizing: \"content-box\",\n        backgroundColor: \"#eaeaea\",\n        height: this.tagsHeight + \"px\",\n        borderTop: \"3px solid \" + this.borderTopColor,\n    };\n\n    @styleRule\n    tagsTitle = [this.baseStyleObject, {\n        // marginLeft: \"1%\",\n        // width: \"40%\",\n        paddingLeft: \"12px\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        justifyContent: \"initial\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".7\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsReplies = [this.baseStyleObject, {\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            console.log(window.innerWidth);\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n}\n\n\nclass ForumThreadPreviewStyle extends StyleSheet {\n    // functionality\n    maxHeight = 50;\n    lines = 2;\n    lineHeight = this.maxHeight / this.lines;\n\n    // design\n    fontSize = \".88em\";\n    color = \"#aaa\";\n\n    @styleRule\n    forumThreadPreview = {\n        maxHeight: this.maxHeight + \"px\",\n        lineHeight: this.lineHeight + \"px\",\n        overflow: \"hidden\",\n        fontSize: this.fontSize,\n        color: this.color,\n        \" *\": {\n            marginBottom: \"0\",\n        },\n    };\n}\n\n\nclass ForumThreadBubbleStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"1em\";\n    titlePaddingBottom = \"10px\";\n    widthLimit = 800;\n\n    baseStyleObject = {\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n        fontSize: this.fontSize,\n    };\n\n    @styleRule\n    backgroundColorOddInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorPinnedInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorEvenInstances = {\n        backgroundColor: \"#fff\",\n        \":hover\": {\n            backgroundColor: \"#fafafa\",\n        }\n    };\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#555\",\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    threadTitleAndPreview = {\n        flexDirection: \"column\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        paddingTop: \"25px\",\n        paddingBottom: \"25px\",\n        paddingLeft: \"12px\",\n    }\n\n    @styleRule\n    threadTitle = [this.baseStyleObject, {\n        // width: \"40%\",\n        // maxWidth: \"50%\",\n        // flex: \"1.5\",\n        flexDirection: \"column\",\n        textAlign: \"justify\",\n        // paddingRight: \"8px\",\n        verticalAlign: \"middle\",\n        wordWrap: \"break-word\",\n        color: \"#252628\",\n        paddingBottom: this.titlePaddingBottom,\n    }];\n\n    @styleRule\n    pinnedIcon = {\n        textAlign: \"center\",\n        display: \"inline-block\",\n        float: \"left\",\n        height: \"60px\",\n        paddingTop: \"25px\",\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    threadTitleSpan = {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        lineHeight: \"20px\",\n        // maxWidth: \"95%\",\n        transition: \"0.2s\",\n        fontSize: \"1.2em\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        // maxWidth: \"14%\",\n        flex: \".7\",\n        // paddingLeft: \"8px\",\n        textAlign: \"center\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadReplies = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadRepliesSpan = {\n        transition: \"0.2s\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        fontSize: \".85em\",\n    }];\n}\n\n\nclass ForumPanelStyle extends StyleSheet {\n    textColor = \"#333\";\n    headerItemHeight = 50;\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"100%\",\n        // textAlign: \"center\",\n        fontSize: \"2em\",\n        color: this.textColor,\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    buttonParent = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    button = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    header = {\n        height: 2 * this.headerItemHeight + \"px\",\n        width: \"100%\",\n    };\n}\n\n\nexport {\n    ForumThreadReplyStyle, \n    ForumThreadPanelStyle, \n    ButtonStyle, \n    ForumThreadHeaderStyle, \n    ForumThreadPreviewStyle,\n    ForumThreadBubbleStyle, \n    ForumPanelStyle\n};\n","import {Ajax} from \"Ajax\";\nimport {UI, Button, registerStyle} from \"UI\";\nimport {GlobalState} from \"State\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\n\n@registerStyle(ButtonStyle)\nclass CreateThreadReplyButton extends Button {\n    getDefaultOptions() {\n        return {\n            level: Level.PRIMARY,\n            size: Size.LARGE,\n            label: UI.T(\"Preview\")\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (!this.markupEditorModal) {\n                this.markupEditorModal = <CreateThreadReplyModal forumThreadId={this.options.forumThreadId}\n                    classMap={ChatMarkupRenderer.classMap}\n                />;\n            }\n            this.markupEditorModal.show();\n        });\n    }\n}\n\nclass CreateThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.createThreadReply();\n        });\n    }\n\n    createThreadReply() {\n        // TODO: should be a dispatch: it should jump and highlight your post\n        Ajax.postJSON(\"/forum/forum_thread_post/\", {\n            forumThreadId: this.options.forumThreadId,\n            message: this.markupEditor.getValue(),\n        });\n    }\n}\n\nexport {CreateThreadReplyButton};\n","import {Ajax} from \"Ajax\";\nimport {GlobalState} from \"State\";\nimport {\n    ActionModal,\n    ActionModalButton,\n    Button,\n    Input,\n    Link,\n    Panel,\n    Router,\n    TimePassedSpan,\n    UI,\n    registerStyle,\n} from \"UI\";\nimport {ConcentricCirclesLoadingScreen} from \"ui/ConcentricCirclesLoadingScreen\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {UserHandle} from \"UserHandle\";\nimport {EditThreadReplyButton} from \"EditThreadReplyButton\";\nimport {DeleteThreadReplyButton} from \"DeleteThreadReplyButton\";\nimport {CreateThreadReplyButton} from \"CreateThreadReplyButton\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {ForumThreadPanelStyle, ForumThreadReplyStyle} from \"ForumStyle\";\nimport {ButtonStyle} from \"ForumStyle\";\nimport {Level, Size} from \"ui/Constants\";\nimport {NOOP_FUNCTION} from \"Utils\";\n\nlet forumThreadPanelStyle = ForumThreadPanelStyle.getInstance();\nlet buttonStyle = ButtonStyle.getInstance();\n\n\nclass CreateForumThreadModal extends MarkupEditorModal {\n    render() {\n        let inputStyle = {\n            \"margin-bottom\": \"4px\",\n            \"border\": \"0\",\n            //\"border-radius\": \"4px\",\n            //\"border\": \"2px solid #dcdcdc\",\n            \"outline\": \"none\",\n            \"color\": \"#333\",\n            \"font-size\": \"14px\",\n            \"padding-left\": \"8px\",\n            \"width\": \"100%\",\n            \"text-align\": \"center\",\n            \"font-weight\": \"bold\",\n        };\n\n        return [\n            <Input label={UI.T(\"Title\")} ref=\"titleInput\" style={inputStyle} placeholder=\"Click here to edit the title (max. 160 characters).\" />,\n            ...super.render(),\n        ];\n    }\n\n    onMount() {\n        this.doneButton.addClickListener(() => {\n            this.createForumThread();\n        });\n    }\n\n    routeToThread(forumThreadId) {\n        // TODO: add the temp forum title\n        Router.changeURL([\"forum\", forumThreadId, \"title\"])\n    }\n\n    createForumThread() {\n        let request = {\n            forumId: this.options.forumId,\n            title: this.titleInput.getValue(),\n            message: this.markupEditor.getValue(),\n        };\n\n        Ajax.postJSON(\"/forum/create_forum_thread/\", request).then(\n            (data) => {\n                this.routeToThread(data.forumThreadId);\n                this.titleInput.setValue(\"\");\n                this.markupEditor.setValue(\"\");\n                this.markupEditor.redraw();\n                this.hide();\n            }\n        );\n    }\n}\n\n@registerStyle(ButtonStyle)\nclass CreateForumThreadButton extends Button {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        options.size = options.size || Size.LARGE;\n        super.setOptions(options);\n    }\n\n    getModalClass() {\n        return CreateForumThreadModal;\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            this.getModalClass().show({\n                forumId: this.options.forumId,\n                classMap: ChatMarkupRenderer.classMap,\n            });\n        });\n    }\n}\n\nclass DeleteForumThreadModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete forum thread\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>\n            {UI.T(\"Are you sure you want to delete thread\")}\n            {\" \\\"\" + this.options.forumThread.title + \"\\\"?\"}\n        </p>;\n    }\n\n    action() {\n        this.options.forumThread.deleteThread();\n        this.hide();\n    }\n}\n\nlet DeleteForumThreadButton = ActionModalButton(DeleteForumThreadModal);\n\nclass ForumThreadReply extends UI.Element {\n    extraNodeAttributes(attr) {\n        // attr.addClass(forumThreadReplyStyle.mainClass);\n    }\n\n    getMessageInstance() {\n        return this.options.messageInstance;\n    }\n\n    render() {\n        let messageInstance = this.getMessageInstance();\n        let deleteMessage;\n        let editMessage;\n        let editAndDeleteButtons = <span/>;\n\n        if (USER.isSuperUser || USER.id === messageInstance.userId) {\n            deleteMessage = <DeleteThreadReplyButton\n                faIcon=\"trash\"\n                level={Level.DANGER}\n                className={forumThreadPanelStyle.deleteButton}\n                modalOptions={{messageInstance: messageInstance}} />;\n            editMessage = <EditThreadReplyButton\n                faIcon={\"pencil\"}\n                level={Level.INFO}\n                messageInstance={messageInstance}\n                forumThreadPanel={this}\n                className={forumThreadPanelStyle.editButton} />;\n            editAndDeleteButtons = <div className={forumThreadPanelStyle.editDeleteButtons} style={{width: \"auto\",}}>\n                {editMessage}\n                {deleteMessage}\n            </div>;\n        }\n\n        return [\n            <div className={forumThreadPanelStyle.fullPost}>\n                <div className={forumThreadPanelStyle.author}\n                    style={{\n                        fontSize: \"1em\",\n                        paddingLeft: \"12px\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                    }}>\n                    <UserHandle id={messageInstance.userId} style={{\n                        textTransform: \"initial\",\n                        fontSize: \"1.1em\",\n                    }}/>\n                    <TimePassedSpan timeStamp={messageInstance.getDate()} style={{\n                        color: \"#262626 !important\",\n                        paddingRight: \"12px\",\n                    }}/>\n                </div>\n                <ChatMarkupRenderer ref={this.refLink(\"postContent\" + messageInstance.id)} value={messageInstance.getContent()} className={forumThreadPanelStyle.message}/>\n                <div className={forumThreadPanelStyle.bottomPanel}>\n                    {editAndDeleteButtons}\n                    <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={messageInstance} className={forumThreadPanelStyle.voting}/>\n                </div>\n            </div>\n        ];\n    }\n\n    onMount() {\n        this.attachEventListener(this.getMessageInstance(), \"messageDelete\", () => {\n            this.hide();\n        });\n        this.attachEventListener(this.getMessageInstance(), \"messageEdit\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumThreadPanelStyle)\nclass ForumThreadPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    returnToMainForum() {\n        Router.changeURL(this.getMainForumURL());\n    }\n\n    getMainForumURL() {\n        return \"/forum/\";\n    }\n\n    getForumThreadState(callback=NOOP_FUNCTION) {\n        let request = {\n            forumThreadId: this.options.forumThread.id,\n        };\n\n        Ajax.postJSON(\"/forum/forum_thread_state/\", request).then(\n            callback,\n            (error) => {\n                this.returnToMainForum();\n                ErrorHandlers.showErrorAlert(error);\n            }\n        );\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getTitle() {\n        return [\n            <div className={this.styleSheet.title}>\n                <Link href={this.getMainForumURL()} className={this.styleSheet.backButton}\n                    value={<span className=\"fa fa-arrow-left\" style={{\n                        paddingRight: \"10px\",\n                        fontSize: \".8em\",\n                        color: \"#333\",\n                    }} />} />\n                {this.getForumThread().getTitle()}\n            </div>\n        ];\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.author}>\n            {UI.T(\"written by\")}&nbsp;\n            <UserHandle id={this.getForumThread().authorId} style={{\n                textTransform: \"initial\",\n            }}/>\n            &nbsp;\n            <TimePassedSpan timeStamp={this.getForumThread().getTimeAdded()} style={{color: \"#262626 !important\",}}/>\n        </div>;\n    }\n\n    getMessage() {\n        return <div className={this.styleSheet.message}>\n                 <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.getForumThread().getContentMessage().getContent()} style={{height:\"auto\"}}/>\n            </div>;\n    }\n\n    getNumReplies(postsLength) {\n        return [\n            <div className={this.styleSheet.numReplies}>\n                <span style={{\"font-weight\": \"bold\", }}>{postsLength}</span>\n                &nbsp;{\"replies in this thread\" + (postsLength == 0 ? \", be the first one to comment\" : \"\")}\n            </div>\n        ];\n    }\n\n    getVoting() {\n        return <div className={this.styleSheet.voting}>\n            <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={this.getForumThread().getContentMessage()} style={{\"margin-left\": \"0\", }} />\n        </div>;\n    }\n\n    render() {\n        if (!this.options.forumThread.isLoaded()) {\n            this.getForumThreadState(() => {\n                this.redraw();\n                this.initializeListeners();\n            });\n            return <ConcentricCirclesLoadingScreen />;\n        }\n\n        let replies = [];\n        let spaceBetween;\n        let forumThread = this.options.forumThread;\n\n        // sort the forum replies by the activity date\n        let forumThreadMessages = Array.from(forumThread.getMessageThread().getMessages());\n        forumThreadMessages.sort((a, b) => {\n            return a.getDate() - b.getDate();\n        });\n\n        for (let messageInstance of forumThreadMessages) {\n            if (messageInstance !== forumThread.getContentMessage()) {\n                replies.push(<ForumThreadReply className={this.styleSheet.replies} messageInstance={messageInstance} />);\n            }\n        }\n\n        if (replies.length) {\n            spaceBetween = <div style={{\n                height: \"60px\",\n                borderBottom: \"1px solid #ddd\",\n                width: \"90%\",\n                maxWidth: \"1200px\",\n                margin: \"0 auto\",\n            }}></div>;\n        }\n\n        let deleteButton;\n        let editButton;\n        let editAndDeleteButtons;\n\n        if (USER.isSuperUser || USER.id === this.getForumThread().authorId) {\n            deleteButton = <DeleteForumThreadButton faIcon=\"trash\"\n                                                    level={Level.DANGER}\n                                                    className={this.styleSheet.deleteButton}\n                                                    modalOptions = {{\n                                                        forumThread: this.getForumThread()\n                                                    }}/>;\n            editButton = <EditThreadReplyButton faIcon=\"pencil\"\n                                                level={Level.INFO}\n                                                className={this.styleSheet.editButton}\n                                                messageInstance={this.getForumThread().getContentMessage()}/>;\n            editAndDeleteButtons = <div className={this.styleSheet.editDeleteButtons}>\n                {editButton}\n                {deleteButton}\n            </div>;\n        }\n\n        return [\n            <div style={{marginBottom: \"60px\",}}>\n                <div className={this.styleSheet.header}>\n                    {this.getTitle()}\n                    <div className={this.styleSheet.replyButtonDiv}>\n                        {this.getAuthor()}\n                        <CreateThreadReplyButton\n                            label={UI.T(\"REPLY\")}\n                            className={this.styleSheet.replyButton}\n                            size={Size.DEFAULT}\n                            forumThreadId={forumThread.id}\n                            forumThread={this.getForumThread()}\n                            classMap={ChatMarkupRenderer.classMap}\n                        />\n                    </div>\n                </div>\n                <div style={{width: \"90%\", maxWidth: \"1200px\", margin: \"0 auto\", height: \"3px\", backgroundColor: \"#333\", marginTop: \"10px\",}}></div>\n                <div className={this.styleSheet.fullPost}>\n                    {this.getMessage()}\n                    <div className={this.styleSheet.bottomPanel}>\n                        {this.getNumReplies(replies.length)}\n                        {this.getVoting()}\n                    </div>\n                    {editAndDeleteButtons}\n                </div>\n                {spaceBetween}\n                {replies}\n            </div>\n        ];\n    }\n\n    deleteThread() {\n        this.getForumThread().deleteThread();\n    }\n\n    initializeListeners() {\n        // These listeners need to be attached after the ForumThread is loaded in the js state\n        this.getForumThread().getMessageThread().addListener(\"newMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getMessageThread().addListener(\"deleteMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getContentMessage().addEventListener(\"messageEdit\", () => {\n            this.content.setValue(this.getForumThread().getContentMessage().getContent());\n            this.content.redraw();\n        });\n    }\n\n    onMount() {\n        // This applies only for a newly created forum thread, since the listeners from\n        // render do not get attached when the thread is already in the state.\n\n        if (this.options.forumThread.isLoaded()) {\n            this.initializeListeners();\n        }\n\n        this.getForumThread().addDeleteListener(() => {\n            this.returnToMainForum();\n        });\n    }\n}\n\nexport {CreateForumThreadButton, ForumThreadPanel};\n","import {UI, Panel, Link, Route, Router, TimePassedSpan, registerStyle, CardPanel} from \"ui/UI\";\nimport {Dispatcher} from \"base/Dispatcher\";\nimport {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {PreviewMarkupButton} from \"ChatWidget\";\nimport {UserHandle} from \"UserHandle\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {MessageThreadStore, MessageInstanceStore} from \"state/MessageThreadStore\";\nimport {StateDependentElement} from \"StateDependentElement\";\nimport {Size, Level} from \"ui/Constants\";\nimport {slugify} from \"base/Utils\";\n\nimport {ForumStore, ForumThreadStore} from \"./state/ForumStore\";\nimport {ForumThreadPanel, CreateForumThreadButton} from \"./ForumThread\";\nimport {ForumThreadHeaderStyle, ForumThreadPreviewStyle, ForumThreadBubbleStyle, ForumPanelStyle} from \"./ForumStyle\";\n\n\n@registerStyle(ForumThreadHeaderStyle)\nexport class ForumThreadHeader extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.tagsTitle}>\n            {UI.T(\"Title\")}\n        </div>;\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.tagsAuthor}>\n            {UI.T(\"Author\")}\n        </div>;\n    }\n\n    getReplies() {\n        return <div className={this.styleSheet.tagsReplies}>\n            {UI.T(\"Replies\")}\n        </div>;\n    }\n\n    getViews() {\n        return <div className={this.styleSheet.tagsViews}>\n            {UI.T(\"Views\")}\n        </div>;\n    }\n\n    getVotes() {\n        return <div className={this.styleSheet.tagsVotes}>\n            {UI.T(\"Score\")}\n        </div>;\n    }\n\n    getActivity() {\n        return <div className={this.styleSheet.tagsActivity}>\n            {UI.T(\"Active\")}\n        </div>;\n    }\n\n    render() {\n        return [\n            this.getTitle(),\n            this.getAuthor(),\n            this.getReplies(),\n            this.getViews(),\n            this.getVotes(),\n            this.getActivity(),\n        ];\n    }\n}\n\n@registerStyle(ForumThreadPreviewStyle)\nexport class ForumThreadPreview extends ChatMarkupRenderer {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.forumThreadPreview);\n    }\n}\n\n@registerStyle(ForumThreadBubbleStyle)\nexport class ForumThreadBubble extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.mainClass);\n        // couldn't figure out how to solve this easier and better\n        // if (this.options.isPinned) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorPinnedInstances));\n        // } else if (this.options.color == 0) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorOddInstances));\n        // } else {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorEvenInstances));\n        // }\n        return attr;\n    }\n\n    getHref() {\n        return \"/forum/\" + this.getForumThread().id + \"/\" + slugify(this.getForumThread().getTitle());\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getThreadTitle() {\n        let pinned = \"\";\n        if (this.getForumThread().isPinned()) {\n            pinned = <span className={\"fa fa-thumb-tack \" + this.styleSheet.pinnedIcon} aria-hidden=\"true\" style={{paddingTop: \"0\", lineHeight: \"20px\", height: \"20px\",}}/>;\n        }\n        let forumThread = this.getForumThread();\n        return [\n            <div className={this.styleSheet.threadTitleAndPreview}>\n                <div className={this.styleSheet.threadTitle}\n                    style={{paddingBottom: () => {\n                        if (forumThread.getContentMessage().content) {\n                            return this.styleSheet.titlePaddingBottom;\n                        }\n                        return \"0\";\n                    }}}>\n                    {pinned}\n                    <Link style={{\"text-decoration\": \"none\", \"color\": \"inherit\", \"font-size\": \"14px\", \"text-align\": \"justify\"}} href={this.getHref()}\n                        value={<span className={this.styleSheet.threadTitleSpan}>\n                                {this.getForumThread().getTitle()}\n                                </span>} />\n                </div>\n                <ForumThreadPreview value={this.getForumThread().getContentMessage().content} />\n            </div>\n        ];\n    }\n\n    getThreadAuthor() {\n        return [\n            <span className={this.styleSheet.threadAuthor}>\n                <UserHandle id={this.getForumThread().authorId} style={{\n                    \"line-height\": \"normal\",\n                    wordBreak: \"break-word\",\n                }} />\n            </span>\n        ];\n    }\n\n    getThreadReplies() {\n        return [\n            <div className={this.styleSheet.threadReplies}>\n                <Link style={{\n                    \"text-decoration\": \"none\",\n                    \"color\": \"inherit\",\n                }} href={this.getHref()} value={\n                    <span className={this.styleSheet.threadRepliesSpan}>\n                        {this.getForumThread().getNumReplies()}\n                    </span>\n                } />\n            </div>\n        ];\n    }\n\n    getThreadViews() {\n        return [\n            <div className={this.styleSheet.threadViews}>\n                {this.getForumThread().numViews}\n            </div>\n        ];\n    }\n\n    getThreadVotes() {\n        return [\n            <div className={this.styleSheet.threadVotes}>\n                {this.getForumThread().getVotesBalance()}\n            </div>\n        ];\n    }\n\n    getThreadActivity() {\n        let threadActivity = this.getForumThread().getLastActive();\n        /* TODO @mihaic, this should support custom color option (but I didn't want to change stem files on my own). check UIPrimitives.jsx line 400 */\n        return [\n            <div className={this.styleSheet.threadActivity}>\n                <TimePassedSpan timeStamp={threadActivity} />\n            </div>\n        ]\n    }\n\n    render() {\n        return [\n            this.getThreadTitle(),\n            this.getThreadAuthor(),\n            this.getThreadReplies(),\n            this.getThreadViews(),\n            this.getThreadVotes(),\n            this.getThreadActivity(),\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getForumThread().addUpdateListener(() => {\n            this.redraw();\n        });\n        this.getForumThread().addDeleteListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport class ForumThreadList extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setStyle({\n            width: \"90%\",\n            margin: \"0 auto\",\n            marginTop: \"10px\",\n            marginBottom: \"60px\",\n            // boxShadow: \"0px 0px 10px #ddd\", // TODO: Do we want this?\n        });\n        return attr;\n    }\n\n    getBubbleClass() {\n        return ForumThreadBubble;\n    }\n\n    render() {\n        let forumThreads = Array.from(this.options.forum.getForumThreads());\n\n        forumThreads.sort((a, b) => {\n            if (a.isPinned() && b.isPinned()) {\n                return b.getPinIndex() - a.getPinIndex();\n            }\n            if (a.isPinned()) {\n                return -1;\n            }\n            if (b.isPinned()) {\n                return 1;\n            }\n            return b.lastActive - a.lastActive;\n        });\n\n        let result = [];\n        let color = 1;\n        result.push(<ForumThreadHeader/>);\n        let Bubble = this.getBubbleClass();\n        for (let forumThread of forumThreads) {\n            result.push(<Bubble forumThread={forumThread} color={color} isPinned={forumThread.isPinned()}/>);\n            if (!forumThread.isPinned()) {\n                color = !color;\n            }\n        }\n        return result;\n    }\n\n    onMount() {\n        super.onMount();\n        this.options.forum.addListener(\"newForumThread\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumPanelStyle)\nexport class ForumPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.title}>\n                {this.options.forum.name}\n            </div>;\n    }\n\n    getButton() {\n        return <div className={this.styleSheet.buttonParent}>\n            <CreateForumThreadButton\n                label=\"NEW POST\"\n                className={this.styleSheet.button}\n                size={Size.DEFAULT}\n                forumId={this.options.forum.id}\n            />\n        </div>;\n    }\n\n    getForumThreadList() {\n        return <ForumThreadList forum={this.options.forum}/>;\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>\n                {this.getTitle()}\n                {this.getButton()}\n            </div>,\n            this.getForumThreadList(),\n        ];\n    }\n\n    onMount() {\n        this.attachListener(ForumThreadStore, \"create\", () => this.redraw());\n        this.attachListener(ForumThreadStore, \"delete\", () => this.redraw());\n    }\n}\n\nexport class DelayedForumPanel extends StateDependentElement(ForumPanel) {\n    importState(data) {\n        super.importState(data);\n        this.options.forum = ForumStore.get(this.options.forumId);\n    }\n}\n\nexport class DelayedForumThreadPanel extends StateDependentElement(ForumThreadPanel) {\n    // TODO: must be able to specify if URL is POST or GET in StateDependentElement\n    beforeRedrawNotLoaded() {\n        Ajax.postJSON(\"/forum/forum_thread_state/\", {\n            forumThreadId: this.options.forumThreadId,\n        }).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            () => {}\n        );\n    }\n\n    importState(data) {\n        super.importState(data);\n        this.options.forumThread = ForumThreadStore.get(this.options.forumThreadId);\n    }\n}\n\nexport class ForumRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route([\"%s\", \"%s\"], (options) => {\n                const forumThreadId = options.args[options.args.length - 2];\n\n                const forumThread = ForumThreadStore.get(forumThreadId);\n\n                if (forumThread) {\n                    return <ForumThreadPanel forumThread={forumThread} />;\n                } else {\n                    return <DelayedForumThreadPanel forumThreadId={forumThreadId} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"forum\", options={}) {\n        super(expr, DelayedForumPanel, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n","import {UI, Route} from \"UI\";\nimport {IndexPage} from \"./IndexPage\";\nimport {BlogRoute} from \"BlogPanel\";\nimport {ForumRoute} from \"ForumPanel\";\n\nexport const MAIN_ROUTE = new Route(null, IndexPage, [\n    new BlogRoute(),\n    new ForumRoute(),\n]);","import {StyleSheet, styleRule} from \"../Style\";\nimport {darken, enhance} from \"ui/Color\";\n\n\nclass NavStyle extends StyleSheet {\n    // Custom variables\n    getColors() {\n        const themeProperties = this.themeProperties;\n\n        const navManagerColor = themeProperties.COLOR_PRIMARY;\n        const navBarColor = themeProperties.NAV_MANAGER_COLOR_NAV_BAR || navManagerColor;\n        const sidePanelColor = themeProperties.NAV_MANAGER_COLOR_SIDE_PANEL || enhance(navManagerColor, 0.05);\n\n        this.colors = {\n            boxShadowNavManager: themeProperties.NAV_MANAGER_BOX_SHADOW_NAVBAR,\n            boxShadowSidePanel: themeProperties.NAV_MANAGER_BOX_SHADOW_SIDE_PANEL,\n            sidepanelBackground: themeProperties.NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR || sidePanelColor,\n            sidepanelHover: themeProperties.NAV_MANAGER_SIDE_PANEL_HOVER_COLOR || enhance(sidePanelColor, 0.1),\n            navbarBackground: themeProperties.NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR || navBarColor,\n            navbarHover: themeProperties.NAV_MANAGER_NAV_BAR_HOVER_COLOR || enhance(navBarColor, 0.1),\n            hr: themeProperties.NAV_MANAGER_HR_COLOR || enhance(sidePanelColor, 0.15),\n            text: themeProperties.NAV_MANAGER_TEXT_COLOR || enhance(navManagerColor, 1),\n        };\n\n        return this.colors;\n    }\n\n    dimensions = {\n        collapseArrowWidth: \"20px\",\n        navbarHeight: \"50px\",\n        sidepanelElementHeight: \"30px\",\n        sidepanelWidthLeft: \"250px\",\n        sidepanelWidth: \"330px\",\n        sidepanelHideWidth: \"335px\",\n        sidepanelTransitionDuration: \".15s\",\n        boxShadowWidth: \"5px\",\n        backgroundTransitionDuration: \".2s\",\n    };\n\n    // Icons\n    @styleRule\n    icon = {\n        color: this.getColors().text,\n        lineHeight: this.dimensions.navbarHeight,\n        height: this.dimensions.navbarHeight,\n        width: this.dimensions.navbarHeight,\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        textAlign: \"center\",\n        \":hover\": {\n            backgroundColor: this.getColors().navbarHover,\n        }\n    };\n\n    @styleRule\n    sideIcon = {\n        fontSize: \"120%\",\n    };\n\n    @styleRule\n    wrappedIcon = {\n        fontSize: \"100%\",\n        flex: \"1\",\n    };\n\n    // Nav manager elements\n    navElement = {\n        transition: `background-color ${this.dimensions.backgroundTransitionDuration}`,\n    };\n\n    @styleRule\n    navLinkElement = {\n        display: \"block\",\n        color: this.getColors().text,\n        textDecoration: \"none\",\n        listStyleType: \"none\",\n        \":hover\": {\n            backgroundColor: this.getColors().sidepanelHover,\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":focus\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":active\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":visited\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n    };\n\n\n    // Navbar\n    @styleRule\n    navManager = {\n        display: \"flex\",\n        height: this.dimensions.navbarHeight,\n        lineHeight: this.dimensions.navbarHeight,\n        width: \"100%\",\n        backgroundColor: this.getColors().navbarBackground,\n        boxShadow: this.getColors().boxShadowNavManager,\n        zIndex: \"9999\",\n        position: \"fixed\",\n    };\n\n\n    // Navbar elements\n    @styleRule\n    navElementHorizontal = {\n        color: this.getColors().text,\n        backgroundColor: this.getColors().navbarBackground,\n        listStyleType: \"none\",\n        cursor: \"pointer\",\n        \">:nth-child(2)\": {\n            position: \"absolute\",\n        }\n    };\n\n    @styleRule\n    navElementHorizontalArrow = {\n        paddingLeft: \".1em\",\n        verticalAlign: \"middle\",\n    };\n\n    @styleRule\n    navElementValueHorizontal = [\n        this.navElement, {\n            padding: \"0 0.7em\",\n            color: this.getColors().text,\n            width: \"100%\",\n            \":hover\": {\n                backgroundColor: this.getColors().navbarHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionHorizontal = {\n        display: \"inline-block\",\n        paddingLeft: \"0\",\n        height: this.dimensions.navbarHeight,\n        marginBottom: \"0\",\n    };\n\n\n    // Sidepanel\n    sidePanel = {\n        top: \"0\",\n        bottom: \"0\",\n        height: \"100%\",\n        backgroundColor: () => this.getColors().sidepanelBackground,\n        overflow: \"hidden\",\n        position: \"fixed\",\n        zIndex: \"3000\",\n        boxShadow: () => this.getColors().boxShadowSidePanel,\n        width: () => this.dimensions.sidepanelWidth,\n        transitionDuration: () => this.dimensions.sidepanelTransitionDuration,\n    };\n\n    @styleRule\n    leftSidePanel = [\n        this.sidePanel, {\n            overflowY: \"scroll\",\n            width: this.dimensions.sidepanelWidthLeft,\n            \"-ms-overflow-style\": \"none\",\n            overflow: \"-moz-scrollbars-none\",\n            \"::-webkit-scrollbar\": {\n                display: \"none\"\n            }\n        }\n    ];\n\n    @styleRule\n    rightSidePanel = this.sidePanel;\n\n\n    // Sidepanel elements\n    @styleRule\n    navElementVertical = {\n        color: this.getColors().text,\n        cursor: \"pointer\",\n        listStyleType: \"none\",\n        minHeight: this.dimensions.sidepanelElementHeight,\n        overflow: \"hidden\",\n        position: \"relative\",\n        \">*\": {\n            paddingLeft: this.dimensions.collapseArrowWidth,\n        },\n    };\n\n    @styleRule\n    navElementVerticalArrow = {\n        width: this.dimensions.collapseArrowWidth,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    navElementValueVertical = [\n        this.navElement, {\n            color: this.getColors().text,\n            zIndex: \"1\",\n            position: \"relative\",\n            width: \"100%\",\n            height: this.dimensions.sidepanelElementHeight,\n            lineHeight: this.dimensions.sidepanelElementHeight,\n            \":hover\": {\n                backgroundColor: this.getColors().sidepanelHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionVertical = {\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    navCollapseElement = {\n        color: this.getColors().text,\n        textAlign: \"initial\",\n        lineHeight: this.dimensions.sidepanelElementHeight,\n    };\n\n    @styleRule\n    sidePanelGroup = {\n        paddingTop: this.dimensions.navbarHeight,\n        height: \"inherit\",\n        width: this.dimensions.sidepanelWidth,\n        position: \"absolute\",\n        zIndex: \"3\",\n    };\n\n    @styleRule\n    hrStyle = {\n        margin: \"10px 5%\",\n        borderTop: () => \"2px solid \" + this.getColors().hr,\n    };\n\n\n    // Sidepanel transitions\n    @styleRule\n    navVerticalLeftHide = {\n        marginLeft: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    navVerticalRightHide = {\n        marginRight: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n}\n\n\nexport {NavStyle};\n","import {Dispatchable} from \"./Dispatcher\";\n\n// Class for working with the Window.localStorage and Window.sessionStorage objects\n// All keys are prefixed with our custom name, so we don't have to worry about polluting the global storage namespace\n// Keys must be strings, and values are modified by the serialize/deserialize methods,\n// which by default involve JSON conversion\nclass StorageMap extends Dispatchable {\n    static SEPARATOR = \"-@#%-\";\n\n    constructor(storage, name=\"\") {\n        super();\n        this.storage = storage;\n        this.name = name;\n        this.prefix = name + this.constructor.SEPARATOR;\n    }\n\n    getPrefix() {\n        return this.prefix;\n    }\n\n    getRawKey(key) {\n        return this.getPrefix() + key;\n    }\n\n    // Method to serialize the values\n    serialize(value) {\n        return JSON.stringify(value);\n    }\n\n    // Method to deserialize the value (which can be null if there is no value)\n    deserialize(value) {\n        return value && JSON.parse(value);\n    }\n\n    set(key, value) {\n        try {\n            this.storage.setItem(this.getRawKey(key), this.serialize(value));\n        }\n        catch(e) {\n            return false;\n        }\n        return true;\n    }\n\n    delete(key) {\n        this.storage.removeItem(this.getRawKey(key));\n    }\n\n    getRaw(key) {\n        return this.storage.getItem(this.getRawKey(key));\n    }\n\n    get(key, defaultValue = null) {\n        const value = this.getRaw(key);\n        if (value == null) {\n            return defaultValue;\n        }\n        return this.deserialize(value);\n    }\n\n    has(key) {\n        return (this.getRaw(key) != null);\n    }\n\n    keys() {\n        let result = [];\n        const totalStorageKeys = this.storage.length;\n        const prefixLenth = this.getPrefix().length;\n        for (let i = 0; i < totalStorageKeys; i++) {\n            const key = this.storage.key(i);\n            if (key.startsWith(this.getPrefix())) {\n                result.push(key.substr(prefixLenth));\n            }\n        }\n        return result;\n    }\n\n    values() {\n        return this.keys().map(key => this.get(key));\n    }\n\n    entries() {\n        return this.keys().map(key => [key, this.get(key)]);\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n\n    // Remove all of the keys that start with out prefix\n    clear() {\n        for (let key of this.keys()) {\n            this.delete(key);\n        }\n    }\n}\n\n// SessionStorageMap can be used to preserve data on tab refreshes\nexport class SessionStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.sessionStorage, name);\n    }\n}\n\n// LocalStorageMap can be used to store data across all our tabs\nexport class LocalStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.localStorage, name);\n    }\n\n    // Since we don't want a listener attached to window storage event for each map, we create a global one\n    // Any raw key that contains our separator has its original map identified and gets dispatched only for that map\n    static getChangeDispatchable() {\n        if (!this.CHANGE_DISPATCHABLE) {\n            this.CHANGE_DISPATCHABLE = new Dispatchable();\n            window.addEventListener(\"storage\", (event) => {\n                let separatorIndex = event.key.indexOf(this.SEPARATOR);\n                if (separatorIndex === -1) {\n                    // This is not an event associated with a storage map\n                    return;\n                }\n                const name = event.key.substr(0, separatorIndex);\n                const actualKey = event.key.substr(separatorIndex + this.SEPARATOR.length);\n                let newEvent = {\n                    originalEvent: event,\n                    key: actualKey,\n                    oldValue: event.oldValue,\n                    newValue: event.newValue,\n                };\n                this.CHANGE_DISPATCHABLE.dispatch(name, newEvent);\n            });\n        }\n        return this.CHANGE_DISPATCHABLE;\n    }\n\n    // Add a listener for all change event on the current map\n    // Only works if we're being backed by Window.localStorage and only received events from other tabs (not the current tab)\n    // The event has the following fields: key, oldValue, newValue, url, storageArea, originalEvent\n    // The key is modified to be the same the one you used in the map\n    addChangeListener(callback, doDeserialization=true) {\n        let realCallback = callback;\n        if (doDeserialization) {\n            realCallback = (event) => {\n                event.oldValue = this.deserialize(event.oldValue);\n                event.newValue = this.deserialize(event.newValue);\n                callback(event);\n            }\n        }\n\n        return this.constructor.getChangeDispatchable().addListener(this.name, realCallback);\n    }\n}\n","import {UI, Link, Switcher} from \"../UI\";\nimport {FACollapseIcon} from \"../FontAwesome\"; //TODO: more flexibility, do not require FAIcons in NavElements\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Orientation, Direction} from \"../Constants\";\n\nlet navSessionManager = new SessionStorageMap(\"navManager\");\n\nconst BasicOrientedElementInterface = (BaseClass) => class BasicOrientedElement extends BaseClass {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    getOrientation() {\n        if (this.options.orientation) {\n            return this.options.orientation;\n        }\n        if (this.parent && typeof this.parent.getOrientation === \"function\") {\n            return this.parent.getOrientation();\n        }\n        return Orientation.HORIZONTAL;\n    }\n};\n\nconst BasicOrientedElement = BasicOrientedElementInterface(UI.Element);\nconst BasicOrientedLinkElement = BasicOrientedElementInterface(Link);\n\n\n// NavElements should know if they are in vertical or horizontal mode, so they can behave differently\nconst NavElementInterface = (BaseClass) => class NavElement extends BaseClass {\n    constructor() {\n        super(...arguments);\n        this.isToggled = this.getToggledState();\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.styleSheet.navElementHorizontal);\n\n            if (this.parent instanceof NavSection) {\n                attr.setStyle(\"float\", \"left\");\n            } else {\n                // it is an element in a dropdown\n                attr.addClass(this.styleSheet.navCollapseElement);\n            }\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.styleSheet.navElementVertical);\n        }\n    }\n\n    getSelf() {\n        const style = (this.getOrientation() === Orientation.HORIZONTAL ?\n                        this.styleSheet.navElementValueHorizontal : this.styleSheet.navElementValueVertical);\n        const marginLeft = this.getOrientation() === Orientation.VERTICAL && unwrapArray(this.render()).length ? \"-20px\" : \"0\";\n\n        return <BasicOrientedElement className={style} style={{marginLeft: marginLeft}}>\n            {this.getValue()}\n        </BasicOrientedElement>;\n    }\n\n    getSubElements() {\n        let childrenToRender = unwrapArray(this.render());\n        if (childrenToRender.length) {\n            let subElementsClass;\n            if (!this.isToggled) {\n                subElementsClass = \"hidden\";\n            }\n            return <BasicOrientedElement ref=\"contentArea\" className={subElementsClass}>\n                {childrenToRender}\n            </BasicOrientedElement>;\n        }\n        return null;\n    }\n\n    getValue() {\n        let result;\n        if (unwrapArray(this.render()).length) {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                // is in the sidebar\n                result = [\n                    <FACollapseIcon ref=\"collapseIcon\" collapsed={!this.isToggled} className={this.styleSheet.navElementVerticalArrow} />,\n                    this.options.value\n                ];\n            } else if (this.getOrientation() === Orientation.HORIZONTAL) {\n                // is in the navbar\n                result = [\n                    this.options.value,\n                    <FACollapseIcon collapsed={false} className={this.styleSheet.navElementHorizontalArrow} />,\n                ];\n            }\n        } else {\n            result = this.options.value;\n        }\n        return result;\n    }\n\n    getChildrenToRender() {\n        return [\n            this.getSelf(),\n            this.getSubElements(),\n        ];\n    }\n\n    showChildren() {\n        this.contentArea.removeClass(\"hidden\");\n    }\n\n    hideChildren() {\n        this.contentArea.addClass(\"hidden\");\n    }\n\n    toggleChildren() {\n        if (!unwrapArray(this.render()).length) {\n            return;\n        }\n\n        if (!this.isToggled) {\n            this.showChildren();\n        } else {\n            this.hideChildren();\n        }\n\n        if (this.collapseIcon) {\n            this.collapseIcon.setCollapsed(this.isToggled);\n        }\n        this.isToggled = !this.isToggled;\n\n        this.saveToggledState();\n    }\n\n    getSessionKeyName() {\n        let sessionKeyName = this.options.sessionKey || this.options.href;\n        if (!sessionKeyName) {\n            throw Error(\"Persistent nav element needs a unique session key!\");\n        }\n        return sessionKeyName;\n    }\n\n    getLocalToggledState() {\n        if (this.hasOwnProperty(\"isToggled\")) {\n            return !!this.isToggled;\n        }\n        return !!this.options.defaultToggled;\n    }\n\n    getToggledState() {\n        if (!this.options.persistent) {\n            return this.getLocalToggledState();\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        return navSessionManager.get(sessionKeyName, this.getLocalToggledState());\n    }\n\n    saveToggledState() {\n        if (!this.options.persistent) {\n            return;\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        navSessionManager.set(sessionKeyName, this.getLocalToggledState());\n    }\n\n    onMount() {\n        super.onMount();\n        this.addNodeListener(\"mouseenter\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && unwrapArray(this.render()).length) {\n                this.showChildren();\n            }\n        });\n        this.addNodeListener(\"mouseleave\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && unwrapArray(this.render()).length) {\n                this.hideChildren();\n            }\n        });\n        this.addClickListener((event) => {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                event.stopPropagation();\n                this.toggleChildren();\n            }\n        });\n    }\n};\n\nconst NavElement = NavElementInterface(UI.Primitive(BasicOrientedElement, \"li\"));\nclass NavLinkElement extends NavElementInterface(BasicOrientedLinkElement) {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.navLinkElement);\n    }\n\n    render() {\n        return this.options.children;\n    }\n}\n\n\nclass NavSection extends UI.Primitive(\"ul\") {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.styleSheet.navSectionHorizontal);\n            // this is functionality, should be isolated from the actual design\n            attr.setStyle(\"float\", this.getAnchor());\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.styleSheet.navSectionVertical);\n        }\n    }\n\n    getAnchor() {\n        return this.options.anchor || Direction.LEFT;\n    }\n\n    getOrientation() {\n        return this.parent.getOrientation();\n    }\n}\n\n\nclass NavAnchoredNotifications extends NavSection {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            position: \"relative\",\n        });\n    }\n\n    getSwitcherStyle() {\n        return {\n            position: \"absolute\",\n            maxWidth: \"calc(100vw - 76px)\",\n            top: \"50px\",\n            right: \"0\",\n            height: \"300px\",\n            width: \"400px\",\n            boxShadow: \"0px 0px 10px #666\",\n            zIndex: \"-1\",\n        };\n    }\n\n    render() {\n        return [\n            this.options.children,\n            <Switcher ref=\"switcher\" style={this.getSwitcherStyle()} className=\"hidden\" />\n        ];\n    }\n\n    show(content, child) {\n        this.activeChild = child;\n        this.switcher.removeClass(\"hidden\");\n        this.switcher.setActive(content, child);\n        this.bodyListener = document.body.addEventListener(\"click\", () => this.hide());\n    }\n\n    hide() {\n        this.switcher.addClass(\"hidden\");\n        this.activeChild = null;\n        document.body.removeEventListener(\"click\", this.bodyListener);\n    }\n\n    onMount() {\n        this.addListener(\"changeSwitcher\", (content, child) => {\n            if (this.activeChild == child) {\n                this.hide();\n            } else {\n                this.show(content, child);\n            }\n        });\n\n        this.switcher.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nexport {BasicOrientedElement, NavElement, NavLinkElement, NavSection, NavAnchoredNotifications, navSessionManager};\n","import {UI} from \"UI\";\nimport {NavElement} from \"NavElement\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {Size} from \"../Constants\";\n\nexport class NavIcon extends NavElement {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.icon);\n    }\n\n    getValue() {\n        return [\n            this.getIcon(),\n            this.getContent()\n        ];\n    }\n\n    getContent() {\n        return null;\n    }\n\n    getIcon() {\n        return null;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nexport class LeftSideNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"bars\" size={Size.LARGE}/>;\n    }\n}\n\n\nexport class RightSideNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-v\" size={Size.LARGE}/>;\n    }\n}\n\n\nexport class WrappedNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.wrappedIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-h\" size={Size.LARGE}/>;\n    }\n}\n","import {Device} from \"../../base/Device\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {StemDate} from \"../../time/Time\";\n\nlet maxDistanceFromSide = 25; // Pixels\nlet minSwipeDistance = 60;    // Pixels\nlet minSwipeSpeed = 0.5;      // Pixels per millisecond\n\nfunction touchEventHandler(ignoreCondition, successCondition, onSuccess, xType=\"client\") {\n    return (event) => {\n        if (ignoreCondition(event.targetTouches[0][xType + \"X\"])) {\n            return;\n        }\n        let startX = event.targetTouches[0][xType + \"X\"];\n        let panelToggler = new Dispatcher();\n        let startTime = StemDate.now();\n\n        let touchCallback = (event) => {\n            if (successCondition(event.targetTouches[0][xType + \"X\"], startX, StemDate.now() - startTime)) {\n                panelToggler.dispatch(true);\n            }\n        };\n        let touchendCallback = () => {\n            panelToggler.dispatch(false);\n        };\n        document.addEventListener(\"touchmove\", touchCallback);\n        document.addEventListener(\"touchend\", touchendCallback);\n\n        panelToggler.addListener((success) => {\n            if (success) {\n                onSuccess();\n            }\n            document.removeEventListener(\"touchmove\", touchCallback);\n            document.removeEventListener(\"touchend\", touchendCallback);\n        });\n    }\n}\n\nfunction initializeSwipeRight(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.leftSidePanel.visible ||\n                        window.pageXOffset !== 0 ||\n                            touchX > maxDistance),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n    navManager.leftSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.leftSidePanel.visible),\n        (touchX, startX) => (startX - touchX >= minDistance && (startX - touchX) >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n}\n\nfunction initializeSwipeLeft(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.rightSidePanel.visible || window.innerWidth - touchX > maxDistance),\n        (touchX, startX, duration) => (startX - touchX >= minDistance && (startX - touchX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n    navManager.rightSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.rightSidePanel.visible),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n}\n\nfunction initializeSwipeEvents(navManager, maxDistanceFromSide=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    if (!Device.isTouchDevice()) {\n        return;\n    }\n    if (navManager.leftSidePanel) {\n        initializeSwipeRight(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n    if (navManager.rightSidePanel) {\n        initializeSwipeLeft(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n}\n\nexport {maxDistanceFromSide, initializeSwipeRight, initializeSwipeLeft, initializeSwipeEvents};","import {UI, changeParent, registerStyle} from \"../UI\";\nimport {NavStyle} from \"NavStyle\";\nimport {Carousel, CarouselStyle} from \"../Carousel\";\nimport {LeftSideNavIcon, RightSideNavIcon, WrappedNavIcon} from \"./NavIcon\";\nimport {BasicOrientedElement, NavSection} from \"./NavElement\";\nimport {initializeSwipeEvents} from \"./NavSwipeDetection\";\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {Orientation, Direction} from \"../Constants\";\n\n\nclass SidePanelGroup extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.sidePanelGroup);\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.setStyle(\"right\", 0);\n        } else {\n            attr.setStyle(\"width\", \"250px\");\n        }\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n}\n\n\n@registerStyle(NavStyle)\nclass SidePanel extends UI.Element {\n    constructor() {\n        super(...arguments);\n\n        if (!this.node) {\n            this.mount(document.body);\n        }\n\n        if (this.options.name) {\n            this.storageSerializer = new SessionStorageMap(\"sidePanel\" + this.options.name);\n            this.visible = this.storageSerializer.get(\"visible\");\n        }\n\n        if (this.visible) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.addClass(this.styleSheet.rightSidePanel);\n            attr.setStyle(\"right\", \"0\");\n        } else {\n            attr.addClass(this.styleSheet.leftSidePanel);\n        }\n    }\n\n    setVisible(value) {\n        this.visible = value;\n        if (this.storageSerializer) {\n            this.storageSerializer.set(\"visible\", value);\n        }\n    }\n\n    show() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.removeClass(this.styleSheet.navVerticalRightHide);\n        } else {\n            this.removeClass(this.styleSheet.navVerticalLeftHide);\n        }\n\n        this.setVisible(true);\n    }\n\n    hide() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.addClass(this.styleSheet.navVerticalRightHide);\n        } else {\n            this.addClass(this.styleSheet.navVerticalLeftHide);\n        }\n\n        this.setVisible(false);\n    }\n\n    toggle() {\n        if (this.visible) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    getChildrenToRender() {\n        return <SidePanelGroup ref=\"this.wrappedPanel\" anchor={this.options.anchor}>\n            {this.render()}\n        </SidePanelGroup>;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nclass NavCarouselStyle extends CarouselStyle {\n    hoverColor = () => NavStyle.getInstance().getColors().sidepanelHover;\n    textColor = () => NavStyle.getInstance().getColors().text;\n    navigatorTransitionTime = () => NavStyle.getInstance().dimensions.backgroundTransitionDuration;\n}\n\n\n@registerStyle(NavStyle)\nclass NavManager extends UI.Primitive(\"nav\") {\n    getCarouselStyleSheet() {\n        return this.options.carouselStyleSheet || NavCarouselStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            persistentLeftSidePanel: true,\n            persistentRightSidePanel: true,\n        };\n    }\n\n    constructor(options) {\n        super(options);\n\n        this.leftSidePanel = <SidePanel anchor={Direction.LEFT} name=\"left\" persistent={this.options.persistentLeftSidePanel}>\n            <Carousel ref={this.refLink(\"carousel\")} styleSheet={this.getCarouselStyleSheet()}>\n                <BasicOrientedElement orientation={Orientation.VERTICAL} ref={this.refLink(\"navigationPanel\")}\n                                      styleSheet={this.styleSheet}>\n                    {this.getLeftSidePanelChildren()}\n                </BasicOrientedElement>\n            </Carousel>\n        </SidePanel>;\n\n        this.rightSidePanel = <SidePanel anchor={Direction.RIGHT} name=\"right\" persistent={this.options.persistentRightSidePanel}>\n            {this.getRightSidePanelChildren()}\n        </SidePanel>;\n    }\n\n    getLeftSidePanelChildren() {\n        return [];\n    }\n\n    getRightSidePanelChildren() {\n        return [];\n    }\n\n    getLeftConditionedChildren() {\n        return [];\n    }\n\n    getRightConditionedChildren() {\n        return [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navManager);\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    leftSideIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.navigationPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.navigationPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    // TODO: lots of duplicate code here, with left/right stuff\n    getLeftSideIcon() {\n        if (!this.leftSidePanel) {\n            return null;\n        }\n\n        if (!this.leftPanelToggler) {\n            this.leftPanelToggler = <LeftSideNavIcon onClick={() => this.leftSideIconAction()} />;\n        }\n        return this.leftPanelToggler;\n    }\n\n    rightSideIconAction() {\n        this.toggleRightSidePanel();\n    }\n\n    getRightSideIcon() {\n        if (!this.rightSidePanel) {\n            return null;\n        }\n        if (!this.rightPanelToggler) {\n            this.rightPanelToggler = <RightSideNavIcon onClick={() => this.rightSideIconAction()} />;\n        }\n        return this.rightPanelToggler;\n    }\n\n    getFixedWidth() {\n        let width = 10;\n        for (let child of this.children) {\n            width += child.getWidth();\n        }\n        width -= this.getLeftConditioned().getWidth();\n        width -= this.getRightConditioned().getWidth();\n        return width;\n    }\n\n    wrappedIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.wrappedPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.wrappedPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    getWrappedIcon() {\n        if (!this.wrappedToggler) {\n            this.wrappedToggler = <WrappedNavIcon onClick={() => this.wrappedIconAction()}\n                                               className={this.wrapped ? \"\" : \"hidden\"} />;\n        }\n        return this.wrappedToggler;\n    }\n\n    getLeftFixed() {\n        return [];\n    }\n\n    getRightFixed() {\n        return [];\n    }\n\n    getLeftConditionedWrapper() {\n        if (!this.leftConditionedWrapper) {\n            this.leftConditionedWrapper = <NavSection anchor={Direction.LEFT}>\n                {this.getLeftConditioned()}\n            </NavSection>;\n        }\n        return this.leftConditionedWrapper;\n    }\n\n    getRightConditionedWrapper() {\n        if (!this.rightConditionedWrapper) {\n            this.rightConditionedWrapper = <NavSection anchor={Direction.RIGHT}>\n                {this.getRightConditioned()}\n            </NavSection>;\n        }\n        return this.rightConditionedWrapper;\n    }\n\n    getLeftConditioned() {\n        if (!this.leftConditioned) {\n            this.leftConditioned = <NavSection>{this.getLeftConditionedChildren()}</NavSection>;\n        }\n        return this.leftConditioned;\n    }\n\n    getRightConditioned() {\n        if (!this.rightConditioned) {\n            this.rightConditioned =  <NavSection>{this.getRightConditionedChildren()}</NavSection>;\n        }\n        return this.rightConditioned;\n    }\n\n    toggleSidePanel(mainPanel, toggleEvent) {\n        let secondaryPanel = (mainPanel == this.leftSidePanel ? this.rightSidePanel : this.leftSidePanel);\n        mainPanel.toggle();\n        this.dispatch(toggleEvent, mainPanel.visible);\n        if (secondaryPanel && mainPanel.visible && secondaryPanel.visible) {\n            mainPanel.setStyle(\"z-index\", 3001);\n            secondaryPanel.setStyle(\"z-index\", 3000);\n        }\n    }\n\n    toggleLeftSidePanel() {\n        this.toggleSidePanel(this.leftSidePanel, \"toggledLeftSide\");\n    }\n\n    toggleRightSidePanel() {\n        this.toggleSidePanel(this.rightSidePanel, \"toggledRightSide\");\n    }\n\n    render() {\n        return [\n            this.getLeftSideIcon(),\n            this.getLeftFixed(),\n            this.getLeftConditionedWrapper(),\n            this.getWrappedIcon(),\n            <NavSection style={{marginLeft: \"auto\"}}>\n              {this.getRightConditionedWrapper()}\n            </NavSection>,\n            this.getRightFixed(),\n            this.getRightSideIcon(),\n        ];\n    }\n\n    bindToNode() {\n        super.bindToNode(...arguments);\n        this.onMount();\n    }\n\n    // This method enforces the wrapping to be skipped. It is useful when navbar elements change.\n    skipWrap() {\n        this.wrapSkip = true;\n        this.wrapScheduled = false;\n    }\n\n    unskipWrap() {\n        this.wrapSkip = false;\n        if (this.wrapScheduled) {\n            this.checkForWrap();\n        }\n    }\n\n    checkForWrap() {\n        if (this.wrapSkip) {\n            this.wrapScheduled = true;\n            return;\n        }\n        const wrapNavElements = () => {\n            this.wrapped = true;\n            this.wrappedPanel = <BasicOrientedElement orientation={Orientation.VERTICAL} styleSheet={this.styleSheet}/>;\n            this.carousel.appendChild(this.wrappedPanel);\n\n            changeParent(this.getRightConditioned(), this.wrappedPanel);\n            changeParent(this.getLeftConditioned(), this.wrappedPanel);\n            this.getRightConditioned().redraw();\n            this.getLeftConditioned().redraw();\n            this.getWrappedIcon().removeClass(\"hidden\");\n        };\n\n        const unwrapNavElements = () => {\n            this.wrapped = false;\n            this.getWrappedIcon().addClass(\"hidden\");\n            changeParent(this.getLeftConditioned(), this.getLeftConditionedWrapper());\n            changeParent(this.getRightConditioned(), this.getRightConditionedWrapper());\n            this.carousel.eraseChild(this.wrappedPanel);\n            this.getLeftConditioned().redraw();\n            this.getRightConditioned().redraw();\n        };\n\n        if (this.getLeftConditioned().children.length || this.getRightConditioned().children.length) {\n            if (!this.wrapped) {\n                this.unwrappedTotalWidth = 10;\n                for (let child of this.children) {\n                    this.unwrappedTotalWidth += child.getWidth();\n                }\n            }\n            if (window.innerWidth < this.unwrappedTotalWidth && !this.wrapped) {\n                wrapNavElements();\n                this.dispatch(\"wrapped\", true);\n            } else if (window.innerWidth >= this.unwrappedTotalWidth && this.wrapped) {\n                unwrapNavElements();\n                this.dispatch(\"wrapped\", false);\n            }\n        } else if (this.wrapped) {\n            unwrapNavElements();\n        }\n    }\n\n    onMount() {\n        NavManager.Global = this;\n        initializeSwipeEvents(this);\n        setTimeout(() => this.checkForWrap());\n        window.addEventListener(\"resize\", () => this.checkForWrap());\n        this.addListener(\"maybeWrap\", () => this.checkForWrap());\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nlet initializeNavbar = () => {\n    NavManager.Global = NavManager.Global || new NavManager();\n    return NavManager.Global;\n};\n\n\nexport {NavManager, initializeNavbar, NavCarouselStyle}\n","import {Ajax} from \"base/Ajax\";\nimport {Dispatcher} from \"base/Dispatcher\";\n\nexport function logout() {\n    Dispatcher.Global.dispatch(\"logout\");\n    Ajax.postJSON(\"/accounts/logout/\", {}).then(\n            () => {\n                Dispatcher.Global.dispatch(\"logoutSuccess\");\n                location.reload();\n            }\n        );\n}\n","import {UI, FileInput, NumberInput, Button, Level} from \"UI\";\nimport {Ajax} from \"Ajax\";\n\nclass Canvas extends UI.Element {\n    getNodeType() {\n        return \"canvas\";\n    }\n\n    getContext2D() {\n        return this.node.getContext(\"2d\");\n    }\n}\n\nfunction ResizeImage(image, options) {\n    options.maxWidth = options.maxWidth || image.width;\n    options.maxHeight = options.maxHeight || image.height;\n    options.maxSize = options.maxSize || (1 << 25); //Image size\n}\n\nexport class ImageUpload extends UI.Element {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"display\", \"inline-block\");\n    }\n\n    render() {\n        return [\n            <Button className=\"pull-left\" level={Level.INFO} label=\"Import\"\n                           style={{position: \"relative\", overflow: \"hidden\", display: \"block\", marginRight: \"10px\"}}>\n                    <FileInput ref=\"imageInput\" fileTypes=\".jpg,.jpeg,.png\" style={{position: \"absolute\", top: \"0\",\n                        right: \"0\", margin: \"0\", padding: \"0\", cursor: \"pointer\", opacity: \"0\", filter: \"alpha(opacity=0)\"}}/>\n            </Button>,\n            <NumberInput style={{display: \"none\"}} ref=\"imageQualityInput\" value=\"1\" min=\"0\" max=\"1\" step=\"0.1\" placeholder=\"quality\" />,\n            <Button label=\"Upload\" style={{display: \"block\"}} onClick={() => this.uploadImage()} />,\n            <div ref=\"finalURL\"/>,\n            <div style={{display: \"none\"}} ref=\"preview\"/>,\n            <img ref=\"compressedImage\" style={{display: \"none\"}}/>\n        ];\n    }\n\n    onMount() {\n        this.imageInput.addChangeListener(() => {\n            if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n                console.error('The File APIs are not fully supported in this browser.');\n                return false;\n            }\n            this.finalURL.eraseAllChildren();\n            this.processImage();\n        });\n    }\n\n    uploadImage() {\n        if (!this.imageURI) {\n            return;\n        }\n\n        let [uriMeta, byteString] = this.imageURI.split(\",\");\n\n        let typeString = uriMeta.split(\":\")[1].split(\";\")[0];\n\n        let byteArray = new Uint8Array(byteString.length);\n\n        for (let i = 0; i < byteString.length; i += 1) {\n            byteArray[i] = byteString.charCodeAt(i);\n        }\n\n        let imageBlob = new Blob([byteArray], {type: typeString});\n        if (imageBlob.size > 1e6) {\n            console.log(\"Image too large! Aborting upload\");\n            return;\n        }\n\n\n        let formData = new FormData();\n\n        formData.append(\"image\", imageBlob);\n\n        Ajax.post(\"/storage/upload_image/\", {\n            dataType: \"json\",\n            data: formData,\n            processData: false,\n            contentType: false,\n        }).then(\n            (data) => this.finalURL.appendChild(\n                            <a href={data.imageURL}>Successfully uploaded. Click to view.</a>\n                        )\n        );\n    }\n\n    processImage() {\n        while (this.preview.node.firstChild) {\n            this.preview.node.removeChild(this.preview.node.firstChild);\n        }\n\n        this.imageURI = null;\n\n        let file = this.imageInput.getFile();\n        if (!file) {\n            return;\n        }\n\n        if (!(file.type === \"image/png\" || file.type === \"image/jpeg\")) {\n            alert(\"File \" + file.name + \" is not an valid image but a \" + file.type);\n            return false;\n        }\n\n        let reader = new FileReader();\n        reader.readAsArrayBuffer(file);\n\n        reader.onload = (event) => {\n            // blob stuff\n            let blob = new Blob([event.target.result]); // create blob...\n            window.URL = window.URL || window.webkitURL;\n            let blobURL = window.URL.createObjectURL(blob); // and get it's URL\n\n            // helper Image object\n            let image = new Image();\n            image.src = blobURL;\n            //preview.appendChild(image); // preview commented out, I am using the canvas instead\n            image.onload = () => {\n                // have to wait till it's loaded\n                let resized = this.resizeImage(image); // send it to canvas\n                let newinput = document.createElement(\"input\");\n                newinput.type = 'hidden';\n                newinput.name = 'image';\n                newinput.value = resized; // put result from canvas into new hidden input\n                console.log(\"resized size\", resized.toString().length * 6 / 8 / 1024, \"kb\");\n                // console.log(resized);\n                this.compressedImage.node.src = resized;\n\n                this.imageURI = resized;\n            }\n        };\n        this.imageInput.value = \"\";\n    }\n\n    resizeImage(image) {\n        let canvas = document.createElement('canvas');\n        let context = canvas.getContext(\"2d\");\n\n        let width = image.width;\n        let height = image.height;\n\n        let maxSize = 400;\n        let source = image;\n\n        // calculate the width and height, constraining the proportions\n        if (width > height) {\n            if (width > maxSize) {\n                if (width > maxSize * 4) {\n                    width /= 2;\n                    height /= 2;\n\n                    let auxCanvas = document.createElement(\"canvas\");\n                    let auxContext = auxCanvas.getContext(\"2d\");\n\n                    auxCanvas.width = width;\n                    auxCanvas.height = height;\n\n                    auxContext.drawImage(source, 0, 0, width, height);\n\n                    source = auxCanvas;\n                }\n\n\n                height = Math.round(height * maxSize / width);\n                width = maxSize;\n            }\n        } else {\n            if (height > maxSize) {\n                if (height > maxSize * 4) {\n                    width /= 2;\n                    height /= 2;\n\n                    let auxCanvas = document.createElement(\"canvas\");\n                    let auxContext = auxCanvas.getContext(\"2d\");\n\n                    auxCanvas.width = width;\n                    auxCanvas.height = height;\n\n                    auxContext.drawImage(source, 0, 0, width, height);\n\n                    source = auxCanvas;\n                }\n\n                width = Math.round(width * maxSize / height);\n                height = maxSize;\n            }\n        }\n\n        // resize the canvas and draw the image data into it\n        canvas.width = width;\n        canvas.height = height;\n        context.drawImage(source, 0, 0, width, height);\n\n        this.preview.node.appendChild(canvas); // do the actual resized preview\n        let quality = this.imageQualityInput.getValue() || 0.7;\n\n        return canvas.toDataURL(\"image/jpeg\", quality); // get the data from canvas as 70% JPG (can be also PNG, etc.)\n    }\n}\n","import {UI, FileInput, Button, Direction, Orientation, Level} from \"UI\";\nimport {NavManager} from \"navmanager/NavManager\";\nimport {BasicOrientedElement, NavAnchoredNotifications, NavElement, NavLinkElement, NavSection, navSessionManager}\n    from \"navmanager/NavElement\";\nimport {LoginModal} from \"LoginModal\";\nimport {logout} from \"Logout\";\nimport {FAIcon} from \"ui/FontAwesome\";\nimport {NOOP_FUNCTION} from \"Utils\";\nimport {ImageUpload} from \"./ImageUpload\";\n\n/*\n * This is the NavManager file of your app.\n *\n * Note that the whole app is a single page app.\n * Follow the instructions below in order to customize your application.\n */\n\nclass AppNavManager extends NavManager {\n    leftSidePanel = null;\n    rightSidePanel = null;\n\n    getLeftFixed() {\n        return [\n            <NavSection anchor={Direction.LEFT} style={{margin: 0}}>\n                <NavLinkElement value=\"Home\" href=\"/\" />\n                <ImageUpload />\n            </NavSection>\n        ];\n    }\n\n    getUserElement() {\n        if (USER.isAuthenticated) {\n            return <NavElement value={[<FAIcon icon=\"user\" style={{marginRight: \"0.3rem\"}} />, USER.email]}>\n                <NavElement value={UI.T(\"Settings\")} />\n                <NavElement value={UI.T(\"Logout\")} onClick={() => logout()}/>\n            </NavElement>;\n        } else {\n            return <NavElement value={UI.T(\"Login/Signup\")} onClick={() => LoginModal.show()} />;\n        }\n    }\n\n    getRightFixed() {\n        return [\n            <NavSection anchor={Direction.RIGHT} style={{margin: 0}}>\n                {this.getUserElement()}\n            </NavSection>\n        ];\n    }\n}\n\n\nexport {AppNavManager};","import {UI, Link, Router, GlobalContainer} from \"../ui/UI\";\nimport {isLocalUrl, trimLocalUrl} from \"../base/Utils\";\nimport {Dispatcher} from \"../base/Dispatcher\";\n\n\nexport function singlePageLinkOnMount() {\n    this.addClickListener((event) => {\n        if (event.shiftKey || event.ctrlKey || event.metaKey || !this.options.href || !isLocalUrl(this.options.href)\n            || this.options.newTab || (this.options.target && this.options.target !== \"_self\")) {\n            // Leave it to the browser\n            return;\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        Router.changeURL(trimLocalUrl(this.options.href));\n    });\n}\n\nexport class StemApp extends UI.Element {\n    static init() {\n        Link.prototype.onMount = singlePageLinkOnMount;\n        return self.appInstance = this.create(document.body);\n    }\n\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getBeforeContainer() {\n        return null;\n    }\n\n    getRouterOptions() {\n        return {\n            style: {\n                height: \"100%\",\n            }\n        }\n    }\n\n    getRouter() {\n        return <Router routes={this.getRoutes()} ref=\"router\" {...this.getRouterOptions()}/>;\n    }\n\n    getContainer() {\n        return <GlobalContainer>\n            {this.getRouter()}\n            </GlobalContainer>;\n    }\n\n    getAfterContainer() {\n        return null;\n    }\n\n    render() {\n        return [\n            this.getBeforeContainer(),\n            this.getContainer(),\n            this.getAfterContainer(),\n        ]\n    }\n\n    onMount() {\n        this.router && this.router.addListener(\"change\", () => {\n            document.body.click();\n            Dispatcher.Global.dispatch(\"closeAllModals\");\n        });\n    }\n}\n","import {Dispatcher} from \"base/Dispatcher\";\n\nclass WebsocketStreamHandler extends Dispatcher {\n    static NONE = Symbol();\n    static SUBSCRIBING = Symbol();\n    static SUBSCRIBED = Symbol();\n    static UNSUBSCRIBED = Symbol();\n\n    static MISSING_MESSAGE = \"INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW\";\n\n    constructor(websocketSubscriber, streamName, options={}) {\n        super();\n        this.websocketSubscriber = websocketSubscriber;\n        this.streamName = streamName;\n        this.options = options;\n        this.bytesReceived = 0;\n        this.isIndexed = false;\n        this.lastMessageIndex = -1;\n        this.messageBuffer = new Map();\n        this.missedPackets = 0;\n        this.status = this.constructor.NONE;\n        this.tryCount = 0; // TODO: rename to resubscribesubscribeTryCount\n    }\n\n    sendSubscribe() {\n        const websocketSubscriber = this.websocketSubscriber;\n\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBING;\n\n        if (this.haveIndex()) {\n            websocketSubscriber.sendResubscribe(this.streamName, this.getLastIndex());\n        } else {\n            websocketSubscriber.sendSubscribe(this.streamName);\n        }\n\n        this.subscribeTryCount++;\n\n        const subscribeTimeout = websocketSubscriber.constructor.STREAM_SUBSCRIBE_TIMEOUT || 3000;\n        const subscribeTimeoutMax = websocketSubscriber.constructor.STREAM_SUBSCRIBE_MAX_TIMEOUT || 30000;\n        const timeoutDuration = Math.min(subscribeTimeout * this.subscribeTryCount, subscribeTimeoutMax);\n\n        this.resendSubscribeTimeout = setTimeout(() => {\n            console.log(\"WebsocketSubscriber: stream subscribe timeout for #\" + streamName + \" reached! Trying to resubscribe again!\");\n            this.sendSubscribe();\n        }, timeoutDuration);\n    }\n\n    clearResubscribeTimeout() {\n        if (this.resendSubscribeTimeout) {\n            clearTimeout(this.resendSubscribeTimeout);\n            this.resendSubscribeTimeout = undefined;\n        }\n    }\n\n    setStatusSubscribed() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBED;\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    resetStatus() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.NONE;\n        this.subscribeTryCount = 0;\n    }\n\n    processPacket(packet) {\n        this.bytesReceived += packet.length;\n\n        let type, payload;\n        if (packet[0] === \"{\") {\n            type = \"v\";\n            payload = packet;\n        } else {\n            let firstSpace = packet.indexOf(\" \");\n            if (firstSpace > 0) {\n                type = packet.substr(0, firstSpace).trim();\n                payload = packet.substr(firstSpace + 1).trim();\n            } else {\n                console.error(\"WebsocketStreamHandler: Could not process stream packet: \" + packet);\n                return;\n            }\n        }\n\n        if (type === \"i\") {\n            this.processIndexedPacket(payload);\n        } else if (type === \"v\") {\n            this.processVanillaPacket(payload);\n        } else if (type === \"n\") {\n            this.processMissedPacket(payload);\n        } else {\n            console.error(\"WebsocketStreamHandler: invalid packet type \" + type);\n        }\n    }\n\n    processIndexedMessage(index, message) {\n        this.isIndexed = true;\n        if (this.lastMessageIndex == -1) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n        } else if (this.lastMessageIndex + 1 == index) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n            ++index;\n            while (this.messageBuffer.has(index)) {\n                message = this.messageBuffer.get(index);\n                this.messageBuffer.delete(index);\n                this.lastMessageIndex = index;\n                this.processVanillaPacket(message);\n                ++index;\n            }\n        } else {\n            this.messageBuffer.set(index, message);\n        }\n    }\n\n    processMissedPacket(packet) {\n        this.processIndexedMessage(parseInt(packet), WebsocketStreamHandler.MISSING_MESSAGE);\n    }\n\n    processVanillaPacket(packet) {\n        if (packet == WebsocketStreamHandler.MISSING_MESSAGE) {\n            this.missedPackets++;\n        }\n\n        if (!this.options.rawMessage) {\n            try {\n                packet = JSON.parse(packet);\n            } catch (exception) {\n                if (!this.options.parseMayFail) {\n                    console.error(\"WebsocketStreamHandler: Failed to parse \", packet, \" on stream \", this.streamName,\n                                  \" Exception:\", exception.message);\n                    return;\n                }\n            }\n        }\n        this.dispatch(packet);\n    }\n\n    processIndexedPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let message, index;\n        if (firstSpace > 0) {\n            index = parseInt(packet.substr(0, firstSpace).trim());\n            message = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process indexed stream packet: \" + packet);\n            return;\n        }\n\n        this.processIndexedMessage(index, message);\n    }\n\n    haveIndex() {\n        return this.isIndexed;\n    }\n\n    getLastIndex() {\n        return this.lastMessageIndex;\n    }\n}\n\nexport {WebsocketStreamHandler};\n","import {Dispatchable} from \"base/Dispatcher\";\nimport {WebsocketStreamHandler} from \"./WebsocketStreamHandler\";\n\nclass WebsocketSubscriber extends Dispatchable {\n    static ConnectionStatus = {\n        NONE: 0,\n        CONNECTING: 1,\n        CONNECTED: 2,\n        DISCONNECTED: 3\n    };\n\n    static STREAM_SUBSCRIBE_TIMEOUT = 3000;\n    static STREAM_SUBSCRIBE_MAX_TIMEOUT = 30000;\n\n    static CONNECT_RETRY_TIMEOUT = 3000;\n    static CONNECT_RETRY_MAX_TIMEOUT = 30000;\n\n    static HEARTBEAT_MESSAGE = \"-hrtbt-\";\n\n    constructor(urls=self.WEBSOCKET_URL) {\n        super();\n        if (!Array.isArray(urls)) {\n            urls = [urls]\n        }\n        this.urls = urls;\n        this.streamHandlers = new Map();\n        this.attemptedConnect = false;\n        this.connectionStatus = WebsocketSubscriber.ConnectionStatus.NONE;\n        this.websocket = null;\n        this.failedReconnectAttempts = 0;\n        this.numConnectionAttempts = 0;\n        //TODO: should probably try to connect right now?\n    }\n\n    setConnectionStatus(connectionStatus) {\n        this.connectionStatus = connectionStatus;\n        this.dispatch(\"connectionStatus\", connectionStatus);\n    }\n\n    getNextUrl() {\n        const currentURLIndex = (this.numConnectionAttempts++) % this.urls.length;\n        return this.urls[currentURLIndex];\n    }\n\n    newConnection(url) {\n        return new WebSocket(url);\n    }\n\n    connect() {\n        const url = this.getNextUrl();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTING);\n        try {\n            console.log(\"WebsocketSubscriber: Connecting to \" + url + \" ...\");\n            this.websocket = this.newConnection(url);\n            this.websocket.onopen = () => {\n                this.onWebsocketOpen();\n            };\n            this.websocket.onmessage = (event) => {\n                this.onWebsocketMessage(event);\n            };\n            this.websocket.onerror = (event) => {\n                this.onWebsocketError(event);\n            };\n            this.websocket.onclose = (event) => {\n                this.onWebsocketClose(event);\n            };\n\n        } catch (e) {\n            this.tryReconnect();\n            console.error(\"WebsocketSubscriber: Failed to connect to \", url, \"\\nError: \", e.message);\n        }\n    }\n\n    tryReconnect() {\n        let reconnectWait = Math.min(WebsocketSubscriber.CONNECT_RETRY_TIMEOUT * this.failedReconnectAttempts,\n                                     WebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT);\n\n        this.failedReconnectAttempts++;\n\n        if (!this.reconnectTimeout) {\n            this.reconnectTimeout = setTimeout(() => {\n                this.reconnectTimeout = null;\n                console.log(\"WebsocketSubscriber: Trying to reconnect websocket connection\");\n                this.connect();\n            }, reconnectWait);\n        }\n    }\n\n    getStreamStatus(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        return streamHandler && streamHandler.status;\n    }\n\n    subscribe(streamName) {\n        // TODO: make sure to not explicitly support streams with spaces in the name\n        console.log(\"WebsocketSubscriber: Subscribing to stream \", streamName);\n\n        if (!this.attemptedConnect) {\n            this.connect();\n            this.attemptedConnect = true;\n        }\n\n        if (this.streamHandlers.has(streamName)) {\n            console.warning(\"WebsocketSubscriber: Already subscribed to stream \", streamName);\n            return;\n        }\n\n        let streamHandler = new WebsocketStreamHandler(this, streamName);\n        this.streamHandlers.set(streamName, streamHandler);\n\n        // Check if the websocket connection is open, to see if we can send the subscription now\n        if (this.isOpen()) {\n            this.sendSubscribe(streamName);\n        }\n\n        return streamHandler;\n    }\n\n    isOpen() {\n        return this.websocket && this.websocket.readyState === 1;\n    }\n\n    sendSubscribe(streamName) {\n        if (this.isOpen()) {\n            this.send(\"s \" + streamName);\n        }\n    }\n\n    sendResubscribe(streamName, index) {\n        if (this.isOpen(streamName)) {\n            this.send(\"r \" + index + \" \" + streamName);\n        }\n    }\n\n    resubscribe() {\n        // Iterate over all streams and resubscribe to them\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.sendSubscribe();\n        }\n    }\n\n    onStreamSubscribe(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: received subscribe success response for unrequested stream #\" + streamName);\n            return;\n        }\n        streamHandler.setStatusSubscribed();\n    }\n\n    onWebsocketOpen() {\n        this.previousFailedReconnectAttempts = this.failedReconnectAttempts;\n        this.failedReconnectAttempts = 0;\n        console.log(\"WebsocketSubscriber: Websocket connection established!\");\n\n        this.reset();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTED);\n        this.resubscribe();\n    }\n\n    processStreamPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let streamName, afterStreamName;\n        if (firstSpace > 0) {\n            streamName = packet.substr(0, firstSpace).trim();\n            afterStreamName = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketSubscriber: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        let streamHandler = this.streamHandlers.get(streamName);\n        // TODO: have a special mode if no handler is registered\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: No handler for websocket stream \", streamName);\n            return;\n        }\n        streamHandler.processPacket(afterStreamName);\n    }\n\n    fatalErrorClose(data) {\n        this.failedReconnectAttempts = this.previousFailedReconnectAttempts;\n        console.error(\"WebsocketSubscriber: server fatal error close: \", data);\n        this.onWebsocketError(data);\n    }\n\n    onWebsocketMessage(event) {\n        if (event.data === WebsocketSubscriber.HEARTBEAT_MESSAGE) {\n            // TODO: keep track of the last heartbeat timestamp\n        } else {\n            let firstSpace = event.data.indexOf(\" \");\n            let type, payload;\n\n            if (firstSpace > 0) {\n                type = event.data.substr(0, firstSpace).trim();\n                payload = event.data.substr(firstSpace + 1).trim();\n            } else {\n                type = event.data;\n                payload = \"\";\n            }\n\n            if (type === \"e\" || type === \"error\") { // error\n                console.error(\"WebsocketSubscriber: Websocket error: \", payload);\n                payload = payload.split(\" \")\n                const errorType = payload[0];\n                if (errorType === \"invalidSubscription\") {\n                    // Stop trying to resubscribe to a stream that's been rejected by the server\n                    const streamName = payload[1];\n                    const streamHandler = this.getStreamHandler(streamName);\n                    if (streamHandler) {\n                        // TODO: set permission denied explicitly?\n                        streamHandler.clearResubscribeTimeout();\n                    }\n                }\n            } else if (type === \"s\") { // subscribed\n                console.log(\"WebsocketSubscriber: Successfully subscribed to stream \", payload);\n                this.onStreamSubscribe(payload);\n            } else if (type === \"m\") { // stream message\n                this.processStreamPacket(payload);\n            } else if (type  === \"c\") { // command\n                this.dispatch(\"serverCommand\", payload);\n            } else if (type == \"efc\") { // error - fatal - close\n                this.fatalErrorClose(payload);\n            } else {\n                console.error(\"WebsocketSubscriber: Can't process \" + event.data);\n            }\n        }\n    }\n\n    reset() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.DISCONNECTED);\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.resetStatus();\n        }\n    }\n\n    onWebsocketError(event) {\n        console.error(\"WebsocketSubscriber: Websocket connection is broken!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    onWebsocketClose(event) {\n        console.log(\"WebsocketSubscriber: Connection closed!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    send(message) {\n        // TODO: if the websocket is not open, enqueue WebsocketSubscriber message to be sent on open or just fail?\n        this.websocket.send(message);\n    }\n\n    getStreamHandler(streamName) {\n        let streamHandler = this.streamHandlers.get(streamName);\n        if (!streamHandler) {\n            streamHandler = this.subscribe(streamName);\n        }\n        return streamHandler;\n    }\n\n    // this should be pretty much the only external function\n    addStreamListener(streamName, callback) {\n        let streamHandler = this.getStreamHandler(streamName);\n        if (streamHandler.callbackExists(callback)) {\n            return;\n        }\n        streamHandler.addListener(callback);\n    }\n\n    static addListener(streamName, callback) {\n        return this.Global.addStreamListener(streamName, callback);\n    };\n}\n\nWebsocketSubscriber.Global = new WebsocketSubscriber();\n\nexport {WebsocketSubscriber};\n","import {StyleSheet} from \"ui/Style\";\nimport {styleRule, styleRuleCustom} from \"decorators/Style\";\n\nexport class GlobalStyleSheet extends StyleSheet {\n    @styleRuleCustom({selector: \"body\"})\n    body = {\n        margin: 0,\n        fontSize: this.themeProperties.FONT_SIZE_DEFAULT,\n        fontFamily: this.themeProperties.FONT_FAMILY_DEFAULT,\n    };\n\n    @styleRuleCustom({selector: \".hidden\"})\n    hidden = {\n        display: \"none !important\"\n    };\n\n    @styleRuleCustom({selector: \"*\"})\n    everything = {\n        boxSizing: \"border-box\"\n    };\n\n    @styleRuleCustom({selector: \"a\"})\n    a = {\n        textDecoration: \"none\",\n        color: this.themeProperties.COLOR_LINK\n    };\n\n    @styleRuleCustom({selector: \"hr\"})\n    hr = {\n        height: 0,\n        marginTop: \"20px\",\n        marginBottom: \"20px\",\n        border: 0,\n        borderTop: \"1px solid #eee\",\n        boxSizing: \"content-box\",\n    };\n\n    @styleRuleCustom({selector: \"code, pre\"})\n    codeAndPre = {\n        fontFamily: this.themeProperties.FONT_FAMILY_MONOSPACE,\n    };\n\n    @styleRuleCustom({selector: \"code\"})\n    code ={\n        padding: \"2px 4px\", // TODO: should be in rem\n        fontSize: \"90%\",\n        color: \"#345 !important\", // TODO: take colors from theme\n        backgroundColor: \"#f8f2f4 !important\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS,\n    };\n\n    @styleRuleCustom({selector: \"pre\"})\n    pre = {\n        overflow: \"auto\",\n        display: \"block\",\n        padding: this.themeProperties.BUTTON_BORDER_RADIUS,\n        margin: \"0 0 10px\",\n        fontSize: \"13px\",\n        lineHeight: \"1.42857143\",\n        color: \"#333\",\n        wordBreak: \"break-all\",\n        wordWrap: \"break-word\",\n        backgroundColor: \"#f5f5f5\",\n        border: \"1px solid #ccc\",\n    };\n\n    @styleRuleCustom({selector: \"pre code\"})\n    preInCode = {\n        padding: 0,\n        fontSize: \"inherit\",\n        color: \"inherit\",\n        whiteSpace: \"pre-wrap\",\n        backgroundColor: \"transparent\",\n        borderRadius: 0,\n    };\n}\n","import {Ajax} from \"base/Ajax\";\nimport {StemApp} from \"app/StemApp\";\nimport {getCookie} from \"base/Utils\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {GlobalState} from \"state/State\";\nimport {WebsocketSubscriber} from \"websocket/WebsocketSubscriber\";\nimport {GlobalStyleSheet} from \"./GlobalStyleSheet\";\nimport {ViewportMeta} from \"ui/UIPrimitives\";\nimport {StemDate} from \"time/Date\";\nimport {ServerTime} from \"time/Time\";\n\nexport class EstablishmentApp extends StemApp {\n    static MIN_VIEWPORT_META_WIDTH = 375; // Iphone 6\n\n    static init() {\n        this.loadPublicState();\n        this.addAjaxProcessors();\n        this.registerWebsocketStreams();\n        this.initializeViewportMeta();\n        this.configureTheme();\n        this.initializeGlobalStyle();\n        return super.init();\n    }\n\n    static loadPublicState() {\n        GlobalState.importState(self.PUBLIC_STATE || {});\n    }\n\n    static addAjaxProcessors() {\n        // Add the csrf cookie and credential for all requests\n        Ajax.addPreprocessor((options) => {\n            options.credentials = options.credentials || \"include\";\n            options.headers.set(\"X-CSRFToken\", getCookie(\"csrftoken\"));\n        });\n\n        // Add a postprocessor to load any state received from an Ajax response\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            if (payload.state && !xhrPromise.options.disableStateImport) {\n                GlobalState.importState(payload.state);\n            }\n        });\n\n        // Sync server time\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            const responseHeaders = xhrPromise.getResponseHeaders();\n            const responseDate = responseHeaders.get(\"date\");\n            if (responseDate) {\n                // Estimate server time, with 500ms rounding and 100 ms latency\n                const estimatedServerTime = new StemDate(responseDate).add(600);\n                ServerTime.set(estimatedServerTime, true);\n            }\n        });\n\n        // Raise any error, to be handled by the error processor\n        Ajax.addPostprocessor((payload) => {\n            if (payload.error) {\n                throw payload.error;\n            }\n        });\n\n        // Prettify any error, so it's in a standardized format\n        Ajax.addErrorPostprocessor((error) => {\n            return ErrorHandlers.wrapError(error);\n        });\n\n        // Add a default error handler\n        Ajax.errorHandler = (error) => ErrorHandlers.showErrorAlert(error);\n    }\n\n    static registerWebsocketStreams() {\n        // TODO: first check if websockets are enabled\n        GlobalState.registerStream = function (streamName) {\n            WebsocketSubscriber.addListener(streamName, GlobalState.applyEventWrapper);\n        };\n\n        //Register on the global event stream\n        GlobalState.registerStream(\"global-events\");\n\n        //Register on the user event stream\n        if (self.USER && self.USER.id) {\n            GlobalState.registerStream(\"user-\" + self.USER.id + \"-events\");\n        }\n    }\n\n    static initializeViewportMeta() {\n        return this.viewportMeta = ViewportMeta.create(document.head);\n    }\n\n    static configureTheme() {\n        // Nothing to do by default\n    }\n\n    static initializeGlobalStyle() {\n        GlobalStyleSheet.initialize();\n    }\n}\n","import {UI} from \"ui/UI\";\nimport {MAIN_ROUTE} from \"./Routes\"\nimport {AppNavManager} from \"./AppNavManager.jsx\";\nimport {EstablishmentApp} from \"EstablishmentApp\";\n\nexport class AppClass extends EstablishmentApp {\n    getBeforeContainer() {\n        return <AppNavManager ref=\"navManager\"/>;\n    }\n\n    getRoutes() {\n        return MAIN_ROUTE;\n    }\n}"],"names":["PageTitleManager","prefix","updatePageTitle","defaultTitle","title","getPrefix","getTitle","document","getFullPageTitle","Error","setDefaultTitle","mapIterator","filterIterator","unwrapArray","elements","Array","isArray","Symbol","iterator","from","allProperElements","i","length","result","unwrappedElement","j","push","isLocalUrl","url","host","self","location","origin","startsWith","r","RegExp","test","trimLocalUrl","slice","splitInChunks","array","maxChunkSize","chunks","splice","defaultComparator","a","b","isNumber","aStr","toString","bStr","slugify","string","trim","replace","toLowerCase","suffixNumber","value","suffix","Number","setObjectPrototype","obj","Class","__proto__","prototype","isPlainObject","nodeType","constructor","Object","deepCopy","target","arguments","entries","key","clone","src","dashCase","str","rez","getCookie","name","cookies","cookie","split","decodeURIComponent","substring","uniqueId","objectWeakMap","WeakMap","constructorWeakMap","totalObjectCount","has","objConstructor","objIndex","get","set","objUniqueId","padNumber","num","minLength","strNum","String","getOrdinalSuffix","suffixes","lastDigit","isTeen","Math","floor","suffixWithOrdinal","instantiateNative","BaseClass","NewClass","args","extendsNative","targetClass","includes","allKeys","getOwnPropertySymbols","concat","getOwnPropertyNames","newClass","create","property","getOwnPropertyDescriptor","defineProperty","NOOP_FUNCTION","undefined","iter","func","CallModifier","wrap","UnorderedCallDropper","index","lastExecuted","callback","currentIndex","CallThrottler","options","lastCallTime","pendingCall","pendingCallArgs","pendingCallExpectedTime","numCalls","totalCallDuration","assign","throttle","ON_ANIMATION_FRAME","cancel","clearPendingCall","flush","timeNow","executionDelay","max","debounce","min","wrappedFunc","funcCall","funcCallArgs","isThrottleOnAnimationFrame","cancelHandler","requestAnimationFrame","cancelAnimationFrame","Date","now","computeExecutionDelay","dropThrottled","setTimeout","clearTimeout","replacePendingCall","originalFunc","updatePendingCall","AUTOMATIC","DispatcherHandle","dispatcher","console","warn","removeListener","remove","Dispatcher","listeners","error","callbackExists","handler","addListener","payload","listener","DispatchersSymbol","Dispatchable","dispatchers","getDispatcher","dispatch","call","CleanupJobs","map","x","addListenerOnce","runCleanupJobs","cleanupJob","hasOwnProperty","_cleanupJobs","add","cleanup","dispatcherHandle","Map","getAttachCleanupJobMethod","methodName","addCleanupJob","attachListener","attachEventListener","attachCreateListener","attachUpdateListener","attachDeleteListener","Global","RunOnce","timeout","jobs","job","indexOf","SingleActiveElementDispatcher","element","addChangeListener","forceDispatch","_active","newElement","defaultToPixelsAttributes","Set","CreateNodeAttributesMap","oldAttributesMap","allowedAttributesArray","allowedAttributesMap","attribute","reverseNameMap","domName","ClassNameSet","join","className","NodeAttributes","style","node","attributesMap","defaultAttributesMap","whitelistedAttributes","applyAttribute","keys","styleKey","setStyle","removeStyle","applyStyleToNode","classes","getClassArray","cls","getClassNameSet","classList","delete","attributeOptions","noValue","setAttribute","removeAttribute","addedAttributes","nodeAttributes","attributes","attr","attributeName","applyClassName","UI","renderingStack","BaseUIElement","existingChild","getNodeType","ref","parent","onUnmount","removeRef","TextElement","nextSibling","createNode","applyRef","redraw","insertBefore","onMount","Node","TEXT_NODE","createTextNode","getValue","STEM_DEBUG","stemElement","newValue","nodeValue","UIElement","children","setOptions","defaultOptions","getDefaultOptions","updateOptions","preservedOptions","getPreservedOptions","addListenersFromOptions","createElement","child","destroyNode","clearNode","newChild","copyState","childrenKeyMap","childKey","render","getChildrenToRender","pop","newChildren","getChildrenForRedraw","applyNodeAttributes","domNode","getElementKeyMap","prevChildNode","currentChildNode","firstChild","newChildKey","canOverwrite","overwriteChild","mount","newChildrenSet","returnCopy","getOptionsAsNodeAttributes","extraNodeAttributes","getNodeAttributes","apply","domAttributesMap","addClass","removeClass","hasClass","eventType","addListenerMethodName","handlerMethodName","event","arrayName","doRedraw","nextSiblingNode","Element","bindToNode","insertChildNodeBefore","position","nextChildNode","destroy","eraseChildAtIndex","erasedChild","removeChild","childElement","lastChild","body","contains","parameter","parseFloat","offsetWidth","offsetHeight","getWidthOrHeight","addEventListener","removeNodeListener","removeEventListener","addNodeListener","getStyleSheet","styleSheet","parentNode","uiElement","tag","primitiveMap","Primitive","baseClassPrimitiveMap","resultClass","Orientation","HORIZONTAL","VERTICAL","Direction","UP","LEFT","DOWN","RIGHT","Level","NONE","DEFAULT","INFO","PRIMARY","SECONDARY","SUCCESS","WARNING","DANGER","ERROR","Size","EXTRA_SMALL","SMALL","MEDIUM","LARGE","EXTRA_LARGE","VoteStatus","LIKE","DISLIKE","ActionStatus","RUNNING","FAILED","getOffset","left","top","nodePosition","nodeStyle","offsetLeft","offsetTop","offsetParent","getComputedStyle","computedStyle","window","getPropertyValue","changeParent","newParent","currentParent","eraseChild","appendChild","StyleInstance","selector","StyleElement","ALLOWED_SELECTOR_STARTS","DynamicStyleElement","getClassName","instanceCounter","selectorName","ownStyle","haveOwnStyle","isProperValue","firstChar","charAt","subStyle","getStyleInstances","unshift","getSelector","KeyframeElement","getKeyframeName","keyframeName","keyframe","getKeyframeInstance","isDescriptor","desc","decorate","handleDescriptor","entryArgs","createDefaultSetter","configurable","writable","enumerable","descriptor","initializer","ret","lazyInitialize","lazyInit","evaluateStyleRuleObject","getStyleRuleKey","getKeyframesRuleKey","styleRuleWithOptions","targetMethodName","styleRuleDecorator","objInitializer","inherit","parentDesc","getPrototypeOf","parentStyle","getKey","styleRule","styleRuleInherit","styleRuleCustom","keyframesRule","keyframesRuleInherit","StyleSheet","head","getElementName","delayedMount","ensureMounted","getTheme","addStyleSheet","styleElement","styleElementOptions","theme","defaultValue","getProperty","_firstUpdate","ensureFirstUpdate","elementOptions","nameKey","styleInstances","styleInstance","keyframes","styleElements","getProperties","singletonInstance","getInstance","log","elementNameCounter","ExclusiveClassSet","classInstance","Device","_isTouchDevice","navigator","MaxTouchPoints","msMaxTouchPoints","mobileDevices","_isMobileDevice","device","userAgent","touches","touch","identifier","getEventTouchIdentifier","find","axis","reference","coordName","getEventTouch","originalEvent","getEventCoord","opr","addons","opera","InstallTrigger","HTMLElement","documentMode","StyleMedia","chrome","webstore","eventName","cachedSupportedValues","onEventName","isSupported","Draggable","_clickCallbacks","_clickDragListeners","callbackWrapper","_okForClick","clickDragListener","onStart","dragForClickStarted","onDrag","dragForClick","addDragListener","removeDragListener","listenerWrapper","onWrapperDrag","eventX","getEventX","eventY","getEventY","deltaX","_lastX","deltaY","_lastY","onWrapperStart","onWrapperEnd","onEnd","touchEventIdentifier","preventDefault","createDragListenerWrapper","touchListenerWrapper","createTouchDragListenerWrapper","_dragListeners","COLORS_BY_NAME","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Color","color","setColor","parseColor","rgba","getRgba","values","hex3","match","parseInt","hex6","substr","rgb","firstColor","secondColor","t","firstColorArray","secondColorArray","convertToRgba","opacity","colorArray","lighten","amount","interpolate","darken","root","pow","enhance","isLight","buildColors","dark","colors","darkenPercents","ColorGenerator","FIRST_COLORS","cache","getRandomColor","allowed","random","getInstanceForObject","Theme","styleSheetSymbol","classSet","styleSheetSet","properties","updateThrottler","updateThrottled","updateStyleSheets","update","getAllStyleSheets","register","setProperties","styleSheetGetter","registerStyle","styleClass","GlobalStyle","getTextColor","backgroundColor","COLOR_BACKGROUND","COLOR_BACKGROUND_ALTERNATIVE","COLOR_BACKGROUND_BODY","COLOR_FOREGROUND_BODY","COLOR_BACKGROUND_BADGE","COLOR_PRIMARY","COLOR_SECONDARY","COLOR_SUCCESS","COLOR_INFO","COLOR_WARNING","COLOR_DANGER","COLOR_LINK","FONT_SIZE_EXTRA_SMALL","FONT_SIZE_SMALL","FONT_SIZE_DEFAULT","FONT_SIZE_LARGE","FONT_SIZE_EXTRA_LARGE","BASE_BORDER_RADIUS","BASE_BOX_SHADOW","BASE_BORDER_WIDTH","BASE_BORDER_STYLE","BASE_BORDER_COLOR","BUTTON_BORDER_RADIUS","CARD_PANEL_HEADER_HEIGHT","CARD_PANEL_HEADER_HEIGHT_LARGE","CARD_PANEL_HEADING_PADDING","CARD_PANEL_HEADING_PADDING_LARGE","CARD_PANEL_TEXT_TRANSFORM","DARK_BOX_SHADOW","ROW_LIST_ROW_HEIGHT","ROW_LIST_ROW_HEIGHT_LARGE","ROW_LIST_ROW_PADDING","ROW_LIST_ROW_PADDING_LARGE","ROW_LIST_ROW_BORDER_WIDTH","FONT_FAMILY_SANS_SERIF","FONT_FAMILY_SERIF","FONT_FAMILY_MONOSPACE","FONT_FAMILY_DEFAULT","NAV_MANAGER_NAVBAR_HEIGHT","NAV_MANAGER_BOX_SHADOW_NAVBAR","NAV_MANAGER_BOX_SHADOW_SIDE_PANEL","MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE","FLAT_TAB_AREA_COLOR_BACKGROUND","FLAT_TAB_AREA_LINE_HEIGHT","FLAT_TAB_AREA_PADDING_SIDES","BasicLevelSizeStyleSheet","level","type","size","BasicLevelStyleSheet","colorToStyleFunction","textColor","colorStyleRule","themeProperties","FlexContainerStyle","orientation","display","marginLeft","flex","flexDirection","marginTop","ContainerStyle","mobilePixels","desktopPercent","margin","isMobileDevice","getSizeStyle","Utils","extraTop","height","width","FlexContainer","Container","SimpleStyledElement","getLevel","getSize","IconableInterface","beforeChildren","getLabel","label","faIcon","getFaIcon","iconOptions","marginRight","labelColorToStyle","darker","textDecoration","regular","borderColor","LabelStyle","fontWeight","border","padding","borderRadius","textAlign","whiteSpace","verticalAlign","lineHeight","touchAction","cursor","fontSize","borderWidth","Label","badgeColorToStyle","BadgeStyle","Badge","progressBarColorToStyle","ProgressBarStyle","marginBottom","overflow","boxShadow","float","transition","fontColor","backgroundImage","backgroundSize","animation","ProgressBar","container","valueInPercent","barStyle","barOptions","disableTransition","striped","active","Panel","SlideBar","barSize","getOrientation","getProgressBarStyle","getSliderStyle","progressBar","slider","getOrientationAttribute","getSliderValue","getDragConfig","HorizontalSlideBar","barWidth","setValue","VerticalSlideBar","barHeight","Link","newTab","Image","RawHTML","innerHTML","__innerHTML","getInnerHTML","ViewportMeta","scale","getDesiredScale","initialScale","maximumScale","MIN_WIDTH","minDeviceWidth","screen","availWidth","getContent","desiredScale","maybeUpdate","TemporaryMessageArea","textElement","message","displayDuration","clear","clearValueTimeout","ScrollableMixin","scrollHeight","clientHeight","scrollTop","getExcessTop","getDesiredExcessHeightTop","getExcessBottom","getDesiredExcessHeightBottom","haveExcessTop","popChildTop","haveExcessBottom","popChildBottom","removeExcessBottom","insertChild","removeExcessTop","maxScrollTop","scrollInfo","scrollAtTop","scrollAtBottom","scrollToHeight","InfiniteScrollable","entryComparator","id","firstRenderedEntry","lastRenderedEntry","staticTop","entry","renderEntry","entryRenderer","insertEntry","TimePassedSpan","getTimeDeltaDisplay","timeStamp","timeDelta","timeUnitsInSeconds","timeUnits","_updateListener","addIntervalListener","updateFunction","TIME_DISPATCHER","setInterval","InputStyle","outline","InputableElement","inputElement","Input","getInputType","SubmitInput","TextInput","NumberInput","val","EmailInput","PasswordInput","FileInput","files","getFiles","formData","FormData","file","append","CheckboxInput","checkboxInput","checked","RadioInput","TextArea","readOnly","Select","givenOptions","selectOptions","selected","select","selectedIndex","getIndex","setIndex","FormStyle","separatedLineInputStyle","maxWidth","paddingRight","Form","form","FormGroup","formGroup","errorMessage","errorField","textContent","hasError","getErrorField","FormField","inline","formField","sameLine","separatedLine","contentFirst","MozStyleElements","SVGNodeAttributes","transform","translate","fixMozAttributes","SVG","createElementNS","point","svgNode","ownerSVGElement","createSVGPoint","svgPoint","y","matrixTransform","getScreenCTM","inverse","rect","getBoundingClientRect","clientLeft","clientTop","getScreenCoordinatedForPoint","state","scrollLeft","pos","bottom","right","getBBox","parentElement","newOpacity","getSvg","Text","text","dy","textAnchor","selectable","setX","setY","fillOnly","EPS","isZero","epsilon","abs","equal","val1","val2","crossProduct","p1","p2","p0","polarToCartesian","angle","radius","orig","cos","sin","SVGRoot","RawSVG","Group","Defs","ClipPath","Path","d","getPath","newPath","getTotalLength","len","getPointAtLength","totalLength","getLength","p3","alpha","atan2","PI","Circle","center","cx","cy","pathString","Stop","RadialGradient","Ellipse","CircleArc","startAngle","endAngle","angleDiff","startPoint","math","endPoint","sweepFlag","largeArcFlag","Rect","Line","fill","stroke","x1","y1","x2","y2","Polygon","points","getPolygonPath","setPath","Transition","context","duration","startTime","dependsOn","speedFactor","isStopped","stopped","setStartTime","functionWrapper","pauseTime","nextStep","getEndTime","time","ratio","restart","stop","lastT","getFraction","Modifier","reverseFunc","TransitionList","transitions","forceFinish","pause","resume","onNewFrame","finished","stk","canAdvance","setSpeedFactor","sortByEndTime","endTime","transitionEndTime","sort","hasDependencyOn","sortByStartTime","forceStart","startPercent","animationFrameId","paused","AnimatedSVG","animationWrapper","repeat","blinkTransition","config","times","executeLastStep","interval","changeOpacityTransition","setOpacity","changeColorTransition","getColor","moveTransition","coords","setPosition","changeFillTransition","Switcher","childMap","numRedraws","fullHeight","preserveScroll","overwriteElements","activeChild","existingElements","newElements","keyMap","lazyRender","getChildProperties","isUpToDate","updateChild","updateActiveChild","isMounted","redrawIndex","doMount","setActive","childProperties","deactivateChild","activateChild","isInDocument","Router","routes","pageTitle","urlParts","page","getRoutes","getPage","getPageNotFound","activePage","getActive","setTitle","setGlobalRouter","path","pathname","filter","replaceHistory","joinURLParts","historyArgs","history","replaceState","pushState","updateURL","setURL","parseURL","router","onpopstate","Route","expr","pageGenerator","subroutes","cachedPages","isArg","ARG_KEY","argsArray","serializedArgs","generatorArgs","myPageTitle","getPageTitle","matchesOwnNode","generatePage","subroute","matches","TerminalRoute","translationMap","TranslationElements","TranslationTextElement","strings","evaluateSprintf","evaluate","T","HorizontalOverflowStyle","baseColor","arrowColor","arrowBackground","arrowHoverColor","arrowHoverBackground","transitionTime","arrow","zIndex","alignItems","borderRight","borderLeft","BaseTabAreaStyle","userSelect","listStyle","DefaultTabAreaStyle","paddingLeft","borderBottomColor","borderBottom","MinimalistTabAreaStyle","paddingTop","paddingBottom","FlatTabAreaStyle","letterSpacing","FlatTabAreaHorizontalOverflowStyle","BasicTabTitle","tab","activeTab","existingElement","babelHelpers.get","panel","activeTabDispatcher","getPanel","addClickListener","TabTitleArea","TabArea","autoActive","panelClass","titleAreaClass","tabArea","tabHref","createTabPanel","tabTitle","tabPanel","titleArea","switcherArea","tabTitles","nav","tabPanels","switcherClass","switcher","activePanel","getTitleArea","getSwitcher","onSetActive","FAIcon","icon","getIcon","FACollapseIcon","collapsed","setCollapsed","FASortIcon","direction","HorizontalOverflow","swipePercent","horizontalOverflow","leftArrow","hiddenArrow","childrenContainer","pusherContainer","rightArrow","shouldOverflowRight","shouldOverflowLeft","elementRect","childRect","leftArrowHidden","getWidth","rightArrowHidden","containerNode","scrollWidth","swipeHelperChild","setWidth","swipeAnimation","checkForOverflow","scrollContent","handleEventAndHandlePositionChange","scrollContentRight","scrollContentLeft","FlatTabTitle","activeTabTitleDispatcher","FlatTabTitleArea","activeBar","barLeft","tabWidth","bar","setActiveBar","activeOnRender","activeBarAnimated","FlatTabArea","MultiMap","nKey","normalizeKey","nValue","normalizeValue","items","Headers","TypeError","polyfill","polyfillHeaders","global","URLSearchParams","decode","query","encode","encodeURIComponent","polyfillURLSearchParams","fileReaderReady","reader","Promise","resolve","reject","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","Body","bodyUsed","bodyInit","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","cloneBuffer","buffer","ArrayBuffer","isView","headers","rejected","setBodyUsed","then","view","Uint8Array","chars","fromCharCode","readArrayBufferAsText","JSON","parse","bytes","shift","byteLength","Request","input","method","normalizeMethod","headerArgs","referrer","referrerPolicy","mode","credentials","initialize","upcased","toUpperCase","methods","polyfillRequest","Response","status","ok","statusText","response","redirectStatuses","RangeError","polyfillResponse","parseHeaders","xhr","rawHeader","getAllResponseHeaders","rawHeaderLines","line","parts","getURLSearchParams","data","urlSearchParams","instance","composeURL","params","XHRPromise","request","XMLHttpRequest","promiseResolve","promiseReject","getResponseHeaders","responseText","responseInit","responseURL","dataType","ontimeout","open","withCredentials","responseType","forEach","setRequestHeader","send","getXHR","postprocessors","fetch","defaultPostprocessors","errorPostprocessors","defaultErrorPostprocessors","getPostprocessors","postprocessor","exception","onSuccess","onComplete","getErrorPostprocessors","onError","_chained","errorHandler","onResolve","onReject","getPromise","catch","abort","addXHRListener","jQueryCompatibilityPreprocessor","contentType","urlParams","arrayValue","preprocessors","defaultPreprocessors","preprocessor","success","complete","AjaxHandler","ajaxHandler","Ajax","parentHandler","baseOptions","getPreprocessors","getErrorHandler","post","inherited","FixedURLAjaxHandler","buttonColorToStyle","darker1","darker2","darker3","hoverDisabled","ButtonStyle","base","ButtonGroupStyle","pointerEvents","RadioButtonGroupStyle","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","Button","disabled","enabled","StateButton","statusOptions","statusLabel","enable","disable","stateOptions","AjaxButton","resetToDefaultTimeout","stateResetTimeout","clearResetTimeout","setState","ajaxPromise","getAjaxHandler","scheduleStateReset","ajax","ButtonGroup","RadioButtonGroup","buttons","oldIndex","oldValue","cardPanelColorToStyle","CardPanelStyle","minHeight","textTransform","cardPanelHeaderColorToStyle","borderStyle","justifyContent","CardPanelHeaderStyle","CardPanel","headingCentered","bodyCentered","headingClasses","getHeaderStyleSheet","headingLevel","centered","bodyClasses","getHeadingClasses","getBodyClasses","bodyStyle","RowListStyle","borderTopWidth","borderTopStyle","borderTopColor","RowList","rowList","alternateColors","rowClasses","alternativeColorsOddRow","noAlternativeColors","rows","rowParser","row","getRowClasses","CollapsibleStyle","transitionDuration","transitionTimingFunction","transitionProperty","transitionDelay","CollapsiblePanelStyle","fontFamily","content","CollapsibleMixin","CollapsibleClass","CollapsibleElement","collapsibleStyleSheet","collapsibleStyle","getCollapsibleStyleSheet","collapsing","transitionEndFunction","CollapsiblePanel","expand","collapse","contentArea","toggleButton","collapsedButton","setChildren","collapsedPanelClass","collapsedHeadingClass","hiddenClass","contentStyle","noPadding","heading","button","toggle","DelayedCollapsiblePanel","_haveExpanded","getDelayedChildren","FloatingWindowStyle","visibility","ModalStyle","background","borderTop","FloatingWindow","visibleAnimated","hiddenAnimated","fadeIn","fadeOut","VolatileFloatingWindow","hideListener","hide","show","bindWindowListeners","unbindWindowListeners","notVisible","stopPropagation","Modal","closeButton","destroyOnHide","visible","getModalWindow","getModalWindowStyle","fillScreen","maxHeight","isVisible","modalWindow","behindPanel","modalContainer","detachListener","closeListenerHandler","modal","ActionModal","actionName","closeName","header","getHeader","getBody","getFooter","footer","getActionName","getActionLevel","action","getCloseName","getActionButton","ActionModalButton","modalOptions","getModalOptions","ErrorModal","GlobalContainerStyle","updateOnResize","innerHeight","GlobalContainer","default","isTouchDevice","Divider","dragMousedown","divider","domEvent","dragMousemoveFunction","dragMousemove","dragMouseupFunction","dragMouseup","touchDeviceTriggered","dividerMousedownFunction","DividerStyle","AccordionStyle","flexGrow","flexShrink","flexBasis","SectionDividerStyle","barThickness","barPadding","dividerColor","backgroundClip","TitledDividerStyle","dividerStyle","DividerBar","noTextSelection","verticalDivider","horizontalDivider","SectionDivider","autoCollapse","uncollapsedSizes","verticalSection","horizontalSection","getHeight","setHeight","minWidth","getDimension","panels","dividers","parentSize","childSize","unCollapsedCount","fixed","getVisibleDivider","setDimension","recalculateDimensions","getHiddenDivider","isCollapsed","expandChild","collapseChild","fixedTotalSize","unfixedTotalSize","dividerEvent","previousEvent","previousPanel","getPreviousUnfixedChild","nextPanel","getNextUnfixedChild","panelsSize","deltaFunction","mouseMoveListener","delta","nextSize","previousSize","getMinDimension","mouseUpListener","clearListeners","dividerMouseDownFunction","leftChildVisible","DividerBarClass","getDividerBarClass","TitledSectionDividerBar","verticalDots","arrowButton","horizontalDots","leftButton","rightButton","BarCollapsePanel","panelChild","getGivenChildren","barCollapsePanel","panelSize","hiddenContent","collapsedSize","isFirst","isLast","firstCaret","lastCaret","collapsedBarTitle","TitledSectionDivider","paddingRemoved","animatedSectionDivider","wrappedChild","AccordionDivider","grabbing","grab","collapseIcon","toggleCollapsed","Accordion","accordion","dragTriggered","panelsHeight","totalFlex","getPreviousVisibleChild","getNextVisibleChild","sign","toggleChild","toggleClass","childrenStatus","CarouselStyle","navigatorHeight","hoverColor","navigatorTransitionTime","CarouselNavigator","navigatorIcon","Carousel","carousel","setActiveIndex","activeIndex","pusher","RangePanelStyle","rowHeight","overflowY","EntriesManager","rawEntries","cacheEntries","cachedEntries","sortEntries","filterEntries","getRawEntries","low","high","getComparator","getFilter","comparator","TableStyle","cellStyle","theadCellStyle","borderSpacing","borderCollapse","SortableTableStyle","sortIcon","TableRow","rowCells","columns","column","renderEntryCell","Table","setColumns","table","renderTableHead","renderTableBody","renderHeaderCell","getEntries","RowClass","getRowClass","getEntryKey","getRowOptions","headerStyle","renderColumnHeader","headerName","columnDefaults","TableRowInCollapsibleTable","CollapsibleTableStyle","collapsibleTableStyle","CollapsibleTableRow","renderCollapsible","getInitialCollapsedContent","DelayedCollapsibleTableRow","redrawCollapsible","CollapsibleTableInterface","BaseTableClass","toggleColumn","rowClass","CollapsibleTable","SortableTableInterface","SortIconClass","SortableTable","columnSortingOrder","sortByColumn","sortBy","sortDescending","colCmp","col","keyA","rawValue","keyB","cmp","cmpRes","sortedEntries","TimeUnit","baseUnit","multiplier","pluralName","milliseconds","getMilliseconds","variableMultiplier","variableDuration","isVariable","date","timeUnit","CANONICAL","ALL","FIXED_DURATION","VARIABLE_DURATION","MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","QUARTER","TRIMESTER","SEMESTER","YEAR","dateMethodSuffix","Duration","relativeDuration","toDuration","increm","negate","toMilliseconds","toSeconds","toMinutes","toHours","locale","addCanonicalTimeUnit","timeUnitsName","addCanonicalTimeUnits","MAX_AUTO_UNIX_TIME","BaseDate","StemDate","toDate","setTime","getTime","toUnix","toTimeUnit","getDateValue","equals","diff","isBefore","isAfter","isSameOrAfter","isSameOrBefore","getDay","count","currentValue","roundDown","addUnit","roundUp","isAbsolute","loc","token","tokenFormattersMap","tokens","splitToTokens","evalToken","fromUnixMilliseconds","getTimezoneOffset","year","getFullYear","lastDayInMonth","getMonth","getDate","months","isLeapYear","month","totalDays","getDaysCountPerMonth","getDayInYear","getWeekDay","unixMilliseconds","unixSecons","highResTimestamp","performance","timing","navigationStart","unixTime","fromUnixSeconds","candidate","lastIsLetter","escapeByCurlyBracket","escapeBySquareBracket","charCode","charCodeAt","isLetter","format","pattern","utc","miniWeekDays","shortWeekDays","longWeekdays","shortMonths","longMonths","DateLocale","formats","longDate","toISOString","getHours","getMinutes","getSeconds","ServerTime","subtract","offset","onlyIfMissing","setPageLoadTime","serverPageLoad","responseStart","DAY_IN_MILLISECONDS","isDifferentDay","timeA","timeB","DatePickerTable","TimePickerWidget","hours","minutes","seconds","textSpanStyle","changeCallback","hourSlider","minuteSlider","secondSlider","DateTimeWindow","computeInitial","initialDateTime","formatISO","currentDate","toTimeString","output","datePicker","timePicker","DateTimePicker","setDate","integerTokens","number","isNaN","years","days","textInput","parseDateFromString","dateString","enqueueIfNotLoaded","isLoaded","enqueueMethodCall","EnqueueableMethodMixin","methodCallQueue","methodCall","CodeEditor","getAce","aceMode","aceTheme","aceKeyboardHandler","tabSize","showLineNumber","showPrintMargin","printMarginSize","applyAceOptions","aceResize","ace","requireAce","onDelayedMount","edit","$blockScrolling","Infinity","resolveQueuedMethods","renderer","$textLayer","setAceMode","setAceKeyboardHandler","setAceTheme","setAceFontSize","setAceTabSize","setAceLineNumberVisible","setAcePrintMarginVisible","setAcePrintMarginSize","setReadOnly","setUseWrapMode","lineWrapping","numLines","maxLines","minLines","setAceOptions","langTools","require","setBasicAutocompletion","enableBasicAutocompletion","setLiveAutocompletion","enableLiveAutocompletion","setSnippets","enableSnippets","resize","sourceCode","fakeUserChange","apiChange","getSession","setMode","$keybindingId","keyboardHandler","aceName","setKeyboardHandler","getMode","setTheme","getFontSize","getOption","setShowGutter","getShowGutter","setShowPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","annotations","setAnnotations","setOption","foldStyle","setFoldStyle","setHighlightActiveLine","setHighlightGutterLine","getScrollTop","setScrollTop","startLine","startCol","endLine","endCol","Range","AceRange","addMarker","marker","removeMarker","doc","getTextRange","getDocument","session","getLine","gotoLine","insert","addAceSessionEventListener","on","focus","editor","editorRow","editorColumn","undoManager","setUndoManager","lastRow","lastRowLength","scrolledToBottom","isRowFullyVisible","scrollToLine","selectAll","execCommand","StaticCodeHighlighterStyle","StaticCodeHighlighter","hideActive","TextTranslationEntryStyle","TextTranslationEntry","translation","photoUrl","contentContainer","imageContainer","image","textContainer","State","stores","applyEventWrapper","applyEvent","objectType","store","getStore","individualEvent","importState","getStoreForEvent","objectId","stateMap","storeState","getDependencies","dependency","importStateFromTempMap","next","GlobalState","DefaultState","StoreSymbol","StoreObject","setStore","handlers","e","_eventDispatcher","addUpdateListener","getState","registerStream","getStreamName","BaseStore","ObjectWrapper","attachToState","addStore","dependencies","GenericObjectStore","objects","getObjectIdForEvent","asIterable","sendDispatch","existingObject","getObjectForEvent","refreshEvent","newObject","createObject","applyCreateEvent","applyEventToObject","objDeleted","applyDeleteEvent","applyUpdateOrCreateEvent","fakeCreate","fakeExisting","object","SingletonStore","TextTranslation","initMock","TextTranslationStore","TextTranslationList","CardStyle","QuoteStyle","fontStyle","IndexPageStyle","Card","headerText","bodyText","Quote","hasQuotes","quote","IndexPage","AjaxFetchMixin","BaseStoreClass","successCallback","errorCallback","forceFetch","fetchJobs","fetchTimeout","executeAjaxFetch","fetchTimeoutDuration","ids","requestData","getFetchRequestData","fetchURL","fetchType","fetchJob","idFetchJobs","maxFetchObjectCount","idChunks","fetchJobsChunks","requests","getFetchRequestObject","getFetchRequests","requestObject","VirtualStoreObjectMixin","BaseStoreObjectClass","newId","oldId","hasTemporaryId","VirtualStoreMixin","generateVirtualId","virtualId","updateId","existingVirtualObject","getVirtualObject","applyUpdateObjectId","virtualIdCounter","LanguageObject","localName","Language","LanguageStoreClass","isoCode","all","language","Locale","Article","edits","user","USER","isSuperUser","userCreatedId","articleEdit","ArticleStore","article","baseArticleId","languageId","ArticleEdit","articleId","ArticleStoreClass","baseArticle","getTranslation","ArticleEditStore","addCreateListener","getArticle","addEdit","BlogEntry","BlogEntryStoreClass","urlName","blogEntry","BlogEntryStore","StringStream","pointer","steps","ch","whitespaceChar","whitespaceStart","done","at","validChars","skipWhitespace","whitespace","wordStart","nanString","advance","NaN","char","infinityString","isDigit","isHexDigit","numberStart","peek","delimiter","maxLength","delimiterMatch","delimiterIndex","delimiterLength","search","newStream","kmp","prefixLength","ModifierAutomation","startNode","lastNode","startPatternNode","patternPrefix","patternNode","leftWhitespace","whitespaceNode","newNode","backNode","patternLastNode","captureContent","capture","captureNode","endPattern","endCaptureNode","endPatternPrefix","endPatternNodes","endPatternLastNode","endNode","patternStep","endPatternStep","currentArray","originalString","matcher","arrayLocation","currentElement","newArray","end","isJSX","nextState","modifierStart","modifierEnd","modifierCapture","start","isString","reverse","processChildren","processChild","isDummy","InlineModifierMixin","BaseModifierClass","lastElement","lastIndexOf","LineStartModifierMixin","groupConsecutive","isValidElement","wrapItem","patternIndex","patternEnd","itemTag","RawContentModifierMixin","BlockCodeModifier","codeOptions","codeBlock","firstLineEnd","firstLine","lineStream","word","MarkupParser","parseOptions","codeHighlighter","getElement","HeaderModifier","hashtagIndex","hashtagEnd","headerLevel","nextChar","HorizontalRuleModifier","UnorderedListModifier","OrderedListModifier","ParagraphModifier","capturedContent","lineStart","StrongModifier","ItalicModifier","InlineCodeModifier","InlineVarModifier","InlineLatexModifier","LinkModifier","checkAndAddUrl","isCorrectUrl","href","trimProtocol","modifiers","uiElements","arr","parseUIElements","modifier","modify","el","stream","textStart","elementStart","parseUIElement","optionsEnd","contentStart","uiElementStart","remainingContent","validOptionName","optionName","optionString","foundStringEnd","bracketCount","validJSON","jsonString","parseJSON5","lineNumber","columnNumber","escapee","f","n","renderChar","chr","m","SyntaxError","stringify","c","isFinite","hex","uffff","delim","inlineComment","blockComment","comment","source","reviver","walk","holder","k","v","MarkupClassMap","fallback","extraClasses","classMap","extraClass","classObject","registerMarkup","getClass","GLOBAL","MarkupRenderer","parser","registerDependencies","reparse","convertToUI","SafeUriEnhancer","isSafeUri","uri","MarkupEditor","showButtons","rendererOptions","refLink","getEditor","getMarkupRenderer","markup","markupRenderer","separator","updateValue","editorPanel","codeEditor","toggleLeftButton","sectionDivider","setLevel","toggleRightButton","rendererPanel","setEditorOptions","User","keyChain","currentDict","customSettings","getCustomSetting","lastKey","customSettingsKey","customSettingsValue","timeouts","postJSON","setCustomSetting","UserStore","getCurrentUser","PublicUser","displayName","username","PublicUserStoreClass","PublicUserStore","UserNotification","userId","getUser","lastReadNotificationId","UserNotificationStore","UserHandle","setUser","handle","getProfileUrl","getDisplayHandle","ArticleRenderer","markupClassMap","showEditButton","canBeEditedByUser","editButtonUrl","getEditButton","getArticleToRender","getArticleDependencies","liveLanguage","RecursiveArticleRenderer","ArticleSwitcher","articleChildMap","getPageForArticle","initialArticle","initialArticleId","setActiveArticleId","BLUE","HOVER_BLUE","BLACK","HOVER_BLACK","WHITE","CSAStyle","BlogStyle","titleFontSize","writtenBy","link","blogArticleRenderer","BlogArticleRendererStyle","hStyle","BlogArticleRenderer","BlogQuote","TransferOwnershipModal","newOwner","ownerFormInput","messageArea","showMessage","transferOwnershipButton","DeleteArticleModal","deleteArticle","deleteArticleButton","articles","getArticleIndex","CreateArticleModal","createArticle","articleNameInput","dependencyInput","languageSelect","isPublic","publicCheckbox","createArticleButton","addArticle","AddTranslationModal","ArticleOwnerSpan","ArticlePublicSpan","ArticleTable","resetColumnSortingOrder","unix","dateCreated","dateModified","ArticleManager","addButton","getJSON","ArticleTranslationManager","deleteRedirectLink","ArticleMarkupEditor","ArticleEditor","DiffWidgetClass","versions","versionsLabels","getEdits","leftEditable","rightEditable","initializeVersioning","translationsPanel","baseArticleForm","ownershipPanel","setOwner","revisionsPanel","arrows","markupEditor","saveMarkup","articleNameFormInput","dependencyFormInput","saveOptions","deleteArticleModal","saveMarkupMessageArea","saveMarkupButton","addNewVersion","saveOptionsMessageArea","saveOptionsButton","setOwnerMessageArea","setOwnerButton","leftIndex","leftTextSelector","rightIndex","rightTextSelector","setLeftIndex","setRightIndex","diffWidget","setLeftText","setRightText","updateEditable","setLeftEditable","setRightEditable","onbeforeunload","UserReactionCollection","reactions","getUserReactionStore","reaction","collectionId","currentUser","getReactions","userReaction","currentUserReaction","getCurrentUserReaction","UserReaction","UserReactionCollectionStore","UserReactionStore","MessageInstance","messageId","timeAdded","MessageThreadStore","messageThreadId","fakeIfMissing","reactionCollection","reactionCollectionId","upvotesCount","downvotesCount","getCurrentUserReactionType","getReactionCollection","getNumLikes","getNumDislikes","ans","currentId","getNormalizedId","getMessageThread","getMessages","hasMarkupEnabled","react","hidden","deleteMessageInstance","messageThread","messages","postError","MessageThread","streamName","online","markupEnabled","messageInstance","orderDescending","lastMessage","MessageInstanceStoreClass","messageContent","temporaryId","virtualMessageInstance","meta","MessageInstanceStore","createEvent","addMessageInstance","BaseChatObject","GroupChat","GroupChatStoreClass","GroupChatStore","chatId","PrivateChat","user1Id","user2Id","PrivateChatStore","getChatWithUser","myUserId","privateChat","fetchForUser","privateChatId","BasePopup","contentPadding","arrowDirection","createArrowStyle","baseArrowOutline","baseArrow","getArrow","arrowMargin","bodyPlaced","left2","popupArrow","popupArrowOutline","setParentNode","manual","bindInsideParent","bodyPopups","popup","Popup","contentFontSize","getTitleAreaContent","newTitle","documentListener","supportsEvent","fakeClickEvent","initEvent","dispatchEvent","blur","closeButtonColor","Emoji","ClickableEmote","redrawTimeout","textBox","appendValue","getValueText","afterClick","ClickableEmoji","ClickableTwitchEmote","EmojiButton","getTextBox","closePopup","emotesList","emoji","EmojiMini","EMOJI","twitchEmoji","TWITCH_EMOTICONS","emojiPopup","getPopup","MarkupEditorModal","getMarkupEditorStyle","appendGraphExample","getButtonStyle","appendSubmissionExample","appendCodeExample","appendLinkExample","appendLatexExample","hideCallback","showCallback","doneButton","ChatMarkupRenderer","ScriptResolver","scriptPath","loaded","scriptElement","async","onLoad","getElementsByTagName","scriptResolveMap","ensureSingle","script","scriptResolver","ensure","scripts","promises","TranslationKey","TranslationKeyStore","TranslationEntry","translationKeyId","TranslationEntryStore","translationEntry","getTranslationKey","ErrorMessage","translationKey","ErrorMessageStoreClass","ErrorMessageStore","ErrorHandlers","wrapError","showErrorAlert","PAGE_NOT_FOUND","SocialAccountManager","socialApp","getSocialApp","getClientId","_Global","login","connect","SocialApp","clientId","SocialAppStoreClass","SocialAppStore","GoogleManager","getSocialAppByName","loginByTokenUrl","ensureScriptNodeExists","getElementById","gapi","load","auth2","init","client_id","updateSigninStatus","getGoogleAuth","isSignedIn","listen","setLoaded","getAuthInstance","getGoogleUser","getAuthResponse","process","handleProcess","grantOfflineAccess","redirect_uri","immediate","sendData","reload","FacebookManager","version","loginOptions","auth_type","scope","logoutUrl","fbAsyncInit","FB","appId","xfbml","nextUrl","accessToken","authResponse","expiresIn","logout","onLogoutSuccess","onLoginSuccess","onLoginCanceled","onLoginError","GithubManager","loginWindowOptions","githubUri","rawParams","githubWindow","Country","getIsoCode","ALL_COUNTRIES_PLACEHOLDER","NO_COUNTRY_PLACEHOLDER","COUNTRY_COMPARATOR","CountryStoreClass","noneName","countriesIds","allCountries","countries","countryId","CountryStore","loginHeight","registerHeight","buttonHeight","fontAwesomeIconHeight","signInButtonHeight","signInButtonWidth","LoginStyle","selectedLeft","selectedRight","fontAwesomeIcon","connectWith","connectIcons","socialConnectDimensions","flexWrap","ERROR_TIMEOUT","accountsConfig","country","socialLoginSpecificInfo","Google","loginManager","Facebook","Github","SocialConnectButton","specificInfo","socialConnectButtonContainer","socialConnectButtonIcon","getLoginManager","loginElement","clearErrorMessage","ThirdPartyLogin","thirdPartyLoginContainer","getSocialApps","getConnectWith","getConnectWithButtons","LoginWidget","loginWidget","emailIcon","passwordInputOptions","placeholder","rememberMeCheckbox","rememberMe","forgotPassword","badLogin","signInButtonContainer","signInButton","getSignInValue","horizontalLine","getHorizontalLine","getEmailInput","getPasswordInput","getRememberMeCheckbox","getForgotPassword","getSignInButton","getClearBothArea","getErrorArea","getThirdPartyLogin","isError","loginErrorMessage","email","emailInput","password","passwordInput","remember","rememberInput","setErrorMessage","sendLogin","RecaptchaWidget","grecaptcha","GOOGLE_RECAPTCHA_PUBLIC_KEY","captchaId","getResponse","onRecaptchaCallback","RegisterWidget","registerWidget","allWithNone","countrySelect","formFields","getUsernameInput","getCountryInput","hostname","recaptchaWidget","recaptchaContainer","getSignUpButton","submitButton","recaptchaKey","usernameInput","errorArea","sendRegistration","NormalLogin","loginRegisterSystem","loginSystemButton","registerSystemButton","loginRegisterButtons","getLoginButton","getRegisterButton","loginButton","registerButton","LoginTabButton","selectedLeftClass","RegisterTabButton","selectedRightClass","Login","LoginModal","isAuthenticated","VotingWidgetStyle","likeColor","dislikeColor","notVoteColor","balanceColor","mainClass","thumbsStyle","counterStyle","VotingWidget","votesBalance","userVote","buttonsStyle","likeButtonStyle","getUserVote","dislikeButtonStyle","getVotesBalance","CommentVotingWidget","updateTarget","possibleTarget","tempListener","setupListener","likeButton","resetReaction","like","dislikeButton","dislike","CommentVotingWidgetWithThumbs","thumbsUpScoreStyle","thumbsDownScoreStyle","displayStyle","thumbsUpHoverStyle","thumbsDownHoverStyle","ChatStyle","navbarHeight","renderMessageHeight","userFontSize","commentFontSize","hrBackgroundColor","hoverBackgroundColor","previewButton","loadMoreButton","overflowX","wordBreak","wordWrap","Plugin","linkToParent","pluginName","Pluginable","PluginClass","plugins","plugin","getPlugin","PreviewMarkupButton","EditableMessage","deletable","toggleEditMode","editContent","writingSectionStyle","chatInputStyle","hideEditMode","messageInput","saveMessageChanges","deleteMessage","contentSwitcher","hasChild","showEditMode","GroupChatMessage","groupChatMessage","getPreviousMessage","editButton","timestamp","shouldShowDayTimestamp","messageTimeStampHr","messageTimeStamp","errorElement","userHandle","getTimeOfDay","commentContent","PrivateChatMessage","paddingDiv","isOwnMessage","ChatMessageScrollSection","ChatWidget","ChatMessageClass","ChatWidgetClass","dateTimestamps","renderMessage","initializeShowLoadMoreButton","getNumMessages","showLoadMoreButton","getMaxMessageId","createVirtualMessageInstance","baseRequest","chatInput","createVirtualMessage","setPostError","stack","messageWindow","scrollToBottom","getPostURL","disableStateImport","scrollPosition","scrollPercent","loadMoreMessages","saveScrollPosition","applyScrollPosition","setAdaptiveHeight","viewportHeight","documentElement","availableHeight","extraHeightOffset","getDesiredHeight","renderMessageView","outstandingRequest","topMessage","getTopMessage","messageInstances","lastMessageId","oldScrollHeight","ajaxCall","getGetURL","getGetType","emptyData","scrollDelta","dayTimestamp","muted","sendMessage","messageBoxButton","userData","renderMessageBox","defaultPlugins","getDefaultPlugins","registerPlugin","messageWindowScrollTop","messageWindowscrollMax","addResizeListeners","GroupChatWidget","PrivateChatWidget","getOtherUserId","VotableChatMessage","VotableGroupChatWidget","CommentWidgetStyle","previewButtonStyle","ThreadMessage","messageDate","votes","ToggleLogin","BlogCommentWidget","commentWidgetStyle","chatInputMax","sendMessageButtonStyle","CommentWidget","commentsCount","commentsTitle","AsyncCommentThread","groupChat","commentWidgetOptions","getCircleStyle","borderSize","animationName","animationDuration","rotate","animationIterationCount","animationTimingFunction","createCircle","RotatingHelperStyle","ConcentricCirclesLoadingScreen","centerConstant","rotateClockwise","rotateCounterclockwise","DelayedElement","_loaded","applyNodeAttributesNotLoaded","applyNodeAttributesLoaded","renderNotLoaded","renderLoaded","_executedMount","beforeRedrawNotLoaded","redrawNotLoaded","redrawLoaded","StateDependentElement","endsWith","renderLoading","renderError","getAjaxUrl","getAjaxRequest","setError","BlogEntryEditModal","entryId","discussionButton","discussionId","createDiscussion","changeSettings","titleInput","urlInput","visibleCheckbox","changeURL","NewBlogEntryModal","addEntry","onKeyUp","postContentMarkup","blogEntryId","BlogEntryPreview","getBlogEntry","blogStyle","getBlogArticle","publishedDate","publishedFormat","modifiedFormat","articleInfoStyle","getEntryURL","whiteOverlay","BlogEntryView","blogEntryView","blogEntryEditButton","getComments","bottomSection","BlogEntryList","blogEntries","showNewBlogPostModal","finishedLoading","lastDate","DelayedBlogEntryList","DelayedBlogEntryView","getEntryForURL","entryURL","entryUrlName","BlogRoute","getSubroutes","Forum","forumThreads","registerToStream","ForumThreadStore","addDeleteListener","forumThread","parentId","deleteForumThread","ForumStore","ForumThread","getParent","addForumThread","authorId","pinnedIndex","contentMessageId","getContentMessage","lastActive","forumThreadId","numMessages","getNumReplies","EditThreadReplyButton","EditThreadReplyModal","DeleteThreadReplyModal","DeleteThreadReplyButton","ForumThreadReplyStyle","ForumThreadPanelStyle","numRepliesFontSize","messageFontSize","buttonFontSize","fontsize","ForumThreadHeaderStyle","widthLimit","tagsHeight","baseStyleObject","boxSizing","innerWidth","ForumThreadPreviewStyle","lines","ForumThreadBubbleStyle","titlePaddingBottom","ForumPanelStyle","headerItemHeight","CreateThreadReplyButton","markupEditorModal","CreateThreadReplyModal","createThreadReply","forumThreadPanelStyle","buttonStyle","CreateForumThreadModal","inputStyle","createForumThread","forumId","routeToThread","CreateForumThreadButton","getModalClass","DeleteForumThreadModal","deleteThread","DeleteForumThreadButton","ForumThreadReply","getMessageInstance","editMessage","editAndDeleteButtons","deleteButton","editDeleteButtons","fullPost","author","bottomPanel","voting","ForumThreadPanel","getMainForumURL","returnToMainForum","backButton","getForumThread","getTimeAdded","postsLength","numReplies","getForumThreadState","initializeListeners","replies","spaceBetween","forumThreadMessages","replyButtonDiv","getAuthor","replyButton","getMessage","getVoting","ForumThreadHeader","tagsTitle","tagsAuthor","tagsReplies","tagsViews","tagsVotes","tagsActivity","getReplies","getViews","getVotes","getActivity","ForumThreadPreview","forumThreadPreview","ForumThreadBubble","pinned","isPinned","pinnedIcon","threadTitleAndPreview","threadTitle","getHref","threadTitleSpan","threadAuthor","threadReplies","threadRepliesSpan","threadViews","numViews","threadVotes","threadActivity","getLastActive","getThreadTitle","getThreadAuthor","getThreadReplies","getThreadViews","getThreadVotes","getThreadActivity","ForumThreadList","forum","getForumThreads","getPinIndex","Bubble","getBubbleClass","ForumPanel","buttonParent","getButton","getForumThreadList","DelayedForumPanel","DelayedForumThreadPanel","ForumRoute","MAIN_ROUTE","NavStyle","dimensions","collapseArrowWidth","sidepanelElementHeight","sidepanelWidthLeft","sidepanelWidth","sidepanelHideWidth","sidepanelTransitionDuration","boxShadowWidth","backgroundTransitionDuration","navElement","sidePanel","getColors","sidepanelBackground","boxShadowSidePanel","navManagerColor","navBarColor","NAV_MANAGER_COLOR_NAV_BAR","sidePanelColor","NAV_MANAGER_COLOR_SIDE_PANEL","boxShadowNavManager","NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR","sidepanelHover","NAV_MANAGER_SIDE_PANEL_HOVER_COLOR","navbarBackground","NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR","navbarHover","NAV_MANAGER_NAV_BAR_HOVER_COLOR","hr","NAV_MANAGER_HR_COLOR","NAV_MANAGER_TEXT_COLOR","listStyleType","StorageMap","storage","SEPARATOR","setItem","getRawKey","serialize","removeItem","getItem","getRaw","deserialize","totalStorageKeys","prefixLenth","SessionStorageMap","sessionStorage","LocalStorageMap","localStorage","doDeserialization","realCallback","getChangeDispatchable","CHANGE_DISPATCHABLE","separatorIndex","actualKey","newEvent","navSessionManager","BasicOrientedElementInterface","BasicOrientedElement","BasicOrientedLinkElement","NavElementInterface","isToggled","getToggledState","navElementHorizontal","NavSection","navCollapseElement","navElementVertical","navElementValueHorizontal","navElementValueVertical","childrenToRender","subElementsClass","navElementVerticalArrow","navElementHorizontalArrow","getSelf","getSubElements","showChildren","hideChildren","saveToggledState","sessionKeyName","sessionKey","defaultToggled","persistent","getLocalToggledState","getSessionKeyName","toggleChildren","NavElement","NavLinkElement","navLinkElement","navSectionHorizontal","getAnchor","navSectionVertical","anchor","NavAnchoredNotifications","getSwitcherStyle","bodyListener","NavIcon","LeftSideNavIcon","sideIcon","RightSideNavIcon","WrappedNavIcon","wrappedIcon","maxDistanceFromSide","minSwipeDistance","minSwipeSpeed","touchEventHandler","ignoreCondition","successCondition","xType","targetTouches","startX","panelToggler","touchCallback","touchendCallback","initializeSwipeRight","navManager","maxDistance","minDistance","minSpeed","touchX","leftSidePanel","pageXOffset","toggleLeftSidePanel","initializeSwipeLeft","rightSidePanel","toggleRightSidePanel","initializeSwipeEvents","SidePanelGroup","sidePanelGroup","SidePanel","storageSerializer","navVerticalRightHide","navVerticalLeftHide","setVisible","NavCarouselStyle","NavManager","carouselStyleSheet","persistentLeftSidePanel","persistentRightSidePanel","getCarouselStyleSheet","getLeftSidePanelChildren","getRightSidePanelChildren","wrapped","navigationPanel","leftPanelToggler","leftSideIconAction","rightPanelToggler","rightSideIconAction","getLeftConditioned","getRightConditioned","wrappedPanel","wrappedToggler","wrappedIconAction","leftConditionedWrapper","rightConditionedWrapper","leftConditioned","getLeftConditionedChildren","rightConditioned","getRightConditionedChildren","mainPanel","toggleEvent","secondaryPanel","toggleSidePanel","getLeftSideIcon","getLeftFixed","getLeftConditionedWrapper","getWrappedIcon","getRightConditionedWrapper","getRightFixed","getRightSideIcon","wrapSkip","wrapScheduled","checkForWrap","wrapNavElements","unwrapNavElements","unwrappedTotalWidth","Canvas","getContext","ImageUpload","uploadImage","imageInput","File","FileList","finalURL","eraseAllChildren","processImage","imageURI","uriMeta","byteString","typeString","byteArray","imageBlob","processData","imageURL","preview","getFile","alert","URL","webkitURL","blobURL","createObjectURL","resized","resizeImage","newinput","compressedImage","canvas","maxSize","auxCanvas","auxContext","drawImage","round","quality","imageQualityInput","toDataURL","AppNavManager","getUserElement","singlePageLinkOnMount","shiftKey","ctrlKey","metaKey","StemApp","getRouterOptions","getRouter","getBeforeContainer","getContainer","getAfterContainer","click","appInstance","WebsocketStreamHandler","websocketSubscriber","bytesReceived","isIndexed","lastMessageIndex","messageBuffer","missedPackets","tryCount","clearResubscribeTimeout","SUBSCRIBING","haveIndex","sendResubscribe","getLastIndex","sendSubscribe","subscribeTryCount","subscribeTimeout","STREAM_SUBSCRIBE_TIMEOUT","subscribeTimeoutMax","STREAM_SUBSCRIBE_MAX_TIMEOUT","timeoutDuration","resendSubscribeTimeout","SUBSCRIBED","packet","firstSpace","processIndexedPacket","processVanillaPacket","processMissedPacket","processIndexedMessage","MISSING_MESSAGE","rawMessage","parseMayFail","UNSUBSCRIBED","WebsocketSubscriber","urls","WEBSOCKET_URL","streamHandlers","attemptedConnect","connectionStatus","ConnectionStatus","websocket","failedReconnectAttempts","numConnectionAttempts","currentURLIndex","WebSocket","getNextUrl","setConnectionStatus","CONNECTING","newConnection","onopen","onWebsocketOpen","onmessage","onWebsocketMessage","onWebsocketError","onclose","onWebsocketClose","tryReconnect","reconnectWait","CONNECT_RETRY_TIMEOUT","CONNECT_RETRY_MAX_TIMEOUT","reconnectTimeout","streamHandler","getStreamHandler","warning","isOpen","readyState","setStatusSubscribed","previousFailedReconnectAttempts","reset","CONNECTED","resubscribe","afterStreamName","processPacket","HEARTBEAT_MESSAGE","errorType","onStreamSubscribe","processStreamPacket","fatalErrorClose","DISCONNECTED","resetStatus","subscribe","addStreamListener","GlobalStyleSheet","EstablishmentApp","loadPublicState","addAjaxProcessors","registerWebsocketStreams","initializeViewportMeta","configureTheme","initializeGlobalStyle","PUBLIC_STATE","addPreprocessor","addPostprocessor","xhrPromise","responseHeaders","responseDate","estimatedServerTime","addErrorPostprocessor","viewportMeta","MIN_VIEWPORT_META_WIDTH","AppClass"],"mappings":"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"}